<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.6.2" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.6.2" type="image/png" sizes="32x32"><meta property="og:type" content="website">
<meta property="og:title" content="MIRACLE">
<meta property="og:url" content="https://planeswalker1205.github.io/index.html">
<meta property="og:site_name" content="MIRACLE">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="ashen">
<meta name="twitter:card" content="summary"><title>MIRACLE</title><link ref="canonical" href="https://planeswalker1205.github.io/index.html"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.6.2"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"Copy","copySuccess":"Copy Success","copyError":"Copy Error"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 6.1.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">Home</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">Archives</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">Categories</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">Tags</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">MIRACLE</div><div class="header-banner-info__subtitle"></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content content-home" id="content"><section class="postlist"><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/07/24/web-arcgisForJavascript/">web-arcgisForJavascript</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-07-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-07-24</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="基础概念">
          <a href="#基础概念" class="heading-link"><i class="fas fa-link"></i></a><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h1>
      
        <h2 id="API模块">
          <a href="#API模块" class="heading-link"><i class="fas fa-link"></i></a><a href="#API模块" class="headerlink" title="API模块"></a>API模块</h2>
      
        <h3 id="1-Map和View">
          <a href="#1-Map和View" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-Map和View" class="headerlink" title="1.Map和View"></a>1.Map和View</h3>
      <p><strong>Map:管理图层和底图的容器</strong></p>
<p><strong>View：主要显示地图图层，处理用户交互及点击、弹出窗口、小部件、地图等的显示位置</strong></p>
<p><strong>Map中的图层分为三组</strong></p>
<p>Ground layers–对应属性：Map.ground</p>
<p>地形图层：在sceneView看到的一个地形起伏的效果，在mapView中没有作用</p>
<p>Basemap layers–对应属性：Map.basemap</p>
<p>底图图层</p>
<p>Operational layers–对应属性：Map.layers</p>
<p>业务图层。mapImageLayer</p>

        <h3 id="2-View的方法">
          <a href="#2-View的方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-View的方法" class="headerlink" title="2.View的方法"></a>2.View的方法</h3>
      <p><strong>1.goTo(target,options)</strong></p>
<p>导航到另外一个位置</p>
<p><strong>target可以指定：</strong></p>
<ul>
<li><p>[longitude,latitude] 两个坐标</p>
</li>
<li><p>Geometry(或者Geometry[]数组)</p>
</li>
<li><p>Graphic(或者Graphic[]数组)</p>
</li>
<li><p>Viewpoint</p>
</li>
<li><p>可以是以上的结合</p>
</li>
</ul>
<p><strong>options可以指定</strong></p>
<ul>
<li><p>animate 动画效果</p>
</li>
<li><p>duration 导航到此处的时间</p>
</li>
<li><p>easing 速度参数(匀速，先快后慢…)</p>
</li>
</ul>
<p><strong>2. View.toMap()</strong></p>
<p>将screen point(屏幕上的点)转换为map point(地图上的一个点)</p>
<p><strong>3. View.toScreen()</strong></p>
<p>将map point(地图上的一个点)转换为screen point(屏幕上的点)</p>
<p><strong>4.View.htiTest(screenPoint)</strong></p>
<p>返回与指定屏幕坐标相交的每个图层的最顶层要素</p>
<ul>
<li>能够返回要素的图层类型：GraphicsLayer,FeatureLayer,CSVLayer,GeoRSSLayer,KMLLayer,StreamLayer</li>
</ul>
<p><strong>5. View.when()</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">view.when(function()&#123;</span><br><span class="line">	//view执行成功的回调</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>6. View.on(type,modifiersOrHandler,hander?)</strong></p>
<p>对view监听</p>
<p>移除监听</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var clickEvent = view.on(&quot;click&quot;,function(e)&#123;&#125;);</span><br><span class="line"></span><br><span class="line">clickEvent.remove()</span><br></pre></td></tr></table></div></figure>

<p><strong>7.View.watch(path,callback)</strong></p>
<p>对view的属性做监听</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var handler = view.watch(&quot;scale&quot;,function(newValue,oldValue,propertyName,target)&#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">handler.remove()</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-Layers">
          <a href="#3-Layers" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-Layers" class="headerlink" title="3.Layers"></a>3.Layers</h3>
      <p><strong>1.TileLayer</strong></p>
<p>用来加载缓存服务，缓存服务从缓存中直接获取切片，不需要动态渲染</p>
<p><strong>2. MapImageLayer</strong></p>
<p>用来加载动态地图服务，地图服务请求在服务端动态输出地图图像</p>
<p><strong>4.GraphicsLayer</strong></p>
<p>包含一个或者多个客户端要素</p>
<p>GraphicLayer没有renderer,GraphicsLayer中的每一个graphic都有自己的symbol</p>
<p><strong>5.FeatureLayer</strong></p>
<p>可以通过服务或者客户端要素集合来创建</p>
<p>FeatureLayer中的要素不能被单独符号化，需要通过renderer属性进行</p>
<p><strong>6.ElevationLayer</strong></p>
<ul>
<li>高程服务</li>
</ul>
<p> 缓存影像服务</p>
<p> LERC format（有损压缩格式）</p>
<ul>
<li>添加至map.ground.layers</li>
</ul>
<p> 支持多个高程图层叠加</p>
<p> 支持高程查询</p>
<p><strong>7. SceneLayer</strong></p>
<p>支持两种集合类型：Point和3D Object</p>
<p><strong>8.IntegratedMeshLayer</strong></p>
<p><strong>9. PointCloudLayer</strong></p>

        <h3 id="4-符号化">
          <a href="#4-符号化" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-符号化" class="headerlink" title="4.符号化"></a>4.符号化</h3>
      <p><strong>ArcGIS online&#x2F;Portal tools</strong></p>
<p><strong>智能绘图API</strong></p>

        <h3 id="5-widget">
          <a href="#5-widget" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-widget" class="headerlink" title="5.widget"></a>5.widget</h3>
      <p>常用功能做了封装成为小部件</p>
<p>比如</p>
<p>Attribution  NavigaationToggle</p>
<p>BasemapGallery Popup</p>
<p>BasemapToggle Print</p>
<p>Bookmarks ScaleBar</p>
<p>Compass Search</p>
<p>CoordinateConversion Sketch</p>
<p>Directions Track</p>
<p>Home Zoom</p>
<p>LayerList DirectLineMeasurement3D</p>
<p>Legend AreaMeasurement3D</p>
<p>Locate</p>
<p><strong>实例化后使用<code>view.ui.add(activeWidget,&quot;top-right&quot;)</code>添加</strong></p>

        <h3 id="6-任务和查询">
          <a href="#6-任务和查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-任务和查询" class="headerlink" title="6. 任务和查询"></a>6. 任务和查询</h3>
      <p><strong>查询-Query对象</strong></p>
<ul>
<li>属性查询：可以通过两个属性设置查询条件：Query.where和Query.text</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var query = new Query()</span><br><span class="line"></span><br><span class="line">query.where=&quot;STATE_NAME=&#x27;Washington&#x27;&quot;</span><br></pre></td></tr></table></div></figure>

<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var query = new Query()</span><br><span class="line">query.text=&quot;&quot;Washington</span><br></pre></td></tr></table></div></figure>

<ul>
<li>空间查询</li>
</ul>
<p>通过Query.geometry+Query.spatialRelationship指定查询条件</p>
<ul>
<li>统计查询</li>
</ul>
<p><strong>查询-QueryTask对象</strong></p>
<p>创建QueryTask对象</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var queryTask = new QueryTask(&#123;</span><br><span class="line">	url:&quot;&quot;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/07/13/web-react/">web-react</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-07-13</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-07-15</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="基础">
          <a href="#基础" class="heading-link"><i class="fas fa-link"></i></a><a href="#基础" class="headerlink" title="基础"></a>基础</h1>
      
        <h2 id="HELLO-REACT">
          <a href="#HELLO-REACT" class="heading-link"><i class="fas fa-link"></i></a><a href="#HELLO-REACT" class="headerlink" title="HELLO REACT"></a>HELLO REACT</h2>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;hello_react&lt;/title&gt;</span><br><span class="line">    &lt;!-- 引入react核心库 --&gt;</span><br><span class="line">    &lt;script src=&quot;./js/react.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;!-- 用于支持react操作dom --&gt;</span><br><span class="line">    &lt;script src=&quot;./js/react-dom.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;!-- 用于将jsx转为js --&gt;</span><br><span class="line">    &lt;script src=&quot;./js/babel.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;test&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">        //1. 创建虚拟dom</span><br><span class="line">        const VDOM = &lt;h1&gt;Hello,React&lt;/h1&gt; /* 此处不加引号，因为不是字符串 */</span><br><span class="line">        //2. 渲染虚拟DOM到页面</span><br><span class="line">        ReactDOM.render(VDOM,document.getElementById(&#x27;test&#x27;))</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="1-虚拟DOM的创建方式">
          <a href="#1-虚拟DOM的创建方式" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-虚拟DOM的创建方式" class="headerlink" title="1.虚拟DOM的创建方式"></a>1.虚拟DOM的创建方式</h3>
      <p><strong>第一种(jsx方式)</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">引入babel</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line"></span><br><span class="line">    //1. 创建虚拟dom</span><br><span class="line">    const VDOM = &lt;h1 id=&quot;test&quot;&gt;Hello,React&lt;/h1&gt; /* 此处不加引号，因为不是字符串 */</span><br><span class="line">    </span><br><span class="line">    //2. 渲染虚拟DOM到页面</span><br><span class="line">    ReactDOM.render(VDOM,document.getElementById(&#x27;test&#x27;))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>第二种(纯js方式，较繁琐一般不用)</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">不引入babel</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line"></span><br><span class="line">    //1. 创建虚拟dom</span><br><span class="line">    // const VDOM = React.createElement(&#x27;标签名&#x27;,&#x27;标签属性&#x27;,&#x27;标签内容&#x27;)</span><br><span class="line">    const VDOM = React.createElement(&#x27;h1&#x27;,&#123;id:&#x27;title&#x27;&#125;,&#x27;Hello,React&#x27;)</span><br><span class="line">    </span><br><span class="line">    //2. 渲染虚拟DOM到页面</span><br><span class="line">    ReactDOM.render(VDOM,document.getElementById(&#x27;test&#x27;))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-jsx语法规则">
          <a href="#2-jsx语法规则" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-jsx语法规则" class="headerlink" title="2.jsx语法规则"></a>2.jsx语法规则</h3>
      <ul>
<li><p><strong>定义虚拟DOM时，不要写引号</strong></p>
</li>
<li><p><strong>标签中混入js表达式时要用<code>&#123;&#125;</code></strong></p>
</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const myId = &quot;idx1&quot;</span><br><span class="line">const myData = &quot;HelloReact&quot;</span><br><span class="line">//1. 创建虚拟dom</span><br><span class="line">const VDOM = (</span><br><span class="line">    &lt;h1 id=&#123;myId&#125;&gt;&#123;myData&#125;&lt;/h1&gt;</span><br><span class="line">) </span><br><span class="line">//2. 渲染虚拟DOM到页面</span><br><span class="line">ReactDOM.render(VDOM,document.getElementById(&#x27;test&#x27;))</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ul>
<li><strong>样式的类名指定用className而非class</strong></li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const VDOM = (</span><br><span class="line">    &lt;h1 className=&quot;title&quot; id=&#123;myId&#125;&gt;&#123;myData&#125;&lt;/h1&gt;</span><br><span class="line">) </span><br></pre></td></tr></table></div></figure>

<ul>
<li><strong>内联样式，要用<code>style=&#123;&#123;key:value,key:value&#125;&#125;</code>的形式写</strong></li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const VDOM = (</span><br><span class="line">    &lt;h1 className=&quot;title&quot; id=&#123;myId&#125;&gt;</span><br><span class="line">        &lt;span style=&#123;&#123;color:&quot;white&quot;,fontSize:&quot;18px&quot;&#125;&#125;&gt;&#123;myData&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/h1&gt;</span><br><span class="line">) </span><br></pre></td></tr></table></div></figure>

<ul>
<li><strong>虚拟DOM只有一个根标签</strong></li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const VDOM = (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h1 className=&quot;title&quot; id=&#123;myId&#125;&gt;</span><br><span class="line">            &lt;span style=&#123;&#123;color:&quot;white&quot;,fontSize:&quot;18px&quot;&#125;&#125;&gt;&#123;myData&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/h1&gt;</span><br><span class="line">        &lt;h2&gt;test&lt;/h2&gt;</span><br><span class="line">        </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">) </span><br></pre></td></tr></table></div></figure>

<ul>
<li><p><strong>标签必须闭合</strong></p>
</li>
<li><p><strong>标签首字母</strong></p>
</li>
</ul>
<p>(1) 如果小写字母开头，则将该标签转为html中同名元素，若html中无该标签对应的同名元素，则报错</p>
<p>(2) 如果大写字母开头，react就渲染对应的组件，如果组件没有定义，则报错</p>

        <h2 id="组件">
          <a href="#组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#组件" class="headerlink" title="组件"></a>组件</h2>
      
        <h3 id="1-函数式组件">
          <a href="#1-函数式组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-函数式组件" class="headerlink" title="1. 函数式组件"></a>1. 函数式组件</h3>
      <p><strong>组件名首字母必须大写</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function MyComponent()&#123;</span><br><span class="line">    return &lt;h2&gt;简单组件&lt;/h2&gt;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(&lt;MyComponent/&gt;,document.getElementById(&quot;test&quot;))</span><br><span class="line">              </span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>执行了render之后：React解析组件标签，找到MyComponent组件；发现组件是使用函数定义的，随后调用该函数将返回的虚拟dom转为真实DOM,随后呈现在页面中。</p>
</blockquote>

        <h3 id="2-类式组件">
          <a href="#2-类式组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-类式组件" class="headerlink" title="2. 类式组件"></a>2. 类式组件</h3>
      </div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/06/27/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">小程序</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-06-27</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-07-05</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="简介">
          <a href="#简介" class="heading-link"><i class="fas fa-link"></i></a><a href="#简介" class="headerlink" title="简介"></a>简介</h1>
      
        <h2 id="1-小程序与普通网页开发的区别">
          <a href="#1-小程序与普通网页开发的区别" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-小程序与普通网页开发的区别" class="headerlink" title="1. 小程序与普通网页开发的区别"></a>1. 小程序与普通网页开发的区别</h2>
      <ol>
<li><p>运行环境不同：网页运行在浏览器；小程序运行在微信环境中</p>
</li>
<li><p>API不同：小程序中，无法调用DOM和BOM的API，但是小程序中可以调用微信环境提供的各种API，例如：地理定位，扫码，支付</p>
</li>
<li><p>开发模式不同：</p>
</li>
</ol>
<ul>
<li><p>申请小程序开发账号</p>
</li>
<li><p>安装小程序开发工具</p>
</li>
<li><p>创建和配置小程序项目</p>
</li>
</ul>

        <h2 id="小程序代码的构成">
          <a href="#小程序代码的构成" class="heading-link"><i class="fas fa-link"></i></a><a href="#小程序代码的构成" class="headerlink" title="小程序代码的构成"></a>小程序代码的构成</h2>
      
        <h3 id="1-新建小程序页面">
          <a href="#1-新建小程序页面" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-新建小程序页面" class="headerlink" title="1. 新建小程序页面"></a>1. 新建小程序页面</h3>
      <p><strong>只需要在app.json&gt;&gt;pages中新增页面的存放路径，小程序开发者工具即可帮我们自动创建对应的页面文件</strong></p>

        <h3 id="2-修改项目首页">
          <a href="#2-修改项目首页" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-修改项目首页" class="headerlink" title="2. 修改项目首页"></a>2. 修改项目首页</h3>
      <p><strong>只需要调整app.json&gt;&gt;pages数组中页面路径的前后顺序，即可修改项目的首页。小程序会把排在第一位的页面，当做项目首页进行渲染</strong></p>

        <h3 id="3-页面">
          <a href="#3-页面" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-页面" class="headerlink" title="3. 页面"></a>3. 页面</h3>
      <p><strong>wxml和html的区别</strong></p>
<ul>
<li>标签名称不同</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">html（div span img a）</span><br><span class="line"></span><br><span class="line">wxml(view text image navigator)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ul>
<li>属性节点不同</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;#&quot;&gt;超链接&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;navigator url=&quot;/pages/home/home&quot;&gt;&lt;/navigator&gt;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ul>
<li>提供了类似于于vue中的模板语法</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- 数据绑定</span><br><span class="line"></span><br><span class="line">- 列表渲染</span><br><span class="line"></span><br><span class="line">- 条件渲染</span><br></pre></td></tr></table></div></figure>

<p><strong>wxss和css的区别</strong></p>
<ul>
<li>新增了rpx尺寸单位</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wxss在底层支持新的尺寸单位rpx，在不同大小的屏幕上小程序会自动进行换算</span><br></pre></td></tr></table></div></figure>

<ul>
<li>提供了全局的样式和局部样式</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">= 项目根目录中的app.wxss会作用于所有小程序页面</span><br><span class="line"></span><br><span class="line">= 局部页面的.wxss样式仅对当前页面生效</span><br></pre></td></tr></table></div></figure>

<ul>
<li>wxss仅支持部分css选择器</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.class和#id</span><br><span class="line">element</span><br><span class="line">并集选择器、后代选择器</span><br><span class="line">::after和::before等伪类选择器</span><br></pre></td></tr></table></div></figure>

<p><strong>js逻辑交互</strong></p>
<p>小程序中.js文件的分类</p>
<ul>
<li>app.js</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">是整个小程序项目的入口文件，通过调用App()函数来启动整个小程序</span><br></pre></td></tr></table></div></figure>

<ul>
<li>页面的.js文件</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">是页面的入口文件，通过调用Page()函数来创建并运行页面</span><br></pre></td></tr></table></div></figure>

<ul>
<li>普通的.js文件</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">是普通的功能模块文件，用来封装公共的函数或属性供页面使用</span><br></pre></td></tr></table></div></figure>


        <h2 id="小程序的宿主环境">
          <a href="#小程序的宿主环境" class="heading-link"><i class="fas fa-link"></i></a><a href="#小程序的宿主环境" class="headerlink" title="小程序的宿主环境"></a>小程序的宿主环境</h2>
      <p><strong>宿主环境(host environment)指的是程序运行所必须的依赖环境</strong></p>
<p>Android系统和iOS系统是两个不同的宿主环境。安卓版的微信App是不能在iOS环境下运行的。所以，Android是安卓软件的宿主环境，脱离了宿主环境的软件是没有任何意义的</p>
<p><strong>小程序宿主环境包含的内容</strong></p>
<ul>
<li><p>通信模型</p>
</li>
<li><p>运行机制</p>
</li>
<li><p>组件</p>
</li>
<li><p>API</p>
</li>
</ul>

        <h3 id="1-通信模型">
          <a href="#1-通信模型" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-通信模型" class="headerlink" title="1.通信模型"></a>1.通信模型</h3>
      <p>小程序中通信的主体是渲染层和逻辑层：其中</p>
<ol>
<li><p>wxml模板和wxss样式工作在渲染层</p>
</li>
<li><p>js脚本工作在逻辑层</p>
</li>
</ol>
<p><strong>小程序启动的过程</strong></p>
<ol>
<li><p>把小程序的代码包下载到本地</p>
</li>
<li><p>解析app.json全局配置文件</p>
</li>
<li><p>执行app.js小程序入口文件，调用App()创建小程序实例</p>
</li>
<li><p>渲染小程序首页</p>
</li>
<li><p>小程序启动完成</p>
</li>
</ol>
<p><strong>页面渲染过程</strong></p>
<ol>
<li><p>加载解析页面的.json配置文件</p>
</li>
<li><p>加载页面的.wxml模板和.wxss样式</p>
</li>
<li><p>执行页面的.js文件，调用Page()创建野页面实例</p>
</li>
<li><p>页面渲染完成</p>
</li>
</ol>

        <h1 id="组件">
          <a href="#组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#组件" class="headerlink" title="组件"></a>组件</h1>
      
        <h2 id="分类">
          <a href="#分类" class="heading-link"><i class="fas fa-link"></i></a><a href="#分类" class="headerlink" title="分类"></a>分类</h2>
      <p>小程序中的组件也是由宿主环境提供的，开发者可以基于组件快速搭建出页面结构。官方把小程序的组件分为九大类：</p>
<p>视图容器;</p>
<p>基础组件;</p>
<p>表单组件;</p>
<p>导航组件;</p>
<p>媒体组件;</p>
<p>map地图组件;</p>
<p>canvas画布组件;</p>
<p>开放能力;</p>
<p>无障碍访问</p>

        <h3 id="1-视图容器">
          <a href="#1-视图容器" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-视图容器" class="headerlink" title="1. 视图容器"></a>1. 视图容器</h3>
      <p><strong>1. view</strong></p>
<p>普通视图区域；类似div是一个块级元素</p>
<p><strong>2. scroll-view</strong></p>
<p>可滚动的视图区域</p>
<p><strong>3. swiper和swiper-item</strong></p>
<p>轮播图容器组件和轮播图item组件</p>

        <h3 id="2-基础组件">
          <a href="#2-基础组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-基础组件" class="headerlink" title="2. 基础组件"></a>2. 基础组件</h3>
      <p><strong>text</strong></p>
<p>文本组件，类似span</p>
<p><strong>rich-text</strong></p>
<p>富文本组件，支持把html字符串渲染为wxml结构</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;rich-text nodes=&quot;&lt;h1 style=&#x27;color:red;&#x27;&gt;标题&lt;/h1&gt;&quot;&gt;&lt;/rich-text&gt;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="3-其他常用组件">
          <a href="#3-其他常用组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-其他常用组件" class="headerlink" title="3. 其他常用组件"></a>3. 其他常用组件</h3>
      <p><strong>1. button</strong></p>
<p>按钮组件，功能丰富；通过open-type属性可以调用微信提供的各种功能(客服、转发、获取用户授权、获取用户信息)</p>
<p><strong>2. image</strong></p>
<p>图片组件：该组件默认宽度约300px，高约240px</p>
<p><strong>3. navigator</strong></p>
<p>页面导航组件，类似a链接</p>

        <h2 id="小程序API">
          <a href="#小程序API" class="heading-link"><i class="fas fa-link"></i></a><a href="#小程序API" class="headerlink" title="小程序API"></a>小程序API</h2>
      <p>小程序中的API信息是由宿主环境提供的，通过这些丰富的小程序API，开发者可以方便的调用微信提供的能力，如：获取用户信息、本地存储、支付功能等</p>

        <h3 id="1-事件监听API">
          <a href="#1-事件监听API" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-事件监听API" class="headerlink" title="1. 事件监听API"></a>1. 事件监听API</h3>
      <p>以on开头，用来监听某些事件的触发。</p>
<p><code>wx.onWindowResize(function callback)</code>监听窗口尺寸变化的时间</p>

        <h3 id="2-同步API">
          <a href="#2-同步API" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-同步API" class="headerlink" title="2. 同步API"></a>2. 同步API</h3>
      <p>以Sync结尾的API都是同步API</p>
<p>同步API的执行结果，可以通过函数返回值直接获取。如果执行出错会抛出异常。</p>
<p><code>wx.setStorageSync(&#39;key&#39;,&#39;value&#39;)</code>向本地存储中写入内容</p>

        <h3 id="3-异步API">
          <a href="#3-异步API" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-异步API" class="headerlink" title="3. 异步API"></a>3. 异步API</h3>
      <p>类似jQuery中的$.ajax(options)函数。需要通过success，fail，complete接收调用的结果</p>
<p><code>wx.request()</code>发起网络数据请求，通过success回调函数接收数据</p>

        <h1 id="模板与配置">
          <a href="#模板与配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#模板与配置" class="headerlink" title="模板与配置"></a>模板与配置</h1>
      
        <h2 id="模板语法">
          <a href="#模板语法" class="heading-link"><i class="fas fa-link"></i></a><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h2>
      
        <h3 id="1-数据绑定">
          <a href="#1-数据绑定" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-数据绑定" class="headerlink" title="1.数据绑定"></a>1.数据绑定</h3>
      <p>基本原则：早data中定义页面的数据；在wxml中使用数据</p>
<p><strong>1. 定义：js文件中定义</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 页面的初始数据</span><br><span class="line">   */</span><br><span class="line">  data: &#123;</span><br><span class="line">    info:&#x27;initdata&#x27;,</span><br><span class="line">    msgList:[&#123;msg:&quot;hello&quot;&#125;,&#123;msg:&quot;world&quot;&#125;]</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>2. Mustache语法渲染</strong></p>
<p>绑定内容</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;</span><br><span class="line">&#123;&#123;info&#125;&#125;</span><br><span class="line">&lt;/view&gt;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>绑定属性（与vue有所不同）</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;image src=&quot;&#123;&#123;imgSrc&#125;&#125;&quot;&gt;&lt;/image&gt;</span><br></pre></td></tr></table></div></figure>

<p>三元运算</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;</span><br><span class="line">&#123;&#123;num&gt;10?&quot;大于10&quot;:&quot;小于10&quot;&#125;&#125;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-事件绑定">
          <a href="#2-事件绑定" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-事件绑定" class="headerlink" title="2. 事件绑定"></a>2. 事件绑定</h3>
      <p><strong>tap：手指离开后马上离开，类似click</strong></p>
<p>绑定方式：<code>bindtap</code>或<code>bind:taap</code></p>
<p><strong>input：文本框的输入事件</strong></p>
<p>绑定方式：<code>bindinput</code>或<code>bind:input</code></p>
<p><strong>change：状态改变时触发</strong></p>
<p>绑定方式：<code>bindchange</code>或<code>bind:change</code></p>
<p><strong>事件对象的属性列表</strong></p>
<p>当事件回调触发的时候，会收到一个事件对象event，详细属性如下：</p>
<p>type：string：事件类型</p>
<p>timeStamp：Integer：页面打开到触发事件所经过的毫秒数</p>
<p>target：Object：触发事件的组件的一些属性值集合</p>
<p>currentTarget：Object：当前组件的一些属性值集合</p>
<p>detail：Object：额外的信息</p>
<p>touches：Array：触摸事件，当前停留在屏幕中的触摸点信息的数组</p>
<p>changedTouches：Array：触摸事件，当前变化的触摸点信息的数组</p>
<p><strong>target和currentTarget的区别</strong></p>
<p>target是触发该事件的源头组件，而currentTarget则是当前事件所绑定的组件。</p>
<p>比如事件绑定在父组件，此时点击子组件出现冒泡机制，父组件的点击事件也会触发。此时<code>target</code>指触发该事件的源头组件，<code>currentTarget</code>则是当前事件所绑定的组件。</p>
<p>在页面的.js文件中定义对应的事件处理函数，事件参数通过形参event(简写e)来接收</p>
<p><strong><font color="red">注意：如果在绑定的点击事件中获取数据<code>data-**</code>时，使用<code>e.currentTarget.dataset.**</code></font></strong></p>

        <h3 id="3-事件传参与数据同步">
          <a href="#3-事件传参与数据同步" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-事件传参与数据同步" class="headerlink" title="3. 事件传参与数据同步"></a>3. 事件传参与数据同步</h3>
      <p><strong>更新视图数据：</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">	info:&#x27;initdata&#x27;,</span><br><span class="line">&#125;,</span><br><span class="line">onefunc()&#123;</span><br><span class="line">//获取data数据</span><br><span class="line">console.log(this.data.info);</span><br><span class="line">this.setData(&#123;</span><br><span class="line">  info:&quot;please&quot;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>事件传参</strong></p>
<p>小程序中的事件传参比较特殊，不能在绑定事件的同时为事件处理函数传递参数。因为小程序会把bindtap的属性值，统一当做事件名称来处理。</p>
<p>传递参数：可以为组件提供<code>data-*</code>自定义属性传参。*代表参数的名字</p>
<p>获取参数：<code>event.target.dataset.参数名</code></p>
<p>例：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;button size=&quot;mini&quot; bindtap=&quot;onefunc&quot; data-num=&quot;&#123;&#123;3&#125;&#125;&quot; type=&quot;primary&quot;&gt;按钮&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">onefunc(e:any)&#123;</span><br><span class="line">	console.log(e.target.dataset.num);</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-bindinput">
          <a href="#4-bindinput" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-bindinput" class="headerlink" title="4.bindinput"></a>4.bindinput</h3>
      <p>语法：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot;  bindinput=&quot;inputHandler&quot; /&gt;</span><br><span class="line"></span><br><span class="line">inputHandler(e)&#123;</span><br><span class="line"></span><br><span class="line">	//e.detail.value是变化过后，文本框最新的值</span><br><span class="line">	console.log(e.detail.value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="5-实现文本框和data之间的数据同步">
          <a href="#5-实现文本框和data之间的数据同步" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-实现文本框和data之间的数据同步" class="headerlink" title="5. 实现文本框和data之间的数据同步"></a>5. 实现文本框和data之间的数据同步</h3>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot;  bindinput=&quot;inputHandler&quot; value=&quot;&#123;&#123;msg&#125;&#125;&quot;/&gt;</span><br><span class="line"></span><br><span class="line">inputHandler(e:any)&#123;</span><br><span class="line">	this.setData(&#123;</span><br><span class="line">	  msg:e.detail.value</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="6-条件语法">
          <a href="#6-条件语法" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-条件语法" class="headerlink" title="6. 条件语法"></a>6. 条件语法</h3>
      <p><strong>wx:if</strong></p>
<p><strong>wx:elif</strong></p>
<p><strong>wx:else</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;view wx:if=&quot;&#123;&#123;num===0&#125;&#125;&quot;&gt;</span><br><span class="line">123</span><br><span class="line">&lt;/view&gt;</span><br><span class="line">&lt;view wx:elif=&quot;&#123;&#123;num===1&#125;&#125;&quot;&gt;</span><br><span class="line">456</span><br><span class="line">&lt;/view&gt;</span><br><span class="line">&lt;view wx:else&gt;</span><br><span class="line">789</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>如果要一次性控制多个组件的展示与隐藏，可以使用一个<code>&lt;block&gt;&lt;/block&gt;</code>标签将多个组件包装起来，并在block标签上使用wx:if控制属性</strong></p>
<p><code>&lt;block&gt;</code>并不是一个组件，只是一个包裹性质的容器，不会再页面上做任何渲染。</p>

        <h3 id="7-hidden">
          <a href="#7-hidden" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-hidden" class="headerlink" title="7. hidden"></a>7. hidden</h3>
      <p><code>hidden=&quot;&#123;&#123;condition&#125;&#125;&quot;</code></p>
<p>条件为true隐藏，为false显示</p>

        <h3 id="8-列表渲染">
          <a href="#8-列表渲染" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-列表渲染" class="headerlink" title="8. 列表渲染"></a>8. 列表渲染</h3>
      <p><code>wx:for</code></p>
<p>语法：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;view wx:for=&quot;&#123;&#123;msgList&#125;&#125;&quot;&gt;</span><br><span class="line">索引：&#123;&#123;index&#125;&#125;</span><br><span class="line">当前项：&#123;&#123;item&#125;&#125;</span><br><span class="line">展示信息：&#123;&#123;item.msg&#125;&#125;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>手动指定索引和当前项的变量名</strong></p>
<ul>
<li><p>使用<code>wx:for-index</code>可以指定当前循环项的索引的变量名</p>
</li>
<li><p>使用<code>wx:for-item</code>可以指定当前项的变量名</p>
</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;view wx:for=&quot;&#123;&#123;msgList&#125;&#125;&quot; wx:for-index=&quot;idx&quot; wx:for-item=&quot;wxitem&quot;&gt;</span><br><span class="line">索引：&#123;&#123;idx&#125;&#125;</span><br><span class="line">当前项：&#123;&#123;wxitem&#125;&#125;</span><br><span class="line">展示信息：&#123;&#123;wxitem.msg&#125;&#125;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong><code>wx:key</code></strong></p>
<p>類似vue的<code>:key</code></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line"></span><br><span class="line">	msgList:[&#123;id:&#x27;001&#x27;,msg:&quot;hello&quot;&#125;,&#123;id:&quot;002&quot;,msg:&quot;world&quot;&#125;],</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;view wx:for=&quot;&#123;&#123;msgList&#125;&#125;&quot; wx:for-index=&quot;idx&quot; wx:for-item=&quot;wxitem&quot; wx:key=&quot;id&quot;&gt;</span><br><span class="line">索引：&#123;&#123;idx&#125;&#125;</span><br><span class="line">当前项：&#123;&#123;wxitem&#125;&#125;</span><br><span class="line">展示信息：&#123;&#123;wxitem.msg&#125;&#125;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></div></figure>

<p>指定key时不需要加<code>&#123;&#123;&#125;&#125;</code></p>

        <h2 id="模板样式">
          <a href="#模板样式" class="heading-link"><i class="fas fa-link"></i></a><a href="#模板样式" class="headerlink" title="模板样式"></a>模板样式</h2>
      <p><strong>wxss和css的关系</strong></p>
<p>wxss具有css大部分特性，同时，wxss还对css进行了扩充以及修改，以适应微信小程序的开发。wxss扩展的特性有：</p>
<ul>
<li><p>rpx尺寸单位</p>
</li>
<li><p>@import样式导入</p>
</li>
</ul>

        <h3 id="1-rpx">
          <a href="#1-rpx" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-rpx" class="headerlink" title="1.rpx"></a>1.rpx</h3>
      <p>是小程序独有的，用来解决屏适配的尺寸单位</p>
<p><strong>原理</strong></p>
<p>rpx把所有设备的屏幕，在宽度上等分为750份(即：当前屏幕的总宽度为750rpx)</p>

        <h3 id="2-样式导入">
          <a href="#2-样式导入" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-样式导入" class="headerlink" title="2. 样式导入"></a>2. 样式导入</h3>
      <p>@import后跟需要导入的外联样式表的相对路径，用<code>;</code>表示语句结束。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;common.wxss&quot;</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-window-导航栏">
          <a href="#3-window-导航栏" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-window-导航栏" class="headerlink" title="3. window-导航栏"></a>3. window-导航栏</h3>
      <p>用于设置小程序的状态栏、导航条、标题、窗口背景色。</p>
<p>各个属性参考全局配置文档的window项：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#window">https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#window</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="4-下拉刷新">
          <a href="#4-下拉刷新" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-下拉刷新" class="headerlink" title="4. 下拉刷新"></a>4. 下拉刷新</h3>
      <p><strong>设置步骤：</strong></p>
<p>app.json–window–enablePullDownRefresh的值设置为true</p>
<p>注：在app.json中启用下拉刷新功能，会作用于每个页面。</p>
<p><strong>下拉刷新背景色：</strong></p>
<p>app.json–window-“backgroundColor”: “#bfa”</p>
<p>值只能是十六进制</p>
<p><strong>下拉刷新的loaading样式</strong></p>
<p>app.json–window-backgroundTextStyle</p>

        <h3 id="5-上拉触底">
          <a href="#5-上拉触底" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-上拉触底" class="headerlink" title="5. 上拉触底"></a>5. 上拉触底</h3>
      <p>指手指在屏幕上的上拉滑动操作，从而加载更多数据的行为。</p>
<p> app.json–window-onReachBottomDistance</p>
<p>默认距离为50px</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;onReachBottomDistance&quot;: 50</span><br></pre></td></tr></table></div></figure>


        <h3 id="5-tabBar">
          <a href="#5-tabBar" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-tabBar" class="headerlink" title="5. tabBar"></a>5. tabBar</h3>
      <p>是移动端应用常见的页面效果，用于实现多页面的快速切换。通常将其分为：</p>
<p>底部tabBar</p>
<p>顶部tabBar</p>
<p><strong>注：tabBar中只能配置最少2个，最多5个tab页签；当渲染顶部tabBar时，不显示icon，只显示文本</strong></p>
<ul>
<li><p>backgroundColor：tabBar的背景色</p>
</li>
<li><p>selectedIconPath：选中时的图片路径</p>
</li>
<li><p>borderStyle：tabBar上边框的颜色</p>
</li>
<li><p>iconPath：未选中时的图片路径</p>
</li>
<li><p>selectedColor：tab上的文字选中时的颜色</p>
</li>
<li><p>color：tab上文字默认颜色</p>
</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&quot;tabBar&quot;: &#123;</span><br><span class="line">  &quot;list&quot;: [&#123;</span><br><span class="line">    &quot;pagePath&quot;: &quot;pages/index/index&quot;,</span><br><span class="line">    &quot;text&quot;: &quot;index&quot;</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">    &quot;pagePath&quot;: &quot;pages/list/list&quot;,</span><br><span class="line">    &quot;text&quot;: &quot;list&quot;</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>图标设置</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&quot;tabBar&quot;: &#123;</span><br><span class="line">  &quot;list&quot;: [&#123;</span><br><span class="line">    &quot;pagePath&quot;: &quot;pages/index/index&quot;,</span><br><span class="line">    &quot;text&quot;: &quot;index&quot;,</span><br><span class="line">    &quot;iconPath&quot;: &quot;./images/home.png&quot;,</span><br><span class="line">    &quot;selectedIconPath&quot;: &quot;./images/home-active.png&quot;</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">    &quot;pagePath&quot;: &quot;pages/list/list&quot;,</span><br><span class="line">    &quot;text&quot;: &quot;list&quot;,</span><br><span class="line">    &quot;iconPath&quot;: &quot;./images/phone.png&quot;,</span><br><span class="line">    &quot;selectedIconPath&quot;: &quot;./images/phone-active.png&quot;</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">    &quot;pagePath&quot;: &quot;pages/message/message&quot;,</span><br><span class="line">    &quot;text&quot;:&quot;message&quot;,</span><br><span class="line">    &quot;iconPath&quot;: &quot;./images/message.png&quot;,</span><br><span class="line">    &quot;selectedIconPath&quot;: &quot;./images/messaage-active.png&quot;</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>注意：tab页签的页面需要在pages数组中放在前面</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;pages&quot;: [</span><br><span class="line">  &quot;pages/index/index&quot;,</span><br><span class="line">  &quot;pages/list/list&quot;,</span><br><span class="line">  &quot;pages/message/message&quot;</span><br><span class="line">],</span><br></pre></td></tr></table></div></figure>



        <h2 id="页面配置">
          <a href="#页面配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#页面配置" class="headerlink" title="页面配置"></a>页面配置</h2>
      <p>app.json中的weindow节点，可以全局配置小程序中每个页面的窗口表现。如果某些小程序页面想要拥有特殊的窗口表现，此时，”页面级别的.json配置文件”就可以实现这种需求。</p>
<p>当页面配置与全局配置冲突时，根据就近原则，以页面配置为准。</p>

        <h2 id="数据请求">
          <a href="#数据请求" class="heading-link"><i class="fas fa-link"></i></a><a href="#数据请求" class="headerlink" title="数据请求"></a>数据请求</h2>
      <p>出于安全性方面的考虑，小程序官方对数据接口的请求做出了如下限制：</p>
<ul>
<li><p>只能请求HTTPS类型的接口</p>
</li>
<li><p>必须将接口的域名添加到新人列表中</p>
</li>
</ul>

        <h3 id="1-配置request合法域名">
          <a href="#1-配置request合法域名" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-配置request合法域名" class="headerlink" title="1. 配置request合法域名"></a>1. 配置request合法域名</h3>
      <p>配置步骤：登录微信小程序管理后台–开发–开发设置–服务器域名–修改request合法域名</p>
<p><strong><font color="red">域名只支持https协议</font></strong></p>
<p><strong><font color="red">不能使用IP地址或localhost</font></strong></p>
<p><strong><font color="red">域名必须经过ICP备案</font></strong></p>
<p><strong><font color="red">服务器域名一个月内最多可申请5次修改</font></strong></p>

        <h3 id="2-发起GET请求">
          <a href="#2-发起GET请求" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-发起GET请求" class="headerlink" title="2.发起GET请求"></a>2.发起GET请求</h3>
      <p>调用微信小程序提供的<code>wx.request()</code>方法，可以发起GET数据请求。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">getInfo()&#123;</span><br><span class="line">  wx.request(&#123;</span><br><span class="line">    url:&quot;https://www.escook.cn/api/get&quot;,</span><br><span class="line">    method:&#x27;GET&#x27;,</span><br><span class="line">    data:&#123;</span><br><span class="line">      name1:&quot;张三&quot;,</span><br><span class="line">      aage:22</span><br><span class="line">    &#125;,</span><br><span class="line">    success:(res)=&gt;&#123;</span><br><span class="line">      console.log(res);</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-发起POST请求">
          <a href="#3-发起POST请求" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-发起POST请求" class="headerlink" title="3. 发起POST请求"></a>3. 发起POST请求</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getPostInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">  wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&quot;https://www.escook.cn/api/post&quot;</span>,</span><br><span class="line">    <span class="attr">method</span>:<span class="string">&quot;POST&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>:&#123;</span><br><span class="line">      <span class="attr">name1</span>:<span class="string">&quot;李斯特&quot;</span>,</span><br><span class="line">      <span class="attr">age</span>:<span class="number">31</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">success</span>:<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-在页面刚加载时请求数据">
          <a href="#4-在页面刚加载时请求数据" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-在页面刚加载时请求数据" class="headerlink" title="4. 在页面刚加载时请求数据"></a>4. 在页面刚加载时请求数据</h3>
      <p>在onLoad事件中调用获取数据的函数</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//this代表当前页面的实例</span><br><span class="line">onLoad() &#123;</span><br><span class="line">	this.getPostInfo()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="5-request请求的注意事项">
          <a href="#5-request请求的注意事项" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-request请求的注意事项" class="headerlink" title="5. request请求的注意事项"></a>5. request请求的注意事项</h3>
      <p><strong>如果未提供https协议的接口，可以在开发者工具中，临时开启【开发不校验请求域名，TLS版本及HTTPS证书】选项，跳过request合法域名校验</strong></p>
<p>仅限在开发与调试阶段使用。</p>

        <h3 id="6-跨域和ajax">
          <a href="#6-跨域和ajax" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-跨域和ajax" class="headerlink" title="6. 跨域和ajax"></a>6. 跨域和ajax</h3>
      <p>跨域问题只存在于基于浏览器的Web开发中，由于小程序的宿主环境不是浏览器，所以不存在跨域问题。</p>
<p>Ajax技术的核心是依赖于浏览器中的XMLHttpRequest这个对象，由于小程序的宿主环境是微信客户端，所以小程序中的请求叫做”发起网络数据请求”</p>

        <h1 id="视图与逻辑">
          <a href="#视图与逻辑" class="heading-link"><i class="fas fa-link"></i></a><a href="#视图与逻辑" class="headerlink" title="视图与逻辑"></a>视图与逻辑</h1>
      
        <h2 id="页面导航">
          <a href="#页面导航" class="heading-link"><i class="fas fa-link"></i></a><a href="#页面导航" class="headerlink" title="页面导航"></a>页面导航</h2>
      
        <h3 id="1-声明式导航">
          <a href="#1-声明式导航" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-声明式导航" class="headerlink" title="1. 声明式导航"></a>1. 声明式导航</h3>
      <p><code>&lt;navigator&gt;</code></p>
<p><strong>导航到tabBar页面</strong></p>
<p>指被配置为tabBar的页面。在使用<code>&lt;navigator&gt;</code>组件跳转到指定的tabBar页面时，需要指定url属性和open-type属性。其中：</p>
<ul>
<li><p>url表示要跳转的页面的地址，必须以<code>/</code>开头</p>
</li>
<li><p>open-type表示跳转的方式，必须为<code>switchTab</code></p>
</li>
</ul>
<p>如：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;navigator url=&quot;../home/home&quot; open-type=&quot;switchTab&quot;&gt;跳转&lt;/navigator&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>导航到非tobBar页面</strong></p>
<p>同上，open-type为navigate，可省略</p>
<p>例：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;navigator url=&quot;../index/index&quot; open-type=&quot;navigate&quot;&gt;非tabBar页面&lt;/navigator&gt;</span><br></pre></td></tr></table></div></figure>


<p><strong>后退导航</strong></p>
<p>如果要后退到上一页面或多级页面，则需要指定open-type属性和delta属性，</p>
<ul>
<li><p>open-type的值必须是navigateBack，表示要进行后退导航</p>
</li>
<li><p>delta的值必须是数字，表示要后退的层级。默认值为1可省略</p>
</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;navigator open-type=&quot;navigateBack&quot; delta=&quot;1&quot;&gt;退！退！退！&lt;/navigator&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-编程式导航">
          <a href="#2-编程式导航" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-编程式导航" class="headerlink" title="2.编程式导航"></a>2.编程式导航</h3>
      <p>调用小程序的导航API,实现页面的跳转</p>
<p><strong>1. 导航到tabBar页面</strong></p>
<p>调用<code>wx.switchTab(Object object)</code>跳转</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wx.switchTab(&#123;</span><br><span class="line">  url:&quot;/pages/message/message&quot;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>2. 导航到非tabBar页面</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">skipNoTabBar()&#123;</span><br><span class="line">  wx.navigateTo(&#123;</span><br><span class="line">    url:&quot;/pages/index/index&quot;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>如果指定的是pages根路径，前面要加<code>/</code></p>
<p><strong>3. 后退导航</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pageBack()&#123;</span><br><span class="line">  wx.navigateBack()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-导航传参">
          <a href="#3-导航传参" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-导航传参" class="headerlink" title="3. 导航传参"></a>3. 导航传参</h3>
      <p><strong>1. 声明式导航传参</strong></p>
<p>navigator组件的url属性用来指定将要跳转到的页面的路径。同时，路径的后面还可以携带参数：</p>
<ul>
<li><p>参数与路径之间使用?分隔</p>
</li>
<li><p>参数键与参数值用&#x3D;相连</p>
</li>
<li><p>不同参数用&amp;分隔</p>
</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;navigator url=&quot;../home/home?name=zs&amp;age=20&quot; open-type=&quot;switchTab&quot;&gt;跳转&lt;/navigator&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>2. 编程式导航传参</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">skipNoTabBar()&#123;</span><br><span class="line">  wx.navigateTo(&#123;</span><br><span class="line">    url:&quot;/pages/index/index?name=zs&amp;age=19&quot;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>3. onLoad中接收参数</strong></p>
<p>通过声明式导航和编程式导航传参所携带的参数，可以直接在onLoad事件中直接获取到、</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">onLoad(options) &#123;</span><br><span class="line">    console.log(&quot;传递的参数:&quot;,options);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="页面事件">
          <a href="#页面事件" class="heading-link"><i class="fas fa-link"></i></a><a href="#页面事件" class="headerlink" title="页面事件"></a>页面事件</h2>
      
        <h3 id="1-下拉刷新">
          <a href="#1-下拉刷新" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-下拉刷新" class="headerlink" title="1. 下拉刷新"></a>1. 下拉刷新</h3>
      <p>指的是通过手指在屏幕上的下拉滑动操作，从而重新加载页面数据的行为</p>
<p><strong>全局开启下拉刷新</strong></p>
<p>app.json的window节点中：<code>&quot;enablePullDownRefresh&quot;:true</code></p>
<p><strong>局部开启</strong></p>
<p>在页面的.json配置文件中加上该属性。直接添加即可不需要有window属性</p>
<p>推荐使用第二种</p>
<p><strong>2. 监听页面的下拉刷新事件</strong></p>
<p>在页面的.js文件中，通过<code>onPullDownRefresh</code></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onPullDownRefresh() &#123;</span><br><span class="line">  console.log(&quot;下拉刷新&quot;);</span><br><span class="line">  </span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>停止下拉刷新</strong></p>
<p><code>wx.stopPullDownRefresh()</code></p>

        <h3 id="2-上拉触底">
          <a href="#2-上拉触底" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-上拉触底" class="headerlink" title="2. 上拉触底"></a>2. 上拉触底</h3>
      <p>通过手指在屏幕上的上拉滑动操作，从而加载更多数据的行为</p>
<p><strong>1. 监听上拉触底</strong></p>
<p><code>onReachBottom()</code></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onReachBottom() &#123;</span><br><span class="line">	console.log(&quot;上拉触底&quot;);</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>2. 配置上拉触底距离</strong></p>
<p><code>&quot;onReachBottomDistance&quot;: 150</code></p>
<p><strong>3. loading效果</strong></p>
<p><code>wx.showLoading(object)</code></p>
<p><code>wx.hideLoading(object)</code></p>
<p>使用</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">getColors()&#123;</span><br><span class="line">  wx.showLoading(&#123;title:&quot;数据加载中...&quot;&#125;)</span><br><span class="line">  wx.request(&#123;</span><br><span class="line">    url:&quot;https://applet-base-api-t.itheima.net/api/color&quot;,</span><br><span class="line">    method:&quot;GET&quot;,</span><br><span class="line">    success:(res:colorArray)=&gt;&#123;</span><br><span class="line">      this.setData(&#123;</span><br><span class="line">        colorList:[...this.data.colorList,...res.data.data]</span><br><span class="line">      </span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">	//无论成功还是失败(即请求完成后)</span><br><span class="line">    complete:()=&gt;&#123;</span><br><span class="line">      wx.hideLoading()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>4. 对上拉触底进行节流处理</strong></p>
<ol>
<li>data中定义isLoading节流阀</li>
</ol>
<ul>
<li><p>false 表示当前没有进行任何数据请求</p>
</li>
<li><p>true表示当前正在进行数据请求</p>
</li>
</ul>
<ol start="2">
<li>getColors()方法中修改isLoading节流阀的值</li>
</ol>
<ul>
<li><p>在刚调用getColors时将节流阀设置true</p>
</li>
<li><p>在网络请求的complete回调函数中，设置false</p>
</li>
</ul>
<ol start="3">
<li>在onReachBottom中判断节流阀的值，从而对数据请求进行节流控制</li>
</ol>
<ul>
<li><p>如果为true，阻止请求</p>
</li>
<li><p>如果为false，发起请求</p>
</li>
</ul>

        <h3 id="3-自定义编译模式">
          <a href="#3-自定义编译模式" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-自定义编译模式" class="headerlink" title="3. 自定义编译模式"></a>3. 自定义编译模式</h3>
      <p><strong>开发工具–添加编译模式</strong></p>

        <h2 id="生命周期">
          <a href="#生命周期" class="heading-link"><i class="fas fa-link"></i></a><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2>
      <p>生命周期是指一个对象从创建–&gt;运行–&gt;销毁的整个阶段，强调的是一个时间段。</p>

        <h3 id="1-生命周期的分类：">
          <a href="#1-生命周期的分类：" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-生命周期的分类：" class="headerlink" title="1. 生命周期的分类：*"></a>1. 生命周期的分类：*</h3>
      <p>应用生命周期：特指小程序从启动–&gt;运行–&gt;销毁的过程</p>
<p>页面生命周期：每个页面的加载–&gt;渲染–&gt;销毁的过程</p>

        <h3 id="2-生命周期函数">
          <a href="#2-生命周期函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-生命周期函数" class="headerlink" title="2. 生命周期函数"></a>2. 生命周期函数</h3>
      <p>是由小程序框架提供的内置函数，会伴随着生命周期，自动按次序执行。</p>
<p><strong>生命周期函数的作用</strong>：允许程序员在特定的时间点， 执行某些特定的操作。</p>
<p>生命周期强调的是时间段，生命周期函数强调的是时间点。</p>

        <h3 id="3-生命周期函数的分类">
          <a href="#3-生命周期函数的分类" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-生命周期函数的分类" class="headerlink" title="3. 生命周期函数的分类"></a>3. 生命周期函数的分类</h3>
      <p><strong>应用的生命周期函数</strong></p>
<p>小程序从启动–运行–销毁期间依次调用的函数</p>
<p><strong>页面的生命周期函数</strong></p>
<p>每个页面从加载–渲染–销毁期间依次调用的函数</p>

        <h3 id="4-应用的生命周期函数">
          <a href="#4-应用的生命周期函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-应用的生命周期函数" class="headerlink" title="4. 应用的生命周期函数"></a>4. 应用的生命周期函数</h3>
      <p>小程序的应用生命周期函数需要在app.js中进行声明</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">App&lt;IAppOption&gt;(&#123;</span><br><span class="line">  globalData: &#123;&#125;,</span><br><span class="line">  /**</span><br><span class="line">   * 当小程序初始化完成时，会触发 onLaunch（全局只触发一次）</span><br><span class="line">   */</span><br><span class="line">  onLaunch() &#123;</span><br><span class="line">    console.log(&quot;onLaunch&quot;);</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 当小程序启动，或从后台进入前台显示，会触发 onShow</span><br><span class="line">   */</span><br><span class="line">  onShow(opts) &#123;</span><br><span class="line">    console.log(&quot;onShow&quot;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 当小程序从前台进入后台，会触发 onHide</span><br><span class="line">   */</span><br><span class="line">  onHide() &#123;</span><br><span class="line">    console.log(&quot;onHide&quot;);</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 当小程序发生脚本错误，或者 api 调用失败时，会触发 onError 并带上错误信息</span><br><span class="line">   */</span><br><span class="line">  onError(msg) &#123;</span><br><span class="line">    console.error(msg)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="5-页面的生命周期函数">
          <a href="#5-页面的生命周期函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-页面的生命周期函数" class="headerlink" title="5. 页面的生命周期函数"></a>5. 页面的生命周期函数</h3>
      <p>小程序的页面生命周期函数需要在页面的.js文件中进行声明</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 生命周期函数--监听页面加载</span><br><span class="line"> */</span><br><span class="line">onLoad() &#123;</span><br><span class="line">  console.log(&quot;页面：onLoad&quot;);</span><br><span class="line">  </span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 生命周期函数--监听页面初次渲染完成</span><br><span class="line"> */</span><br><span class="line">onReady() &#123;</span><br><span class="line">  console.log(&quot;页面：onReady&quot;);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 生命周期函数--监听页面显示</span><br><span class="line"> */</span><br><span class="line">onShow() &#123;</span><br><span class="line">  console.log(&quot;页面：onShow&quot;);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 生命周期函数--监听页面隐藏</span><br><span class="line"> */</span><br><span class="line">onHide() &#123;</span><br><span class="line">  console.log(&quot;页面：onHide&quot;);</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 生命周期函数--监听页面卸载</span><br><span class="line"> */</span><br><span class="line">onUnload() &#123;</span><br><span class="line">  console.log(&quot;页面：onUnload&quot;);</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h2 id="WXS脚本">
          <a href="#WXS脚本" class="heading-link"><i class="fas fa-link"></i></a><a href="#WXS脚本" class="headerlink" title="WXS脚本"></a>WXS脚本</h2>
      <p><strong>WXS是小程序独有的一套脚本语言，结合WXML，可以构建出页面的结构</strong></p>
<p><strong>应用场景</strong></p>
<p>wxml中无法调用在页面的.js中定义的函数，但是，wxml中可以调用wxs中定义的函数。因此，小程序中wxs的典型应用场景就是”过滤器”</p>
<p><strong>wxs的语法类似js，但是是完全不同的两种语言：</strong></p>
<ol>
<li>wxs有自己的数据类型</li>
</ol>
<p>number </p>
<p>string</p>
<p>boolean</p>
<p>object</p>
<p>function</p>
<p>araray</p>
<p>date</p>
<p>regexp</p>
<ol start="2">
<li>wxs不支持类似于ES6及以上的语法形式</li>
</ol>
<p>不支持：let 、 const 、 解构赋值 、 展开运算符 、 箭头函数 、 对象属性简写 、 etc。。。</p>
<p>支持：var定义变量、普通function函数等类似于ES5的语法</p>
<p>3 wxs遵循commonJS规范</p>
<p>module对象</p>
<p>require()函数</p>
<p>module.exports对象</p>

        <h3 id="1-基础语法">
          <a href="#1-基础语法" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-基础语法" class="headerlink" title="1. 基础语法"></a>1. 基础语法</h3>
      <ol>
<li>内嵌wxs脚本</li>
</ol>
<p>wxs代码可以编写在wxml温家安中的<code>&lt;wxs&gt;</code>标签内。</p>
<p>wxml文件中的每个<code>&lt;wxs&gt;&lt;/wxs&gt;</code>标签，必须提供module属性，用来指定当前wxs的模块名称，方便在wxml中访问模块中的成员</p>
<p>例：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;&#123;&#123;m1.toUpper(username)&#125;&#125;&lt;/view&gt;</span><br><span class="line">&lt;wxs module=&quot;m1&quot;&gt;</span><br><span class="line">  module.exports.toUpper = function(str)&#123;</span><br><span class="line"></span><br><span class="line">    return str.toUpperCase()</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/wxs&gt;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>定义外联的wxs脚本</li>
</ol>
<ul>
<li>utils–&gt;创建tools.wxs文件</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function toLower(str)&#123;</span><br><span class="line"></span><br><span class="line">  return str.toLowerCase()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line"></span><br><span class="line">  toLower:toLower</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>注：不支持对象属性的简写形式。</p>
<ul>
<li>页面引入使用</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;&#123;&#123;m2.toLower(username)&#125;&#125;&lt;/view&gt;</span><br><span class="line">&lt;wxs src=&quot;../../utils/tools.wxs&quot; module=&quot;m2&quot;&gt;&lt;/wxs&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-wxs的特点">
          <a href="#2-wxs的特点" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-wxs的特点" class="headerlink" title="2. wxs的特点"></a>2. wxs的特点</h3>
      <p><strong>为了降低wxs的学习成本，wxs语言在设计时借鉴大量javascript语法。但是本质上wxs和javascript是完全不同的两种语言。</strong></p>
<p><strong>不能作为组件的事件回调</strong></p>
<p>wxs典型的应用场景就是过滤器，经常配合Mustache语法进行使用。但是在wxs中定义的函数不能作为组件的时间回调函数</p>
<p><strong>隔离性</strong></p>
<p>隔离性指的是wxs的运行环境和其他javascript代码是隔离的。</p>
<ul>
<li><p>wxs不能调用js中定义的函数</p>
</li>
<li><p>wxs不能调用小程序提供的api</p>
</li>
</ul>
<p><strong>性能好</strong></p>
<ul>
<li><p>在IOS设备上，小程序内的WXS会比JavaScript代码块2~20倍</p>
</li>
<li><p>在Android设备上，二者的运行效率无差异</p>
</li>
</ul>

        <h1 id="小程序-基础加强">
          <a href="#小程序-基础加强" class="heading-link"><i class="fas fa-link"></i></a><a href="#小程序-基础加强" class="headerlink" title="小程序-基础加强"></a>小程序-基础加强</h1>
      
        <h2 id="自定义组件">
          <a href="#自定义组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#自定义组件" class="headerlink" title="自定义组件"></a>自定义组件</h2>
      
        <h3 id="1-创建组件">
          <a href="#1-创建组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-创建组件" class="headerlink" title="1.创建组件"></a>1.创建组件</h3>
      <ul>
<li><p>在项目的根目录中，鼠标右键，创建components-&gt;test文件夹</p>
</li>
<li><p>在新建的components-&gt;test文件夹上，鼠标右键，“新建Component”</p>
</li>
<li><p>键入组件的名称之后回车，会自动生成组件对应的四个文件。</p>
</li>
</ul>
<p><strong>为了保证目录结构的清晰，建议把不同的组件，存放单独目录中</strong></p>

        <h3 id="2-引用组件">
          <a href="#2-引用组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-引用组件" class="headerlink" title="2. 引用组件"></a>2. 引用组件</h3>
      <p><strong>局部引用：组件只能在当前被引用的页面内使用</strong></p>
<p>在页面.json配置文件中引用组件的方式，叫做“局部引用”</p>
<figure class="highlight json"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;my-test1&quot;</span><span class="punctuation">:</span><span class="string">&quot;/components/test/test&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></div></figure>

<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-test1</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test1</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p><strong>全局引用：组件可以在每个小程序页面中使用</strong></p>
<p>app.json</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;usingComponents&quot;: &#123;</span><br><span class="line">  &quot;my-test2&quot;:&quot;/components/test/test&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>组件和页面的区别</strong></p>
<ul>
<li><p>组件的.json文件中需要声明<code>&quot;component&quot;:true</code>属性</p>
</li>
<li><p>组件的.js文件中调用的是Component()函数</p>
</li>
<li><p>组件的事件处理函数需要定义到methods节点中</p>
</li>
</ul>

        <h3 id="3-样式">
          <a href="#3-样式" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-样式" class="headerlink" title="3.样式"></a>3.样式</h3>
      <p><strong>1. 组件样式隔离：默认情况下，自定义组件的样式只对当前组件生效，不会影响到组件之外的UI结构</strong></p>
<p><strong>app.wxss全局样式对组件无效</strong></p>
<p><strong>只有class选择器会有样式隔离效果。id选择器，属性选择器，标签选择器不受样式隔离的影响</strong></p>
<p>所以在组件和引用组件的页面中建议使用class选择器，不要使用id 、属性 、标签选择器</p>
<p><strong>2. 修改组件的样式隔离选项</strong></p>
<p>如果希望在外界能够控制组件内部的样式。此时可以通过<code>styleIsolation</code></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//在组件的.js文件中</span><br><span class="line"></span><br><span class="line">Component(&#123;</span><br><span class="line">	options:&#123;</span><br><span class="line">		//启用样式隔离</span><br><span class="line">		styleIsolation:&quot;isolated&quot;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-自定义组件-数据、方法和属性">
          <a href="#4-自定义组件-数据、方法和属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-自定义组件-数据、方法和属性" class="headerlink" title="4.自定义组件-数据、方法和属性"></a>4.自定义组件-数据、方法和属性</h3>
      <p><strong>1. methods方法</strong></p>
<p>在小程序组件中，事件处理函数和自定义方法需要定义到methods节点中</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> methods: &#123;</span><br><span class="line">   addCount()&#123;</span><br><span class="line">     this.setData(&#123;</span><br><span class="line">       count:this.data.count+1</span><br><span class="line">     &#125;)</span><br><span class="line">     this._showCount()</span><br><span class="line">   &#125;,</span><br><span class="line"></span><br><span class="line">//自定义方法就是内部会调用的方法，建议“_”开头</span><br><span class="line">   _showCount()&#123;</span><br><span class="line">     wx.showToast(&#123;</span><br><span class="line">       title:&#x27;count是&#x27;+this.data.count,</span><br><span class="line">       icon:&quot;none&quot;</span><br><span class="line">     &#125;)</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>2. properties属性</strong></p>
<p>在小程序组件中，properties是组件的对外属性，用来接收外界传递到组件中的数据。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">properties: &#123;</span><br><span class="line">  //属性定义</span><br><span class="line">  max:&#123; //完整定义属性的方式(需要指定默认值时使用)</span><br><span class="line">    type:Number,//属性值的数据类型</span><br><span class="line">    value:10//属性默认值</span><br><span class="line">  &#125;，</span><br><span class="line">  max:Number //简化定义属性的方式（不需要指定默认值）</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p>父组件传递：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-test2 max=&quot;1574561&quot;&gt;&lt;/my-test2&gt;</span><br></pre></td></tr></table></div></figure>

<p>组件使用：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;&#123;&#123;max&#125;&#125;&lt;/view&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>3. data和properties的区别</strong></p>
<p>在小程序中，properties属性和data数据的用法相同，它们都是可读可写的。只不过</p>
<ul>
<li><p>data更倾向于与存储组件的私有数据</p>
</li>
<li><p>properties更倾向于存储外界传递到组件中的数据</p>
</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.data===this.properties</span><br></pre></td></tr></table></div></figure>

<p>为true</p>
<p><strong>使用setData修改propert的值</strong></p>
<p>由于data数据和properties属性本质上没有任何区别。因此properties的值也可以用于页面渲染，或使用setData为properties中的属性重新辅助。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">this.setData(&#123;</span><br><span class="line">	max:this.properties.max+1	</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>



        <h3 id="5-数据监听器">
          <a href="#5-数据监听器" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-数据监听器" class="headerlink" title="5. 数据监听器"></a>5. 数据监听器</h3>
      <p>数据监听器用于监听和响应任何属性和数据字段的变化，从而执行特定的操作，类似vue的<code>watch</code>。</p>
<p>语法：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">observers:&#123;</span><br><span class="line"></span><br><span class="line">&#x27;字段A,字段B&#x27;:function(字段A的新值,字段B的新值)&#123;</span><br><span class="line"></span><br><span class="line">	//dosomething</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>例子：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">observers:&#123;</span><br><span class="line"></span><br><span class="line">  &#x27;num1&#x27;:function(newn1)&#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      sum:newn1+this.data.num2</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#x27;num2&#x27;:function(newn2)&#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      sum:this.data.num1+newn2</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>或者</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">observers:&#123;</span><br><span class="line"></span><br><span class="line">  &#x27;num1,num2&#x27;:function(newn1,newn2)&#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      sum:newn1+newn2</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>监听对象属性</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">observers:&#123;</span><br><span class="line"></span><br><span class="line">&#x27;对象.属性A,对象.属性B&#x27;:function(字段属性A的新值,字段属性B的新值)&#123;</span><br><span class="line"></span><br><span class="line">	//dosomething</span><br><span class="line"></span><br><span class="line">	//触发此监听器的三种情况</span><br><span class="line"></span><br><span class="line">	//【为A赋值】：使用setData设置this.data.对象.属性A时触发</span><br><span class="line"></span><br><span class="line">	//【为B赋值】：使用setData设置this.data.对象。属性B时触发</span><br><span class="line"></span><br><span class="line">	//【直接为对象赋值】：使用setData这时this.data.对象时触发</span><br><span class="line"></span><br><span class="line">	//dosth</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>监听对象中指定属性的变化</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">observers:&#123;</span><br><span class="line">  &#x27;rgb.r,rgb.g,rgb.a&#x27;:function(r,g,b)&#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      fullRgb:`$&#123;r&#125;,$&#123;g&#125;,$&#123;b&#125;`</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>监听对象中所有属性的变化</strong></p>
<p>如果某个对象中需要被监听的属性太多，为了方便，可以使用通配符<code>**</code>来监听对象中所有属性的变化。如：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">observers:&#123;</span><br><span class="line">  &#x27;rgb.**&#x27;:function(obj)&#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      fullRgb:`$&#123;obj.r&#125;,$&#123;obj.g&#125;,$&#123;obj.b&#125;`</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>得到的新值是对象，可以直接使用对应对象的属性</p>

        <h3 id="6-纯数据字段">
          <a href="#6-纯数据字段" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-纯数据字段" class="headerlink" title="6. 纯数据字段"></a>6. 纯数据字段</h3>
      <p>春数据字段指的是那些不用于界面渲染的data字段。</p>
<p>例如某些情况下某些data中的字段既不会展示在页面也不会传递给其他组件。仅仅在当前组件内部使用。</p>
<p>纯数据字段有助于提升页面更新的性能</p>
<p><strong>使用规则</strong></p>
<p>在Component构造器的options节点中，指定pureDataPattern为一个正则表达式，字段案名符合这个正则表达式的字段将成为纯数据字段。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line"></span><br><span class="line">	options:&#123;</span><br><span class="line">		//指定所有_开头的数据字段为纯数据字段。不可以渲染页面</span><br><span class="line">		pureDataPattern:/^_/</span><br><span class="line">	&#125;,</span><br><span class="line"></span><br><span class="line">	data:&#123;</span><br><span class="line">		_b:true,//纯数据字段</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="7-组件的生命周期">
          <a href="#7-组件的生命周期" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-组件的生命周期" class="headerlink" title="7. 组件的生命周期"></a>7. 组件的生命周期</h3>
      <p>created:组件实例刚刚被创建时执行</p>
<p>attached:在组件实例进入页面节点树时执行</p>
<p>ready：在组件在视图层布局完成后执行</p>
<p>moved：在组件实例被移动到节点树的另一个位置时执行</p>
<p>error：每当组件方法抛出错误时执行</p>
<p><strong>lifetimes节点</strong></p>
<p>在小程序组件中，生命周期函数可以直接定义在Component构造器的第一级参数中，可以在lifetimes字段内进行声明（推荐的方式优先级最高）</p>

        <h3 id="8-组件所在页面的生命周期">
          <a href="#8-组件所在页面的生命周期" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-组件所在页面的生命周期" class="headerlink" title="8. 组件所在页面的生命周期"></a>8. 组件所在页面的生命周期</h3>
      <p>有时，自定义组件的行为依赖于页面状态的变化，此时就需要用到组件所在页面的生命周期。</p>
<p>show:组件所在的页面被展示时执行</p>
<p>hide：组件所在的页面被隐藏时执行</p>
<p>resize：组件所在的页面尺寸变化时执行</p>
<p><strong>pageLifetimes节点</strong></p>
<p>组件所在页面的生命周期函数，需要定义在pageLifetimes节点中</p>

        <h3 id="9-自定义组件-插槽">
          <a href="#9-自定义组件-插槽" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-自定义组件-插槽" class="headerlink" title="9. 自定义组件-插槽"></a>9. 自定义组件-插槽</h3>
      <p>在自定义组件的wxml结构中，可以提供一个<code>&lt;slot&gt;</code>节点，用于承载组件使用者提供的wxml结构</p>
<p><strong>单个插槽</strong></p>
<p>默认每个自定义组件中只允许使用一个<code>&lt;slot&gt;</code>进行占位，这种个数上的限制叫做单个插槽</p>
<p><strong>启用多个插槽</strong></p>
<p>在组件的.js文件中，通过如下方式启用</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">  /**</span><br><span class="line">   * 组件的初始数据</span><br><span class="line">   */</span><br><span class="line">  options:&#123;</span><br><span class="line"></span><br><span class="line">    multipleSlots:true</span><br><span class="line">  &#125;,</span><br><span class="line">)&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>使用：</strong></p>
<p>组件</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;slot name=&quot;cc1&quot;&gt;&lt;/slot&gt;</span><br><span class="line">&lt;slot name=&quot;cc2&quot;&gt;&lt;/slot&gt;</span><br><span class="line">&lt;slot name=&quot;cc3&quot;&gt;&lt;/slot&gt;</span><br></pre></td></tr></table></div></figure>

<p>页面</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;view slot=&quot;cc2&quot;&gt;第二个插槽&lt;/view&gt;</span><br><span class="line">&lt;view slot=&quot;cc1&quot;&gt;第一个插槽&lt;/view&gt;</span><br><span class="line">&lt;view slot=&quot;cc3&quot;&gt;第三个插槽&lt;/view&gt;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="10-父子组件之间的通信">
          <a href="#10-父子组件之间的通信" class="heading-link"><i class="fas fa-link"></i></a><a href="#10-父子组件之间的通信" class="headerlink" title="10.父子组件之间的通信"></a>10.父子组件之间的通信</h3>
      <p><strong>属性绑定</strong></p>
<p>用于父组件向子组件的指定属性设置数据，仅能设置JSON兼容的数据，无法传递方法。</p>
<p>传递后子组件的值不影响父组件</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//子组件的properties节点</span><br><span class="line">properties:&#123;</span><br><span class="line">	count:Number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//子组件的wxml结构</span><br><span class="line"></span><br><span class="line">&lt;text&gt;子组件中。count值为：&#123;&#123;count&#125;&#125;&lt;/text&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>事件绑定</strong></p>
<p>用于子组件向父组件传递数据，可以传递任意数据</p>
<ul>
<li>在父组件的js中，定义一个函数，这个函数即将通过自定义事件的形式传递给子组件</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">syncCount(e)&#123;</span><br><span class="line">	console.log(&quot;syncCount&quot;);</span><br><span class="line">	console.log(&quot;传递的数据:&quot;,e.detail);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<ul>
<li>在父组件的wxml中，通过自定义事件的形式，将步骤1中定义的函数引用，传递给子组件</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-test1 bind:sync = &quot;syncCount&quot;&gt;</span><br><span class="line"> </span><br><span class="line">&lt;/my-test1&gt;</span><br></pre></td></tr></table></div></figure>

<ul>
<li>在子组件的js中，通过调用<code>this.triggerEvent(&#39;自定义事件名称&#39;,&#123;/*参数对象*/&#125;)</code>，将数据发送到父组件</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">addR()&#123;</span><br><span class="line">  //触发自定义事件，将数值同步给父组件</span><br><span class="line">  this.triggerEvent(&quot;sync&quot;,this.data.rgb.r)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>获取组件实例</strong></p>
<p>父组件可以通过<code>this.selectComponent()</code>获取子组件实例对象，这样就可以直接访问子组件的任意数据和方法</p>
<p>调用时需要传入一个选择器。例如：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.selectComponent(&quot;.my_component&quot;)</span><br></pre></td></tr></table></div></figure>

<p>例子：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-test1 class=&quot;mytest1&quot; bind:sync = &quot;syncCount&quot;&gt;</span><br><span class="line"> </span><br><span class="line">&lt;/my-test1&gt;</span><br><span class="line">&lt;button bindtap=&quot;getChildData&quot;&gt;获取子组件数据&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">。。。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">getChildData()&#123;</span><br><span class="line">	const child = this.selectComponent(&#x27;.mytest1&#x27;)</span><br><span class="line">	//修改子组件数据</span><br><span class="line">	child.setData(&#123;</span><br><span class="line">	  fullRgb:&#x27;154,54,16&#x27;</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	//调用子组件方法</span><br><span class="line">	child.addR()</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="11-behaviors">
          <a href="#11-behaviors" class="heading-link"><i class="fas fa-link"></i></a><a href="#11-behaviors" class="headerlink" title="11. behaviors"></a>11. behaviors</h3>
      <p>是小程序中用于实现组件间代码共享的特性，类似于vue.hs中的”mixins”</p>
<p><strong>每个behavior可以包含一组属性、数据、生命周期函数和方法。组件引用它时，它的属性、数据和方法会被合并到组件中</strong></p>
<p>每个组件可以引用多个behavior，behavior也可以引用其他behavior</p>
<p><strong>创建behavior</strong></p>
<p>调用Behavior方法即可创建一个共享的behavior实例对象，供所有的组件使用</p>
<ol>
<li>根目录创建Behavior–创建my-behavior.js</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">module.exports = Behavior(&#123;</span><br><span class="line">  data:&#123;</span><br><span class="line">    username:&quot;沙比&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  properties:&#123;&#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>导入并使用behavior</li>
</ol>
<p>在组件中，使用require()方法导入需要的behavior，挂载后即可访问behavior中的数据和方法</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// components/test/test.ts</span><br><span class="line">const myBehavior = require(&quot;../../behaviors/my-behavior&quot;)</span><br><span class="line"></span><br><span class="line">Component(&#123;</span><br><span class="line">  behaviors:[myBehavior],</span><br><span class="line">    methods: &#123;</span><br><span class="line">    addR()&#123;</span><br><span class="line">      console.log(&quot;behavior定义的数据：&quot;,this.data.username);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">)&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="使用npm包">
          <a href="#使用npm包" class="heading-link"><i class="fas fa-link"></i></a><a href="#使用npm包" class="headerlink" title="使用npm包"></a>使用npm包</h2>
      <p>目前，小程序已经支持使用npm安装第三方包，从而来提高小程序的开发效率。但是，在小程序中使用npm包邮如下三个限制</p>
<ul>
<li><p>不支持依赖于Node.js内置库的包</p>
</li>
<li><p>不支持依赖于浏览器内置对象的包</p>
</li>
<li><p>不支持依赖于C++插件的包</p>
</li>
</ul>
<p><strong><font color="red">注意，每次安装npm包后都要在工具栏构建一次到<code>miniprogram_npm</code>中，建议每次都先清除<code>miniprogram_npm</code>，再构建</font></strong></p>
<p>构建时要注意project.config.json中配置的信息是否正确</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot;packNpmRelationList&quot;: [</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;packageJsonPath&quot;: &quot;./package.json&quot;,</span><br><span class="line">	//构建的项目地址</span><br><span class="line">    &quot;miniprogramNpmDistDir&quot;: &quot;../wx_test&quot;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="1-Vant-Webapp">
          <a href="#1-Vant-Webapp" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-Vant-Webapp" class="headerlink" title="1.Vant Webapp"></a>1.Vant Webapp</h3>
      <p>是有赞前端团队开源的一套小程序UI组件库。使用的是MIT开源许可协议</p>
<p>官方文档：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://youzan.github.io/vant-weapp">https://youzan.github.io/vant-weapp</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="2-安装Vant组件库">
          <a href="#2-安装Vant组件库" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-安装Vant组件库" class="headerlink" title="2.安装Vant组件库"></a>2.安装Vant组件库</h3>
      <p>在小程序项目中，安装Vant组件库分为以下步骤</p>
<ul>
<li><p>通过npm安装</p>
</li>
<li><p>构建npm包</p>
</li>
<li><p>修改app.json</p>
</li>
</ul>

        <h3 id="3-使用Vant组件">
          <a href="#3-使用Vant组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-使用Vant组件" class="headerlink" title="3.使用Vant组件"></a>3.使用Vant组件</h3>
      <p>安装完Vant组件库之后，可以在app.json的usingComponents节点中引入需要的组件，即可在wxml中直接使用组件(全局)</p>
<p>参考文档…</p>

        <h3 id="4-定制全局主题样式">
          <a href="#4-定制全局主题样式" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-定制全局主题样式" class="headerlink" title="4. 定制全局主题样式"></a>4. 定制全局主题样式</h3>
      <p>VantWeapp使用CSS变量来实现定制主题。关于CSS变量的基本用法，参考MDN文档</p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Using_CSS_custom_properties">https://developer.mozilla.org/zh-CN/docs/Web/CSS/Using_CSS_custom_properties</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><strong>1. 在app.wxss中，写入css变量，即可对全局生效</strong></p>
<p>&#x2F;&#x2F;修改按钮的背景色和边框</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">page&#123;</span><br><span class="line">  --button-primary-background-color:#C00000;</span><br><span class="line">  --button-primary-border-color:#D60000;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>样式变量参考文档。。。</p>
<p><strong>局部主题样式就在对应页面的wxss设置</strong></p>

        <h3 id="5-API-Promise化">
          <a href="#5-API-Promise化" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-API-Promise化" class="headerlink" title="5. API Promise化"></a>5. API Promise化</h3>
      <p>默认情况下，小程序官方提供的异步API都是基于回调函数实现的。</p>
<p>缺点：容易造成回调地狱</p>
<p><strong>API Promise化，指的是通过额外的配置，将官方提供的，基于回调函数的异步API,升级改造为基于Promise的异步API。从而提升代码可读性，维护性，解决回调地狱</strong></p>
<p><strong>1. 安装<code>miniprogram-api-promise@1.0.4</code></strong></p>
<p><code>npm install --save miniprogram-api-promise@1.0.4</code></p>
<p><strong>2. 构建npm</strong></p>
<p><strong>3. 小程序入口文件中的app.js文件中，只需调用一次promisifyAll()方法，即可实现异步API的Promise化</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import &#123;promisifyAll&#125; from &quot;miniprogram-api-promise&quot;</span><br><span class="line"></span><br><span class="line">const wxp = wx.p = &#123;&#125;</span><br><span class="line"></span><br><span class="line">promisifyAll(wx,wxp)</span><br></pre></td></tr></table></div></figure>

<p><strong>4. 组件方法使用</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">async getInfo()&#123;</span><br><span class="line">  const res = await wx.p.request(&#123;</span><br><span class="line">    method:&#x27;GET&#x27;,</span><br><span class="line">    url:&#x27;https://www.escook.cn/api/get&#x27;,</span><br><span class="line">    daata:&#123;</span><br><span class="line">      name:&quot;zs&quot;,</span><br><span class="line">      age:20</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  console.log(res);</span><br><span class="line">  </span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="6-全局数据共享">
          <a href="#6-全局数据共享" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-全局数据共享" class="headerlink" title="6. 全局数据共享"></a>6. 全局数据共享</h3>
      <p><strong>mobx-miniprogram</strong>配合<strong>mobx-miniprogram-bindings</strong>实现全局数据共享</p>
<ul>
<li><p>mobx-miniprogram用来创建store实例对象</p>
</li>
<li><p>mobx-miniprogram-bindings用来把Store中的共享数据或方法，绑定到组件或页面中使用</p>
</li>
</ul>
<p><strong>1. 安装</strong></p>
<p><code>npm install --save mobx-miniprogram@4.13.2 mobx-miniprogram-bindings@1.2.1</code></p>
<p><strong>2.创建MobX的Store实例</strong></p>
<p>项目根目录创建store目录–&gt;创建store.js文件</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import &#123;action, observable&#125; from &quot;mobx-miniprogram&quot;</span><br><span class="line"></span><br><span class="line">export const store = observable(&#123;</span><br><span class="line">  //数据字段</span><br><span class="line">  numA:1,</span><br><span class="line">  numB:2,</span><br><span class="line">  //计算属性（会监听值的变化自动更新此计算属性）</span><br><span class="line">  get sum()&#123;</span><br><span class="line">    return this.numA+this.numB</span><br><span class="line">  &#125;,</span><br><span class="line">  //actions方法，用来修改store中的数据</span><br><span class="line">  updateNum1:action(function(step)&#123;</span><br><span class="line">    this.numA += step</span><br><span class="line">  &#125;),</span><br><span class="line">  updateNum2:action(function(step)&#123;</span><br><span class="line">    this.numB += step</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="green">页面使用</font></strong></p>
<p><strong>1. 将store中的成员绑定页面中</strong></p>
<p>js页面</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import &#123;createStoreBindings&#125; from &quot;mobx-miniprogram-bindings&quot;</span><br><span class="line">import &#123;store&#125; from &#x27;../../store/store&#x27;</span><br><span class="line"></span><br><span class="line">Page(&#123;</span><br><span class="line">    onLoad() &#123;</span><br><span class="line">    if (wx.getUserProfile) &#123;</span><br><span class="line">      this.setData(&#123;</span><br><span class="line">        canIUseGetUserProfile: true</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * @storeBindings 绑定到页面实例上，以便页面Unload时可以销毁</span><br><span class="line">     * @this 代表当前页面实例，表示将以下内容绑定到当前页面实例上</span><br><span class="line">     * @store 数据源</span><br><span class="line">     * @fields 需要将哪些字段绑定使用</span><br><span class="line">     * @actions 将那些方法绑定使用</span><br><span class="line">     */</span><br><span class="line">    this.storeBindings = createStoreBindings(this,&#123;</span><br><span class="line">      store,</span><br><span class="line">      fields:[&#x27;numA&#x27;,&#x27;numB&#x27;,&#x27;sum&#x27;],</span><br><span class="line">      actions:[&#x27;updateNum1&#x27;]</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  onUnload:function()&#123;</span><br><span class="line">    //销毁</span><br><span class="line">    this.storeBindings.destroyStoreBindings()</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">)&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>2. 页面使用</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;&#123;&#123;numA&#125;&#125;+&#123;&#123;numB&#125;&#125; = &#123;&#123;sum&#125;&#125;&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">&lt;button type=&quot;primary&quot; bindtap = &quot;btnHandler&quot; data-step=&quot;&#123;&#123;1&#125;&#125;&quot;&gt;numA+1&lt;/button&gt;</span><br><span class="line">&lt;button type=&quot;warn&quot; bindtap=&quot;btnHandler&quot; data-step=&quot;&#123;&#123;-1&#125;&#125;&quot;&gt;numA-1&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">btnHandler(e)&#123;</span><br><span class="line">	this.updateNum1(e.currentTarget.dataset.step)</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="green">组件使用</font></strong></p>
<p><strong>1. js</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import &#123;storeBindingsBehavior&#125; from &quot;mobx-miniprogram-bindings&quot;</span><br><span class="line">import &#123;store&#125; from &quot;../../store/store&quot;</span><br><span class="line">// Components/numbers/numbers.js</span><br><span class="line">Component(&#123;</span><br><span class="line">  behaviors:[storeBindingsBehavior],</span><br><span class="line">  storeBindings:&#123;</span><br><span class="line">    //数据源</span><br><span class="line">    store,</span><br><span class="line">    //后面是store里面的名字，前面是提供的映射的名字(组件中使用的)</span><br><span class="line">    fields:&#123;</span><br><span class="line">    numA:&#x27;numA&#x27;,</span><br><span class="line">    numB:&#x27;numB&#x27;,</span><br><span class="line">    sum:&#x27;sum&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">    actions:&#123;</span><br><span class="line">      updateNum2:&#x27;updateNum2&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>2. wxml页面</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;&#123;&#123;numA&#125;&#125;+&#123;&#123;numB&#125;&#125; = &#123;&#123;sum&#125;&#125;&lt;/view&gt;</span><br><span class="line">&lt;button type=&quot;primary&quot; bindtap=&quot;btnHandler2&quot; data-step=&quot;&#123;&#123;1&#125;&#125;&quot;&gt;numB+1&lt;/button&gt;</span><br><span class="line">&lt;button type=&quot;warn&quot; bindtap=&quot;btnHandler2&quot; data-step=&quot;&#123;&#123;-1&#125;&#125;&quot;&gt;numB-1&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">。。。</span><br><span class="line"></span><br><span class="line">methods: &#123;</span><br><span class="line">	btnHandler2(e)&#123;</span><br><span class="line">	  this.updateNum2(e.target.dataset.step)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="分包">
          <a href="#分包" class="heading-link"><i class="fas fa-link"></i></a><a href="#分包" class="headerlink" title="分包"></a>分包</h2>
      <p>对小程序进行分包的好处主要有以下两点</p>
<ul>
<li><p>可以优化小程序首次启动的下载事件</p>
</li>
<li><p>在多团队共同开发时可以更好的解耦操作</p>
</li>
</ul>

        <h3 id="1-分包前项目的构成">
          <a href="#1-分包前项目的构成" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-分包前项目的构成" class="headerlink" title="1.分包前项目的构成"></a>1.分包前项目的构成</h3>
      <p>分包后，小程序项目由1个主包+多个分包组成</p>
<ul>
<li><p>主包：一般只包含项目的启动页面或TabBar页面，以及所有分包都需要用到的一些公共资源</p>
</li>
<li><p>分包：只包含和当前分包有关的页面和私有资源</p>
</li>
</ul>
<p><strong>分包的加载规则</strong></p>
<ul>
<li><p>在小程序启动时，默认会下载主包并启动主包界面</p>
<p>  tabBar页面需要放到主包中</p>
</li>
<li><p>当用户进入分包内某个页面时，客户端会把对应分包下载下来，下载完成后再进行展示</p>
<p>  非tabBar页面可以按照功能的不同，划分为不同的分包之后，进行按需下载</p>
</li>
</ul>

        <h3 id="2-分包的体积限制">
          <a href="#2-分包的体积限制" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-分包的体积限制" class="headerlink" title="2. 分包的体积限制"></a>2. 分包的体积限制</h3>
      <ul>
<li><p>整个小程序所有分包大爱小不能超过20M</p>
</li>
<li><p>单个分包不超过2M</p>
</li>
</ul>

        <h3 id="3-使用分包">
          <a href="#3-使用分包" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-使用分包" class="headerlink" title="3.使用分包"></a>3.使用分包</h3>
      <p><strong>通过subPackages节点，声明分包的结构。</strong></p>
<p>app.json目录：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&quot;pages&quot;:[],</span><br><span class="line">&quot;subPackages&quot;: [</span><br><span class="line">	&#123;</span><br><span class="line">	  &quot;root&quot;: &quot;pkgA&quot;,//第一个分包的根目录</span><br><span class="line">      &quot;name&quot;: &quot;p1&quot;,//分包别名</span><br><span class="line">	  &quot;pages&quot;: [	//当前分包下，所有页面的相对存放路径</span><br><span class="line">	    &quot;pages/cat/cat&quot;,</span><br><span class="line">	    &quot;pages/dog/dog&quot;</span><br><span class="line">	  ]</span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;</span><br><span class="line">	  &quot;root&quot;: &quot;pkgB&quot;,</span><br><span class="line">	  &quot;name&quot;: &quot;p2&quot;,//分包别名</span><br><span class="line">	  &quot;pages&quot;: [</span><br><span class="line">	    &quot;pages/apple/apple&quot;,</span><br><span class="line">	    &quot;pages/banana/banana&quot;</span><br><span class="line">	  ]</span><br><span class="line">	&#125;</span><br><span class="line">],</span><br></pre></td></tr></table></div></figure>

<p><strong>查看分包体积：详情–基本信息</strong></p>

        <h3 id="4-打包原则">
          <a href="#4-打包原则" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-打包原则" class="headerlink" title="4. 打包原则"></a>4. 打包原则</h3>
      <ul>
<li><p>小程序会按subpackages的配置进行分包。subpackages之外的目录将被打包到主包中</p>
</li>
<li><p>主包也可以有自己的pages(最外层的pages字段)</p>
</li>
<li><p>tabBar页面必须在主包内</p>
</li>
<li><p>分包之间不能相互嵌套</p>
</li>
</ul>

        <h3 id="5-引用原则">
          <a href="#5-引用原则" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-引用原则" class="headerlink" title="5. 引用原则"></a>5. 引用原则</h3>
      <ul>
<li><p>主包无法引用分包内的私有资源</p>
</li>
<li><p>分包之间不能相互引用私有资源</p>
</li>
<li><p>分包可以引用主包内的公共资源</p>
</li>
</ul>

        <h3 id="6-独立分包">
          <a href="#6-独立分包" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-独立分包" class="headerlink" title="6.独立分包"></a>6.独立分包</h3>
      <p>独立分包本质上也是分包。只不过比较特殊可以独立于主包和其他分包而单独运行</p>
<p>独立分包和普通分包的区别：<strong>是否依赖于主包才能运行</strong></p>
<p><strong>配置方法：</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&quot;subPackages&quot;: [</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;root&quot;: &quot;pkgA&quot;,</span><br><span class="line">    &quot;name&quot;: &quot;p1&quot;,</span><br><span class="line">    &quot;pages&quot;: [</span><br><span class="line">      &quot;pages/cat/cat&quot;,</span><br><span class="line">      &quot;pages/dog/dog&quot;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;root&quot;: &quot;pkgB&quot;,</span><br><span class="line">    &quot;name&quot;: &quot;p2&quot;,</span><br><span class="line">    &quot;pages&quot;: [</span><br><span class="line">      &quot;pages/apple/apple&quot;,</span><br><span class="line">      &quot;pages/banana/banana&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;independent&quot;: true	//添加此属性就成为独立分包</span><br><span class="line">  &#125;</span><br><span class="line">],</span><br></pre></td></tr></table></div></figure>

<p><strong>引用原则</strong></p>
<p>独立分包和普通分包以及主包之间，是相互隔绝的，不能相互引用彼此的资源！</p>
<ul>
<li><p>主包无法引用独立分包内的私有资源</p>
</li>
<li><p>独立分包之间，不能相互引用私有资源</p>
</li>
<li><p>独立分包和普通分包之间，不能相互引用私有资源</p>
</li>
<li><p>特别注意：独立分包中不能引用主包内的公共资源</p>
</li>
</ul>

        <h3 id="7-分包预下载">
          <a href="#7-分包预下载" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-分包预下载" class="headerlink" title="7.分包预下载"></a>7.分包预下载</h3>
      <p>在进入小程序的某个页面时，由框架自动预下载可能需要的分包，从而提升进入后续分包页面时的启动速度</p>
<p><strong>配置分包预下载</strong></p>
<p>预下载分包的行为，会在进入指定的页面时触发、在app.json中，使用preloadRule节点定义分包的预下载规则</p>
<p>app.json</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot;preloadRule&quot;: &#123; </span><br><span class="line">    &quot;pages/index/index&quot;:&#123; </span><br><span class="line">      &quot;network&quot;: &quot;wifi&quot;,</span><br><span class="line">      &quot;packages&quot;: [&quot;pkgA&quot;] </span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>
<p><strong>分包预下载的限制</strong></p>
<p>同一个分包的页面享有共同的预下载大小限额2M。</p>

        <h1 id="uni-app">
          <a href="#uni-app" class="heading-link"><i class="fas fa-link"></i></a><a href="#uni-app" class="headerlink" title="uni-app"></a>uni-app</h1>
      <p>通过HbuilderX将项目运行到微信开发者工具</p>
<p>1.manifest.json-微信小程序配置-添加appId</p>
<p>2.设置-运行配置-微信开发者工具路径配置</p>
<p>3.打开微信开发者工具。将设置-安全-服务端口打开</p>
<p>4.hBuilder中运行到小程序模拟器</p>
<p><strong>有时运行模拟器会卡住功能无法实现，可以先清缓存再关闭小程序开发工具重新打开。</strong></p>
<p><strong>配置Git</strong></p>
<ol>
<li>根目录创建忽略文件<code>.gitignore</code></li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/node_modules</span><br><span class="line">/unpackage/dist</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li><p>在unpackage中新建文件<code>.gitkeep</code>使Git不因为只有一个文件dist被忽略而不跟踪unpackage文件</p>
</li>
<li><p>git本地管理</p>
</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line">git commit -m &quot;init_project&quot;</span><br></pre></td></tr></table></div></figure>


        <h2 id="首页">
          <a href="#首页" class="heading-link"><i class="fas fa-link"></i></a><a href="#首页" class="headerlink" title="首页"></a>首页</h2>
      <p>request-miniprogram:<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.npmjs.com/package/@escook/request-miniprogram">https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;@escook&#x2F;request-miniprogram</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>小程序的请求不是依赖于浏览器，无法使用axios，但是本身的网络请求API比较简单。推荐使用<code>request-miniprogram</code></p>
<p><strong>1. 安装</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br><span class="line">npm install @escook/request-miniprogram</span><br></pre></td></tr></table></div></figure>

<p><strong>2. main.js中引入</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//导入网络请求的包</span><br><span class="line">import &#123; $http &#125; from &#x27;@escook/request-miniprogram&#x27;</span><br><span class="line">uni.$http = $http</span><br><span class="line">//请求拦截器</span><br><span class="line">$http.beforeRequest = function (options) &#123;</span><br><span class="line">  // do somethimg...</span><br><span class="line">  uni.showLoading(&#123;</span><br><span class="line">  	title:&quot;数据加载中...&quot;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">//响应拦截器</span><br><span class="line">$http.afterRequest = function () &#123;</span><br><span class="line">  // do something...</span><br><span class="line">  uni.hideLoading()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



        <h2 id="uniapp配置分包">
          <a href="#uniapp配置分包" class="heading-link"><i class="fas fa-link"></i></a><a href="#uniapp配置分包" class="headerlink" title="uniapp配置分包"></a>uniapp配置分包</h2>
      <ol>
<li><p>在项目根目录中，创建分包的根目录，命名为subpkg</p>
</li>
<li><p>在page.json中，和pages节点平级的位置声明subPackages节点，用来定义分包相关的结构</p>
</li>
</ol>

        <h1 id="相关问题">
          <a href="#相关问题" class="heading-link"><i class="fas fa-link"></i></a><a href="#相关问题" class="headerlink" title="相关问题"></a>相关问题</h1>
      <p><strong>1. 如果uniapp中v-for循环内部还存在v-for。那么两个循环的<code>:key</code>的变量不能是一样的，否则可能报错</strong></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/06/22/TypeScript01/">TypeScript01</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-06-22</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-06-24</span></span></div></header><div class="post-body"><div class="post-excerpt"><p><strong>TypeScript是什么：</strong></p>
<ol>
<li><p>以JavaScript为基础构建的语言</p>
</li>
<li><p>一个Javascript的超级</p>
</li>
<li><p>可以在任何支持JavaScript的平台执行</p>
</li>
<li><p>TypeScript扩展了JavaScript，并添加了类型</p>
</li>
</ol>

        <h1 id="使用">
          <a href="#使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#使用" class="headerlink" title="使用"></a>使用</h1>
      
        <h2 id="环境搭建">
          <a href="#环境搭建" class="heading-link"><i class="fas fa-link"></i></a><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2>
      <p><strong>1. 安装node.js</strong></p>
<p><strong>2. 使用npm全局安装typescript</strong></p>
<p><code>npm i -g typescript</code></p>
<p><strong>3. 创建ts文件</strong></p>
<p><strong>4. 使用tsc对ts文件进行编译</strong></p>
<ul>
<li><p>进入命令行</p>
</li>
<li><p>进入ts文件所在目录</p>
</li>
<li><p>执行命令：<code>tsc xxx.ts</code></p>
</li>
</ul>

        <h1 id="基本类型">
          <a href="#基本类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h1>
      
        <h2 id="类型声明">
          <a href="#类型声明" class="heading-link"><i class="fas fa-link"></i></a><a href="#类型声明" class="headerlink" title="类型声明"></a>类型声明</h2>
      
        <h3 id="1-类型声明">
          <a href="#1-类型声明" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-类型声明" class="headerlink" title="1.类型声明"></a>1.类型声明</h3>
      <ul>
<li><p>类型声明是TS非常重要的一个特点</p>
</li>
<li><p>通过类型声明可以指定TS中变量(参数，形参)的类型</p>
</li>
<li><p>指定类型后，当为变量赋值时，TS编译器会自动检查值是否符合类型声明，符合则赋值，否则报错</p>
</li>
<li><p>类型声明给变量设置了类型，使得变量只能存储某种类型的值</p>
</li>
</ul>
<p><strong>语法：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> 变量:类型;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> 变量:类型 = 值;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">参数:类型,参数:类型</span>):函数返回值类型&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-自动类型判断">
          <a href="#2-自动类型判断" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-自动类型判断" class="headerlink" title="2.自动类型判断"></a>2.自动类型判断</h3>
      <ul>
<li><p>TS拥有自动的类型判断机制</p>
</li>
<li><p>如果变量的声明和赋值是同时进行的，TS可以自动对变量进行类型检测</p>
</li>
</ul>
<p><code>let c = false;</code> (boolean值)</p>
<ul>
<li>如果你的变量的声明和赋值是同时进行的，可以省略掉类型声明</li>
</ul>

        <h3 id="3-类型">
          <a href="#3-类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-类型" class="headerlink" title="3.类型"></a>3.类型</h3>
      <ul>
<li><p>number 任意数字</p>
</li>
<li><p>string 任意字符串</p>
</li>
<li><p>boolean true&#x2F;false</p>
</li>
<li><p>字面量 （如：其本身） 限制变量的值就是该字面量的值</p>
</li>
</ul>
<p>可以使用<code>|</code>来连接多个类型</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//代表a的类型是字面量10，后续赋值只能为10</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>:<span class="number">10</span>;</span><br><span class="line">a = <span class="number">10</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line"><span class="comment">//代表b的值只能是male或者female</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">b</span>: <span class="string">&quot;male&quot;</span>|<span class="string">&quot;female&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">c</span>: <span class="string">&quot;male&quot;</span>|<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> d = boolean|string;</span><br></pre></td></tr></table></div></figure>

<p>也可以写为<code>let d:string&amp;number</code>，但没有意义。可以写成这样</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let d:&#123;name:string&#125;&amp;&#123;age:number&#125;</span><br><span class="line">d = &#123;name:&quot;张三&quot;,age:18&#125;</span><br></pre></td></tr></table></div></figure>

<ul>
<li>any 任意类型</li>
</ul>
<p>一个变量设置类型为any，相当于对该变量关闭了TS的类型检测(不建议使用)</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//显式any</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">d</span>:any</span><br><span class="line"><span class="comment">//隐式any(声明变量如果不指定类型，则TS解析器会自动判断变量的类型为any)</span></span><br><span class="line"><span class="keyword">let</span> e;</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注意：any类型的变量可以赋值给其他类型的变量。</font></strong></p>
<ul>
<li>unknown 类型安全的any</li>
</ul>
<p><strong>用法和any类似，但是unknown类型的变量，不能直接赋值给其他变量。只有在判断过同类型后才可以赋值</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let c:unknown = &quot;click&quot;</span><br><span class="line">let a :string = &quot;nices&quot;;</span><br><span class="line">if(typeof c === &quot;string&quot;)&#123;</span><br><span class="line">    a = c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//或者</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//类型断言(用来告诉解析器变量的实际类型，即使将c的值设置为一个number)</span><br><span class="line">a = c as string</span><br><span class="line">a = &lt;string&gt;c</span><br></pre></td></tr></table></div></figure>

<ul>
<li>void 没有值（或undefined）</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//以函数为例，就表示没有返回值的函数</span><br><span class="line">function fn():void&#123;</span><br><span class="line">    return;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ul>
<li>never 没有值（不能是任何值） 一般用来抛出错误，跑错了就不会返回任何值，包括undefined</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//never表示永远不会返回结果</span><br><span class="line">function fn():never&#123;</span><br><span class="line">    throw new Error(&quot;报错了&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(fn())</span><br></pre></td></tr></table></div></figure>
<ul>
<li>object 任意JS对象</li>
</ul>
<p>一般使用指定对象可以包含哪些属性的写法</p>
<p><strong>声明的对象属性和实例化的对象属性一致</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let a:&#123;name:string&#125;</span><br><span class="line">//结构需要一致，不多不少.</span><br><span class="line">//在属性名后面接上?,表示属性是可选的</span><br><span class="line">a = &#123;name:&quot;swk&quot;,age?:number&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>对象中至少有某一个属性</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let c:&#123;name:string,[propName:string]:any&#125;</span><br><span class="line">c = &#123;name:&quot;住吧就饿&quot;,age:18,address:&quot;add&quot;&#125;</span><br></pre></td></tr></table></div></figure>

<p><code>[propName:string]</code>:计算属性。表示属性名称为一个字符串</p>
<p><code>any</code>：表示属性的类型为任意</p>
<p><strong>限定定义的函数的参数，类型等</strong></p>
<p>语法：</p>
<p>(形参:类型,形参:类型…)&#x3D;&gt;返回值</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let d:(a:number,b:number)=&gt;number;</span><br><span class="line"></span><br><span class="line">d = function(n1,n2)&#123;</span><br><span class="line">    return n1+n2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>表示定义的函数d必须两个参数是number，返回值也是number</p>
<ul>
<li>array 任意JS数组</li>
</ul>
<ol>
<li><p>类型[]</p>
</li>
<li><p>Array&lt;类型&gt;</p>
</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//表示字符串数组</span><br><span class="line">let e:string[];</span><br><span class="line">e = [&#x27;aa&#x27;,&#x27;bb&#x27;,&#x27;cc&#x27;]</span><br><span class="line">//表示数值数组</span><br><span class="line">let f:number[];</span><br><span class="line">f = [12,2,32,65,5,652,352]</span><br><span class="line">//表示数值数组</span><br><span class="line">let g:Array&lt;number&gt;;</span><br><span class="line">g = [12,23,123]</span><br></pre></td></tr></table></div></figure>

<ul>
<li>tuple 元组。TS新增类型，固定长度数组</li>
</ul>
<p>语法：<code>[类型,类型,类型]</code></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let h:[string,string];</span><br><span class="line">h = [&quot;a&quot;,&quot;b&quot;]</span><br></pre></td></tr></table></div></figure>

<ul>
<li>enum 枚举，TS中新增类型</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//定义枚举</span><br><span class="line">enum Gender&#123;</span><br><span class="line">    Male=0,</span><br><span class="line">    Female=1</span><br><span class="line">&#125;</span><br><span class="line">let i:&#123;name:string,gender:0|1&#125;</span><br><span class="line"></span><br><span class="line">i = &#123;</span><br><span class="line">    name:&quot;孙悟空&quot;,</span><br><span class="line">    gender:Gender.Male</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(i.gender === Gender.Male)</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-类型的别名">
          <a href="#4-类型的别名" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-类型的别名" class="headerlink" title="4.类型的别名"></a>4.类型的别名</h3>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">type myType = string;</span><br><span class="line">let k:myType;</span><br><span class="line">k=&quot;abc&quot;</span><br><span class="line"></span><br><span class="line">type onetype = 1|2|3|4|5</span><br><span class="line">let b:onetype</span><br><span class="line">b=1</span><br></pre></td></tr></table></div></figure>


        <h1 id="编译选项">
          <a href="#编译选项" class="heading-link"><i class="fas fa-link"></i></a><a href="#编译选项" class="headerlink" title="编译选项"></a>编译选项</h1>
      
        <h2 id="自动编译文件">
          <a href="#自动编译文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#自动编译文件" class="headerlink" title="自动编译文件"></a>自动编译文件</h2>
      <ul>
<li>编译文件时，使用-w指令后，TS编译器会自动监视文件的变化，并在文件发生变化时对文件进行重新编译</li>
</ul>
<p><code>tsc xxx.ts -w</code></p>

        <h2 id="自动编译整个项目">
          <a href="#自动编译整个项目" class="heading-link"><i class="fas fa-link"></i></a><a href="#自动编译整个项目" class="headerlink" title="自动编译整个项目"></a>自动编译整个项目</h2>
      <ul>
<li><p>如果直接使用tsc指令，则可以自动将当前项目下的所有ts文件编译为js文件</p>
</li>
<li><p>使用tsc的前提，需要在项目根目录下创建一个ts的配置文件<code>tsconfig.json</code></p>
</li>
<li><p>tsconfig.json是一个json文件，添加文件后，只需tsc命令即可完成对整个项目的编译</p>
</li>
</ul>
<p><strong>1. 生成tsconfig.json</strong></p>
<p><code>tsc --init</code></p>
<p><strong>2. 编译所有tsc文件</strong></p>
<p><code>tsc</code></p>
<p><strong>3. 监视所有tsc文件</strong></p>
<p><code>tsc -w</code></p>
<p><strong>tsconfig.json</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  /*</span><br><span class="line">    include:用来指定哪些ts文件需要被编译</span><br><span class="line">    @** 任意目录</span><br><span class="line">    @* 任意文件</span><br><span class="line">   */</span><br><span class="line">  &quot;include&quot;: [</span><br><span class="line">    &quot;./src/**/*&quot;</span><br><span class="line">  ],</span><br><span class="line">  /*</span><br><span class="line">    不需要被编译的文件目录</span><br><span class="line">    默认值：[&quot;node_modules&quot;,&quot;bower_components&quot;,&quot;jspm_packages&quot;]</span><br><span class="line">  */</span><br><span class="line">  &quot;exclude&quot;: [</span><br><span class="line">    &quot;./src/test/**&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h2 id="compilerOptions配置选项">
          <a href="#compilerOptions配置选项" class="heading-link"><i class="fas fa-link"></i></a><a href="#compilerOptions配置选项" class="headerlink" title="compilerOptions配置选项"></a>compilerOptions配置选项</h2>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  /*</span><br><span class="line">    include:用来指定哪些ts文件需要被编译</span><br><span class="line">    @** 任意目录</span><br><span class="line">    @* 任意文件</span><br><span class="line">   */</span><br><span class="line">  &quot;include&quot;: [</span><br><span class="line">    &quot;./src/**/*&quot;</span><br><span class="line">  ],</span><br><span class="line">  /*</span><br><span class="line">    compilerOptions  编译器的选项</span><br><span class="line">  */</span><br><span class="line"> &quot;compilerOptions&quot;: &#123;</span><br><span class="line">  //用来指定ts被编译为的ES版本</span><br><span class="line">  &quot;target&quot;: &quot;ES2015&quot;,</span><br><span class="line">  //指定要使用的模块化的规范</span><br><span class="line">  // &quot;module&quot;: &quot;ES2015&quot;,</span><br><span class="line">  //指定项目中要使用的库（document等），一般不修改</span><br><span class="line">  // &quot;lib&quot;: []</span><br><span class="line">  //指定编译后文件所在的目录</span><br><span class="line">  &quot;outDir&quot;: &quot;./dist&quot;,</span><br><span class="line">  //将代码合并为一个文件(将编译后的文件合并到app.js中)</span><br><span class="line">  &quot;outFile&quot;: &quot;./dist/app.js&quot;,</span><br><span class="line">  //是否对js文件进行编译，默认false</span><br><span class="line">  &quot;allowJs&quot;: false,</span><br><span class="line">  //是否检查js代码是否符合语法规范</span><br><span class="line">  &quot;checkJs&quot;: false,</span><br><span class="line">  //是否移除编译后文件的注释</span><br><span class="line">  &quot;removeComments&quot;: false,</span><br><span class="line">  //不生成编译后的文件(不想编译，只是检查一下语法可以用一下)</span><br><span class="line">  &quot;noEmit&quot;: false,</span><br><span class="line">  //当有错误的时候不生成编译文件</span><br><span class="line">  &quot;noEmitOnError&quot;: false,</span><br><span class="line">  //所有严格检查的总开关（如果为true，所有的严格检查全部开启，后面再配置可能会覆盖）</span><br><span class="line">  &quot;strict&quot;: true,</span><br><span class="line">  //设置编译后的文件是否使用严格模式，默认false。如果有export import语句那默认就是严格模式</span><br><span class="line">  &quot;alwaysStrict&quot;: true,</span><br><span class="line">  //不允许隐式any类型</span><br><span class="line">  &quot;noImplicitAny&quot;: true,</span><br><span class="line">  //不允许类型不明确的this</span><br><span class="line">  &quot;noImplicitThis&quot;: true,</span><br><span class="line">  //严格的检查空值（如果值有可能为null，报错）</span><br><span class="line">  &quot;strictNullChecks&quot;: false,</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h1 id="使用Webpack打包ts代码">
          <a href="#使用Webpack打包ts代码" class="heading-link"><i class="fas fa-link"></i></a><a href="#使用Webpack打包ts代码" class="headerlink" title="使用Webpack打包ts代码"></a>使用Webpack打包ts代码</h1>
      <p><strong>1. 安装依赖</strong></p>
<p><code>npm i -D webpack webpack-cli ts-loader typescript</code></p>
<p><strong>2. webpack.config.js</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//引入包</span><br><span class="line">const path = require(&quot;path&quot;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">    //指定入口文件</span><br><span class="line">    entry: &quot;./src/app.ts&quot;,</span><br><span class="line">    //指定打包文件所在的目录</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, &quot;dist&quot;),</span><br><span class="line">        //打包后文件的文件</span><br><span class="line">        filename: &quot;bundle.js&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        rules: [&#123;</span><br><span class="line">            //test指定规则生效的文件</span><br><span class="line">            test: /\.ts$/,</span><br><span class="line">            //要使用的loader</span><br><span class="line">            use: &quot;ts-loader&quot;,</span><br><span class="line">            exclude: /node-modules/</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    mode: &quot;production&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h1 id="面向对象">
          <a href="#面向对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1>
      
        <h2 id="类-class">
          <a href="#类-class" class="heading-link"><i class="fas fa-link"></i></a><a href="#类-class" class="headerlink" title="类(class)"></a>类(class)</h2>
      
        <h3 id="1-定义类">
          <a href="#1-定义类" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-定义类" class="headerlink" title="1. 定义类"></a>1. 定义类</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> 类名&#123;</span><br><span class="line">	属性名:类型;</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params">参数:类型</span>)&#123;</span><br><span class="line">		<span class="variable language_">this</span>.属性名 = 参数;</span><br><span class="line">	&#125;</span><br><span class="line">	方法名()&#123;</span><br><span class="line">		...</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>例</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class Person&#123;</span><br><span class="line">    //实例属性</span><br><span class="line">    name:string = &quot;孙悟空&quot;;</span><br><span class="line">    age:number=38000;</span><br><span class="line">    //类属性(静态属性)</span><br><span class="line">    static address:string = &quot;花果山&quot;;</span><br><span class="line">    //只读属性</span><br><span class="line">    readonly sifu:string=&quot;唐僧&quot;;</span><br><span class="line"></span><br><span class="line">    static readonly gender:string = &quot;男&quot;;</span><br><span class="line"></span><br><span class="line">     sayHello(a:string):string&#123;</span><br><span class="line">        return a</span><br><span class="line">    &#125;;</span><br><span class="line">    static fn1()&#123;</span><br><span class="line">        console.log(&quot;please&quot;);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-构造函数">
          <a href="#2-构造函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-构造函数" class="headerlink" title="2. 构造函数"></a>2. 构造函数</h3>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class Person&#123;</span><br><span class="line">    name:string;</span><br><span class="line">    age:number;</span><br><span class="line">    constructor(name:string,age:number)&#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.age = age</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let p1 = new Person(&quot;张萨安&quot;,18)</span><br><span class="line">let p2 = new Person(&quot;李四四&quot;,19)</span><br><span class="line">console.log(p1);</span><br><span class="line">console.log(p2);</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-继承">
          <a href="#3-继承" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-继承" class="headerlink" title="3. 继承"></a>3. 继承</h3>
      <p>使用继承后，子类将会有父类所有的方法和属性。</p>
<p>通过继承可以将多个类中共有的代码写在一个父类中。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">class Animal&#123;</span><br><span class="line">    name:string;</span><br><span class="line">    age:number;</span><br><span class="line">    constructor(name:string,age:number)&#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.age = age</span><br><span class="line">        console.log(name,age</span><br><span class="line">            </span><br><span class="line">            );</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    sayHello()&#123;</span><br><span class="line">        console.log(this.name+&quot;动物叫叫&quot;);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//Dog继承Animal</span><br><span class="line">class Dog extends Animal&#123;</span><br><span class="line">    run()&#123;</span><br><span class="line">        console.log(`$&#123;this.name&#125;在跑`);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    //重写</span><br><span class="line">    sayHello() &#123;</span><br><span class="line">        console.log(&quot;汪汪汪&quot;);</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-super关键字">
          <a href="#4-super关键字" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-super关键字" class="headerlink" title="4.super关键字"></a>4.super关键字</h3>
      <p>super表示父类</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">class Animal&#123;</span><br><span class="line">    name:string;</span><br><span class="line">    age:number;</span><br><span class="line">    constructor(name:string,age:number)&#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.age = age</span><br><span class="line">        console.log(name,age );</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    sayHello()&#123;</span><br><span class="line">        console.log(this.name+&quot;动物叫叫&quot;);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//Dog继承Animal</span><br><span class="line">class Dog extends Animal&#123;</span><br><span class="line">    constructor(name:string,age:number)&#123;</span><br><span class="line">        //需要调用父类的构造函数才可以确保继承的正常。如果不写构造函数默认会继承</span><br><span class="line">        super(name,age)</span><br><span class="line">    &#125;</span><br><span class="line">    run()&#123;</span><br><span class="line">        console.log(`$&#123;this.name&#125;在跑`);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    //重写</span><br><span class="line">    sayHello() &#123;</span><br><span class="line">        super.sayHello()</span><br><span class="line">        console.log(&quot;汪汪汪&quot;);</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="5-抽象类">
          <a href="#5-抽象类" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-抽象类" class="headerlink" title="5. 抽象类"></a>5. 抽象类</h3>
      <p>关键字abstract</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">abstract class Animal&#123;</span><br><span class="line">    name:string;</span><br><span class="line">    age:number;</span><br><span class="line">    constructor(name:string,age:number)&#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.age = age</span><br><span class="line">        console.log(name,age );</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    abstract sayHello():void;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>抽象类不可以创建实例</p>
<p><strong>抽象方法使用abstract开头，没有方法体。抽象方法只能定义在抽象类中，并且子类必须对抽象方法进行重写</strong></p>

        <h3 id="6-接口">
          <a href="#6-接口" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-接口" class="headerlink" title="6.接口"></a>6.接口</h3>
      <p><strong>接口用来定义一个类结构，用来定义一个类中应该包含哪些属性和方法；同时接口也可以当成类型声明去使用</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">interface myInterface&#123;</span><br><span class="line">    name:string;</span><br><span class="line">    age:number;</span><br><span class="line">    sayHi():void;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface myInterface&#123;</span><br><span class="line">    gender:string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const obk:myInterface = &#123;</span><br><span class="line">    name:&quot;这时&quot;,</span><br><span class="line">    age:15,</span><br><span class="line">    gender:&quot;男&quot;,</span><br><span class="line">    sayHi()&#123;</span><br><span class="line">        console.log(&quot;please&quot;);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>接口可以定义两个同名。实现时应该是实现两个接口的合并</p>
<p><strong>注：接口中的所有的属性都不能有实际的值。接口只定义对象的结构，而不考虑实际值。所以在接口中所有的方法都是抽象方法</strong></p>

        <h3 id="7-属性的封装">
          <a href="#7-属性的封装" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-属性的封装" class="headerlink" title="7.属性的封装"></a>7.属性的封装</h3>
      <p><strong>TS可以在属性前添加属性的修饰符</strong></p>
<ul>
<li><p>public 共有的，修饰的属性可以在任意位置访问、修改</p>
</li>
<li><p>private 私有的，修饰的属性只能在类内部进行修改。也不能在子类中访问</p>
</li>
<li><p>protected 受保护的，修饰的属性只能在当前类和当前类的子类中使用</p>
</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">class Person&#123;</span><br><span class="line"></span><br><span class="line">    private _name:string;</span><br><span class="line">    private _age:number;</span><br><span class="line">    constructor(name:string,age:number)&#123;</span><br><span class="line">        this._name = name</span><br><span class="line">        this._age = age</span><br><span class="line">    &#125;</span><br><span class="line">    //定义方法 用来获取私有属性</span><br><span class="line">    getName()&#123;</span><br><span class="line">        return this._name</span><br><span class="line">    &#125;</span><br><span class="line">    //设置属性</span><br><span class="line">    setName(value:string)&#123;</span><br><span class="line">        this._name = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>getter方法用来读取属性</p>
<p>setter方法用来设置属性</p>
<p>它们被称为属性的存取器</p>
<p><strong>TS中设置getter&#x2F;setter方法</strong></p>
<p>可以直接使用</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">class Person&#123;</span><br><span class="line"></span><br><span class="line">    private _name:string;</span><br><span class="line">    private _age:number;</span><br><span class="line">    constructor(name:string,age:number)&#123;</span><br><span class="line">        this._name = name</span><br><span class="line">        this._age = age</span><br><span class="line">    &#125;</span><br><span class="line">    get name()&#123;</span><br><span class="line">        return this._name</span><br><span class="line">    &#125;</span><br><span class="line">    set name(value:string)&#123;</span><br><span class="line">        this._name = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let per = new Person(&quot;小狗蛋&quot;,15)</span><br><span class="line">per.name = &quot;孙悟空&quot;</span><br><span class="line">console.log(per.name);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>初始化类简写</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class C&#123;</span><br><span class="line">	//注意此处需要有修饰符</span><br><span class="line">    constructor(public name:string,public age:number)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const c = new C(&quot;xxx&quot;,11)</span><br><span class="line">console.log(c);</span><br></pre></td></tr></table></div></figure>

<p>等价于</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class C&#123;</span><br><span class="line">    name:string;</span><br><span class="line">    age:number;</span><br><span class="line">    constructor( name:string, age:number)&#123;</span><br><span class="line">        this.name = name</span><br><span class="line">        this.age = age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="泛型">
          <a href="#泛型" class="heading-link"><i class="fas fa-link"></i></a><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2>
      <p><strong>定义函数或是类时，如果遇到类型不明确的，就可以使用泛型</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function fn&lt;K&gt;(a:K):K&#123;</span><br><span class="line">    return a</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>K表示任意类型，现在不知道，只有调用的时候才知道，K可以是其他来指代，如T</strong></p>
<p><code>fn(10)</code></p>
<p>自动判断出K的类型为number</p>
<p><strong>手动指定泛型</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fn&lt;String&gt;(&#x27;hello&#x27;)</span><br></pre></td></tr></table></div></figure>

<p><strong>泛型可以同时指定多个</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function fn2&lt;T,K&gt;(a:T,b:K)&#123;</span><br><span class="line">    console.log(b);</span><br><span class="line">    return a</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn2(123,&quot;hello&quot;)</span><br></pre></td></tr></table></div></figure>

<p><strong>T extends Inter  表示泛型T必须是Inter实现类(子类)或者实现对象</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">interface inter&#123;</span><br><span class="line">    name:string,</span><br><span class="line">    num:number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function fn3&lt;T extends inter&gt;(a:T):number&#123;</span><br><span class="line">    return a.num</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(fn3(&#123;name:&quot;张三&quot;,num:15&#125;));</span><br><span class="line"></span><br><span class="line">//或者</span><br><span class="line"></span><br><span class="line">class a implements inter&#123;</span><br><span class="line">    name: string;</span><br><span class="line">    num: number;</span><br><span class="line">    constructor(name:string,num:number)&#123;</span><br><span class="line">        this.name = name</span><br><span class="line">        this.num = num</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let p = new a(&quot;张三&quot;,18)</span><br><span class="line">console.log(fn3(p));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//特殊用法(length关键字)</span><br><span class="line">interface inter&#123;</span><br><span class="line">  </span><br><span class="line">    length:number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function fn3&lt;T extends inter&gt;(a:T)&#123;</span><br><span class="line">    return a.length</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fn3(&#x27;123&#x27;)</span><br></pre></td></tr></table></div></figure>

<p><strong>类中使用泛型</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class MyClass&lt;T&gt;&#123;</span><br><span class="line">    name:T;</span><br><span class="line">    constructor(name:T)&#123;</span><br><span class="line">        this.name = name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">const mc = new MyClass&lt;string&gt;(&#x27;孙武空&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>总结，泛型就是在类型不明确的时候声明一个变量来表示类型</strong></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/06/12/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/">前端面试相关</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-06-12</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-06-26</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="HTML">
          <a href="#HTML" class="heading-link"><i class="fas fa-link"></i></a><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1>
      <p><strong>1.HTML语义化的理解</strong></p>
<blockquote>
<p>用正确的标签做正确的事情。<br>html 语义化让页面的内容结构化，结构更清晰，便于对浏览器、搜索引擎解析；即使在没有样式 CSS 情况下也以一种文档格式显示，并且是容易阅读的;<br>搜索引擎的爬虫也依赖于 HTML 标记来确定上下文和各个关键字的权重，利于 SEO;<br>使阅读源代码的人对网站更容易将网站分块，便于阅读维护理解。</p>
</blockquote>
<p><strong>2. 标签上 title 与 alt 属性的区别是什么？</strong></p>
<blockquote>
<p>alt 是给搜索引擎识别，在图像无法显示时的替代文本；<br>title 是关于元素的注释信息，主要是给用户解读。<br>当鼠标放到文字或是图片上时有 title 文字显示。（因为 IE 不标准）在 IE 浏览器中 alt 起到了 title 的作用，变成文字提示。<br>在定义 img 对象时，将 alt 和 title 属性写全，可以保证在各种浏览器中都能正常使用。</p>
</blockquote>
<p><strong>3. href 与 src？</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">href (Hypertext Reference)指定网络资源的位置，从而在当前元素或者当前文档和由当前属性定义的需要的锚点或资源之间定义一个链接或者关系。（目的不是为了引用资源，而是为了建立联系，让当前标签能够链接到目标地址。）</span><br><span class="line">src source（缩写），指向外部资源的位置，指向的内容将会应用到文档中当前标签所在位置。</span><br><span class="line">href与src的区别</span><br><span class="line">1、请求资源类型不同：href 指向网络资源所在位置，建立和当前元素（锚点）或当前文档（链接）之间的联系。在请求 src 资源时会将其指向的资源下载并应用到文档中，比如 JavaScript 脚本，img 图片；</span><br><span class="line">2、作用结果不同：href 用于在当前文档和引用资源之间确立联系；src 用于替换当前内容；</span><br><span class="line">3、浏览器解析方式不同：当浏览器解析到src ，会暂停其他资源的下载和处理，直到将该资源加载、编译、执行完毕，图片和框架等也如此，类似于将所指向资源应用到当前内容。这也是为什么建议把 js 脚本放在底部而不是头部的原因。</span><br></pre></td></tr></table></div></figure>


        <h1 id="CSS">
          <a href="#CSS" class="heading-link"><i class="fas fa-link"></i></a><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1>
      <p><strong>1. 简明说一下 CSS link 与 @import 的区别和用法？</strong></p>
<p>link 是 XHTML 标签，除了加载CSS外，还可以定义 RSS 等其他事务；@import 属于 CSS 范畴，只能加载 CSS。</p>
<p>link 引用 CSS 时，在页面载入时同时加载；@import 需要页面网页完全载入以后加载。</p>
<p>link 是 XHTML 标签，无兼容问题；@import 是在 CSS2.1 提出的，低版本的浏览器不支持。</p>
<p>link 支持使用 Javascript 控制 DOM 去改变样式；而@import不支持。</p>
<p><strong>2. rgba和opacity的透明效果有什么不同？</strong></p>
<p>opacity 会继承父元素的 opacity 属性，而 RGBA 设置的元素的后代元素不会继承不透明属性。</p>
<p><strong>3. display:none和visibility:hidden的区别？</strong></p>
<p>display:none 隐藏对应的元素，在文档布局中不再给它分配空间，它各边的元素会合拢，就当他从来不存在。</p>
<p>visibility:hidden 隐藏对应的元素，但是在文档布局中仍保留原来的空间。</p>
<p><strong>4. position的值， relative和absolute分别是相对于谁进行定位的？</strong></p>
<p>relative:相对定位，相对于自己本身在正常文档流中的位置进行定位。</p>
<p>absolute:生成绝对定位，相对于最近一级定位不为static的父元素进行定位。</p>
<p>fixed: （老版本IE不支持）生成绝对定位，相对于浏览器窗口或者frame进行定位。</p>
<p>static:默认值，没有定位，元素出现在正常的文档流中。</p>
<p>sticky:生成粘性定位的元素，容器的位置根据正常文档流计算得出。</p>

        <h1 id="Vue">
          <a href="#Vue" class="heading-link"><i class="fas fa-link"></i></a><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h1>
      <p><strong>1. v-if 和 v-for的优先级</strong></p>
<ol>
<li><p>实践中，不应该把v-if和v-for放在一起</p>
</li>
<li><p>在vue2中，v-for的优先级高于v-if。vue3中，相反，v-if的优先级高于v-for</p>
</li>
<li><p>一般同时存在元素上可能是要对列表进行过滤，此时我们可以使用计算属性解决避免v-if和v-for同时使用</p>
</li>
</ol>
<p><strong>2. 简述vue的生命周期以及每个阶段做的事情</strong></p>
<ol>
<li><p>概述：每个Vue组件实例被创建后都会经过一系列初始化步骤，比如数据观测，模板编译，挂载实例到dom上，以及数据变化时更新dom。这个过程中会运行叫做生命周期钩子的函数，便于用户在特定阶段添加他们自己的代码</p>
</li>
<li><p>8个阶段：创建前后，载入前后，更新前后，销毁前后，以及一些特殊场景的生命周期。</p>
</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">beforeCreate:通常用于插件开发中执行一些初始化任务</span><br><span class="line">created：组件初始化完毕，可以访问各种数据，获取接口数据</span><br><span class="line">mounted：dom已创建，可用于获取访问数据和dom元素，访问子组件等</span><br><span class="line">beforeUpdate：此时view层还未更新</span><br><span class="line">updated：完成view层的更新，更新后所有状态已是最新</span><br><span class="line">beforeunmounted：实例被销毁前调用，可用于一些定时器或订阅的取消</span><br><span class="line">unmounted：销毁一个实例，可清理它与其他实例的连接等</span><br></pre></td></tr></table></div></figure>

<p><strong>3. v-model双向绑定使用和原理</strong></p>
<ol>
<li><p>双绑定义：vue中双向绑定是一个指令<code>v-model</code>，可以绑定一个响应式数据到视图，同时视图中变化能改变该值。</p>
</li>
<li><p><code>v-model</code>是一个语法堂，默认情况下相当于<code>:value</code>和<code>@input</code>.使用<code>v-model</code>可以减少大量繁琐的事件处理代码，提高开发效率。</p>
</li>
</ol>
<p><strong>4. Vue中如何扩展一个组件</strong></p>
<ol>
<li>按照逻辑扩展和内容扩展：</li>
</ol>
<p>逻辑扩展：mixins、extends、composition api；</p>
<p>内容扩展：slots</p>
<ol start="2">
<li><p>混入mixins是分发Vue组件中可复用功能的非常灵活的方式，混入对象可以包含任意组件选项、当组件使用混入对象时，所有混入对象的选项将被混入该组件本身的选项；混入的数据和方法不能明确判断来源且可能和当前组件内变量产生命名冲突，所以vue3中引入的composition api可以很好的解决这些问题。</p>
</li>
<li><p>插槽主要用于vue组件中的内容分发，也可以用于组件扩展</p>
</li>
</ol>
<p><strong>5. 子组件可以直接改变父组件的数据吗</strong></p>
<p>可以。但是不建议子组件直接修改父组件的数据。</p>
<p><strong>5. Vue项目权限管理如何做</strong></p>
<ol>
<li><p>页面权限和按钮权限</p>
</li>
<li><p>具体实现分后端和前端两种方案</p>
</li>
</ol>
<ul>
<li><p>前端方案：会把所有路由信息在前端配置，通过路由守卫要求用户登录，用户登录后根据角色过滤出路由表、比如配置一个<code>asyncRoutes</code>数组，需要认证的页面在其路由的<code>meta</code>中添加一个<code>roles</code>字段，等获取用户角色之后取两者的交集，若结果不为空则说明可以访问。此过滤过程结束。剩下啊的路由就是该用户能访问的页面，最后通过<code>router.addRoutes(accessRoutes)</code>方式动态添加路由即可</p>
</li>
<li><p>后端方案会把所有页面路由信息存在数据库中，用户登录的时候根据其角色查询得到岂能访问的所有页面路由信息返回给前端，前端再通过<code>addRoutes</code>动态路由添加路由信息</p>
</li>
<li><p>按钮权限的控制通常会实现一个指令，例如<code>v-permission</code>，将按钮要求角色通过值传递给v-permission指令，在指令的<code>mounted</code>钩子中可以判断当前用户角色和按钮是否存在交集。有则保留按钮，无则移除按钮</p>
</li>
</ul>
<p><strong>6. 说一说对vue响应式理解</strong></p>
<ol>
<li><p>所谓的数据响应式就是能够使数据变化可以被检测并对这种变化做出响应的机制</p>
</li>
<li><p>MVVM框架中要解决的一个核心问题是连接数据层和视图层，通过数据驱动应用，数据变化，视图更新，要做到这点就需要对数据做响应式处理，这样一旦数据发生变化就可以立即做出更新处理。</p>
</li>
<li><p>以vue为例，通过数据响应式加上虚拟DOM和patch算法，开发人员只需要操作数据，关心业务，完全不用接触繁琐的dom操作，从而大大提升开发效率，降低开发难度。</p>
</li>
<li><p>vue2中的数据响应式会更根据数据类型来做不同处理，如果是对象则采用Object.defineProperty()的方式定义数据拦截，当数据被访问或者发生变化时，我们感知并做出响应；如果是数组则通过覆盖数据对象原型的7个变更方法，使这些方法可以额外的做出更新通知，从而做出相应。这种机制很好的解决了数据响应化的问题。缺点：初始化时的递归遍历会造成性能损失；新增或删除属性时需要用户使用Vue.set&#x2F;dekete这样特殊的api才能生效；对于ES6中新产生的Map Set这些数据结构不支持等问题。</p>
</li>
<li><p>为了解决这些问题，vue3重新编写了这一部分的实现，利用ES6的Proxy代理要响应化的数据。好处：不需要使用特殊api，初始化性能和内存消耗都得到了大幅改善</p>
</li>
</ol>
<p><strong>7. 虚拟DOM的理解</strong></p>
<ol>
<li><p>虚拟DOM  顾名思义就是虚拟的dom对象，它本身就是一个<code>Javascript</code>对象，只不过它是通过不同的属性去描述一个视图结构。</p>
</li>
<li><p>好处：将真实元素节点抽象成虚拟节点，有效减少直接操作dom次数，从而提高程序性能。</p>
</li>
</ol>
<ul>
<li>直接操作dom是有限制的，比如：diff、clone等操作，一个真实元素上右许多的内容如果直接对其进行diff操作，回去额外diff一些没有必要的内容。但是如果将这些操作转移到javascript对象上就比较简单了。</li>
</ul>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/06/10/CSS%E5%B8%B8%E7%94%A8%E5%B8%83%E5%B1%80%E6%96%B9%E6%B3%95/">CSS常用布局方法</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-06-10</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-06-21</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="PC">
          <a href="#PC" class="heading-link"><i class="fas fa-link"></i></a><a href="#PC" class="headerlink" title="PC"></a>PC</h1>
      
        <h2 id="布局">
          <a href="#布局" class="heading-link"><i class="fas fa-link"></i></a><a href="#布局" class="headerlink" title="布局"></a>布局</h2>
      <p><strong>1. 元素垂直居中</strong></p>
<p>对于没有设置宽高的元素，将其在父元素中垂直居中</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    * &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.outer</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.opg</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">left</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">top</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;opg&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../images/OIP-C (3).jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>将元素绝对定位后，left和top都距父元素50%，再用transfor属性偏移相对于自身的50%实现垂直居中</p>
</blockquote>
<p><img src="/2022/06/10/CSS%E5%B8%B8%E7%94%A8%E5%B8%83%E5%B1%80%E6%96%B9%E6%B3%95/2022-06-10_165822.png"></p>

        <h1 id="移动">
          <a href="#移动" class="heading-link"><i class="fas fa-link"></i></a><a href="#移动" class="headerlink" title="移动"></a>移动</h1>
      
        <h2 id="样式">
          <a href="#样式" class="heading-link"><i class="fas fa-link"></i></a><a href="#样式" class="headerlink" title="样式"></a>样式</h2>
      
        <h3 id="1-特殊样式">
          <a href="#1-特殊样式" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-特殊样式" class="headerlink" title="1. 特殊样式"></a>1. 特殊样式</h3>
      <p><strong>1)去除点击a高亮：</strong></p>
<figure class="highlight css"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-webkit-tap-highlight-<span class="attribute">color</span>: transparent;</span><br></pre></td></tr></table></div></figure>

<p><strong>2)去除按钮的默认外观</strong></p>
<figure class="highlight css"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span> &#123;</span><br><span class="line">    -webkit-appearance: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



        <h3 id="2-Flex">
          <a href="#2-Flex" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-Flex" class="headerlink" title="2.Flex"></a>2.Flex</h3>
      <p><strong>关于给flex容器属性align-items(子元素未设置宽度高度的情况下)</strong></p>
<ol>
<li><p>设置stretch(拉伸)，并给子元素加上flex-grow的属性，才会使元素自动拉伸</p>
</li>
<li><p>设置其他属性如center，即使子元素加上flex-grow的属性，子元素也不会自动拉伸，且没有宽度</p>
</li>
</ol>

        <h2 id="rem布局">
          <a href="#rem布局" class="heading-link"><i class="fas fa-link"></i></a><a href="#rem布局" class="headerlink" title="rem布局"></a>rem布局</h2>
      
        <h3 id="1-rem单位">
          <a href="#1-rem单位" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-rem单位" class="headerlink" title="1.rem单位"></a>1.rem单位</h3>
      <p>rem(root em)是一个相对单位，类似于em，em是父元素字体大小。不同的是rem的基准是相对于html元素的字体大小</p>
<p>比如：根元素(html)设置font-size&#x3D;12px；非根元素设置width:2rem;则换成px表示就是24px</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/06/09/web-webpack01/">web-webpack01</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-06-09</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-06-21</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="基本使用">
          <a href="#基本使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h1>
      
        <h2 id="功能">
          <a href="#功能" class="heading-link"><i class="fas fa-link"></i></a><a href="#功能" class="headerlink" title="功能"></a>功能</h2>
      
        <h3 id="01-Webpack介绍">
          <a href="#01-Webpack介绍" class="heading-link"><i class="fas fa-link"></i></a><a href="#01-Webpack介绍" class="headerlink" title="01 Webpack介绍"></a>01 Webpack介绍</h3>
      <p><strong>webpack是一个静态资源打包工具</strong></p>
<p>它会以一个或多个文件作为打包的入口，将我们整个项目的所有文件编译组合成一个或多个文件输出出去</p>
<p>输出的文件就是编译好的文件，就可以在浏览器运行了</p>
<p>Webpack输出的文件叫做bundle</p>
<p><strong>注：浏览器并不识别ES6的模块化</strong></p>

        <h3 id="02-开始使用">
          <a href="#02-开始使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#02-开始使用" class="headerlink" title="02. 开始使用"></a>02. 开始使用</h3>
      <p><strong>下载依赖</strong></p>
<ol>
<li>初始化</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></div></figure>
<p>需要注意package.json温家安中name字段不能叫做webpack，否则下一步会报错</p>
<ol start="2">
<li>下载依赖</li>
</ol>
<p><code>npm i webpack webpack-cli -D</code></p>
<p><strong>启用webpack</strong></p>
<ul>
<li>开发模式</li>
</ul>
<p><code>npx webpack ./src/main.js --mode=development</code></p>
<ul>
<li>生产模式</li>
</ul>
<p><code>npx webpack ./src/main.js --mode=production</code></p>
<p><code>npx webpack</code>：是用来运行本地安装webpack包</p>
<p><code>./src/main.js</code>:指定webpack从main.js文件开始打包，不但会打包main.js，还会将其依赖也一起打包进来</p>

        <h1 id="基本配置">
          <a href="#基本配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h1>
      
        <h2 id="核心概念">
          <a href="#核心概念" class="heading-link"><i class="fas fa-link"></i></a><a href="#核心概念" class="headerlink" title="核心概念"></a>核心概念</h2>
      <ol>
<li>entry(入口)</li>
</ol>
<p>指示Webpack从哪个文件开始打包</p>
<ol start="2">
<li>output(输出)</li>
</ol>
<p>指示Webpack打包完的文件输出到那里去，如何命名等..</p>
<ol start="3">
<li>loader(加载器)</li>
</ol>
<p>Webpack本身只能处理js，JSON等资源，其他资源需要借助loader，WEbpack才能解析</p>
<ol start="4">
<li>plugins(插件)</li>
</ol>
<p>扩展Webpack功能</p>
<ol start="5">
<li>mode(模式)</li>
</ol>
<ul>
<li><p>开发模式：development</p>
</li>
<li><p>生产模式：production</p>
</li>
</ul>

        <h2 id="准备Webpack配置文件">
          <a href="#准备Webpack配置文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#准备Webpack配置文件" class="headerlink" title="准备Webpack配置文件"></a>准备Webpack配置文件</h2>
      <p>在项目<strong>根目录</strong>下新建文件：webpack.config.js</p>
<p>配置：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//所有配置文件最终都是在nodeJS平台运行，所以模块化采用commonJS模块化</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">//入口（此处用相对路径）</span></span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">    <span class="comment">//输出</span></span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 输出路径（此处要用绝对路径）</span></span><br><span class="line"><span class="comment">         * @__dirname  nodejs的变量，代表当前文件的文件夹目录(下的dist)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="comment">//要输出的文件名称</span></span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;main.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//加载器</span></span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            <span class="comment">//loader的配置</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//插件</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="comment">//plugin的配置</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">//模式</span></span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>运行：<code>npx webpack</code></p>

        <h2 id="处理样式资源">
          <a href="#处理样式资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#处理样式资源" class="headerlink" title="处理样式资源"></a>处理样式资源</h2>
      
        <h3 id="1-处理css资源">
          <a href="#1-处理css资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-处理css资源" class="headerlink" title="1. 处理css资源"></a>1. 处理css资源</h3>
      <p>Webpack本身是不能识别样式资源的，所以我们需要借助Loader来帮助Webpack解析样式资源。</p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders" title="官方文档">https://webpack.docschina.org/loaders</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>(1) 首先，你需要先安装 css-loader：</p>
<p><code>npm install --save-dev css-loader</code></p>
<p>(2) 然后把 对应样式 引用到你 webpack 的配置中。如下所示：</p>
<p>main.js:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&#x27;./js/count&#x27;</span></span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&#x27;./js/sum&#x27;</span></span><br><span class="line"><span class="comment">//想要Webpack打包资源，必须引入资源</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./css/index.css&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>))</span><br></pre></td></tr></table></div></figure>

<p>(3) webpack.config.js配置</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载器</span></span><br><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">        <span class="comment">//loader的配置</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/i</span>, <span class="comment">//只检测以css结尾文件，才会使用下面规则进行处理</span></span><br><span class="line">            <span class="attr">use</span>: [</span><br><span class="line">                <span class="string">&quot;style-loader&quot;</span>, <span class="comment">//将js中css通过创建style标签添加到html文件中生效</span></span><br><span class="line">                <span class="string">&quot;css-loader&quot;</span> <span class="comment">//将css资源编译成commonjs的模块到js中</span></span><br><span class="line">            ], <span class="comment">//use执行顺序：从右到左(从下到上)</span></span><br><span class="line">        &#125;,</span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>一般来讲，用了什么loader就下载什么loader，此处下载两个</p>
</blockquote>

        <h3 id="2-处理less资源">
          <a href="#2-处理less资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-处理less资源" class="headerlink" title="2.处理less资源"></a>2.处理less资源</h3>
      <p>(1) 首先，你需要先安装 less 和 less-loader：</p>
<p><code>npm install less less-loader --save-dev</code></p>
<p>(2) 加载器配置</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.less$/i</span>,</span><br><span class="line">   <span class="comment">//此处是use，官方文档写的loader(loader属性只能配置一个loader，use可配置多个)</span></span><br><span class="line"> 	<span class="attr">use</span>: [</span><br><span class="line">        <span class="comment">// compiles Less to CSS</span></span><br><span class="line">        <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;less-loader&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="其他saas，stylus等资源处理同理">
          <a href="#其他saas，stylus等资源处理同理" class="heading-link"><i class="fas fa-link"></i></a><a href="#其他saas，stylus等资源处理同理" class="headerlink" title="其他saas，stylus等资源处理同理"></a>其他saas，stylus等资源处理同理</h3>
      
        <h3 id="3-处理图片资源">
          <a href="#3-处理图片资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-处理图片资源" class="headerlink" title="3. 处理图片资源"></a>3. 处理图片资源</h3>
      <p>过去的webpack4，处理图片资源时通过<code>file-loader</code>和<code>url-loader</code>进行处理</p>
<p>现在webpack5已经将两个Loader功能内置到webpack里了，只需要简单配置即可处理图片资源</p>
<p>(1) css引用图片</p>
<figure class="highlight css"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box3</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">700px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">../images/20220429142150_1.jpg</span>) no-repeat;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">500px</span> auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>(2) 默认会将图片打包到dist文件中，配置将图片转换成base64直接渲染，不额外发请求</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp|svg)$/</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;asset&#x27;</span>,</span><br><span class="line">    <span class="attr">parser</span>: &#123;</span><br><span class="line">        <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="comment">//小于10kb的图片转base64</span></span><br><span class="line">            <span class="comment">//有点：减小请求数量 缺点：体积会更大</span></span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 4kb</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-修改输出文件目录">
          <a href="#4-修改输出文件目录" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-修改输出文件目录" class="headerlink" title="4.修改输出文件目录"></a>4.修改输出文件目录</h3>
      <p>相关配置</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出</span></span><br><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 输出路径（此处要用绝对路径）</span></span><br><span class="line"><span class="comment">     * @__dirname  nodejs的变量，代表当前文件的文件夹目录(下的dist)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="comment">//要输出的文件名称，js文件保存在js目录下</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;js/main.js&#x27;</span></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="attr">rules</span>:[</span><br><span class="line">	&#123;</span><br><span class="line">	    <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp|svg)$/</span>,</span><br><span class="line">	    <span class="attr">type</span>: <span class="string">&#x27;asset&#x27;</span>,</span><br><span class="line">	    <span class="attr">parser</span>: &#123;</span><br><span class="line">	        <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">	            <span class="comment">//小于10kb的图片转base64</span></span><br><span class="line">	            <span class="comment">//有点：减小请求数量 缺点：体积会更大</span></span><br><span class="line">	            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 4kb</span></span><br><span class="line">	        &#125;</span><br><span class="line">	    &#125;,</span><br><span class="line">	    <span class="attr">generator</span>: &#123;</span><br><span class="line">	        <span class="comment">//输出图片名称(图片在打包后的static/images目录下)</span></span><br><span class="line">			<span class="comment">// @hash:10 确保图片名称的唯一性，hash值取前10位  </span></span><br><span class="line">			<span class="comment">//@ext 文件扩展名(保持默认)</span></span><br><span class="line">	        <span class="attr">filename</span>: <span class="string">&quot;static/images/[hash:10][ext][query]&quot;</span></span><br><span class="line">	    &#125;</span><br><span class="line">	&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></div></figure>


        <h3 id="5-自动清空上次打包内容">
          <a href="#5-自动清空上次打包内容" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-自动清空上次打包内容" class="headerlink" title="5. 自动清空上次打包内容"></a>5. 自动清空上次打包内容</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">	<span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;js/main.js&#x27;</span>,</span><br><span class="line">    <span class="comment">//自动清空上次打包结果</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p>原理：在打包前，将path整个目录内容清空，再进行打包</p>

        <h3 id="6-处理字体图标资源等其他资源">
          <a href="#6-处理字体图标资源等其他资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-处理字体图标资源等其他资源" class="headerlink" title="6.处理字体图标资源等其他资源"></a>6.处理字体图标资源等其他资源</h3>
      <p>rules:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2|mp3|mp4|avi?)$/</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;asset/resource&#x27;</span>,</span><br><span class="line">    <span class="attr">generator</span>: &#123;</span><br><span class="line">        <span class="comment">//输出图片名称,打包后将图标文件存放到static/media目录下</span></span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:10][ext][query]&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="7-处理js资源">
          <a href="#7-处理js资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-处理js资源" class="headerlink" title="7.处理js资源"></a>7.处理js资源</h3>
      <p>Webpack对js处理是有限的，只能编译js中ES模块化语法，不能编译其他语法，导致js不能在IE等浏览器中运行，所以需要做一些兼容性处理。还可以检测代码格式</p>
<ul>
<li><p>针对js兼容性处理，使用Babel完成</p>
</li>
<li><p>针对代码格式，使用Eslint完成</p>
</li>
</ul>
<p><strong>☆ Eslint</strong></p>
<p>配置文件有很多寫法：</p>
<ul>
<li><p><code>.eslintrc.*</code>:新建文件，位于项目根目录</p>
<ul>
<li><p><code>.eslintrc</code></p>
</li>
<li><p><code>.eslintrc.js</code></p>
</li>
<li><p><code>.eslintrc.json</code></p>
</li>
<li><p>区别在于配置格式不一样</p>
</li>
</ul>
</li>
<li><p>package.json中<code>eslintConfig</code>：不需要创建文件，在原有文件基础上写</p>
</li>
</ul>
<p>ESLint会查找和自动读取它们，所以以上配置文件只需要存在一个即可</p>
<p><strong>1. 具体配置</strong></p>
<p>规则详见：</p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://eslint.bootcss.com/docs/user-guide/configuring">https://eslint.bootcss.com/docs/user-guide/configuring</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://eslint.bootcss.com/docs/rules/">https://eslint.bootcss.com/docs/rules/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><code>.eslintrc.js</code></p>
<p>extends继承：</p>
<p>开发中一点点写rules规则过于麻烦，且多，所以可以继承现有规则：</p>
<ul>
<li><p>Eslint官方的规则：<code>eslint:recommended</code></p>
</li>
<li><p>Vue Cli官方的规则：<code>plugin:vue/essential</code></p>
</li>
<li><p>React Cli官方的规则：<code>react-app</code></p>
</li>
</ul>
<p>（1） 安装插件和eslint</p>
<p><code>cnpm install eslint-webpack-plugin eslint --save-dev</code></p>
<p>（2）插件需要引入</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;eslint-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//插件</span></span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">//plugin的配置</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">        <span class="comment">//检测哪些文件</span></span><br><span class="line">        <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">],</span><br></pre></td></tr></table></div></figure>

<p>（3） 项目根目录创建文件配置<code>.eslintrc.js</code></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"><span class="comment">//继承Eslint规则</span></span><br><span class="line"><span class="attr">extends</span>: [<span class="string">&quot;eslint:recommended&quot;</span>],</span><br><span class="line"><span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span>, <span class="comment">//启用node中全局变量</span></span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>, <span class="comment">//启用浏览器中全局变量</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="number">6</span>, <span class="comment">//es6</span></span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&quot;module&quot;</span>, <span class="comment">//es modile</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;no-var&quot;</span>: <span class="number">2</span>, <span class="comment">//不能使用var定义变量(0无规则，1warn规则，2error规则)</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>（4） 新建.eslintgore文件，配置需要忽略检查的文件</p>
<p><strong>☆ babel</strong></p>
<p>主要用于将ES6语法编写的代码转换为向后兼容的Javascript语法，以便能够运行在当前和旧版本的浏览器或者其他环境中</p>
<ol>
<li>配置文件</li>
</ol>
<p>多种写法：</p>
<ul>
<li><code>babel.config.*</code>:新建文件，位于项目根目录</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">babel.config.js</span><br><span class="line"></span><br><span class="line">babel.config.json</span><br></pre></td></tr></table></div></figure>

<ul>
<li><code>.babelrc.*</code>:新建文件，位于项目根目录</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.babelrc</span><br><span class="line"></span><br><span class="line">.babelrc.js</span><br><span class="line"></span><br><span class="line">.babelrc.json</span><br></pre></td></tr></table></div></figure>

<ul>
<li><code>package.json</code>中<code>babel</code>:不需要创建文件，在原有文件基础上鞋</li>
</ul>
<p>Babel会查找和自动读取它们，所以以上配置文件只需要存在一个即可</p>
<p><strong>使用</strong></p>
<p>(1)安装相关依赖</p>
<p><code>npm install -D babel-loader @babel/core @babel/preset-env</code></p>
<p>(2)loader配置</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules</span>:[</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.m?js$/</span>,</span><br><span class="line">    <span class="attr">exclude</span>: <span class="regexp">/(node_modules)/</span>, <span class="comment">//排除node-modules文件（不处理）</span></span><br><span class="line">    <span class="attr">use</span>: &#123;</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">        <span class="comment">// options: &#123;</span></span><br><span class="line">        <span class="comment">//     presets: [&#x27;@babel/preset-env&#x27;]</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></div></figure>

<p>options配置既可以写在里面简单方便，也可以写外面方便修改，如下：</p>
<p>(3) presets属性的配置文件：根目录创建babel.config.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">//智能预设,能够编译ES6语法</span></span><br><span class="line">    <span class="attr">presets</span>: [<span class="string">&quot;@babel/preset-env&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="8-处理html资源">
          <a href="#8-处理html资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-处理html资源" class="headerlink" title="8.处理html资源"></a>8.处理html资源</h3>
      <p>html通过插件自动引入js，无需手动引入</p>
<ul>
<li>安装插件</li>
</ul>
<p><code>npm install --save-dev html-webpack-plugin</code></p>
<ul>
<li>引入</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">    new HtmlWebpackPlugin(&#123;</span><br><span class="line">		template:path.resolve(__dirname,&quot;public/index.html&quot;)</span><br><span class="line">	&#125;),</span><br><span class="line">],</span><br></pre></td></tr></table></div></figure>

<p>template：以该路径下的html文件为模板，创建新的html文件并自动引入js。新的html文件：结构和原来一致；会自动引入打包的输出的资源</p>

        <h2 id="搭建开发环境">
          <a href="#搭建开发环境" class="heading-link"><i class="fas fa-link"></i></a><a href="#搭建开发环境" class="headerlink" title="搭建开发环境"></a>搭建开发环境</h2>
      
        <h3 id="1-开发服务器-amp-自动化">
          <a href="#1-开发服务器-amp-自动化" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-开发服务器-amp-自动化" class="headerlink" title="1.开发服务器&amp;自动化"></a>1.开发服务器&amp;自动化</h3>
      <p><strong>下载包</strong></p>
<p><code>npm i webpack-dev-server -D</code></p>
<p><strong>配置开发服务器</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>, <span class="comment">//启动服务器域名</span></span><br><span class="line">    <span class="attr">port</span>: <span class="string">&quot;3000&quot;</span>, <span class="comment">//启动服务器端口号</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">//是否自动打开浏览器</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>启动服务</strong></p>
<p><code>npx webpack serve</code></p>
<p>如此一来，每次修改文件后会自动重新编译</p>
<p>注：开发服务器不会输出资源，也就是和打包好的内容无关。它是在内存中编译打包的</p>

        <h1 id="生产模式">
          <a href="#生产模式" class="heading-link"><i class="fas fa-link"></i></a><a href="#生产模式" class="headerlink" title="生产模式"></a>生产模式</h1>
      <p>生产模式是开发完成代码后，我们需要得到代码将来部署上线，这个模式下我们主要对代码进行优化，让其运行性能更好。</p>
<ul>
<li><p>优化代码运行型男</p>
</li>
<li><p>优化代码打包速度</p>
</li>
</ul>

        <h3 id="1-准备工作">
          <a href="#1-准备工作" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-准备工作" class="headerlink" title="1.准备工作"></a>1.准备工作</h3>
      <p><strong>开发模式</strong></p>
<ol>
<li><p>根目录创建文件夹config</p>
</li>
<li><p>config创建文件<code>webpack.dev.js</code>  <code>webpack.prod.js</code></p>
</li>
</ol>
<p>webpack.dev.js</p>
<p>需要进行更改的配置</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//输出</span></span><br><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="comment">//开发模式没有输出，不需要指定输出路径</span></span><br><span class="line">    <span class="attr">path</span>: <span class="literal">undefined</span>,</span><br><span class="line">    <span class="comment">//要输出的文件名称</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;js/main.js&#x27;</span>,</span><br><span class="line">    <span class="comment">//自动清空上次打包结果</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">//插件</span></span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">        <span class="comment">//相对路径不用更改。因为到时候执行指令的地方还在根路径，绝对路径需要修改，如下</span></span><br><span class="line">        <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../src&#x27;</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">],</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>启动开发模式服务</li>
</ol>
<p><code>npx webpack serve --config ./config/webpack.dev.js </code></p>
<p><strong>生产模式</strong></p>
<p>webpack-prod.js</p>
<p>需要进行更改的配置</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 输出路径（此处要用绝对路径）</span></span><br><span class="line"><span class="comment">     * @__dirname  nodejs的变量，代表当前文件的文件夹目录(下的dist)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">	<span class="comment">//绝对路径套一层</span></span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../dist&#x27;</span>),</span><br><span class="line">    <span class="comment">//要输出的文件名称</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;js/main.js&#x27;</span>,</span><br><span class="line">    <span class="comment">//自动清空上次打包结果</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span></span><br></pre></td></tr></table></div></figure>

<p>打包：</p>
<p><code> npx webpack --config ./config/webpack.prod.js</code></p>
<p>生产模式无dev-serve，只要打包输出即可</p>
<p><strong>运行指令太长？可以在package.json配置指令</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;start&quot;</span>: <span class="string">&quot;npm run dev&quot;</span>,</span><br><span class="line">    <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;webpack serve --config ./config/webpack.dev.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack --config ./config/webpack.prod.js&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>配置时不需要加npx，因为默认.bin目录也会添加到环境变量中，所以直接运行</p>
</blockquote>
<p><code>npm start</code>    &#x2F;&#x2F;因为npm run dev比较常用，所以配置start指令，只需要执行<code>npm start</code>，即可开启dev服务</p>
<p><code>npm run dev</code></p>
<p><code>npm run build</code></p>
<blockquote>
<p>除了start  其他都要<code>npm run ***</code></p>
</blockquote>

        <h3 id="2-提取css成单独文件">
          <a href="#2-提取css成单独文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-提取css成单独文件" class="headerlink" title="2. 提取css成单独文件"></a>2. 提取css成单独文件</h3>
      <p><strong>提取Css成单独文件</strong></p>
<p>Css文件目前被打包到js文件中，当js文件加载时，会创建一个style标签来生成样式，这样对于网站来说，会出现商品现象，用户体验不好(即先解析js文件，再在js文件里生成style标签插入到页面中)</p>
<ol>
<li>下载包</li>
</ol>
<p><code>npm i mini-css-extraact-plugin -D</code></p>
<ol start="2">
<li>配置</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">rules:[</span><br><span class="line">	&#123;</span><br><span class="line">	    test: /\.css$/i, //只检测以css结尾文件，才会使用下面规则进行处理</span><br><span class="line">	    use: [</span><br><span class="line">	        // &quot;style-loader&quot;, //再加入MiniCssExtractPlugin.loader之前，不要引入style-loader</span><br><span class="line">	        MiniCssExtractPlugin.loader,</span><br><span class="line">	        &quot;css-loader&quot; //将css资源编译成commonjs的模块到js中</span><br><span class="line">	    ], //use执行顺序：从右到左(从下到上)</span><br><span class="line">	&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">//插件</span><br><span class="line">plugins: [</span><br><span class="line">    new HtmlWebpackPlugin(&#123;</span><br><span class="line">        template: path.resolve(__dirname, &quot;../public/index.html&quot;)</span><br><span class="line">    &#125;),</span><br><span class="line">    new MiniCssExtractPlugin(&#123;</span><br><span class="line">        filename: &#x27;static/css/main.css&#x27; //配置css文件保存的目录</span><br><span class="line">    &#125;),</span><br><span class="line">],</span><br></pre></td></tr></table></div></figure>



        <h3 id="3-样式兼容性处理">
          <a href="#3-样式兼容性处理" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-样式兼容性处理" class="headerlink" title="3.样式兼容性处理"></a>3.样式兼容性处理</h3>
      <ol>
<li>下载包</li>
</ol>
<p><code>npm i postcss-loader postcss postcss-preset-env</code></p>
<ol start="2">
<li>配置(需要写在css-loader后面)</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//loader的配置</span><br><span class="line">&#123;</span><br><span class="line">    test: /\.css$/i, //只检测以css结尾文件，才会使用下面规则进行处理</span><br><span class="line">    use: [</span><br><span class="line">        // &quot;style-loader&quot;, //将js中css通过创建style标签添加到html文件中生效</span><br><span class="line">        MiniCssExtractPlugin.loader,</span><br><span class="line">        &quot;css-loader&quot;, //将css资源编译成commonjs的模块到js中</span><br><span class="line">        &#123;</span><br><span class="line">            loader: &#x27;postcss-loader&#x27;,</span><br><span class="line">            options: &#123;</span><br><span class="line">                postcssOptions: &#123;</span><br><span class="line">                    plugins: [</span><br><span class="line">                        [</span><br><span class="line">                            &#x27;postcss-preset-env&#x27;,</span><br><span class="line">                        ],</span><br><span class="line">                    ],</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    ], //use执行顺序：从右到左(从下到上)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


<ol start="3">
<li>package.json配置需要兼容的程度</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//兼容到IE8</span><br><span class="line">&quot;browserslist&quot;: [</span><br><span class="line">    &quot;ie &gt;= 8&quot;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">&quot;browserslist&quot;: [</span><br><span class="line">    &quot;last 2 version&quot;,//所有浏览器的近两个版本</span><br><span class="line">    &quot;&gt;1%&quot;,//包含市面上99%以上的浏览器</span><br><span class="line">    &quot;not dead&quot;//死掉的浏览器不要</span><br><span class="line">    </span><br><span class="line">]</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-封装样式loader函数">
          <a href="#4-封装样式loader函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-封装样式loader函数" class="headerlink" title="4.封装样式loader函数"></a>4.封装样式loader函数</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getStyleLoader</span>(<span class="params">pre</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">        <span class="string">&quot;css-loader&quot;</span>, <span class="comment">//将css资源编译成commonjs的模块到js中</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;postcss-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">                <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">                    <span class="attr">plugins</span>: [</span><br><span class="line">                        [</span><br><span class="line">                            <span class="string">&#x27;postcss-preset-env&#x27;</span>,</span><br><span class="line">                        ],</span><br><span class="line">                    ],</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        pre,</span><br><span class="line">    ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line">	<span class="attr">rules</span>:[</span><br><span class="line"></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">test</span>: <span class="regexp">/\.less$/i</span>,</span><br><span class="line">	        <span class="attr">use</span>: <span class="title function_">getStyleLoader</span>(<span class="string">&#x27;less-loader&#x27;</span>),</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="5-css压缩">
          <a href="#5-css压缩" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-css压缩" class="headerlink" title="5. css压缩"></a>5. css压缩</h3>
      <ol>
<li>下载</li>
</ol>
<p><code>npm install css-minimizer-webpack-plugin --save-dev</code></p>
<ol start="2">
<li>引入</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const CssMinimizerPlugin = require(&quot;css-minimizer-webpack-plugin&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plugins:[</span><br><span class="line">	new CssMinimizerPlugin()</span><br><span class="line">]</span><br></pre></td></tr></table></div></figure>



        <h3 id="6-html压缩">
          <a href="#6-html压缩" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-html压缩" class="headerlink" title="6.html压缩"></a>6.html压缩</h3>
      <p>默认生产模式已经开启了：html压缩和js压缩，无需额外配置</p>

        <h1 id="高級">
          <a href="#高級" class="heading-link"><i class="fas fa-link"></i></a><a href="#高級" class="headerlink" title="高級"></a>高級</h1>
      
        <h2 id="提升开发体验">
          <a href="#提升开发体验" class="heading-link"><i class="fas fa-link"></i></a><a href="#提升开发体验" class="headerlink" title="提升开发体验"></a>提升开发体验</h2>
      
        <h3 id="1-SourceMap">
          <a href="#1-SourceMap" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-SourceMap" class="headerlink" title="1. SourceMap"></a>1. SourceMap</h3>
      <p>开发时我们运行的代码是经过webpack编译后的，所有css和js合并成了一个文件，并且多了其他代码，此时如果代码运行出错那么提示代码错误位置是看不懂的，一旦将来开发代码文件很多，那么很难去发现错误出现在哪里。</p>
<p><strong>是什么</strong></p>
<p>SourceMap(源代码映射)是一个用来生成源代码与构建后代码–映射的文件的方案</p>
<p>它会生成一个xxx.mapa文件，里面包含源代码和构建后代码每一行，每一列的映射关系，当构建后代码出错了，会通过xxx.map文件，从构建后代码出错位置找到映射后源代码出错位置，从而让浏览器提示源代码文件出错位置，帮助我们更快的找到错误根源</p>
<p><strong>如何用</strong></p>
<p>查阅webpack官方文档，配置–&gt;devtool</p>
<p><strong>1. 开发模式</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devtool</span>: <span class="string">&quot;cheap-module-source-map&quot;</span>,</span><br></pre></td></tr></table></div></figure>

<p>优点：打包编译速度快，只包含行映射</p>
<p>缺点：无列映射</p>
<p><strong>2. 生产模式</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">devtool:&quot;source-map&quot;,</span><br></pre></td></tr></table></div></figure>

<p>包含行&#x2F;列映射；打包编译速度更慢</p>

        <h2 id="提升打包构建速度-开发模式">
          <a href="#提升打包构建速度-开发模式" class="heading-link"><i class="fas fa-link"></i></a><a href="#提升打包构建速度-开发模式" class="headerlink" title="提升打包构建速度(开发模式)"></a>提升打包构建速度(开发模式)</h2>
      
        <h3 id="1-HotModuleReplacement">
          <a href="#1-HotModuleReplacement" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-HotModuleReplacement" class="headerlink" title="1.HotModuleReplacement"></a>1.HotModuleReplacement</h3>
      <p>开发时我们修改了其中一个模块代码，webpack默认会将所有模块全部重新打包编译，速度很慢，所以我们需要做到修改某个模块代码，就只有这个模块代码需要重新打包编译，其他模块不变，这样打包速度更快。</p>
<p>HotModuleReplacement(HMR&#x2F;热模块替换)：在程序运行中，替换，添加或删除模块，而无需要重新加载整个页面</p>
<p>HMR默认开启，可手动关闭</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">    hot: false, //关闭HMR</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p>开启后默认只对css文件有效，如果对js生效需要另外配置main.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">module</span>.<span class="property">hot</span>) &#123;</span><br><span class="line">    <span class="comment">//只对count.js和sum.js模块进行处理</span></span><br><span class="line">    <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&quot;./js/count&quot;</span>)</span><br><span class="line">    <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&quot;./js/sum&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>或者</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">module</span>.<span class="property">hot</span>) &#123;</span><br><span class="line">    <span class="comment">//只对count.js和sum.js模块进行处理</span></span><br><span class="line">    <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&quot;./js/count&quot;</span>,<span class="keyword">function</span>(<span class="params">count</span>)&#123;</span><br><span class="line">	<span class="comment">//一但该文件发生变化，调用此回调函数</span></span><br><span class="line">	<span class="keyword">const</span> result = <span class="title function_">count</span>(<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">info</span>(result)</span><br><span class="line">&#125;)</span><br><span class="line">    <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&quot;./js/sum&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>如果有多个js会比较麻烦，实际开发中可以使用其他loader解决(vue-loader  react-hot-loader)</p>

        <h2 id="OneOf【生产-x2F-开发模式】">
          <a href="#OneOf【生产-x2F-开发模式】" class="heading-link"><i class="fas fa-link"></i></a><a href="#OneOf【生产-x2F-开发模式】" class="headerlink" title="OneOf【生产&#x2F;开发模式】"></a>OneOf【生产&#x2F;开发模式】</h2>
      <p>打包时每个文件都会经历所有Loader处理，虽然因为test正则原因实际没有处理上，但是都要过一遍，比较慢。OneOf顾名思义就是只能匹配上一个loader，剩下的就不匹配了</p>
<p>使用：将所有loader包裹在OneOf中</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">module: &#123;</span><br><span class="line">    rules: [&#123;</span><br><span class="line">        //每个文件只能被其中一个loader配置处理(第一个命中了就不会再执行后面)</span><br><span class="line">        oneOf: [</span><br><span class="line">            //loader的配置</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.css$/i, //只检测以css结尾文件，才会使用下面规则进行处理</span><br><span class="line">                use: [</span><br><span class="line">                    &quot;style-loader&quot;, //将js中css通过创建style标签添加到html文件中生效</span><br><span class="line">                    &quot;css-loader&quot; //将css资源编译成commonjs的模块到js中</span><br><span class="line">                ], //use执行顺序：从右到左(从下到上)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.less$/i,</span><br><span class="line">                use: [</span><br><span class="line">                    // compiles Less to CSS</span><br><span class="line">                    &#x27;style-loader&#x27;,</span><br><span class="line">                    &#x27;css-loader&#x27;,</span><br><span class="line">                    &#x27;less-loader&#x27;,</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.(png|jpe?g|gif|webp|svg)$/,</span><br><span class="line">                type: &#x27;asset&#x27;,</span><br><span class="line">                parser: &#123;</span><br><span class="line">                    dataUrlCondition: &#123;</span><br><span class="line">                        //小于10kb的图片转base64</span><br><span class="line">                        //有点：减小请求数量 缺点：体积会更大</span><br><span class="line">                        maxSize: 10 * 1024 // 4kb</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                generator: &#123;</span><br><span class="line">                    //输出图片名称</span><br><span class="line">                    filename: &quot;static/images/[hash:10][ext][query]&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.(ttf|woff2?)$/,</span><br><span class="line">                type: &#x27;asset/resource&#x27;,</span><br><span class="line">                generator: &#123;</span><br><span class="line">                    //输出图片名称</span><br><span class="line">                    filename: &quot;static/media/[hash:10][ext][query]&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.m?js$/,</span><br><span class="line">                exclude: /(node_modules)/, //排除node-modules文件（不处理）</span><br><span class="line">                use: &#123;</span><br><span class="line">                    loader: &#x27;babel-loader&#x27;,</span><br><span class="line">                    // options: &#123;</span><br><span class="line">                    //     presets: [&#x27;@babel/preset-env&#x27;]</span><br><span class="line">                    // &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h2 id="Include-x2F-Exclude">
          <a href="#Include-x2F-Exclude" class="heading-link"><i class="fas fa-link"></i></a><a href="#Include-x2F-Exclude" class="headerlink" title="Include&#x2F;Exclude"></a>Include&#x2F;Exclude</h2>
      <p>开发时饿哦们需要使用第三方的库或插件，所有文件都下载到node_modules中了，而这些文件是不需要编译可以直接使用的，所以我们在对js文件处理时，要排除node_mudules下面的文件</p>
<p><strong>要么包含 要么排除，Include&#x2F;Exclude两者只能写一个</strong></p>

        <h3 id="1-Include">
          <a href="#1-Include" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-Include" class="headerlink" title="1.Include"></a>1.Include</h3>
      <p>包含，只处理xxx文件</p>

        <h3 id="2-exclude">
          <a href="#2-exclude" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-exclude" class="headerlink" title="2.exclude"></a>2.exclude</h3>
      <p>排除，除了xxx文件以外其他文件都处理</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">rules</span>:[</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="attr">test</span>: <span class="regexp">/\.m?js$/</span>,</span><br><span class="line">		<span class="attr">exclude</span>: <span class="regexp">/(node_modules)/</span>, <span class="comment">//排除node-modules文件（不处理）</span></span><br><span class="line">		<span class="comment">// include:path.resolve(__dirname,&quot;../src&quot;),//只处理src下的文件，其他文件不处理</span></span><br><span class="line">		<span class="attr">use</span>: &#123;</span><br><span class="line">		    <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">		    <span class="comment">// options: &#123;</span></span><br><span class="line">		    <span class="comment">//     presets: [&#x27;@babel/preset-env&#x27;]</span></span><br><span class="line">		    <span class="comment">// &#125;</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">plugins</span>:[</span><br><span class="line"></span><br><span class="line"><span class="comment">//plugin的配置</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">    <span class="comment">//检测哪些文件</span></span><br><span class="line">    <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../src&#x27;</span>),</span><br><span class="line">    <span class="attr">exclude</span>: <span class="string">&quot;node_modules&quot;</span>,<span class="comment">//默认值</span></span><br><span class="line">&#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></div></figure>


        <h2 id="Cache">
          <a href="#Cache" class="heading-link"><i class="fas fa-link"></i></a><a href="#Cache" class="headerlink" title="Cache"></a>Cache</h2>
      <p>每次打包时js文件都要经过Eslint检车和Babel编译，速度比较慢。</p>
<p>我们可以缓存之前的Eslint检查和Babel编译结果，这样第二次打包的速度就会更快了</p>
<p><strong>对Eslint检查和Babel编译结果进行缓存</strong></p>
<p>babel开启缓存：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: /\.m?js$/,</span><br><span class="line">    exclude: /(node_modules)/, //排除node-modules文件（不处理）</span><br><span class="line">    use: &#123;</span><br><span class="line">        loader: &#x27;babel-loader&#x27;,</span><br><span class="line">        options: &#123;</span><br><span class="line">            // presets: [&#x27;@babel/preset-env&#x27;]</span><br><span class="line">            cacheDirectory: true, //开启babel缓存</span><br><span class="line">            cacheCompression: false, //关闭缓存文件压缩</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p>eslint开启缓存：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">new ESLintPlugin(&#123;</span><br><span class="line">    //检测哪些文件</span><br><span class="line">    context: path.resolve(__dirname, &#x27;../src&#x27;),</span><br><span class="line">    cache: true, //开启缓存</span><br><span class="line">    cacheLocation: path.resolve(__dirname, &quot;../node_modules/.cache/eslintcache&quot;)</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></div></figure>


        <h2 id="Thread">
          <a href="#Thread" class="heading-link"><i class="fas fa-link"></i></a><a href="#Thread" class="headerlink" title="Thread"></a>Thread</h2>
      <p>当项目越来越庞大时，打包的速度越来越慢，甚至于需要一个下午才能打包出来代码。我们想要继续提升打包速度，其实就是提升js的打包速度，因为其他文件都比较少。而对js文件处理主要就是eslint  babel  terser三个工具，所以我们要提升它们的运行速度，可以开启多进程同时处理js文件，这样速度更快</p>
<p><strong>多进程打包：开启电脑的多个进程同时干一件事，速度更快。(当文件比较打包处理事件长到一个临界值时，使用多进程打包会缩短事件，如果比较少使用的话可能会加长打包时间)</strong></p>
<p><strong><font color="red">注意：请仅在特别耗时的操作中使用，因为每一个进程启动就有大约为600ms左右开销 </font></strong></p>
<p><strong>1. 下载包</strong></p>
<p><code>cnpm i thread-loader -D</code></p>
<p><strong>2. 引入os，设置多进程数量，引入terser</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const os = require(&quot;os&quot;)</span><br><span class="line">const threads = os.cpus().length</span><br><span class="line">const TerserWebpackPlugin = require(&quot;terser-webpack-plugin&quot;)</span><br></pre></td></tr></table></div></figure>

<p><strong>3. babel  eslint  terser配置</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">rules:[</span><br><span class="line">    &#123;</span><br><span class="line">        test: /\.m?js$/,</span><br><span class="line">        exclude: /(node_modules)/, //排除node-modules文件（不处理）</span><br><span class="line">        use: [&#123;</span><br><span class="line">            loader: &#x27;thread-loader&#x27;, //开启多进程</span><br><span class="line">            options: &#123;</span><br><span class="line">                works: threads, //进程数量</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            loader: &#x27;babel-loader&#x27;,</span><br><span class="line">            options: &#123;</span><br><span class="line">                // presets: [&#x27;@babel/preset-env&#x27;]</span><br><span class="line">                cacheDirectory: true, //开启babel缓存</span><br><span class="line">                cacheCompression: false, //关闭缓存文件压缩</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">plugins:[</span><br><span class="line"></span><br><span class="line">new ESLintPlugin(&#123;</span><br><span class="line">    //检测哪些文件</span><br><span class="line">    context: path.resolve(__dirname, &#x27;../src&#x27;),</span><br><span class="line">    cache: true, //开启缓存</span><br><span class="line">    cacheLocation: path.resolve(__dirname, &quot;../node_modules/.cache/eslintcache&quot;),</span><br><span class="line">    threads, //开启多进程和设置进程数量</span><br><span class="line">&#125;),</span><br><span class="line"></span><br><span class="line">new TerserWebpackPlugin(&#123;</span><br><span class="line">    parallel: threads, //开启多进程和设置进程数量</span><br><span class="line">&#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></div></figure>

<p>官方推荐写法：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line"></span><br><span class="line">    //压缩的操作</span><br><span class="line">    minimizer: [</span><br><span class="line">		//压缩css</span><br><span class="line">        new CssMinimizerPlugin(),</span><br><span class="line">		//压缩js</span><br><span class="line">        new TerserWebpackPlugin(&#123;</span><br><span class="line">            parallel: threads, //开启多进程和设置进程数量</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h2 id="TreeShaking">
          <a href="#TreeShaking" class="heading-link"><i class="fas fa-link"></i></a><a href="#TreeShaking" class="headerlink" title="TreeShaking"></a>TreeShaking</h2>
      <p>减少代码体积</p>
<p>开发时我们定义了一些工具函数库，或者引用第三方工具函数库或组件库。如果没有特殊处理的话我们打包时会引入整个库，但是实际上可能我们只用上极小部分的功能。这样将整个库都打包进来，体积过大。</p>
<p><code>TreeShaking</code>是一个术语，通常用于描述移除Javascript中的没有使用上的代码。依赖<code>ES Module</code></p>
<p>Webpack已经默认开启了这个功能，无需其他配置</p>

        <h2 id="减少Babel生成文件的体积">
          <a href="#减少Babel生成文件的体积" class="heading-link"><i class="fas fa-link"></i></a><a href="#减少Babel生成文件的体积" class="headerlink" title="减少Babel生成文件的体积"></a>减少Babel生成文件的体积</h2>
      <p>Babel为编译的文件都插入了辅助代码，使代码体积过大。</p>
<p>Babel对一些公共方法使用了非常小的辅助代码，比如_extend,默认情况下会被添加到每一个需要它的而文件中，可以将这些辅助代码作为一个独立模块，来避免重复引入</p>
<p><code>@babel/plugin-transform-runtime</code>:禁用了Babel自动对每个文件的runtime注入，而是引入<code>@babel/plugin-transform-runtime</code>并且使所有辅助代码从这里引用</p>
<p><strong>1. 下载包</strong></p>
<p><code>cnpm i @babel/plugin-transform-runtime -D</code></p>
<p><strong>2. 配置</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    loader: &#x27;babel-loader&#x27;,</span><br><span class="line">    options: &#123;</span><br><span class="line">        // presets: [&#x27;@babel/preset-env&#x27;]</span><br><span class="line">        cacheDirectory: true, //开启babel缓存</span><br><span class="line">        cacheCompression: false, //关闭缓存文件压缩</span><br><span class="line">        plugins: [&#x27;@babel/plugin-transform-runtime&#x27;], //减少代码体积</span><br><span class="line">    &#125;</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></div></figure>


        <h2 id="压缩图片">
          <a href="#压缩图片" class="heading-link"><i class="fas fa-link"></i></a><a href="#压缩图片" class="headerlink" title="压缩图片"></a>压缩图片</h2>
      <p>如果项目中图片都是在线链接，那么就不需要了，本地项目静态图片才需要进行压缩</p>
<p><strong>下载包</strong></p>
<p><code>npm i image-minimizer-webpack-plugin imagemin -D</code></p>
<p>还有剩下包需要下载，有两种模式：</p>
<ul>
<li>无损压缩</li>
</ul>
<p><code>npm install imagemin-gifsicle imagemin-jpegtran imagemin-optipng imagemin-svgo -D</code></p>
<ul>
<li>有损压缩</li>
</ul>
<p><code>npm install imagemin-gifsicle imagemin-mozjpeg imagemin-pngquant imagemin-svgo -D</code></p>
<p><strong>配置</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">const ImageMinimizerPlugin = require(&quot;image-minimizer-webpack-plugin&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">optimization: &#123;</span><br><span class="line"></span><br><span class="line">    //压缩的操作</span><br><span class="line">    minimizer: [</span><br><span class="line">        new CssMinimizerPlugin(),</span><br><span class="line">        new TerserWebpackPlugin(&#123;</span><br><span class="line">            parallel: threads, //开启多进程和设置进程数量</span><br><span class="line">        &#125;),</span><br><span class="line">        //图片压缩</span><br><span class="line">        new ImageMinimizerPlugin(&#123;</span><br><span class="line">            minimizer: &#123;</span><br><span class="line">                implementation: ImageMinimizerPlugin.imageminGenerate,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    plugins: [</span><br><span class="line">                        [&quot;gifsicle&quot;, &#123; interlaced: true &#125;],</span><br><span class="line">                        [&quot;jpegtran&quot;, &#123; progressive: true &#125;],</span><br><span class="line">                        [&quot;optipng&quot;, &#123; optimizationLevel: 5 &#125;],</span><br><span class="line">                        [</span><br><span class="line">                            &quot;svgo&quot;,</span><br><span class="line">                            &#123;</span><br><span class="line">                                plugins: [</span><br><span class="line">                                    &quot;preset-default&quot;,</span><br><span class="line">                                    &quot;prefixIds&quot;,</span><br><span class="line">                                    &#123;</span><br><span class="line">                                        name: &quot;sortAttrs&quot;,</span><br><span class="line">                                        params: &#123;</span><br><span class="line">                                            xmlnsOrder: &quot;alphabetical&quot;,</span><br><span class="line">                                        &#125;</span><br><span class="line">                                    &#125;</span><br><span class="line">                                ]</span><br><span class="line">                            &#125;,</span><br><span class="line">                        ],</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h1 id="优化代码运行性能">
          <a href="#优化代码运行性能" class="heading-link"><i class="fas fa-link"></i></a><a href="#优化代码运行性能" class="headerlink" title="优化代码运行性能"></a>优化代码运行性能</h1>
      <p>打包代码时会将所有js文件打包到一个文件中，体积太大了，我们如果只要渲染首页，就应该只加载首页的js文件，其他文件不应该加载。所以需要将打包生成的文件进行代码分割，生成多个js文件，渲染哪个页面就只加载某个js文件，这样加载的资源就少，速度就更快</p>
<p><strong>代码分割(Code Split)主要做了两件事：</strong></p>
<ol>
<li><p>分割文件：将打包生成的文件进行分割，生成多个js文件</p>
</li>
<li><p>按需加载：需要哪个文件就加载哪个文件</p>
</li>
</ol>

        <h2 id="多入口">
          <a href="#多入口" class="heading-link"><i class="fas fa-link"></i></a><a href="#多入口" class="headerlink" title="多入口"></a>多入口</h2>
      <p>webpack.config.js</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&quot;path&quot;)</span><br><span class="line">const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">    entry: &#123;</span><br><span class="line">        //多入口文件，有多个入口文件</span><br><span class="line">        app: &#x27;./src/app.js&#x27;,</span><br><span class="line">        main: &#x27;./src/main.js&#x27;,</span><br><span class="line">    &#125;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, &quot;dist&quot;),</span><br><span class="line">        filename: &quot;[name].js&quot;, //webpack命名方式，以文件名自己命名</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: path.resolve(__dirname, &quot;public/index.html&quot;)</span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    mode: &quot;production&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="多入口提取公共模块">
          <a href="#多入口提取公共模块" class="heading-link"><i class="fas fa-link"></i></a><a href="#多入口提取公共模块" class="headerlink" title="多入口提取公共模块"></a>多入口提取公共模块</h2>
      <p>多个入口文件引用了公共的代码，需要处理。把公共的模块单独打包，其他文件就可以复用它。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">        chunks: &#x27;all&#x27;, //对所有模块都进行分割</span><br><span class="line">        minSize: 0,</span><br><span class="line">        minRemainingSize: 0,</span><br><span class="line">        minChunks: 1,</span><br><span class="line">        maxAsyncRequests: 30,</span><br><span class="line">        maxInitialRequests: 30,</span><br><span class="line">        enforceSizeThreshold: 50000,</span><br><span class="line">        cacheGroups: &#123;</span><br><span class="line">            defaultVendors: &#123;</span><br><span class="line">                test: /[\\/]node_modules[\\/]/,</span><br><span class="line">                priority: -10,</span><br><span class="line">                reuseExistingChunk: true,</span><br><span class="line">            &#125;,</span><br><span class="line">            default: &#123;</span><br><span class="line">                minChunks: 2,</span><br><span class="line">                priority: -20,</span><br><span class="line">                reuseExistingChunk: true,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h2 id="多入口按需加载">
          <a href="#多入口按需加载" class="heading-link"><i class="fas fa-link"></i></a><a href="#多入口按需加载" class="headerlink" title="多入口按需加载"></a>多入口按需加载</h2>
      <p>想要实现按需加载，动态导入模块，还需要额外配置</p>
<ol>
<li>修改文件</li>
</ol>
<p>main.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./math&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello main&quot;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//import动态导入，会将动态导入的文件代码分割（拆分成单独模块，在需要的使用的时候自动加载）</span></span><br><span class="line">    <span class="keyword">import</span> (<span class="string">&#x27;./count&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;加载成功&quot;</span>, res)</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;加载失败&quot;</span>, reason)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="单入口">
          <a href="#单入口" class="heading-link"><i class="fas fa-link"></i></a><a href="#单入口" class="headerlink" title="单入口"></a>单入口</h2>
      <p>开发室我们可能是单页面应用，只有一个入口120</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">splitChunks:&#123;</span><br><span class="line">	chunks:&quot;all&quot;,</span><br><span class="line">	//其他使用默认值</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>eslint不识别动态导入，需要额外配置：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins</span>:[<span class="string">&#x27;import&#x27;</span>]</span><br></pre></td></tr></table></div></figure>


        <h2 id="给导入的模块命名">
          <a href="#给导入的模块命名" class="heading-link"><i class="fas fa-link"></i></a><a href="#给导入的模块命名" class="headerlink" title="给导入的模块命名"></a>给导入的模块命名</h2>
      <ol>
<li>main.js</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById(&quot;btn&quot;).onclick = function() &#123;</span><br><span class="line">    //webpack魔法命名</span><br><span class="line">    import ( /* webpackChunkName:&quot;count&quot; */ &quot;./count&quot;).then((&#123; count &#125;) =&gt; &#123;</span><br><span class="line">        console.log(&quot;加载成功&quot;, count(5, 3))</span><br><span class="line">    &#125;).catch(reason =&gt; &#123;</span><br><span class="line">        console.log(&quot;加载失败&quot;, reason)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>使用，输出配置</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, &quot;dist&quot;),</span><br><span class="line">    filename: &quot;[name].js&quot;, //webpack命名方式，以文件名自己命名</span><br><span class="line">    chunkFilename: &#x27;static/js/[name].js&#x27;, //打包输出的其他文件命名</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h2 id="统一命名配置">
          <a href="#统一命名配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#统一命名配置" class="headerlink" title="统一命名配置"></a>统一命名配置</h2>
      <p>输出的文件可能分不清主入口和其他模块js，此时可以在配置时就添加后缀以用来区分</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hunkFilename: &#x27;static/js/[name].chunk.js&#x27;, </span><br></pre></td></tr></table></div></figure>

<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, &quot;dist&quot;),</span><br><span class="line">    filename: &quot;[name].js&quot;, //webpack命名方式，以文件名自己命名</span><br><span class="line">    chunkFilename: &#x27;static/js/[name].chunk.js&#x27;, //打包输出的其他文件命名，chunk为识别其他模块的后缀</span><br><span class="line">    assetModuleFilename: &quot;static/media/[hash:10][ext][query]&quot;, //图片。字体等通过tyoe:asset处理资源命名方式</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>css模块统一命名配置</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;static/css/main.css&#x27;</span>,</span><br><span class="line">    <span class="attr">chunkFilename</span>: <span class="string">&quot;static/css/[name].chunk.js&quot;</span>,</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></div></figure>


        <h2 id="Preoload-x2F-Prefetch">
          <a href="#Preoload-x2F-Prefetch" class="heading-link"><i class="fas fa-link"></i></a><a href="#Preoload-x2F-Prefetch" class="headerlink" title="Preoload&#x2F;Prefetch"></a>Preoload&#x2F;Prefetch</h2>
      <p>import动态导入语法来进行代码按需加载，（懒加载，比如路由懒加载就是这样实现的），但是加载速度不够好，比如：是用户点击按钮时才加载这个资源，如果资源体积很大，那么用户会感觉到明显卡顿效果</p>
<p><code>Preload</code>：告诉浏览器立即加载资源</p>
<p><code>Prefetch</code>：告诉浏览器在空闲时才开始加载资源</p>
<p>共同点：</p>
<p>都知会加载资源，并不执行；都有缓存</p>
<p>区别：</p>
<p>Preload加载优先级高，Prefetch加载优先级低。</p>
<p>Preload只能加载当前页面需要使用的资源，Prefetch可以加载当前页面资源，也可以加载下一个页面需要使用的资源</p>

        <h3 id="1-Preload">
          <a href="#1-Preload" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-Preload" class="headerlink" title="1.Preload"></a>1.Preload</h3>
      <ol>
<li>下载</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save-dev @vue/preload-webpack-plugin</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>引入配置</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const PreloadWebpackPlugin = require(&#x27;@vue/preload-webpack-plugin&#x27;);</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">    new HtmlWebpackPlugin(&#123;</span><br><span class="line">        template: path.resolve(__dirname, &quot;public/index.html&quot;)</span><br><span class="line">    &#125;),</span><br><span class="line">    new PreloadWebpackPlugin(&#123;</span><br><span class="line">        rel: &quot;preload&quot;,</span><br><span class="line">        as: &#x27;script&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line">],</span><br></pre></td></tr></table></div></figure>


        <h2 id="Core-js">
          <a href="#Core-js" class="heading-link"><i class="fas fa-link"></i></a><a href="#Core-js" class="headerlink" title="Core-js"></a>Core-js</h2>
      <p>过去使用babel对js代码进行兼容性处理，但是async函数，promise对象，数组的一些方法等没办法处理。</p>
<p><code>core-js</code>是专门用来做ES6以及以上API的polyfill(补丁)</p>
<ol>
<li>下载</li>
</ol>
<p><code>cnpm i core-js</code></p>
<ol start="2">
<li>mian.js引入</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &quot;core-js&quot;</span><br></pre></td></tr></table></div></figure>

<p>按需引入（推荐）</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &quot;core-js/es/promise&quot;</span><br></pre></td></tr></table></div></figure>


        <h2 id="PWA">
          <a href="#PWA" class="heading-link"><i class="fas fa-link"></i></a><a href="#PWA" class="headerlink" title="PWA"></a>PWA</h2>
      <p>开发WebApp项目  项目一旦处于网络离线情况，就没法访问了。</p>
<p>渐进式网络应用程序(progressive web application)是一种提供类似于native app(原生应用程序)体验的WebApp的技术，其中最重要的是，在离线是应用程序能够继续运行功能。</p>
<ol>
<li>下载</li>
</ol>
<p><code>npm install workbox-webpack-plugin --save-dev</code></p>
<ol start="2">
<li>plugin配置</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">new WorkboxPlugin.GenerateSW(&#123;</span><br><span class="line">  // these options encourage the ServiceWorkers to get in there fast</span><br><span class="line">  // and not allow any straggling &quot;old&quot; SWs to hang around</span><br><span class="line">  clientsClaim: true,</span><br><span class="line">  skipWaiting: true,</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>main.js配置</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if (&#x27;serviceWorker&#x27; in navigator) &#123;</span><br><span class="line">  window.addEventListener(&#x27;load&#x27;, () =&gt; &#123;</span><br><span class="line">    navigator.serviceWorker.register(&#x27;/service-worker.js&#x27;).then(registration =&gt; &#123;</span><br><span class="line">      console.log(&#x27;SW registered: &#x27;, registration);</span><br><span class="line">    &#125;).catch(registrationError =&gt; &#123;</span><br><span class="line">      console.log(&#x27;SW registration failed: &#x27;, registrationError);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>测试时dist需要在根目录部署服务</strong></p>

        <h1 id="Vue配置">
          <a href="#Vue配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#Vue配置" class="headerlink" title="Vue配置"></a>Vue配置</h1>
      
        <h2 id="开发模式配置">
          <a href="#开发模式配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#开发模式配置" class="headerlink" title="开发模式配置"></a>开发模式配置</h2>
      <p><strong>目录结构</strong></p>
<p><img src="/2022/06/09/web-webpack01/vuecli.png"></p>
<p><strong>webpack.dev.js</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&quot;path&quot;)</span><br><span class="line">const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;)</span><br><span class="line">const ESLintWebpackPlugin = require(&quot;eslint-webpack-plugin&quot;)</span><br><span class="line">const &#123; VueLoaderPlugin &#125; = require(&#x27;vue-loader&#x27;)</span><br><span class="line"></span><br><span class="line">//引入定义环境变量</span><br><span class="line">const &#123; DefinePlugin &#125; = require(&quot;webpack&quot;)</span><br><span class="line"></span><br><span class="line">//返回样式处理loader函数</span><br><span class="line">const getStyleLoaders = (pre) =&gt; &#123;</span><br><span class="line">    return [</span><br><span class="line">        &#x27;vue-style-loader&#x27;,</span><br><span class="line">        &quot;css-loader&quot;,</span><br><span class="line">        &#123;</span><br><span class="line">            loader: &#x27;postcss-loader&#x27;,</span><br><span class="line">            options: &#123;</span><br><span class="line">                postcssOptions: &#123;</span><br><span class="line">                    plugins: [</span><br><span class="line">                        [</span><br><span class="line">                            &#x27;postcss-preset-env&#x27;,</span><br><span class="line">                        ],</span><br><span class="line">                    ],</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        pre,</span><br><span class="line">    ].filter(Boolean)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    entry: &quot;./src/main.js&quot;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: undefined,</span><br><span class="line">        filename: &quot;static/js/[name].js&quot;,</span><br><span class="line">        chunkFilename: &quot;static/js/[name].chunk.js&quot;,</span><br><span class="line">        assetModuleFilename: &quot;static/media/[hash:10][ext][query]&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        rules: [&#123;</span><br><span class="line">                test: /\.css$/,</span><br><span class="line">                use: getStyleLoaders(),</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.less$/,</span><br><span class="line">                use: getStyleLoaders(&quot;less-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.s[ac]ss$/,</span><br><span class="line">                use: getStyleLoaders(&quot;sass-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.styl$/,</span><br><span class="line">                use: getStyleLoaders(&quot;stylus-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.(jpe?g|png|gif|webp|svg)$/,</span><br><span class="line">                type: &quot;asset&quot;,</span><br><span class="line">                parser: &#123;</span><br><span class="line">                    dataUrlCondition: &#123;</span><br><span class="line">                        maxSize: 10 * 1024,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            //处理其他资源</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.(woff2?|ttf)$/,</span><br><span class="line">                type: &quot;asset/resource&quot;,</span><br><span class="line">            &#125;,</span><br><span class="line">            //处理js</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.js$/,</span><br><span class="line">                include: path.resolve(__dirname, &quot;../src&quot;),</span><br><span class="line">                loader: &quot;babel-loader&quot;,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    cacheDirectory: true,</span><br><span class="line">                    cacheCompression: false,</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.vue$/,</span><br><span class="line">                loader: &#x27;vue-loader&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new ESLintWebpackPlugin(&#123;</span><br><span class="line">            context: path.resolve(__dirname, &quot;../src&quot;),</span><br><span class="line">            exclude: &quot;node_modules&quot;,</span><br><span class="line">            cache: true,</span><br><span class="line">            cacheLocation: path.resolve(__dirname, &quot;../node_modules/.cache/.eslintcache&quot;),</span><br><span class="line">        &#125;),</span><br><span class="line">        new HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: path.resolve(__dirname, &quot;../public/index.html&quot;),</span><br><span class="line">        &#125;),</span><br><span class="line">        new VueLoaderPlugin(),</span><br><span class="line">        //cross-env定义的环境变量给打包工具使用</span><br><span class="line">        //DefinePlugin定义环境变量给源代码使用，从而解决vue3页面警告的问题</span><br><span class="line">        new DefinePlugin(&#123;</span><br><span class="line">            __VUE_OPTIONS_API__: true,</span><br><span class="line">            __VUE_PROD_DEVTOOLS__: false,</span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    mode: &quot;development&quot;,</span><br><span class="line">    devtool: &quot;cheap-module-source-map&quot;,</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        splitChunks: &#123;</span><br><span class="line">            chunks: &quot;all&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        runtimeChunk: &#123;</span><br><span class="line">            name: (entrypoint) =&gt; `runtime~$&#123;entrypoint.name&#125;.js`</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    //webppack解析模块加载选啊想</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        //自动补全文件扩展名</span><br><span class="line">        extensions: [&quot;.vue&quot;, &quot;.js&quot;, &quot;.json&quot;]</span><br><span class="line">    &#125;,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        host: &quot;localhost&quot;,</span><br><span class="line">        port: 3000,</span><br><span class="line">        open: true,</span><br><span class="line">        hot: true,</span><br><span class="line">        historyApiFallback: true, //解决前端路由刷新404问题</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>.eslinttrc.js</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    root: true,</span><br><span class="line">    env: &#123;</span><br><span class="line">        node: true,</span><br><span class="line">    &#125;,</span><br><span class="line">    extends: [&quot;plugin:vue/vue3-essential&quot;, &quot;eslint:recommended&quot;],</span><br><span class="line">    parserOptions: &#123;</span><br><span class="line">        parser: &quot;@babel/eslint-parser&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></div></figure>

<p><strong>babel.config.js</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    presets: [&quot;@vue/cli-plugin-babel/preset&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>package.json指令配置</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;start&quot;: &quot;npm run dev&quot;,</span><br><span class="line">  &quot;dev&quot;: &quot;cross-env NODE_ENV=development webpack serve --config ./config/webpack.dev.js&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>main.js</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &quot;vue&quot;</span><br><span class="line">import App from &quot;./App&quot;</span><br><span class="line">createApp(App).mount(document.getElementById(&#x27;app&#x27;));</span><br></pre></td></tr></table></div></figure>


        <h2 id="生产模式配置">
          <a href="#生产模式配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#生产模式配置" class="headerlink" title="生产模式配置"></a>生产模式配置</h2>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&quot;path&quot;)</span><br><span class="line">const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;)</span><br><span class="line">const ESLintWebpackPlugin = require(&quot;eslint-webpack-plugin&quot;)</span><br><span class="line">const &#123; VueLoaderPlugin &#125; = require(&#x27;vue-loader&#x27;)</span><br><span class="line">const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;)</span><br><span class="line">const CssMinimizerWebpackPlugin = require(&quot;css-minimizer-webpack-plugin&quot;)</span><br><span class="line">const TerserWebpackPlugin = require(&quot;terser-webpack-plugin&quot;)</span><br><span class="line">const ImageMinimizerPlugin = require(&quot;image-minimizer-webpack-plugin&quot;)</span><br><span class="line">const CopyPlugin = require(&quot;copy-webpack-plugin&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//引入定义环境变量</span><br><span class="line">const &#123; DefinePlugin &#125; = require(&quot;webpack&quot;)</span><br><span class="line"></span><br><span class="line">//返回样式处理loader函数</span><br><span class="line">const getStyleLoaders = (pre) =&gt; &#123;</span><br><span class="line">    return [</span><br><span class="line">        MiniCssExtractPlugin.loader,</span><br><span class="line">        &quot;css-loader&quot;,</span><br><span class="line">        &#123;</span><br><span class="line">            loader: &#x27;postcss-loader&#x27;,</span><br><span class="line">            options: &#123;</span><br><span class="line">                postcssOptions: &#123;</span><br><span class="line">                    plugins: [</span><br><span class="line">                        [</span><br><span class="line">                            &#x27;postcss-preset-env&#x27;,</span><br><span class="line">                        ],</span><br><span class="line">                    ],</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        pre,</span><br><span class="line">    ].filter(Boolean)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    entry: &quot;./src/main.js&quot;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: undefined,</span><br><span class="line">        filename: &quot;static/js/[name].js&quot;,</span><br><span class="line">        chunkFilename: &quot;static/js/[name].chunk.js&quot;,</span><br><span class="line">        assetModuleFilename: &quot;static/media/[hash:10][ext][query]&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        rules: [&#123;</span><br><span class="line">                test: /\.css$/,</span><br><span class="line">                use: getStyleLoaders(),</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.less$/,</span><br><span class="line">                use: getStyleLoaders(&quot;less-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.s[ac]ss$/,</span><br><span class="line">                use: getStyleLoaders(&quot;sass-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.styl$/,</span><br><span class="line">                use: getStyleLoaders(&quot;stylus-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.(jpe?g|png|gif|webp|svg)$/,</span><br><span class="line">                type: &quot;asset&quot;,</span><br><span class="line">                parser: &#123;</span><br><span class="line">                    dataUrlCondition: &#123;</span><br><span class="line">                        maxSize: 10 * 1024,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            //处理其他资源</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.(woff2?|ttf)$/,</span><br><span class="line">                type: &quot;asset/resource&quot;,</span><br><span class="line">            &#125;,</span><br><span class="line">            //处理js</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.js$/,</span><br><span class="line">                include: path.resolve(__dirname, &quot;../src&quot;),</span><br><span class="line">                loader: &quot;babel-loader&quot;,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    cacheDirectory: true,</span><br><span class="line">                    cacheCompression: false,</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.vue$/,</span><br><span class="line">                loader: &#x27;vue-loader&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new ESLintWebpackPlugin(&#123;</span><br><span class="line">            context: path.resolve(__dirname, &quot;../src&quot;),</span><br><span class="line">            exclude: &quot;node_modules&quot;,</span><br><span class="line">            cache: true,</span><br><span class="line">            cacheLocation: path.resolve(__dirname, &quot;../node_modules/.cache/.eslintcache&quot;),</span><br><span class="line">        &#125;),</span><br><span class="line">        new HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: path.resolve(__dirname, &quot;../public/index.html&quot;),</span><br><span class="line">        &#125;),</span><br><span class="line">        new MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: &quot;static/css/[name].[contenthash:10].css&quot;,</span><br><span class="line">        &#125;),</span><br><span class="line">        new CopyPlugin(&#123;</span><br><span class="line">            patterns: [&#123;</span><br><span class="line">                from: path.resolve(__dirname, &quot;../public&quot;),</span><br><span class="line">                to: path.resolve(__dirname, &quot;../dist&quot;),</span><br><span class="line">                globOptions: &#123;</span><br><span class="line">                    ignore: [&quot;**/index.html&quot;],</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;, ],</span><br><span class="line">        &#125;),</span><br><span class="line">        new VueLoaderPlugin(),</span><br><span class="line">        //cross-env定义的环境变量给打包工具使用</span><br><span class="line">        //DefinePlugin定义环境变量给源代码使用，从而解决vue3页面警告的问题</span><br><span class="line">        new DefinePlugin(&#123;</span><br><span class="line">            __VUE_OPTIONS_API__: true,</span><br><span class="line">            __VUE_PROD_DEVTOOLS__: false,</span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    mode: &quot;production&quot;,</span><br><span class="line">    devtool: &quot;source-map&quot;,</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        splitChunks: &#123;</span><br><span class="line">            chunks: &quot;all&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        runtimeChunk: &#123;</span><br><span class="line">            name: (entrypoint) =&gt; `runtime~$&#123;entrypoint.name&#125;.js`</span><br><span class="line">        &#125;,</span><br><span class="line">        minimizer: [</span><br><span class="line">            new CssMinimizerWebpackPlugin(),</span><br><span class="line">            new TerserWebpackPlugin(),</span><br><span class="line">            new ImageMinimizerPlugin(&#123;</span><br><span class="line">                minimizer: &#123;</span><br><span class="line">                    implementation: ImageMinimizerPlugin.imageminGenerate,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        plugin: [</span><br><span class="line">                            [&quot;gifsicle&quot;, &#123; interlaced: true &#125;],</span><br><span class="line">                            [&quot;jpegtran&quot;, &#123;</span><br><span class="line">                                progressive: true</span><br><span class="line">                            &#125;],</span><br><span class="line">                            [&quot;optipng&quot;, &#123; optimizationLevel: 5 &#125;],</span><br><span class="line">                            [</span><br><span class="line">                                &quot;svgo&quot;,</span><br><span class="line">                                &#123;</span><br><span class="line">                                    plugins: [</span><br><span class="line">                                        &quot;preset-default&quot;,</span><br><span class="line">                                        &quot;prefixIds&quot;,</span><br><span class="line">                                        &#123;</span><br><span class="line">                                            name: &quot;sortAttrs&quot;,</span><br><span class="line">                                            params: &#123;</span><br><span class="line">                                                xmlnsOrder: &quot;alphabetical&quot;,</span><br><span class="line">                                            &#125;</span><br><span class="line">                                        &#125;</span><br><span class="line">                                    ]</span><br><span class="line">                                &#125;</span><br><span class="line">                            ]</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    //webppack解析模块加载选啊想</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        //自动补全文件扩展名</span><br><span class="line">        extensions: [&quot;.vue&quot;, &quot;.js&quot;, &quot;.json&quot;]</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>package.json</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;npm run dev&quot;,</span><br><span class="line">    &quot;dev&quot;: &quot;cross-env NODE_ENV=development webpack serve --config ./config/webpack.dev.js&quot;,</span><br><span class="line">    &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack --config ./config/webpack.prod.js&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>index.html</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;shortcut icon&quot; href=&quot;favicon.ico&quot; type=&quot;image/x-icon&quot;&gt;</span><br><span class="line">    &lt;title&gt;Vue&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></div></figure>


        <h2 id="合并配置">
          <a href="#合并配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#合并配置" class="headerlink" title="合并配置"></a>合并配置</h2>
      <p><strong>webpack.config.js</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&quot;path&quot;)</span><br><span class="line">const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;)</span><br><span class="line">const ESLintWebpackPlugin = require(&quot;eslint-webpack-plugin&quot;)</span><br><span class="line">const &#123; VueLoaderPlugin &#125; = require(&#x27;vue-loader&#x27;)</span><br><span class="line">const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;)</span><br><span class="line">const CssMinimizerWebpackPlugin = require(&quot;css-minimizer-webpack-plugin&quot;)</span><br><span class="line">const TerserWebpackPlugin = require(&quot;terser-webpack-plugin&quot;)</span><br><span class="line">const ImageMinimizerPlugin = require(&quot;image-minimizer-webpack-plugin&quot;)</span><br><span class="line">const CopyPlugin = require(&quot;copy-webpack-plugin&quot;)</span><br><span class="line"></span><br><span class="line">const isProduction = process.env.NODE_ENV === &quot;production&quot;;</span><br><span class="line">//引入定义环境变量</span><br><span class="line">const &#123; DefinePlugin &#125; = require(&quot;webpack&quot;)</span><br><span class="line"></span><br><span class="line">//返回样式处理loader函数</span><br><span class="line">const getStyleLoaders = (pre) =&gt; &#123;</span><br><span class="line">    return [</span><br><span class="line">        isProduction ? MiniCssExtractPlugin.loader : &quot;vue-style-loader&quot;,</span><br><span class="line">        &quot;css-loader&quot;,</span><br><span class="line">        &#123;</span><br><span class="line">            loader: &#x27;postcss-loader&#x27;,</span><br><span class="line">            options: &#123;</span><br><span class="line">                postcssOptions: &#123;</span><br><span class="line">                    plugins: [</span><br><span class="line">                        [</span><br><span class="line">                            &#x27;postcss-preset-env&#x27;,</span><br><span class="line">                        ],</span><br><span class="line">                    ],</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        pre,</span><br><span class="line">    ].filter(Boolean)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    entry: &quot;./src/main.js&quot;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: isProduction ? path.resolve(__dirname, &quot;../dist&quot;) : undefined,</span><br><span class="line">        filename: isProduction ? &quot;static/js/[name].[contenthash:10].js&quot; : &quot;static/js/[name].js&quot;,</span><br><span class="line">        chunkFilename: isProduction ? &quot;static/js/[name].[contenthash:10].chunk.js&quot; : &quot;static/js/[name].chunk.js&quot;,</span><br><span class="line">        assetModuleFilename: &quot;static/media/[hash:10][ext][query]&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        rules: [&#123;</span><br><span class="line">                test: /\.css$/,</span><br><span class="line">                use: getStyleLoaders(),</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.less$/,</span><br><span class="line">                use: getStyleLoaders(&quot;less-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.s[ac]ss$/,</span><br><span class="line">                use: getStyleLoaders(&quot;sass-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.styl$/,</span><br><span class="line">                use: getStyleLoaders(&quot;stylus-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.(jpe?g|png|gif|webp|svg)$/,</span><br><span class="line">                type: &quot;asset&quot;,</span><br><span class="line">                parser: &#123;</span><br><span class="line">                    dataUrlCondition: &#123;</span><br><span class="line">                        maxSize: 10 * 1024,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            //处理其他资源</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.(woff2?|ttf)$/,</span><br><span class="line">                type: &quot;asset/resource&quot;,</span><br><span class="line">            &#125;,</span><br><span class="line">            //处理js</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.js$/,</span><br><span class="line">                include: path.resolve(__dirname, &quot;../src&quot;),</span><br><span class="line">                loader: &quot;babel-loader&quot;,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    cacheDirectory: true,</span><br><span class="line">                    cacheCompression: false,</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.vue$/,</span><br><span class="line">                loader: &#x27;vue-loader&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new ESLintWebpackPlugin(&#123;</span><br><span class="line">            context: path.resolve(__dirname, &quot;../src&quot;),</span><br><span class="line">            exclude: &quot;node_modules&quot;,</span><br><span class="line">            cache: true,</span><br><span class="line">            cacheLocation: path.resolve(__dirname, &quot;../node_modules/.cache/.eslintcache&quot;),</span><br><span class="line">        &#125;),</span><br><span class="line">        new HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: path.resolve(__dirname, &quot;../public/index.html&quot;),</span><br><span class="line">        &#125;),</span><br><span class="line">        isProduction &amp;&amp; new MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: &quot;static/css/[name].[contenthash:10].css&quot;,</span><br><span class="line">            chunkFilename: &quot;static/css/[name].[contenthash:10].chunk.css&quot;,</span><br><span class="line">        &#125;),</span><br><span class="line">        isProduction &amp;&amp; new CopyPlugin(&#123;</span><br><span class="line">            patterns: [&#123;</span><br><span class="line">                from: path.resolve(__dirname, &quot;../public&quot;),</span><br><span class="line">                to: path.resolve(__dirname, &quot;../dist&quot;),</span><br><span class="line">                globOptions: &#123;</span><br><span class="line">                    ignore: [&quot;**/index.html&quot;],</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;, ],</span><br><span class="line">        &#125;),</span><br><span class="line">        new VueLoaderPlugin(),</span><br><span class="line">        //cross-env定义的环境变量给打包工具使用</span><br><span class="line">        //DefinePlugin定义环境变量给源代码使用，从而解决vue3页面警告的问题</span><br><span class="line">        new DefinePlugin(&#123;</span><br><span class="line">            __VUE_OPTIONS_API__: true,</span><br><span class="line">            __VUE_PROD_DEVTOOLS__: false,</span><br><span class="line">        &#125;)</span><br><span class="line">    ].filter(Boolean),</span><br><span class="line">    mode: isProduction ? &quot;production&quot; : &quot;development&quot;,</span><br><span class="line">    devtool: isProduction ? &quot;source-map&quot; : &quot;cheap-module-source-map&quot;,</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        splitChunks: &#123;</span><br><span class="line">            chunks: &quot;all&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        runtimeChunk: &#123;</span><br><span class="line">            name: (entrypoint) =&gt; `runtime~$&#123;entrypoint.name&#125;.js`</span><br><span class="line">        &#125;,</span><br><span class="line">        minimize: isProduction,</span><br><span class="line">        minimizer: [</span><br><span class="line">            new CssMinimizerWebpackPlugin(),</span><br><span class="line">            new TerserWebpackPlugin(),</span><br><span class="line">            new ImageMinimizerPlugin(&#123;</span><br><span class="line">                minimizer: &#123;</span><br><span class="line">                    implementation: ImageMinimizerPlugin.imageminGenerate,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        plugin: [</span><br><span class="line">                            [&quot;gifsicle&quot;, &#123; interlaced: true &#125;],</span><br><span class="line">                            [&quot;jpegtran&quot;, &#123;</span><br><span class="line">                                progressive: true</span><br><span class="line">                            &#125;],</span><br><span class="line">                            [&quot;optipng&quot;, &#123; optimizationLevel: 5 &#125;],</span><br><span class="line">                            [</span><br><span class="line">                                &quot;svgo&quot;,</span><br><span class="line">                                &#123;</span><br><span class="line">                                    plugins: [</span><br><span class="line">                                        &quot;preset-default&quot;,</span><br><span class="line">                                        &quot;prefixIds&quot;,</span><br><span class="line">                                        &#123;</span><br><span class="line">                                            name: &quot;sortAttrs&quot;,</span><br><span class="line">                                            params: &#123;</span><br><span class="line">                                                xmlnsOrder: &quot;alphabetical&quot;,</span><br><span class="line">                                            &#125;</span><br><span class="line">                                        &#125;</span><br><span class="line">                                    ]</span><br><span class="line">                                &#125;</span><br><span class="line">                            ]</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    //webppack解析模块加载选啊想</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        //自动补全文件扩展名</span><br><span class="line">        extensions: [&quot;.vue&quot;, &quot;.js&quot;, &quot;.json&quot;]</span><br><span class="line">    &#125;,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        host: &quot;localhost&quot;,</span><br><span class="line">        port: 3000,</span><br><span class="line">        open: true,</span><br><span class="line">        hot: true,</span><br><span class="line">        historyApiFallback: true, //解决前端路由刷新404问题</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>PACKAGE.JSON</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;npm run dev&quot;,</span><br><span class="line">    &quot;dev&quot;: &quot;cross-env NODE_ENV=development webpack serve --config ./config/webpack.config.js&quot;,</span><br><span class="line">    &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack --config ./config/webpack.config.js&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h2 id="优化配置">
          <a href="#优化配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#优化配置" class="headerlink" title="优化配置"></a>优化配置</h2>
      
        <h3 id="1-引入element-plus">
          <a href="#1-引入element-plus" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-引入element-plus" class="headerlink" title="1.引入element-plus"></a>1.引入element-plus</h3>
      <p><strong>全部引入</strong></p>
<p><strong>1. 下载element-plus</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i element-plus</span><br></pre></td></tr></table></div></figure>

<p><strong>2. main.js中引入</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementPlus</span> <span class="keyword">from</span> <span class="string">&quot;element-plus&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/dist/index.css&#x27;</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(<span class="title class_">ElementPlus</span>).<span class="title function_">mount</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;app&#x27;</span>));</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>3. 使用</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=&quot;primary&quot;&gt;按按钮&lt;/el-button&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>按需引入</strong></p>
<p><strong>1. 下载包</strong></p>
<p><code>npm install -D unplugin-vue-components unplugin-auto-import</code></p>
<p><strong>2. webpack.config.js配置</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// webpack.config.js</span><br><span class="line">const AutoImport = require(&#x27;unplugin-auto-import/webpack&#x27;)</span><br><span class="line">const Components = require(&#x27;unplugin-vue-components/webpack&#x27;)</span><br><span class="line">const &#123; ElementPlusResolver &#125; = require(&#x27;unplugin-vue-components/resolvers&#x27;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  plugins: [</span><br><span class="line">    AutoImport(&#123;</span><br><span class="line">      resolvers: [ElementPlusResolver()],</span><br><span class="line">    &#125;),</span><br><span class="line">    Components(&#123;</span><br><span class="line">      resolvers: [ElementPlusResolver()],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>3.删除全部引入样式和js，在需要使用的地方引入注册</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-button&gt;I am ElButton&lt;/el-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &#123; ElButton &#125; from &#x27;element-plus&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    components: &#123; ElButton &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/05/27/web-axios/">web-axios</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-05-27</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-06-21</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h2 id="axios基本使用">
          <a href="#axios基本使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#axios基本使用" class="headerlink" title="axios基本使用"></a>axios基本使用</h2>
      
        <h3 id="1-發送請求">
          <a href="#1-發送請求" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-發送請求" class="headerlink" title="1. 發送請求"></a>1. 發送請求</h3>
      <p><strong>基本请求</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;http://localhost:3000/posts/2&quot;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;http://localhost:3000/posts/2&quot;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>post請求</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">post</span>(<span class="string">&quot;http://localhost:3000/comments&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">body</span>: <span class="string">&quot;一個評論&quot;</span>,</span><br><span class="line">    <span class="attr">postId</span>: <span class="number">2</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-请求配置">
          <a href="#2-请求配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-请求配置" class="headerlink" title="2. 请求配置"></a>2. 请求配置</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// `url` 是用于请求的服务器 URL</span></span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/user&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `method` 是创建请求时使用的方法</span></span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>, <span class="comment">// 默认值</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `baseURL` 将自动加在 `url` 前面，除非 `url` 是一个绝对 URL。</span></span><br><span class="line">  <span class="comment">// 它可以通过设置一个 `baseURL` 便于为 axios 实例的方法传递相对 URL</span></span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;https://some-domain.com/api/&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `transformRequest` 允许在向服务器发送前，修改请求数据</span></span><br><span class="line">  <span class="comment">// 它只能用于 &#x27;PUT&#x27;, &#x27;POST&#x27; 和 &#x27;PATCH&#x27; 这几个请求方法</span></span><br><span class="line">  <span class="comment">// 数组中最后一个函数必须返回一个字符串， 一个Buffer实例，ArrayBuffer，FormData，或 Stream</span></span><br><span class="line">  <span class="comment">// 你可以修改请求头。</span></span><br><span class="line">  <span class="attr">transformRequest</span>: [<span class="keyword">function</span> (<span class="params">data, headers</span>) &#123;</span><br><span class="line">    <span class="comment">// 对发送的 data 进行任意转换处理</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `transformResponse` 在传递给 then/catch 前，允许修改响应数据</span></span><br><span class="line">  <span class="attr">transformResponse</span>: [<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="comment">// 对接收的 data 进行任意转换处理</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 自定义请求头</span></span><br><span class="line">  <span class="attr">headers</span>: &#123;<span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span>&#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `params` 是与请求一起发送的 URL 参数</span></span><br><span class="line">  <span class="comment">// 必须是一个简单对象或 URLSearchParams 对象</span></span><br><span class="line">  <span class="attr">params</span>: &#123;</span><br><span class="line">    <span class="attr">ID</span>: <span class="number">12345</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `paramsSerializer`是可选方法，主要用于序列化`params`</span></span><br><span class="line">  <span class="comment">// (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)</span></span><br><span class="line">  <span class="attr">paramsSerializer</span>: <span class="keyword">function</span> (<span class="params">params</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Qs</span>.<span class="title function_">stringify</span>(params, &#123;<span class="attr">arrayFormat</span>: <span class="string">&#x27;brackets&#x27;</span>&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `data` 是作为请求体被发送的数据</span></span><br><span class="line">  <span class="comment">// 仅适用 &#x27;PUT&#x27;, &#x27;POST&#x27;, &#x27;DELETE 和 &#x27;PATCH&#x27; 请求方法</span></span><br><span class="line">  <span class="comment">// 在没有设置 `transformRequest` 时，则必须是以下类型之一:</span></span><br><span class="line">  <span class="comment">// - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams</span></span><br><span class="line">  <span class="comment">// - 浏览器专属: FormData, File, Blob</span></span><br><span class="line">  <span class="comment">// - Node 专属: Stream, Buffer</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&#x27;Fred&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 发送请求体数据的可选语法</span></span><br><span class="line">  <span class="comment">// 请求方式 post</span></span><br><span class="line">  <span class="comment">// 只有 value 会被发送，key 则不会</span></span><br><span class="line">  <span class="attr">data</span>: <span class="string">&#x27;Country=Brasil&amp;City=Belo Horizonte&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `timeout` 指定请求超时的毫秒数。</span></span><br><span class="line">  <span class="comment">// 如果请求时间超过 `timeout` 的值，则请求会被中断</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">1000</span>, <span class="comment">// 默认值是 `0` (永不超时)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `withCredentials` 表示跨域请求时是否需要使用凭证</span></span><br><span class="line">  <span class="attr">withCredentials</span>: <span class="literal">false</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `adapter` 允许自定义处理请求，这使测试更加容易。</span></span><br><span class="line">  <span class="comment">// 返回一个 promise 并提供一个有效的响应 （参见 lib/adapters/README.md）。</span></span><br><span class="line">  <span class="attr">adapter</span>: <span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `auth` HTTP Basic Auth</span></span><br><span class="line">  <span class="attr">auth</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;janedoe&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;s00pers3cret&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `responseType` 表示浏览器将要响应的数据类型</span></span><br><span class="line">  <span class="comment">// 选项包括: &#x27;arraybuffer&#x27;, &#x27;document&#x27;, &#x27;json&#x27;, &#x27;text&#x27;, &#x27;stream&#x27;</span></span><br><span class="line">  <span class="comment">// 浏览器专属：&#x27;blob&#x27;</span></span><br><span class="line">  <span class="attr">responseType</span>: <span class="string">&#x27;json&#x27;</span>, <span class="comment">// 默认值</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `responseEncoding` 表示用于解码响应的编码 (Node.js 专属)</span></span><br><span class="line">  <span class="comment">// 注意：忽略 `responseType` 的值为 &#x27;stream&#x27;，或者是客户端请求</span></span><br><span class="line">  <span class="comment">// Note: Ignored for `responseType` of &#x27;stream&#x27; or client-side requests</span></span><br><span class="line">  <span class="attr">responseEncoding</span>: <span class="string">&#x27;utf8&#x27;</span>, <span class="comment">// 默认值</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `xsrfCookieName` 是 xsrf token 的值，被用作 cookie 的名称</span></span><br><span class="line">  <span class="attr">xsrfCookieName</span>: <span class="string">&#x27;XSRF-TOKEN&#x27;</span>, <span class="comment">// 默认值</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `xsrfHeaderName` 是带有 xsrf token 值的http 请求头名称</span></span><br><span class="line">  <span class="attr">xsrfHeaderName</span>: <span class="string">&#x27;X-XSRF-TOKEN&#x27;</span>, <span class="comment">// 默认值</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `onUploadProgress` 允许为上传处理进度事件</span></span><br><span class="line">  <span class="comment">// 浏览器专属</span></span><br><span class="line">  <span class="attr">onUploadProgress</span>: <span class="keyword">function</span> (<span class="params">progressEvent</span>) &#123;</span><br><span class="line">    <span class="comment">// 处理原生进度事件</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `onDownloadProgress` 允许为下载处理进度事件</span></span><br><span class="line">  <span class="comment">// 浏览器专属</span></span><br><span class="line">  <span class="attr">onDownloadProgress</span>: <span class="keyword">function</span> (<span class="params">progressEvent</span>) &#123;</span><br><span class="line">    <span class="comment">// 处理原生进度事件</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `maxContentLength` 定义了node.js中允许的HTTP响应内容的最大字节数</span></span><br><span class="line">  <span class="attr">maxContentLength</span>: <span class="number">2000</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `maxBodyLength`（仅Node）定义允许的http请求内容的最大字节数</span></span><br><span class="line">  <span class="attr">maxBodyLength</span>: <span class="number">2000</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `validateStatus` 定义了对于给定的 HTTP状态码是 resolve 还是 reject promise。</span></span><br><span class="line">  <span class="comment">// 如果 `validateStatus` 返回 `true` (或者设置为 `null` 或 `undefined`)，</span></span><br><span class="line">  <span class="comment">// 则promise 将会 resolved，否则是 rejected。</span></span><br><span class="line">  <span class="attr">validateStatus</span>: <span class="keyword">function</span> (<span class="params">status</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> status &gt;= <span class="number">200</span> &amp;&amp; status &lt; <span class="number">300</span>; <span class="comment">// 默认值</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `maxRedirects` 定义了在node.js中要遵循的最大重定向数。</span></span><br><span class="line">  <span class="comment">// 如果设置为0，则不会进行重定向</span></span><br><span class="line">  <span class="attr">maxRedirects</span>: <span class="number">5</span>, <span class="comment">// 默认值</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `socketPath` 定义了在node.js中使用的UNIX套接字。</span></span><br><span class="line">  <span class="comment">// e.g. &#x27;/var/run/docker.sock&#x27; 发送请求到 docker 守护进程。</span></span><br><span class="line">  <span class="comment">// 只能指定 `socketPath` 或 `proxy` 。</span></span><br><span class="line">  <span class="comment">// 若都指定，这使用 `socketPath` 。</span></span><br><span class="line">  <span class="attr">socketPath</span>: <span class="literal">null</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `httpAgent` and `httpsAgent` define a custom agent to be used when performing http</span></span><br><span class="line">  <span class="comment">// and https requests, respectively, in node.js. This allows options to be added like</span></span><br><span class="line">  <span class="comment">// `keepAlive` that are not enabled by default.</span></span><br><span class="line">  <span class="attr">httpAgent</span>: <span class="keyword">new</span> http.<span class="title class_">Agent</span>(&#123; <span class="attr">keepAlive</span>: <span class="literal">true</span> &#125;),</span><br><span class="line">  <span class="attr">httpsAgent</span>: <span class="keyword">new</span> https.<span class="title class_">Agent</span>(&#123; <span class="attr">keepAlive</span>: <span class="literal">true</span> &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `proxy` 定义了代理服务器的主机名，端口和协议。</span></span><br><span class="line">  <span class="comment">// 您可以使用常规的`http_proxy` 和 `https_proxy` 环境变量。</span></span><br><span class="line">  <span class="comment">// 使用 `false` 可以禁用代理功能，同时环境变量也会被忽略。</span></span><br><span class="line">  <span class="comment">// `auth`表示应使用HTTP Basic auth连接到代理，并且提供凭据。</span></span><br><span class="line">  <span class="comment">// 这将设置一个 `Proxy-Authorization` 请求头，它会覆盖 `headers` 中已存在的自定义 `Proxy-Authorization` 请求头。</span></span><br><span class="line">  <span class="comment">// 如果代理服务器使用 HTTPS，则必须设置 protocol 为`https`</span></span><br><span class="line">  <span class="attr">proxy</span>: &#123;</span><br><span class="line">    <span class="attr">protocol</span>: <span class="string">&#x27;https&#x27;</span>,</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">9000</span>,</span><br><span class="line">    <span class="attr">auth</span>: &#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&#x27;mikeymike&#x27;</span>,</span><br><span class="line">      <span class="attr">password</span>: <span class="string">&#x27;rapunz3l&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// see https://axios-http.com/zh/docs/cancellation</span></span><br><span class="line">  <span class="attr">cancelToken</span>: <span class="keyword">new</span> <span class="title class_">CancelToken</span>(<span class="keyword">function</span> (<span class="params">cancel</span>) &#123;</span><br><span class="line">  &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `decompress` indicates whether or not the response body should be decompressed </span></span><br><span class="line">  <span class="comment">// automatically. If set to `true` will also remove the &#x27;content-encoding&#x27; header </span></span><br><span class="line">  <span class="comment">// from the responses objects of all decompressed responses</span></span><br><span class="line">  <span class="comment">// - Node only (XHR cannot turn off decompression)</span></span><br><span class="line">  <span class="attr">decompress</span>: <span class="literal">true</span> <span class="comment">// 默认值</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-默认配置">
          <a href="#3-默认配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-默认配置" class="headerlink" title="3. 默认配置"></a>3. 默认配置</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//默认请求类型</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">method</span>=<span class="string">&quot;GET&quot;</span>;</span><br><span class="line"><span class="comment">//默认baseURL</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span>=<span class="string">&quot;http://localhost:3000&quot;</span></span><br></pre></td></tr></table></div></figure>


        <h3 id="创建多个axios实例对象">
          <a href="#创建多个axios实例对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#创建多个axios实例对象" class="headerlink" title="创建多个axios实例对象"></a>创建多个axios实例对象</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> requests = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;http://localhost:3000/&#x27;</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">2000</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> anotherRequests = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;https://api.apiopen.top&#x27;</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">2000</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>requests实例对象与axios对象的功能几近是一样的</strong></p>
<p>使用：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">requests</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;/posts&quot;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">reponse</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reponse)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//get请求</span></span><br><span class="line">requests.<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>)</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-拦截器">
          <a href="#4-拦截器" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-拦截器" class="headerlink" title="4. 拦截器"></a>4. 拦截器</h3>
      <p><strong>请求拦截器</strong></p>
<p>发送请求之前借助函数来对参数内容进行处理和检测</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//config就是配置对象</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">	config.<span class="property">params</span> = &#123;<span class="attr">a</span>:<span class="number">100</span>&#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求拦截器成功,&quot;</span>, config)</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求拦截器失败,&quot;</span>, error)</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="keyword">function</span>(<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;响应拦截器成功,&quot;</span>, response)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">	<span class="comment">//此处可以return response.data，使返回的结果没有状态码等等东西</span></span><br><span class="line">&#125;, <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;响应拦截器失败,&quot;</span>, error)</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;http://localhost:3000/posts&quot;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;res:&quot;</span>, response)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="5-取消请求">
          <a href="#5-取消请求" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-取消请求" class="headerlink" title="5.取消请求"></a>5.取消请求</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2. 声明全局变量</span></span><br><span class="line"><span class="keyword">let</span> cancel = <span class="literal">null</span></span><br><span class="line"><span class="keyword">const</span> btns = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;button&quot;</span>)</span><br><span class="line">btns[<span class="number">0</span>].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//发送之前检测上一次请求是否已经完成，防止用户连续点击造成服务器压力</span></span><br><span class="line">    <span class="keyword">if</span> (cancel != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;取消1&quot;</span>)</span><br><span class="line">        <span class="title function_">cancel</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">axios</span>(&#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&quot;http://localhost:3000/posts&quot;</span>,</span><br><span class="line">        <span class="comment">//1. 添加配置对象的属性</span></span><br><span class="line">        <span class="attr">cancelToken</span>: <span class="keyword">new</span> axios.<span class="title class_">CancelToken</span>(<span class="keyword">function</span>(<span class="params">c</span>) &#123;</span><br><span class="line">            <span class="comment">//3. c赋值给cancel</span></span><br><span class="line">            cancel = c</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(response)</span><br><span class="line"></span><br><span class="line">        <span class="comment">//请求响应完毕，重置cancel</span></span><br><span class="line">        cancel = <span class="literal">null</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">btns[<span class="number">1</span>].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//4.执行函数</span></span><br><span class="line">    <span class="title function_">cancel</span>()</span><br><span class="line">    cancel = <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="axios源码分析">
          <a href="#axios源码分析" class="heading-link"><i class="fas fa-link"></i></a><a href="#axios源码分析" class="headerlink" title="axios源码分析"></a>axios源码分析</h2>
      
        <h3 id="1-axios对象创建过程模拟实现">
          <a href="#1-axios对象创建过程模拟实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-axios对象创建过程模拟实现" class="headerlink" title="1.axios对象创建过程模拟实现"></a>1.axios对象创建过程模拟实现</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Axios</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">//初始化Axios构造函数</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">defaults</span> = config</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">interceptor</span> = &#123;</span><br><span class="line">        <span class="attr">requests</span>: &#123;&#125;,</span><br><span class="line">        <span class="attr">response</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加Axios原型方法</span></span><br><span class="line"><span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">request</span> = <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;发送的请求类型为：&quot;</span>, config.<span class="property">method</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">get</span> = <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;发送的请求类型为：get&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">post</span> = <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;发送的请求类型为：post&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//声明函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createInstance</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">//实例化Axios,此时context有Axios的原型方法和对象内方法</span></span><br><span class="line">    <span class="keyword">let</span> context = <span class="keyword">new</span> <span class="title class_">Axios</span>(config)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建请求函数,instance=Axios.prototype.request,且this是Axios的实例(context)指向</span></span><br><span class="line">    <span class="keyword">let</span> instance = <span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">request</span>.<span class="title function_">bind</span>(context)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//遍历Axios的原型方法并添加进instance中</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//使instance中的所有方法的this都指向Axios的实例对象(context)</span></span><br><span class="line">        instance[item] = <span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>[item].<span class="title function_">bind</span>(context)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//遍历context中的方法并添加到instance中</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(context).<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            instance[item] = context[item]</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">//返回实例</span></span><br><span class="line">    <span class="keyword">return</span> instance</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> axios = <span class="title function_">createInstance</span>()</span><br><span class="line"></span><br><span class="line">axios.<span class="title function_">post</span>()</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-模拟实现axios发送请求">
          <a href="#2-模拟实现axios发送请求" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-模拟实现axios发送请求" class="headerlink" title="2. 模拟实现axios发送请求"></a>2. 模拟实现axios发送请求</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Axios</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">config</span> = config</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">request</span> = <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">//创建promise对象，由于config是一个对象，此处必成功</span></span><br><span class="line">    <span class="keyword">let</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(config)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//声明一个数组</span></span><br><span class="line">    <span class="keyword">let</span> chains = [dispatchRequest, <span class="literal">undefined</span>]</span><br><span class="line">    <span class="keyword">let</span> result = promise.<span class="title function_">then</span>(chains[<span class="number">0</span>], chains[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">dispatchRequest</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">xhrAdapter</span>(config).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//响应的结果进行处理</span></span><br><span class="line">        <span class="keyword">return</span> response</span><br><span class="line">    &#125;, <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> error</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//adapter适配器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">xhrAdapter</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//发送ajax请求</span></span><br><span class="line">        <span class="keyword">let</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//初始化</span></span><br><span class="line">        xhr.<span class="title function_">open</span>(config.<span class="property">method</span>, config.<span class="property">url</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">//发送</span></span><br><span class="line">        xhr.<span class="title function_">send</span>()</span><br><span class="line"></span><br><span class="line">        <span class="comment">//绑定事件</span></span><br><span class="line">        xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span><br><span class="line">                <span class="comment">//判断成功的条件</span></span><br><span class="line">                <span class="keyword">if</span> (xhr.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; xhr.<span class="property">status</span> &lt; <span class="number">300</span>) &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(&#123;</span><br><span class="line">                        <span class="comment">//配置对象</span></span><br><span class="line">                        <span class="attr">config</span>: config,</span><br><span class="line">                        <span class="comment">//响应体</span></span><br><span class="line">                        <span class="attr">data</span>: xhr.<span class="property">response</span>,</span><br><span class="line">                        <span class="comment">//响应头</span></span><br><span class="line">                        <span class="attr">headers</span>: xhr.<span class="title function_">getAllResponseHeaders</span>(),</span><br><span class="line">                        <span class="comment">//xhr请求对象</span></span><br><span class="line">                        <span class="attr">request</span>: xhr,</span><br><span class="line">                        <span class="comment">//响应状态码</span></span><br><span class="line">                        <span class="attr">status</span>: xhr.<span class="property">status</span>,</span><br><span class="line">                        <span class="comment">//响应状态字符串</span></span><br><span class="line">                        <span class="attr">statusText</span>: xhr.<span class="property">statusText</span></span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;请求失败：&quot;</span>, xhr.<span class="property">status</span>))</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建axios方法，等同Axios原型对象的request方法</span></span><br><span class="line"><span class="keyword">let</span> axios = <span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">request</span>.<span class="title function_">bind</span>(<span class="literal">null</span>)</span><br><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;http://localhost:3000/posts&quot;</span>,</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-模擬实现axios拦截器功能">
          <a href="#3-模擬实现axios拦截器功能" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-模擬实现axios拦截器功能" class="headerlink" title="3. 模擬实现axios拦截器功能"></a>3. 模擬实现axios拦截器功能</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Axios</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">config</span> = config</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">interceptors</span> = &#123;</span><br><span class="line">        <span class="attr">request</span>: <span class="keyword">new</span> <span class="title class_">InterceptorManager</span>(),</span><br><span class="line">        <span class="attr">response</span>: <span class="keyword">new</span> <span class="title class_">InterceptorManager</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">request</span> = <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">//创建一个promise对象</span></span><br><span class="line">    <span class="keyword">let</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(config)</span><br><span class="line">    <span class="keyword">const</span> chains = [dispatchRequest, <span class="literal">undefined</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理拦截器</span></span><br><span class="line">    <span class="comment">//请求拦截器：将请求拦截器的回调压入到chains的前面</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="property">handlers</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        chains.<span class="title function_">unshift</span>(item.<span class="property">fulfilled</span>, item.<span class="property">rejected</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//响应拦截器</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="property">handlers</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        chains.<span class="title function_">push</span>(item.<span class="property">fulfilled</span>, item.<span class="property">rejected</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(chains)</span><br><span class="line">    遍历</span><br><span class="line">    <span class="keyword">while</span> (chains.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="comment">//shift方法：删除数组的第一个元素并返回</span></span><br><span class="line"></span><br><span class="line">        promise = promise.<span class="title function_">then</span>(chains.<span class="title function_">shift</span>(), chains.<span class="title function_">shift</span>())</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> promise</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">dispatchRequest</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;dispatchRequest&quot;</span>)</span><br><span class="line">        <span class="title function_">resolve</span>(&#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="attr">statusText</span>: <span class="string">&quot;OK&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> context = <span class="keyword">new</span> <span class="title class_">Axios</span>(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建axios方法，等同Axios原型对象的request方法</span></span><br><span class="line"><span class="keyword">let</span> axios = <span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">request</span>.<span class="title function_">bind</span>(context)</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(context).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    axios[key] = context[key]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">InterceptorManager</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handlers</span> = []</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">InterceptorManager</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">use</span> = <span class="keyword">function</span>(<span class="params">fulfilled, rejected</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handlers</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">        fulfilled,</span><br><span class="line">        rejected</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试代码</span></span><br><span class="line"><span class="comment">//请求拦截器</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> <span class="title function_">one</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求拦截器1&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="keyword">function</span> <span class="title function_">one</span>(<span class="params">err</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> <span class="title function_">two</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求拦截器2&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="keyword">function</span> <span class="title function_">two</span>(<span class="params">err</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//响应拦截器</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="keyword">function</span> <span class="title function_">one</span>(<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;响应拦截器1&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">&#125;, <span class="keyword">function</span> <span class="title function_">one</span>(<span class="params">err</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="keyword">function</span> <span class="title function_">two</span>(<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;响应拦截器2&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">&#125;, <span class="keyword">function</span> <span class="title function_">two</span>(<span class="params">err</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;get&quot;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-模拟事项axios取消请求功能">
          <a href="#4-模拟事项axios取消请求功能" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-模拟事项axios取消请求功能" class="headerlink" title="4. 模拟事项axios取消请求功能"></a>4. 模拟事项axios取消请求功能</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;button&gt;发送&lt;/button&gt;</span><br><span class="line">    &lt;button&gt;取消&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        //2. 声明全局变量</span><br><span class="line">        let cancel = null</span><br><span class="line">        const btns = document.querySelectorAll(&quot;button&quot;)</span><br><span class="line">        btns[0].onclick = function() &#123;</span><br><span class="line">            axios(&#123;</span><br><span class="line">                method: &quot;get&quot;,</span><br><span class="line">                url: &quot;http://localhost:3000/posts&quot;,</span><br><span class="line">                //1. 添加配置对象的属性</span><br><span class="line">                cancelToken: new CancelToken(function(c) &#123;</span><br><span class="line">                    /**</span><br><span class="line">                     * c赋值给cancel</span><br><span class="line">                     * 对应源码：c = function()&#123;resolvePromise()&#125;</span><br><span class="line">                     * executor(function() &#123;</span><br><span class="line">                     *    resolvePromise()</span><br><span class="line">                     * &#125;)</span><br><span class="line">                     */</span><br><span class="line">                    cancel = c //将可以改变cancelToken实例上的promise状态的方法暴露到全局</span><br><span class="line"></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;).then(response =&gt; &#123;</span><br><span class="line">                console.log(response)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        btns[1].onclick = function() &#123;</span><br><span class="line">            cancel()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //取消请求实现</span><br><span class="line">        function Axios(config) &#123;</span><br><span class="line">            this.config = config</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Axios.prototype.request = function(config) &#123;</span><br><span class="line">            return dispatchRequest(config)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //dispatchRequest</span><br><span class="line">        function dispatchRequest(config) &#123;</span><br><span class="line">            return xhrAdapter(config)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //xhrAdapter</span><br><span class="line">        function xhrAdapter(config) &#123;</span><br><span class="line">            //发送ajax请求</span><br><span class="line">            return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">                const xhr = new XMLHttpRequest</span><br><span class="line">                xhr.open(config.method, config.url)</span><br><span class="line">                xhr.send()</span><br><span class="line">                xhr.onreadystatechange = function() &#123;</span><br><span class="line">                    if (xhr.readyState === 4) &#123;</span><br><span class="line">                        if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) &#123;</span><br><span class="line">                            resolve(&#123;</span><br><span class="line">                                status: xhr.status,</span><br><span class="line">                                statusText: xhr.statusText</span><br><span class="line">                            &#125;)</span><br><span class="line">                        &#125; else &#123;</span><br><span class="line">                            reject(new Error(&quot;请求失败&quot;))</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                //5. 关于取消请求的处理</span><br><span class="line">                //如果config中配置了cancelToken</span><br><span class="line">                if (config.cancelToken) &#123;</span><br><span class="line">                    //对cancelToken对象身上的promise指定成功的回调</span><br><span class="line">                    config.cancelToken.promise.then(value =&gt; &#123;</span><br><span class="line">                        //取消请求</span><br><span class="line">                        xhr.abort()</span><br><span class="line">                        reject(new Error(&quot;请求已经被取消&quot;))</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //创建axios函数</span><br><span class="line">        const context = new Axios(&#123;&#125;)</span><br><span class="line">        const axios = Axios.prototype.request.bind(context)</span><br><span class="line"></span><br><span class="line">        //1. CancelToken构造函数</span><br><span class="line">        function CancelToken(executor) &#123;</span><br><span class="line">            var resolvePromise;</span><br><span class="line">            //2. 为实例对象添加属性</span><br><span class="line">            this.promise = new Promise((resolve) =&gt; &#123;</span><br><span class="line">                //3. 将resolve赋值给resolvePromise,此时resolvePromise的功能和resolve一致</span><br><span class="line">                resolvePromise = resolve</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">            //4. 调用executor函数</span><br><span class="line">            executor(function() &#123;</span><br><span class="line">                //executor的参数为函数对象，作用为将实例的promise对象的状态改为成功</span><br><span class="line">                resolvePromise()</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        console.dir(axios)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></div></figure></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/05/03/%E8%A7%A3%E5%86%B3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AEgithub/">解决无法访问github</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-05-03</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-21</span></span></div></header><div class="post-body"><div class="post-excerpt"><p><strong>如果有穿墙插件如Google助手  VPN  SS 之类别 有可能被全局代理 首先关闭这些软件 或者浏览器插件</strong></p>
<p>假设，您的本地代理端口为：1080 ，打开git base窗口进行按下列的方式设置。（在Linux及OSX系统环境下测试通过。）</p>
<p><strong>全局代理(不推荐)</strong></p>
<p>设置代理：</p>
<p><code>git config --global http.proxy socks5://127.0.0.1:1080git config --global https.proxy socks5://127.0.0.1:1080</code></p>
<p>取消代理：</p>
<p><code>git config --global --unset http.proxygit config --global --unset https.proxy</code></p>
<p><strong>只对部分域名代理(推荐)</strong></p>
<p>只对github进行代理，不会影响国内仓库。</p>
<p><code>git config --global http.https://github.com.proxy socks5://127.0.0.1:10808git config --global https.https://github.com.proxy socks5://127.0.0.1:10808</code></p>
<font color="green">
相信很多小伙伴都遇到过访问不了GitHub问题，一直加载不出来，漫长等待时间后出现无法加载的提示，心情爆炸！今天就彻底解决这个问题。下面的IP地址，小伙伴们一定不要按照我的来，因为这个IP过一段好像会改变，大家按照我给的网址一步步操作就可以了。</font>

<p><strong>一、确定ip</strong></p>
<p>进入网址  <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://github.com.ipaddress.com/">https://github.com.ipaddress.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>查看GitHub的ip地址。</p>
<p><img src="/2022/05/03/%E8%A7%A3%E5%86%B3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AEgithub/1522016-20211012115630416-1260864177.png"></p>
<p> <strong>二、确定域名ip</strong></p>
<p>进入网址  <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://fastly.net.ipaddress.com/github.global.ssl.fastly.net">https://fastly.net.ipaddress.com/github.global.ssl.fastly.net</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><img src="/2022/05/03/%E8%A7%A3%E5%86%B3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AEgithub/1522016-20211012115631274-528124061.png"></p>
<p><strong>三、确定静态资源ip</strong></p>
<p>进入网址 <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://github.com.ipaddress.com/assets-cdn.github.com">https://github.com.ipaddress.com/assets-cdn.github.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><img src="/2022/05/03/%E8%A7%A3%E5%86%B3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AEgithub/1522016-20211012115631778-317634013.png"></p>
<p><strong>四、修改hosts文件</strong></p>
<p>Windows系统：打开C:\Windows\System32\drivers\etc</p>
<p>找到hosts文件</p>
<p>在底部加上前三步获得的内容</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">140.82.114.4 github.com</span><br><span class="line">199.232.69.194 github.global.ssl.fastly.net</span><br><span class="line">185.199.108.153 assets-cdn.github.com</span><br><span class="line">185.199.110.153 assets-cdn.github.com</span><br><span class="line">185.199.111.153 assets-cdn.github.com</span><br></pre></td></tr></table></div></figure>

<p>保存并退出即可。需要提供管理员权限！！！</p>
<p>接着还需要刷新DNS</p>
<p>windows下刷新DNS的方法：</p>
<p>打开CMD</p>
<p>输入   ipconfig &#x2F;flushdns</p>
<p>参考：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.cnblogs.com/jiannanchun/p/15397235.html">https://www.cnblogs.com/jiannanchun/p/15397235.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/04/10/web-vue01/">web-vue01</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-04-10</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-30</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="VUE基础">
          <a href="#VUE基础" class="heading-link"><i class="fas fa-link"></i></a><a href="#VUE基础" class="headerlink" title="VUE基础"></a>VUE基础</h1>
      
        <h2 id="基础案例">
          <a href="#基础案例" class="heading-link"><i class="fas fa-link"></i></a><a href="#基础案例" class="headerlink" title="基础案例"></a><font color="green">基础案例</font></h2>
      
        <h3 id="1-初识vue">
          <a href="#1-初识vue" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-初识vue" class="headerlink" title="1. 初识vue"></a>1. 初识vue</h3>
      <p><strong>首先创建vue实例，实例有一个参数用于配置</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span>&gt;</span><br><span class="line">	&lt;!-- &#123;&#123;&#125;&#125;写法可以看做是分隔符，是<span class="title class_">Vue</span>的模板 --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello &#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//创建vue实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="comment">//el(element)用于指定当前Vue实例为哪个容器服务。值通常为css选择器字符</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="comment">//用于存储数据，数据供el所指定的容器去使用。值可以是一个对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">name</span>: <span class="string">&#x27;拉达冈&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p><strong>总结：</strong></p>
<ul>
<li><ol>
<li>想让vue工作。就必须创建一个vue实例，且要传入一个配置对象</li>
</ol>
</li>
<li><ol start="2">
<li>容器里的写法依然符合html规范，只不过混入一些特殊的vue语法</li>
</ol>
</li>
<li><ol start="3">
<li>容器中代码被称为【Vue模板】</li>
</ol>
</li>
<li><ol start="4">
<li>容器和vue实例一一对应，不能一对多或者多对一</li>
</ol>
</li>
<li><ol start="5">
<li>真实开发中只有一个Vue实例，并且会配合着组件一起使用</li>
</ol>
</li>
<li><ol start="6">
<li>模板<code>&#123;&#123;&#125;&#125;</code>中必须要是js表达式，且可以自动读取到data中的所有属性</li>
</ol>
<p>  js表达式和js代码(语句)</p>
<p>  表达式：一个表达式会生成一个值，可以放在任何一个需要值的地方。如：<code>a;a+b;method();x===y?&#39;a&#39;:&#39;b&#39;</code></p>
</li>
<li><ol start="7">
<li>一旦data中的数据发生改变，那么模板中用到该数据的地方也会自动更新(data会被持续监测，改变页面上的数据也会改变)</li>
</ol>
</li>
</ul>

        <h3 id="2-模板语法">
          <a href="#2-模板语法" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-模板语法" class="headerlink" title="2. 模板语法"></a>2. 模板语法</h3>
      <p><strong>1. 插值语法</strong></p>
<p><code>&#123;&#123;&#125;&#125;</code></p>
<p>功能：用于解析标签体内容，如</p><p></p><p></p>
<p><strong>2. 指令语法</strong></p>
<p>功能：用于解析标签(包括标签属性，标签体内容，绑定事件…)</p>
<p>如：<code>v-bind:</code>可简写为<code>:</code></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a :href=<span class="string">&#x27;url&#x27;</span>&gt;百度&lt;/a&gt;</span><br></pre></td></tr></table></div></figure>

<p>注：Vue中有很多的指令，且形式都是v-xxxx，此处v-bind为例子</p>
<p>2.1 <code>v-bind:</code>单向绑定：数据只能从data流向页面</p>
<p>2.2 <code>v-model:</code>双向绑定(<code>v-model:value</code>可简写为<code>v-model</code>)：数据不仅能从data流向页面，还可以从页面流向data。且双向绑定一般都应用在表单类元素上(如input、select等)。v-model默认收集的就是value的值</p>
<p><strong>3. el和data的两种写法</strong></p>
<p>el:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">	<span class="attr">data</span>:&#123;</span><br><span class="line">		<span class="attr">name</span>:<span class="string">&#x27;nm&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">x.$mount(<span class="string">&#x27;#root&#x27;</span>)</span><br></pre></td></tr></table></div></figure>

<p>data:(data在vm实例中被写在了vm._data中)</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种对象式</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;.root&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;拉达冈&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://www.baidu.com&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种函数式(必须有返回值，且不要写成箭头函数)</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;.root&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;拉达冈&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-MVVM模型">
          <a href="#3-MVVM模型" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-MVVM模型" class="headerlink" title="3.MVVM模型"></a>3.MVVM模型</h3>
      <p>MVVM模型：</p>
<ol>
<li><p>M：模型（Model）：data中的数据</p>
</li>
<li><p>V：视图（View）：模板代码</p>
</li>
<li><p>VM：视图模型（ViewModel）:Vue实例</p>
</li>
</ol>
<p>注：</p>
<ol>
<li><p>data中所有的属性，最后都出现在了vm身上</p>
</li>
<li><p>vm身上所有的属性，及Vue原型上所有属性，在Vue模板中都可以直接使用</p>
</li>
</ol>

        <h3 id="4-数据代理">
          <a href="#4-数据代理" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-数据代理" class="headerlink" title="4. 数据代理"></a>4. 数据代理</h3>
      
        <h4 id="4-1-Object-defineProperty方法">
          <a href="#4-1-Object-defineProperty方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-1-Object-defineProperty方法" class="headerlink" title="4.1 Object.defineProperty方法"></a>4.1 Object.defineProperty方法</h4>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">	<span class="attr">sex</span>:<span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> number = <span class="number">18</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person,<span class="string">&#x27;age&#x27;</span>,&#123;</span><br><span class="line">	<span class="comment">//value:18,</span></span><br><span class="line">	<span class="attr">enmuerable</span>:<span class="literal">true</span>, <span class="comment">//控制属性是否可以被枚举，默认false</span></span><br><span class="line">	<span class="attr">writable</span>:<span class="literal">true</span>, <span class="comment">//控制属性是否可以被修改，默认false。</span></span><br><span class="line">	<span class="attr">configurable</span>:<span class="literal">true</span>, <span class="comment">//控制属性是否可以被删除，默认false</span></span><br><span class="line">	<span class="attr">get</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;	<span class="comment">//当有人读取person的age属性时，get函数就会被调用，且返回值就是age的值。不能与value属性共存</span></span><br><span class="line">		<span class="keyword">return</span> number</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="title function_">set</span>(<span class="params">value</span>)&#123;	<span class="comment">//当有人修改person的age属性时，set函数(setter)就会被调用，且会收到修改的具体值</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//修改了number，那么get返回的值就会是修改后的number的值</span></span><br><span class="line">		number = value</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>不可以被枚举：，不参与遍历，即如果直接输出该对象的属性，不会有该方法添加的属性</p>
<p><strong><font color="red">如果一个描述符同时拥有 value 或 writable 和 get 或 set 键，则会产生一个异常</font></strong></p>
<p>get方法；在调用属性时执行：person.age</p>
<p>set方法：在修改属性值时执行：person.age &#x3D; 30</p>

        <h4 id="4-2-数据代理">
          <a href="#4-2-数据代理" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-2-数据代理" class="headerlink" title="4.2 数据代理"></a>4.2 数据代理</h4>
      <p>定义：通过一个对象代理对另一个对象中属性的操作(读&#x2F;写)</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">x</span>: <span class="number">100</span> &#125;</span><br><span class="line"><span class="keyword">let</span> obj2 = &#123; <span class="attr">y</span>: <span class="number">200</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj2, <span class="string">&#x27;x&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj.<span class="property">x</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        obj.<span class="property">x</span> = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">obj2.<span class="property">x</span> = <span class="number">1000</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">x</span>)</span><br></pre></td></tr></table></div></figure>


        <h4 id="4-3vue的数据代理">
          <a href="#4-3vue的数据代理" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-3vue的数据代理" class="headerlink" title="4.3vue的数据代理"></a>4.3vue的数据代理</h4>
      <ol>
<li><p>通过vm对象来代理data对象中属性的操作</p>
</li>
<li><p>Vue中数据代理的好处</p>
<p> 更加方便的操作data中的数据</p>
</li>
<li><p>基本原理</p>
<p> 通过Object.defineProperty()吧data对象中所有属性添加到vm上，为每一个添加到vm上的属性，都指定一个getter&#x2F;setter。在getter&#x2F;setter内部去操作(读&#x2F;写)data中对应的属性</p>
</li>
</ol>
<p><img src="/2022/04/10/web-vue01/%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86.jpg"></p>

        <h3 id="5-事件处理">
          <a href="#5-事件处理" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-事件处理" class="headerlink" title="5.事件处理"></a>5.事件处理</h3>
      <p><strong>点击事件：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id = <span class="string">&#x27;root&#x27;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&#x27;cmethod&#x27;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></div></figure>

<p>可简写为：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=<span class="string">&#x27;cmethod(66,$event)&#x27;</span>&gt;点击&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建vue实例</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="attr">cmethod</span>: <span class="keyword">function</span>(<span class="params">num,event</span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&#x27;点击事件&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>可以用$event关键字传入event，不会在传参数时丢失event</p>
<p>绑定事件的时候：<code>@xxx=&quot;yyy&quot;</code> yyy可以写一些简单的语句，不过yyyy都是在vm中找的</p>
<p><strong>事件的基本使用</strong></p>
<ol>
<li><p>使用v-on:xxx 或者 @xxx绑定事件，其中xxx是事件名</p>
</li>
<li><p>事件的回调需要配置在methods对象中，最终也会在vm(vue实例)上</p>
</li>
<li><p>methods中配置的函数，不要用箭头函数，否则this不指向vm</p>
</li>
<li><p>methods中配置的函数，都是被vue所管理的函数，this的指向是vm或组件实例对象</p>
</li>
<li><p>@click&#x3D;’demo’和@click&#x3D;’demo($event)’效果一致，后者可以传参数</p>
</li>
</ol>

        <h3 id="6-事件修饰符">
          <a href="#6-事件修饰符" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-事件修饰符" class="headerlink" title="6.事件修饰符"></a>6.事件修饰符</h3>
      <ol>
<li><p>prevent：阻止默认事件</p>
</li>
<li><p>stop：阻止事件冒泡</p>
</li>
<li><p>once：事件只触发一次</p>
</li>
<li><p>capture：使用事件的捕获模式</p>
</li>
<li><p>self：只有event.target是当前操作的元素时才触发事件</p>
</li>
<li><p>passive：事件的默认行为立即执行，无需等待事件回调执行完毕</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;https://www.baidu.com&quot;</span> @click.<span class="property">stop</span>.<span class="property">prevent</span>=<span class="string">&quot;showInfo&quot;</span>&gt;点击提示&lt;/a&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>可以连续写多个修饰符，比如先阻止冒泡，再停止默认行为</strong></p>

        <h3 id="7-键盘事件">
          <a href="#7-键盘事件" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-键盘事件" class="headerlink" title="7.键盘事件"></a>7.键盘事件</h3>
      <ol>
<li><p>Vue中常用的按键别名</p>
<p> 回车&#x3D;&gt;enter</p>
<p> 删除&#x3D;&gt;delete(捕获删除和退格键)</p>
<p> 退出&#x3D;&gt;esc</p>
<p> 空格&#x3D;&gt;space</p>
<p> 换行&#x3D;&gt;tab</p>
<p> 上下左右&#x3D;&gt;up down left right</p>
</li>
<li><p>Vue未提供别名的按键，可以使用按键原始的Key值去绑定，但注意要转为kebab-case(短横线命名)</p>
</li>
<li><p>系统修饰键（特殊用法）：ctrl alt shift meta</p>
<p> 配合keyup使用：按下修饰键的同时，再按下其他键，随后释放其他键，事件才被触发</p>
<p> 配合keydown使用：正常触发事件</p>
</li>
<li><p>也可以使用keyCode去指定具体的按键（不推荐。可能被弃用）</p>
</li>
<li><p>Vue.config.keyCodes.自定义键名 &#x3D; 键码，可以去定制按键别名</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type = <span class="string">&#x27;text&#x27;</span> @keyup.<span class="property">delete</span>=<span class="string">&#x27;showInfo&#x27;</span>&gt;</span><br></pre></td></tr></table></div></figure>

<p>如：输入ctrl+y才执行</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type = <span class="string">&#x27;text&#x27;</span> @keyup.<span class="property">ctrl</span>.<span class="property">y</span>=<span class="string">&#x27;showInfo&#x27;</span>&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="8-计算属性（computed）">
          <a href="#8-计算属性（computed）" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-计算属性（computed）" class="headerlink" title="8.计算属性（computed）"></a>8.计算属性（computed）</h3>
      <p><strong>只要data的数据发生改变，vue就会重新解析模板</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span>&gt;</span><br><span class="line">    姓：&lt;input type=<span class="string">&quot;text&quot;</span> v-model=<span class="string">&quot;firstName&quot;</span>&gt;&lt;br&gt; </span><br><span class="line">	名：&lt;input type=<span class="string">&quot;text&quot;</span> v-model=<span class="string">&quot;lastName&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;fullName&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">firstName</span>: <span class="string">&quot;张&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">lastName</span>: <span class="string">&quot;三&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">fullName</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">//当有人读取fullName时，get就会被调用，返回值就作为fullName的值.且此处的this是vm实例(vm处理过)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">/**</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">                 * get调用时机：1. 初次读取fullNames时调用，后续使用缓存  2. 所依赖的数据发生变化时调用</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">                 **/</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="title function_">get</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&quot;-&quot;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">/**</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">                 * set调用时机：fullNames被修改时</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">                 **/</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">let</span> nameStr = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="variable language_">this</span>.<span class="property">firstName</span> = nameStr[<span class="number">0</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="variable language_">this</span>.<span class="property">lastName</span> = nameStr[<span class="number">1</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(vm)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p><strong>总结：</strong></p>
<ol>
<li><p>定义：要用的属性不存在，要通过已有的属性计算得来(vue所管理的属性)</p>
</li>
<li><p>原理：底层借助了Object.defineproperty方法提供的getter和setter</p>
</li>
<li><p>get函数执行时机：1. 初次读取fullNames时调用，后续使用缓存  2. 所依赖的数据发生变化时调用</p>
</li>
<li><p>优势：与methods实现相比，内部有缓存机制(复用)，效率更高，调试方便</p>
</li>
<li><p>备注：1. 计算属性最终会出现在vm上，直接使用即可  2.如果计算属性需要修改，那必须写set函数去响应修改，且set中要引起计算时依赖的数据发生变化</p>
</li>
</ol>
<p><strong>计算属性如果只考虑读取不考虑修改(只有get没有set)可简写：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">	<span class="comment">//此处可以当成getter</span></span><br><span class="line">    <span class="title function_">fullName</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&quot;-&quot;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>此处表面上是函数，但是实际上会将fullName当做属性给vm，所以模板调用时不要加括号</p>

        <h3 id="9-监视属性-watch">
          <a href="#9-监视属性-watch" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-监视属性-watch" class="headerlink" title="9. 监视属性(watch)"></a>9. 监视属性(watch)</h3>
      <ol>
<li><p>当被监视的属性变化时，回调函数自动调用，进行相关操作</p>
</li>
<li><p>监视的属性必须存在，才能进行监视</p>
</li>
<li><p>监视的两种写法：new Vue时就传入watch配置；vm.$watch监视、</p>
</li>
</ol>
<p><strong>第一种</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">ishot</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="attr">ishot</span>: &#123;</span><br><span class="line">            <span class="comment">//初始化时，让handler调用一下，默认为false</span></span><br><span class="line">            <span class="attr">immediate</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//当ishot发生改变时，调用</span></span><br><span class="line">            <span class="title function_">handler</span>(<span class="params">newVauue, oldVaue</span>) &#123;</span><br><span class="line">                <span class="comment">//传递两个参数--修改前的值和修改后的值</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(newVauue + <span class="string">&quot;--&quot;</span> + oldVaue)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>第二种</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vm.$watch(<span class="string">&#x27;ishot&#x27;</span>, &#123;</span><br><span class="line">    <span class="comment">//初始化时，让handler调用一下，默认为false</span></span><br><span class="line">    <span class="attr">immediate</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">//当ishot发生改变时，调用</span></span><br><span class="line">    <span class="title function_">handler</span>(<span class="params">newVauue, oldVaue</span>) &#123;</span><br><span class="line">        <span class="comment">//传递两个参数--修改前的值和修改后的值</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(newVauue + <span class="string">&quot;--&quot;</span> + oldVaue)</span><br><span class="line">	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>深度监视：</strong></p>
<ol>
<li><p>Vue中的watch默认不监测对象内部值的改变(一层)</p>
<p> <strong>原因：对象和数组(对象)的值实际上是一个地址，改变对象内部值就相当于修改对应地址里面的值，地址本身没有改变，所以无法监视到对象内部。另外如果要监视到数组内部的值，需要用到vue指定的数组的方法。详见下图</strong></p>
</li>
</ol>
<p><img src="/2022/04/10/web-vue01/watchdata.png"></p>
<ol start="2">
<li>配置deep:true可以检测对象内部值(包括数组内的对象的内部值)改变(多层)</li>
</ol>
<p>备注：</p>
<ol>
<li>Vue自身可以检测对象内部值的改变，但Vue提供的watch默认不可以，使用watch时根据数据的具体结构，决定是否采用深度监视</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">numbers</span>: &#123;</span><br><span class="line">            <span class="attr">a</span>: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="attr">numbers</span>: &#123;</span><br><span class="line">            <span class="attr">deep</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="title function_">handler</span>(<span class="params">newVauue, oldVaue</span>) &#123;</span><br><span class="line">                <span class="comment">//传递两个参数--修改前的值和修改后的值</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(newVauue.<span class="property">a</span> + <span class="string">&quot;--&quot;</span> + oldVaue.<span class="property">a</span>)</span><br><span class="line">				<span class="comment">//此处两个a的值一样，猜测实际监听的是numbers对象，对象本身的内存地址没有改变，所以找到的两个a的值是一样的</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">		<span class="comment">//如果监听numbers中的a.此处一定要添加双引号，key值本身就是字符串，平常默认省略。但是此处引了属性值，所以需要加双引号</span></span><br><span class="line">		<span class="string">&quot;numbers.a&quot;</span>:&#123;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>简写形式（如果不需要其他配置项比如deep，immediate）</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">ishot</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">numbers</span>: &#123;</span><br><span class="line">            <span class="attr">a</span>: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="title function_">ishot</span>(<span class="params">newValue, oldVaule</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue + <span class="string">&quot;---&quot;</span> + oldVaule)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>computed和watch之间的区别</strong></p>
<ol>
<li><p>computed能完成的功能，watch都可以完成</p>
</li>
<li><p>watch能完成的功能，computed不一定能完成。例如：watch可以进行异步操作</p>
</li>
</ol>
<p><strong>两个原则</strong></p>
<ol>
<li><p>所被Vue管理的函数，最好写成普通函数，这样this的指向才是vm或组件实例对象</p>
</li>
<li><p>所有不被Vue所管理的函数(定时器的回调函数，ajax的回调函数，Promise的回调函数等)，最好写成箭头函数，这样this的指向才是vm或组件实例对象</p>
</li>
</ol>
<p><strong>如果在某个方法中为对象添加属性：$set(操作对象，要添加的属性，属性值)</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$set(todo,<span class="string">&quot;isEdit&quot;</span>,<span class="literal">true</span>)</span><br></pre></td></tr></table></div></figure>


        <h3 id="10-样式操作">
          <a href="#10-样式操作" class="heading-link"><i class="fas fa-link"></i></a><a href="#10-样式操作" class="headerlink" title="10. 样式操作"></a>10. 样式操作</h3>
      <p><strong>9.1绑定class</strong></p>
<p>三种绑定方式</p>
<ol>
<li>字符串写法–样式类名不确定，需要动态指定</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span> :<span class="keyword">class</span>=<span class="string">&quot;mood&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">firstname</span>: <span class="string">&#x27;张&#x27;</span>,</span><br><span class="line">        <span class="attr">lastname</span>: <span class="string">&quot;三&quot;</span>,</span><br><span class="line">        <span class="attr">mood</span>: <span class="string">&quot;green&quot;</span>	<span class="comment">//green是在css中定义的类名</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>数组写法–要绑定的样式个数不确定，名字也不确定</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span> :<span class="keyword">class</span>=<span class="string">&quot;classArr&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">firstname</span>: <span class="string">&#x27;张&#x27;</span>,</span><br><span class="line">        <span class="attr">lastname</span>: <span class="string">&quot;三&quot;</span>,</span><br><span class="line">        <span class="attr">classArr</span>: [<span class="string">&quot;green&quot;</span>, <span class="string">&quot;bradius&quot;</span>, <span class="string">&quot;bdcolor&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>对象写法–要绑定的样式个数确定，名字确定，但是动态决定是否存在样式</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span> :<span class="keyword">class</span>=<span class="string">&quot;classObj&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">firstname</span>: <span class="string">&#x27;张&#x27;</span>,</span><br><span class="line">        <span class="attr">lastname</span>: <span class="string">&quot;三&quot;</span>,</span><br><span class="line">        <span class="attr">classObj</span>: &#123;</span><br><span class="line">            <span class="string">&quot;green&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">&quot;bradius&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&quot;bdcolor&quot;</span>: <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>9.2绑定style</strong></p>
<ol>
<li>对象形式</li>
</ol>
<p><code>:style=&quot;&#123;fontSize:xxx&#125;&quot;</code>:xxx是动态值</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span> :style=<span class="string">&quot;styleObj&quot;</span>&gt;</span><br><span class="line">    一个例子</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">firstname</span>: <span class="string">&#x27;张&#x27;</span>,</span><br><span class="line">        <span class="attr">lastname</span>: <span class="string">&quot;三&quot;</span>,</span><br><span class="line">        <span class="attr">styleObj</span>: &#123;</span><br><span class="line">            <span class="attr">fontSize</span>: <span class="string">&quot;20px&quot;</span>,</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&quot;blue&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>2.数组形式（用的少）</p>
<p><code>:style=&quot;[a,b]&quot;</code>，a和b都是样式对象</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span> :style=<span class="string">&quot;styleArr&quot;</span>&gt;</span><br><span class="line">    一个例子</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">firstname</span>: <span class="string">&#x27;张&#x27;</span>,</span><br><span class="line">        <span class="attr">lastname</span>: <span class="string">&quot;三&quot;</span>,</span><br><span class="line">        <span class="attr">styleArr</span>: [&#123;</span><br><span class="line">            <span class="attr">fontSize</span>: <span class="string">&quot;20px&quot;</span>,</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&quot;blue&quot;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">backgroundColor</span>: <span class="string">&quot;yellow&quot;</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="11-条件渲染">
          <a href="#11-条件渲染" class="heading-link"><i class="fas fa-link"></i></a><a href="#11-条件渲染" class="headerlink" title="11. 条件渲染"></a>11. 条件渲染</h3>
      <ol>
<li>v-if</li>
</ol>
<p>写法：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v-<span class="keyword">if</span>=<span class="string">&#x27;表达式&#x27;</span></span><br><span class="line"></span><br><span class="line">v-<span class="keyword">else</span>-<span class="keyword">if</span>=<span class="string">&#x27;表达式</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">v-else&#x27;</span></span><br></pre></td></tr></table></div></figure>

<p>适用于：切换频率较低的场景</p>
<p>特点：不展示的DOM元素直接移除</p>
<p>注意：v-if可以喝v-else-if，v-else一起使用，但要求结构不能被打断(结构上需要连在一起)</p>
<p><strong>可以配合template使用，不会打乱页面原有结构</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template v-<span class="keyword">if</span>=<span class="string">&quot;1===1&quot;</span>&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Angular<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>React<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Vue<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>v-show</li>
</ol>
<p>写法：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v-show=<span class="string">&#x27;表达式&#x27;</span></span><br></pre></td></tr></table></div></figure>

<p>适用于：切换频率较高的场景</p>
<p>特点：不展示的DOM元素未被移除，仅仅是使用样式隐藏掉</p>
<p><strong>使用v-if时，元素可能无法获取到，使用v-show一定可以获取到</strong></p>

        <h3 id="12-列表渲染">
          <a href="#12-列表渲染" class="heading-link"><i class="fas fa-link"></i></a><a href="#12-列表渲染" class="headerlink" title="12.列表渲染"></a>12.列表渲染</h3>
      <p>v-for指令</p>
<ol>
<li><p>用于展示列表数据</p>
</li>
<li><p>语法：</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v-<span class="keyword">for</span>=<span class="string">&quot;(item,index) in xxx&quot;</span> :key=<span class="string">&quot;yyy&quot;</span></span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>可遍历：数组，对象，字符串，指定次数</li>
</ol>
<p><strong>关于key：</strong></p>
<p><img src="/2022/04/10/web-vue01/listRender.png"></p>

        <h3 id="13-列表过滤-amp-排序">
          <a href="#13-列表过滤-amp-排序" class="heading-link"><i class="fas fa-link"></i></a><a href="#13-列表过滤-amp-排序" class="headerlink" title="13.列表过滤&amp;排序"></a>13.列表过滤&amp;排序</h3>
      <p>conputed实现过滤：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=<span class="string">&quot;root&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;输入搜索&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;keyWord&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(p,idx) in filData&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;p.id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#123;p.name&#125;&#125;-&#123;&#123;p.age&#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">keyWord</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">personArr</span>: [&#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;001&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;马冬梅&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;002&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;周冬雨&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">19</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;003&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;周杰伦&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;004&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;温兆伦&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">21</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;005&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;温冬周&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">22</span></span><br><span class="line">        &#125;],</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="title function_">filData</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">personArr</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">f</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> f.<span class="property">name</span>.<span class="title function_">indexOf</span>(<span class="variable language_">this</span>.<span class="property">keyWord</span>) !== -<span class="number">1</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>watch实现过滤</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=<span class="string">&quot;root&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;输入搜索&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;keyWord&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(p,idx) in filperson&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;p.id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#123;p.name&#125;&#125;-&#123;&#123;p.age&#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">keyWord</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">personArr</span>: [&#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;001&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;马冬梅&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;002&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;周冬雨&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">19</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;003&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;周杰伦&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;004&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;温兆伦&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">21</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;005&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;温冬周&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">22</span></span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="attr">filperson</span>: []</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="attr">keyWord</span>: &#123;</span><br><span class="line">            <span class="attr">immediate</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="title function_">handler</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">filperson</span> = <span class="variable language_">this</span>.<span class="property">personArr</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">p</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> p.<span class="property">name</span>.<span class="title function_">indexOf</span>(<span class="variable language_">this</span>.<span class="property">keyWord</span>) !== -<span class="number">1</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>



        <h3 id="14-表单数据收集">
          <a href="#14-表单数据收集" class="heading-link"><i class="fas fa-link"></i></a><a href="#14-表单数据收集" class="headerlink" title="14. 表单数据收集"></a>14. 表单数据收集</h3>
      <p>收集表单数据：</p>
<p>若：<code>&lt;input type=&quot;text&quot; v-model=&quot;account&quot;&gt;</code>,则v-model收集的就是value值，用户输入的就是value值</p>
<p>若：<code>&lt;input type=&quot;radio&quot;&gt;</code>，则v-model收集的就是value值，且要给标签配置value值</p>
<p>若：<code>&lt;input type=&quot;checkbox&quot;&gt;</code></p>
<ol>
<li><p>没有配置input的value属性，那么收集的就是checked(是否勾选，true或者false)</p>
</li>
<li><p>配置input的value属性：(1)v-model的初始值是非数组，那么收集的就是checked；(2)v-mode的初始值是数组，那么收集的就是value组成的数组</p>
</li>
</ol>
<p><strong>v-mode的三个修饰符</strong></p>
<ol>
<li>lazy：失去焦点再收集数据</li>
</ol>
<p>number：输入字符串转为有效的数字，搭配<code>input type=&quot;number&quot;</code>使用</p>
<p>trim：输入首尾空格过滤</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span>&gt;</span><br><span class="line">    &lt;form @submit.prevent=&quot;demo&quot;&gt;</span><br><span class="line">        &lt;label for=&quot;acc&quot;&gt;賬號：&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; id=&quot;acc&quot; v-model=&quot;account&quot;&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">        &lt;label for=&quot;pwd&quot;&gt;密碼：&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;password&quot; id=&quot;pwd&quot; v-model=&quot;password&quot;&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">        &lt;label&gt;性別：&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;radio&quot; name=&quot;gender&quot; id=&quot;male&quot; v-model=&quot;sex&quot; value=&quot;male&quot;&gt;&lt;label for=&quot;male&quot;&gt;男&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;radio&quot; name=&quot;gender&quot; id=&quot;female&quot; v-model=&quot;sex&quot; value=&quot;female&quot;&gt;&lt;label for=&quot;female&quot;&gt;女&lt;/label&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">        &lt;label&gt;愛好：&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; id=&quot;study&quot; v-model=&quot;hobby&quot; value=&quot;study&quot;&gt;&lt;label for=&quot;study&quot;&gt;學習&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; id=&quot;game&quot; v-model=&quot;hobby&quot; value=&quot;game&quot;&gt;&lt;label for=&quot;game&quot;&gt;打游戲&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; id=&quot;eat&quot; v-model=&quot;hobby&quot; value=&quot;eat&quot;&gt;&lt;label for=&quot;eat&quot;&gt;吃飯&lt;/label&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">        &lt;label for=&quot;school&quot;&gt;所屬校區：&lt;/label&gt;</span><br><span class="line">        &lt;select name=&quot;shcool&quot; id=&quot;school&quot; v-model=&quot;school&quot;&gt;</span><br><span class="line">            &lt;option value=&quot;beijing&quot;&gt;北京&lt;/option&gt;</span><br><span class="line">            &lt;option value=&quot;shenzhen&quot;&gt;深圳&lt;/option&gt;</span><br><span class="line">            &lt;option value=&quot;shanghai&quot;&gt;上海&lt;/option&gt;</span><br><span class="line">        &lt;/select&gt;</span><br><span class="line">        &lt;br&gt;&lt;br&gt;</span><br><span class="line">        &lt;label for=&quot;others&quot;&gt;其他信息：&lt;/label&gt;</span><br><span class="line">        &lt;textarea name=&quot;&quot; id=&quot;others&quot; v-model=&quot;others&quot;&gt;&lt;/textarea&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">        &lt;input type=&quot;checkbox&quot; id=&quot;agree&quot; v-model=&quot;agree&quot;&gt;&lt;label for=&quot;agree&quot;&gt;閲讀並接受&lt;a href=&quot;www.baidu.com&quot;&gt;《用戶協議》&lt;/a&gt;&lt;/label&gt;&lt;button&gt;提交&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    Vue.config.productionTip = false;</span><br><span class="line">    const vm = new Vue(&#123;</span><br><span class="line">        el: &#x27;#root&#x27;,</span><br><span class="line">        data: &#123;</span><br><span class="line">            account: &#x27;&#x27;,</span><br><span class="line">            password: &#x27;&#x27;,</span><br><span class="line">            sex: &#x27;&#x27;,</span><br><span class="line">            hobby: [],</span><br><span class="line">            school: &#x27;&#x27;,</span><br><span class="line">            others: &#x27;&#x27;,</span><br><span class="line">            agree: &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            demo() &#123;</span><br><span class="line">                console.log(JSON.stringify(this._data))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="15-过滤器">
          <a href="#15-过滤器" class="heading-link"><i class="fas fa-link"></i></a><a href="#15-过滤器" class="headerlink" title="15. 过滤器"></a>15. 过滤器</h3>
      <p><strong>对要显示的数据进行特定格式化后再显示（适用于一些简单逻辑的处理）</strong></p>
<p><strong>语法：</strong></p>
<ol>
<li><p>注册过滤器：<code>Vue.filter(name,callback)</code>或者<code>new Vue&#123;filters:&#123;&#125;&#125;</code></p>
</li>
<li><p>使用过滤器：<code>&#123;&#123;xxx | 过滤器名&#125;&#125;</code>或者<code>v-bind:属性=&quot;xxx | 过滤器名&quot;</code></p>
</li>
</ol>
<p>模板语法：</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 可串联，后一个过滤器的参数是前一个过滤器返回的值 --&gt;</span></span><br><span class="line">&#123;&#123;time | timeFormater(&#x27;YYYY年MM月DD日 HH时mm分ss秒&#x27;) | mySlice&#125;&#125;</span><br></pre></td></tr></table></div></figure>
<p><strong>过滤器也可以接收额外参数，多个过滤器也可以串联；并没有改变原本的数据，是产生新的对应的数据</strong></p>
<p>第一个参数是要处理的数据，第二个参数是过滤器名称，过滤器中可传参，第一个参数固定为管道符前的值。</p>
<p>局部过滤器(只能这一个vm实例使用)：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">time</span>: <span class="number">1650190373778</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">filters</span>: &#123;</span><br><span class="line">        <span class="title function_">timeFormater</span>(<span class="params">value, str = <span class="string">&quot;YYYY-MM-DD HH:mm:ss&quot;</span></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">dayjs</span>(value).<span class="title function_">format</span>(str)</span><br><span class="line">        &#125;,</span><br><span class="line">		 <span class="title function_">mySlice</span>(<span class="params">value</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> value.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">4</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>全局过滤器：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>,<span class="title function_">filter</span>(<span class="string">&#x27;mySlice&#x27;</span>,<span class="keyword">function</span>(<span class="params">value</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> value.<span class="title function_">slice</span>(<span class="number">0</span>,<span class="number">4</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="16-其他内置指令">
          <a href="#16-其他内置指令" class="heading-link"><i class="fas fa-link"></i></a><a href="#16-其他内置指令" class="headerlink" title="16. 其他内置指令"></a>16. 其他内置指令</h3>
      <p><code>v-text</code></p>
<ol>
<li><p>作用：向其所在节点中渲染文本内容</p>
</li>
<li><p>与插值语法的区别：v-text会替换掉节点中的(原本)内容，不会</p>
</li>
</ol>
<p><code>v-html</code></p>
<ol>
<li><p>作用：向指定节点中渲染包含html结构的内容</p>
</li>
<li><p>与插值语法得到区别：</p>
</li>
</ol>
<p>v-html会替换掉节点中所有的内容。则不会</p>
<p>v-html可以识别html结构</p>
<p><font color="red">存在安全性问题，容易导致xss的攻击。一定要在可信的内容上使用v-html，永远不要在用户提交的内容上</font></p>
<p><code>v-cloak</code></p>
<p>没有值</p>
<ol>
<li><p>本质是一个特殊属性，Vue实例创建完毕并接管容器后，会删掉v-cloak属性</p>
</li>
<li><p>使用css配合v-cloak可以解决网速慢时页面展示出的问题</p>
</li>
</ol>
<p><code>v-once</code></p>
<ol>
<li><p>v-once所在节点在初次动态渲染后，就视为静态内容了</p>
</li>
<li><p>以后数据的改变不会引起v-once所在结构的更新，可以用于优化性能</p>
</li>
</ol>
<p><code>v-pre</code></p>
<ol>
<li><p>跳过其所在节点的编译过程</p>
</li>
<li><p>可利用它跳过：没有使用指令语法、没有使用插值语法的节点，会加快编译</p>
</li>
</ol>

        <h3 id="17-自定义指令">
          <a href="#17-自定义指令" class="heading-link"><i class="fas fa-link"></i></a><a href="#17-自定义指令" class="headerlink" title="17. 自定义指令"></a>17. 自定义指令</h3>
      <p>示例</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前的n值是：<span class="tag">&lt;<span class="name">span</span> <span class="attr">v-text</span>=<span class="string">&quot;n&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>放大十倍后的n值是：<span class="tag">&lt;<span class="name">span</span> <span class="attr">v-big</span>=<span class="string">&quot;n&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-fbind</span>=<span class="string">&quot;n&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;n++&quot;</span>&gt;</span>点我+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//全局指令</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;fbind1&#x27;</span>, &#123;</span><br><span class="line">    <span class="comment">//指令与元素成功绑定时(一上来)</span></span><br><span class="line">    <span class="title function_">bind</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">        element.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//指令所在元素被插入页面时</span></span><br><span class="line">    <span class="title function_">inserted</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">        element.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//指令所在的模板被重新解析时</span></span><br><span class="line">    <span class="title function_">update</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">        element.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//局部自定义指令</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">n</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">directives</span>: &#123;</span><br><span class="line">        <span class="comment">//《简写：一个函数》big函数何时会被调用。1.指令与元素成功绑定时  2.指令所在的模板被重新解析时</span></span><br><span class="line">        <span class="title function_">big</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">            <span class="comment">//此处的this是window</span></span><br><span class="line">            element.<span class="property">innerText</span> = binding.<span class="property">value</span> * <span class="number">10</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//《正常写：一个对象》此处的this是window</span></span><br><span class="line">        <span class="attr">fbind</span>: &#123;</span><br><span class="line">            <span class="comment">//指令与元素成功绑定时(一上来)</span></span><br><span class="line">            <span class="title function_">bind</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">                element.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//指令所在元素被插入页面时</span></span><br><span class="line">            <span class="title function_">inserted</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">                element.<span class="title function_">focus</span>()</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//指令所在的模板被重新解析时</span></span><br><span class="line">            <span class="title function_">update</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">                element.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>总结：</strong></p>
<p>一：</p>
<p>局部指令：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">	<span class="attr">directives</span>:&#123;指令名：配置对象&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">	directives&#123;指令名：回调函数&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>函数中有两个参数，element和binding。第一个参数为指令所在模板的元素，第二个参数可用binding.value获取指令的值</strong></p>
<p>全局指令；</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(指令名：配置对象)  或者  <span class="title class_">Vue</span>.<span class="title function_">directive</span>(指令名,回调函数)</span><br></pre></td></tr></table></div></figure>
<p>二：</p>
<p>配置对象中常用的3个回调：</p>
<ol>
<li><p>.bind：指令与元素成功绑定时调用</p>
</li>
<li><p>.inserted：指令所在元素被插入页面时调用</p>
</li>
<li><p>.update：指令所在模板结构被重新解析时调用</p>
</li>
</ol>
<p>三：</p>
<ol>
<li><p>指令定义时不加v-，使用时需要加</p>
</li>
<li><p>指令如果是多个单词，要是用kebab-case的命名方式，不要使用cameCase命名。尽量不要用大写单词</p>
</li>
</ol>

        <h2 id="生命周期">
          <a href="#生命周期" class="heading-link"><i class="fas fa-link"></i></a><a href="#生命周期" class="headerlink" title="生命周期"></a><font color="green">生命周期</font></h2>
      
        <h3 id="1-mounted">
          <a href="#1-mounted" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-mounted" class="headerlink" title="1.mounted"></a>1.mounted</h3>
      <p>Vue完成模板的解析并把初始的真实DOM元素放入页面后（挂载完毕）调用mounted。也就是第一次完成模板解析后调用，后续的模板解析叫做更新，不会调用</p>
<p>生命周期：</p>
<ol>
<li><p>又名：生命周期回调函数、生命周期函数、生命周期钩子</p>
</li>
<li><p>Vue在关键时刻帮我们调用的一些特殊名称的函数</p>
</li>
<li><p>生命周期函数的名字不可更改，但函数的具体内容是程序员根据需求编写的</p>
</li>
<li><p>生命周期函数中的this指向是vm或组件实例函数</p>
</li>
</ol>

        <h3 id="2-常用的生命周期钩子">
          <a href="#2-常用的生命周期钩子" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-常用的生命周期钩子" class="headerlink" title="2. 常用的生命周期钩子"></a>2. 常用的生命周期钩子</h3>
      <ol>
<li><p>mounted：发送ajax请求，启动定时器，绑定自定义事件，订阅消息等【初始化操作】</p>
</li>
<li><p>beforeDestroy：清除定时器，解绑自定义事件，取消订阅消息等【收尾工作】</p>
</li>
</ol>
<p>关于销毁Vue实例</p>
<ol>
<li><p>销毁后借助Vue开发者工具看不到任何信息</p>
</li>
<li><p>销毁后自定义事件会失效，但原生DOM事件依然有效</p>
</li>
<li><p>一般不会在beforeDestroy操作数据，因为即便操作数据，也不会再触发更新流程了，而是直接走向销毁</p>
</li>
</ol>
<p><img src="/2022/04/10/web-vue01/vuelifecycle.png"></p>
<p><strong>有无template属性区别：有template：template中的内容会整个替换掉原html中的元素，包括根节点。且template中根节点只能有一个</strong></p>

        <h1 id="组件化编程">
          <a href="#组件化编程" class="heading-link"><i class="fas fa-link"></i></a><a href="#组件化编程" class="headerlink" title="组件化编程"></a>组件化编程</h1>
      
        <h2 id="理解组件">
          <a href="#理解组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#理解组件" class="headerlink" title="理解组件"></a><font color="green">理解组件</font></h2>
      <p>组件的定义：实现应用中局部功能代码和资源的集合</p>
<p><strong>单文件组件：一个文件中只包含有一个组件</strong></p>
<p><strong>非单文件组件：一个文件中包含有n个组件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">school</span>&gt;</span><span class="tag">&lt;/<span class="name">school</span>&gt;</span></span></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">student</span>&gt;</span><span class="tag">&lt;/<span class="name">student</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">hello</span>&gt;</span><span class="tag">&lt;/<span class="name">hello</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    Vue.config.productionTip = false</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    //创建组件</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    const school = Vue.extend(&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        template: `</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span>&gt;</span>学校名称：</span><span class="template-variable">&#123;&#123;<span class="name">schoolName</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>学校地址：</span><span class="template-variable">&#123;&#123;<span class="name">address</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>`,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        data() &#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            return &#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                schoolName: &#x27;雷亚卢卡利亚&#x27;,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                address: &#x27;利耶尼亚&#x27;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    &#125;)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    const student = Vue.extend(&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        template: `</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span>&gt;</span>学生姓名：</span><span class="template-variable">&#123;&#123;<span class="name">studentName</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>学生年龄：</span><span class="template-variable">&#123;&#123;<span class="name">age</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>`,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        data() &#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            return &#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                studentName: &#x27;拓普斯&#x27;,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                age: 30</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    &#125;)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    const hello = Vue.extend(&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        template: `<span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>你好,</span><span class="template-variable">&#123;&#123;<span class="name">helloname</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span>`,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        data() &#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            return &#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                helloname: &#x27;张三&#x27;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    &#125;)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    //注册组件(全局注册，要注册在所使用的el之前。如果注册的全局组件和局部组件重名，以后一个定义的为准</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    Vue.component(&#x27;hello&#x27;, hello)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    Vue.component(&#x27;school&#x27;, school)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    //注册组件(局部注册)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    new Vue(&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        el: &#x27;#root&#x27;,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        components: &#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            school,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            student</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    &#125;)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p><strong>总结：</strong></p>
<p>Vue中使用组件的三大步骤</p>
<ol>
<li><p>定义组件（创建组件）</p>
<p> 使用Vue.extend(options)创建，其中options和new Vue(options)时传入的哪个options几乎一样，但区别如下：</p>
<p> (1)不用写el属性，因为最终所有的组件都要经过一个vm的管理，由vm中的el决定服务哪个容器</p>
<p> (2)data必须写成函数。避免组件被复用时，数据存在引用关系。</p>
<p> (3)使用template配置组件结构 </p>
</li>
<li><p>注册组件</p>
<p> (1)局部注册：靠new Vue时传入components选项</p>
<p> (2)全局注册：靠Vue.component(‘组件名’,组件)</p>
</li>
<li><p>使用组件</p>
<p> 编写组件标签：<code>&lt;school&gt;&lt;/school&gt;</code></p>
</li>
</ol>
<p><strong>组件命名注意点</strong></p>
<ol>
<li>关于组件名：</li>
</ol>
<p>由一个单词构成时:</p>
<p>(首字母小写):school</p>
<p>(首字母大写)：School</p>
<p>多个单词构成时：</p>
<p>(kebab-case命名)：my-school</p>
<p>(CameCase命名)：MySchool（需要Vue脚手架支持）</p>
<p>其他：</p>
<p>组件名尽可能回避HTML中已有的元素名称，如：h2，H2都不可以；可以使用name配置项指定组件在开发者工具中呈现的名字（不影响使用）</p>
<ol start="2">
<li>关于组件标签</li>
</ol>
<p><school></school></p>
<school>

<p>备注：不用使用脚手架时，<school>会导致后续组件不能渲染</school></p>
<ol start="3">
<li>简写方式：</li>
</ol>
<p><code>const school = Vue.extend(options)</code>可简写为<code>const school = options</code></p>

        <h2 id="VueComponent构造函数">
          <a href="#VueComponent构造函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#VueComponent构造函数" class="headerlink" title="VueComponent构造函数"></a><font color="green">VueComponent构造函数</font></h2>
      <ol>
<li><p>一个组件–school组件本质是一个名为VueComponent的构造函数，且不是程序员定义的，而是Vue.extend生成的。</p>
</li>
<li><p>我们只需要写对应标签<school></school>，Vue解析时会帮我们创建school组件的实例对象。即Vue帮我们执行的：new VueComponent(options)。</p>
</li>
<li><p>特别注意：每次调用Vue.extend，返回得到都是一个全新的VueComponent！</p>
</li>
<li><p>关于this的指向：</p>
</li>
</ol>
<p><strong>(1) 组件配置中：</strong></p>
<p>data函数，methods中的函数，watch中的函数，computed中的函数，它们的this均是【VueComponent实例对象】。因为组件本质是一个名为VueComponent的构造函数，写标签时，Vue解析时会自动执行new VueComponent</p>
<p><strong>(2) new Vue(options)配置中：</strong></p>
<p>data函数，methods中的函数，watch中的函数，computed中的函数，它们的this均是【Vue实例对象】</p>
<ol start="5">
<li>VueComponent的实例对象，也可称之为组件实例对象(vc)</li>
</ol>

        <h3 id="1-重要的内置關係：">
          <a href="#1-重要的内置關係：" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-重要的内置關係：" class="headerlink" title="1. 重要的内置關係："></a>1. 重要的内置關係：</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">VueComponent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span></span><br></pre></td></tr></table></div></figure>

<p>此处VueComponent和Vue都是函数对象。不是实例</p>
<p>即：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vc.<span class="property">__proto__</span>.<span class="property">__proto__</span> === <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span></span><br></pre></td></tr></table></div></figure>

<p>此处vc是VueComponent实例对象，可以直接通过vc访问到Vue.prototype里面的东西</p>
<p><strong>为什么要有这个关系？</strong>&#x3D;&#x3D;》 让组件实例对象(vc)可以访问到Vue原型上的属性，方法</p>
<p>图示：</p>
<p><img src="/2022/04/10/web-vue01/protoRELA.png"></p>
<p><img src="/2022/04/10/web-vue01/vueREvuecomponent.jpg"></p>

        <h2 id="单文件组件">
          <a href="#单文件组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#单文件组件" class="headerlink" title="单文件组件"></a><font color="green">单文件组件</font></h2>
      
        <h3 id="1-创建Vue脚手架">
          <a href="#1-创建Vue脚手架" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-创建Vue脚手架" class="headerlink" title="1.创建Vue脚手架"></a>1.创建Vue脚手架</h3>
      <p><strong>Vue脚手架是Vue官方提供的标准化开发工具</strong></p>
<ol>
<li>全局安装@vue&#x2F;cli</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></div></figure>
<ol start="2">
<li>切换到你要创建项目的目录，然后使用指令创建项目</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create xxx</span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>启动项目</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></div></figure>

<p><strong>注意：有一些版本的脚手架，组件名称命名需要是双驼峰命名，否则可能会报错</strong></p>
<p><strong>脚手架文件结构</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">.文件目录</span><br><span class="line">├── node_modules </span><br><span class="line">├── public</span><br><span class="line">│   ├── favicon.<span class="property">ico</span>: 页签图标</span><br><span class="line">│   └── index.<span class="property">html</span>: 主页面</span><br><span class="line">├── src</span><br><span class="line">│   ├── <span class="attr">assets</span>: 存放静态资源</span><br><span class="line">│   │   └── logo.<span class="property">png</span></span><br><span class="line">│   │── <span class="attr">component</span>: 存放组件</span><br><span class="line">│   │   └── <span class="title class_">HelloWorld</span>.<span class="property">vue</span></span><br><span class="line">│   │── <span class="title class_">App</span>.<span class="property">vue</span>: 汇总所有组件</span><br><span class="line">│   └── main.<span class="property">js</span>: 入口文件</span><br><span class="line">├── .<span class="property">gitignore</span>: git版本管制忽略的配置</span><br><span class="line">├── babel.<span class="property">config</span>.<span class="property">js</span>: babel的配置文件</span><br><span class="line">├── package.<span class="property">json</span>: 应用包配置文件 </span><br><span class="line">├── <span class="variable constant_">README</span>.<span class="property">md</span>: 应用描述文件</span><br><span class="line">└── package-lock.<span class="property">json</span>: 包版本控制文件</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-关于不同版本的Vue：">
          <a href="#2-关于不同版本的Vue：" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-关于不同版本的Vue：" class="headerlink" title="2.关于不同版本的Vue："></a>2.关于不同版本的Vue：</h3>
      <ol>
<li><p>vue.js和vue.runtime.xxx.js的区别：</p>
<p> (1) vue.js是完整版的Vue，包含核心功能和模板解析器</p>
<p> (2)vue.runtime.xxx.js是运行版的Vue，只包含：核心功能，没有模板解析器</p>
</li>
<li><p>因为vue.runtime.xxx.js没有模板解析器，所以不能使用template配置项，需要使用render函数接收到的createElement函数去指定具体内容</p>
</li>
</ol>

        <h3 id="3-修改默认配置">
          <a href="#3-修改默认配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-修改默认配置" class="headerlink" title="3.修改默认配置"></a>3.修改默认配置</h3>
      <p>Vue脚手架隐藏了所有webpack相关的配置，若想查看，执行：<code>vue inspect&gt;output.js</code> <strong>只能查看</strong></p>
<p><strong>项目中有哪些不可以改：</strong></p>
<ol>
<li><p>public路径下的favicon.ico、index.html不可以改</p>
</li>
<li><p>src路径名称不能改</p>
</li>
<li><p>main.js不能改</p>
</li>
</ol>
<p><strong>vue.config.js：</strong>是一个可选的配置文件，如果项目的 (和 package.json 同级的) 根目录中存在这个文件，那么它会被 @vue&#x2F;cli-service 自动加载</p>

        <h3 id="4-ref">
          <a href="#4-ref" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-ref" class="headerlink" title="4.ref"></a>4.ref</h3>
      <p><strong>模板上的指令语法：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>学校名称：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">ref</span> = <span class="string">&quot;title&quot;</span>&gt;</span>学校地址：&#123;&#123;address&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;getSchoolAddressEle&quot;</span>&gt;</span> 点击获取学校地址元素<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>通过ref标签获取该元素</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;SchoolInfo&#x27;</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&#x27;雷亚鲁卡利亚&#x27;</span>,</span><br><span class="line">            <span class="attr">address</span>:<span class="string">&#x27;利耶尼亚&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        <span class="title function_">getSchoolAddressEle</span>(<span class="params"></span>)&#123;</span><br><span class="line">			<span class="comment">//获取真实DOM元素</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">title</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>
<p><strong>可以用在组件标签上，以获取到组件的实例对象</strong></p>
<p><strong><font color="green">总结：</font></strong></p>
<ol>
<li><p>被用来给元素或子组件注册引用信息(id的代替者)</p>
</li>
<li><p>应用在html标签上获取的是真实DOM元素，应用在(子)组件标签上是组件实例对象(vc)</p>
</li>
<li><p>使用方式：</p>
</li>
</ol>
<p>打标识：<code>&lt;h1 ref=&quot;xxx&quot;&gt;&lt;/h1&gt;</code>或者<code>&lt;School ref=&quot;xxx&quot;&gt;&lt;/School&gt;</code></p>
<p>获取：<code>this.$refs.xxx</code></p>

        <h3 id="5-props-属性-配置">
          <a href="#5-props-属性-配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-props-属性-配置" class="headerlink" title="5. props(属性)配置"></a>5. props(属性)配置</h3>
      <p>功能：让组件接收外部传过来的数据</p>
<p>传递数据：App.vue</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	//此处School是组件标签</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">School</span> <span class="attr">name</span>=<span class="string">&quot;雷亚卢卡利亚&quot;</span> <span class="attr">address</span>=<span class="string">&quot;利耶尼亚&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注意：此处发送的数据都是字符串类型的，故不能直接在模板中进行计算。可以在发送时使用指令语法v-bind，将发送的数据成为引号内的内容(表达式)，就可以发送原始数据了</font></strong></p>
<p>如：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	//此处School是组件标签</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">School</span> <span class="attr">name</span>=<span class="string">&quot;雷亚卢卡利亚&quot;</span> <span class="attr">address</span>=<span class="string">&quot;利耶尼亚&quot;</span> <span class="attr">:age</span>=<span class="string">&quot;18&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></div></figure>
<p>因为v-bind指令语法中，引号里的内容是表达式，所以接收数据时就会是原始的数据。</p>
<p>接收数据：School.vue</p>
<p><strong>1. 简单声明接收：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>学校名称：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span> &gt;</span>学校地址：&#123;&#123;address&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>:<span class="string">&#x27;SchoolInfo&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">props</span>:[<span class="string">&quot;name&quot;</span>,<span class="string">&quot;address&quot;</span>],<span class="comment">//简单接收</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p><strong>2. 接收的同时对数据进行类型限制</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>学校名称：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span> &gt;</span>学校地址：&#123;&#123;address&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>:<span class="string">&#x27;SchoolInfo&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">props</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	    <span class="attr">name</span>:<span class="title class_">String</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	    <span class="attr">age</span>:<span class="title class_">Number</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	    <span class="attr">address</span>:<span class="title class_">String</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p>如果接收到的不是对应的数据类型可能会报错</p>
<p><strong>3. 接收的同时对数据进行类型限制+默认值指定+必要性限制</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>:&#123;</span><br><span class="line">    <span class="attr">name</span>:&#123;</span><br><span class="line">        <span class="attr">type</span>:<span class="title class_">String</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">age</span>:&#123;</span><br><span class="line">        <span class="attr">type</span>:<span class="title class_">Number</span>,</span><br><span class="line">        <span class="attr">default</span>:<span class="number">99</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">address</span>:&#123;</span><br><span class="line">        <span class="attr">type</span>:<span class="title class_">String</span>,</span><br><span class="line">  	    <span class="attr">required</span>:<span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>一般required和default不写一起</p>
<p><strong>props是只读的，Vue底层会监测你对props的修改，如果进行了修改，就会发出警告。若业务需求确实需要修改，可以复制props的内容到data中一份，然后去修改data中的数据</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;SchoolInfo&#x27;</span>,</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        <span class="title function_">getSchoolAddressEle</span>(<span class="params"></span>)&#123;</span><br><span class="line">           <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">			<span class="comment">//赋值</span></span><br><span class="line">            <span class="attr">myName</span>:<span class="variable language_">this</span>.<span class="property">name</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">props</span>:&#123;</span><br><span class="line">        <span class="attr">name</span>:&#123;</span><br><span class="line">            <span class="attr">type</span>:<span class="title class_">String</span>,</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>如果传入子组件的function是定义在methods和computed中的方法或计算属性，那么子组件调用此方法时方法内部依然是父组件的this。如果传入子组件的function是定义在data中的方法，那么子组件调用此方法时方法内部是子组件的this</p>
</blockquote>
<p><strong>4. 属性修饰符sync【组件通信方式一种】</strong></p>
<p>可以实现父子组件数据同步</p>
<p>父组件：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123;money&#125;&#125;</span></span><br><span class="line"><span class="language-xml">    子组件</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">:money.sync</span>=<span class="string">&quot;money&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">HelloWorld</span> <span class="keyword">from</span> <span class="string">&#x27;./components/HelloWorld.vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">money</span>:<span class="number">10000</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">HelloWorld</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><code>:money.sync</code>，代表父组件给字符串传递props【money】，自动给当前子组件绑定一个自定义事件【update:money】(此处money是属性名称)</p>
<p>子组件：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$emit(&#x27;update:money&#x27;,money-100)&quot;</span>&gt;</span>减少100<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">div</span>&gt;</span>剩余&#123;&#123;money&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;HelloWorld&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">props</span>: [<span class="string">&#x27;money&#x27;</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- <span class="title class_">Add</span> <span class="string">&quot;scoped&quot;</span> attribute to limit <span class="variable constant_">CSS</span> to <span class="variable language_">this</span> component only --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>触发该自定义事件</p>
<p><strong>5. $attrs</strong></p>
<p>属于组件的一个属性，可以获取到父组件传递过来的props数据</p>
<blockquote>
<p>对于子组件而言，父组件给的数据可以利用$attrs接收，但是需要注意，如果子组件通过props接收的属性，在$attrs属性当中是获取不到的</p>
</blockquote>
<p>父组件：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">HintButton</span> type=<span class="string">&quot;success&quot;</span> icon=<span class="string">&quot;el-icon-delete&quot;</span> size=<span class="string">&quot;mini&quot;</span> title=<span class="string">&quot;提示按钮&quot;</span> /&gt;</span><br></pre></td></tr></table></div></figure>

<p>子组件：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">:title</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">v-bind</span>=<span class="string">&quot;$attrs&quot;</span> &gt;</span> 添加 <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;HintButton&quot;</span>,</span><br><span class="line">  <span class="attr">props</span>:[<span class="string">&quot;title&quot;</span>],</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></div></figure>

<p>或者单个引入：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button :type=<span class="string">&quot;$attrs.type&quot;</span> &gt; 添加 &lt;/el-button&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>6. $listeners</strong></p>
<p>它也是组件实例自身的一个属性，它可以获取到父组件给子组件传递自定义事件</p>
<p>父组件：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">HintButton</span> @click=<span class="string">&quot;aletText&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">aletText</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;abc&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p>子组件：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">:title</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">v-bind</span>=<span class="string">&quot;$attrs&quot;</span> <span class="attr">v-on</span>=<span class="string">&quot;$listeners&quot;</span>&gt;</span> 添加 <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></div></figure>

<p>或者单个引入</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button  @click=<span class="string">&quot;$listeners.click&quot;</span>&gt; 添加 &lt;/el-button&gt;</span><br></pre></td></tr></table></div></figure>



<p><strong>$listeners和$attrs</strong>：它们两者是组件实例的属性，可以获取到父组件给子组件传递props与自定义事件</p>
<p><strong>7. $children&amp;$parent</strong></p>
<p>组件实例自身拥有一个属性$children,可以获取到当前组件中，全部子组件</p>
<p>可以通过$parent属性获取到某一个组件父组件，可以操作父组件的数据与方法</p>

        <h3 id="6-mixin混入">
          <a href="#6-mixin混入" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-mixin混入" class="headerlink" title="6.mixin混入"></a>6.mixin混入</h3>
      <p><strong>功能：可以把多个组件共用的配置提取成一个混入对象</strong></p>
<p>注：混合中如果有data属性，那么：组件已经存在的属性用组件中的，组件不存在mixin存在的属性，mixin会添加。</p>
<p>另外生命周期的方法(如mounted)则组件中的和mixin中的都会执行，优先执行mixin中的</p>
<ol>
<li>创建混合用的js–mixin.js</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mixin = &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">x</span>: <span class="number">100</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;你好啊~混合&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>引入</li>
</ol>
<p><strong>局部混合</strong></p>
<p>StudentInfo.vue</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123;mixin&#125; <span class="keyword">from</span> <span class="string">&quot;../mixin.js&quot;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;StudentInfo&#x27;</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&#x27;拓普斯&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">           </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mixins</span>:[mixin],</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>全局混合</strong></p>
<p>main.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mixin,mixin1 &#125; <span class="keyword">from</span> <span class="string">&#x27;./mixin.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(mixin)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(mixin1)</span><br></pre></td></tr></table></div></figure>


        <h3 id="7-插件">
          <a href="#7-插件" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-插件" class="headerlink" title="7.插件"></a>7.插件</h3>
      <p>功能：用于增强Vue</p>
<p>本质：包含install方法的一个对象。install的第一个参数是Vue(非vm实例对象，是构造vm的函数对象)，第二个以后的参数是插件使用者传递的数据</p>
<ol>
<li>定义插件</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	<span class="title function_">install</span>(<span class="params">Vue,option1,option2</span>)&#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//1. 添加全局过滤器</span></span><br><span class="line">		<span class="title class_">Vue</span>.<span class="title function_">filter</span>(...)</span><br><span class="line">		<span class="comment">//2. 添加全局指令</span></span><br><span class="line">		<span class="title class_">Vue</span>.<span class="title function_">directive</span>(...)</span><br><span class="line">		<span class="comment">//3.配置全局混入</span></span><br><span class="line">		<span class="title class_">Vue</span>.<span class="title function_">mixin</span>(...)</span><br><span class="line">		<span class="comment">//4.添加实例方法</span></span><br><span class="line">		<span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$myMethod</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;...&#125;</span><br><span class="line">		<span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$myProperty</span> = xxxx</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>使用插件</li>
</ol>
<p>main.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plugin <span class="keyword">from</span> <span class="string">&#x27;./plugin.js&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(plugin,<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></div></figure>


        <h3 id="8-scoped样式">
          <a href="#8-scoped样式" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-scoped样式" class="headerlink" title="8. scoped样式"></a>8. scoped样式</h3>
      <p>组件的样式在解析后会全局生效，如果多个组件有相同的样式名称，如(class&#x3D;”demo”)，那么后import会覆盖前import的样式。此时可以使用scoped</p>
<p>作用：让组件的样式在局部生效，防止冲突</p>
<p>写法：<code>&lt;script scoped&gt;&gt;</code></p>

        <h3 id="9-组件化编码">
          <a href="#9-组件化编码" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-组件化编码" class="headerlink" title="9.组件化编码"></a>9.组件化编码</h3>
      <p><strong>顺序</strong></p>
<ol>
<li><p>实现静态组件：抽取组件，使用组件实现静态页面效果</p>
</li>
<li><p>展示动态数据：</p>
<p> 数据的类型，名称是什么</p>
<p> 数据保存在哪个组件</p>
</li>
<li><p>交互：从绑定事件监听开始</p>
</li>
</ol>
<p><strong>組件化编码流程</strong></p>
<ol>
<li><p>拆分静态组件：组件要按照功能点拆分，命名不要与html元素冲突</p>
</li>
<li><p>拆分动态组件：考虑好数据的存放位置，数据是一个组件在用，还是一些组件在用</p>
<p> 1)一个组件在用：放在组件自身即可</p>
<p> 2)一些组件在用：放在它们共同的父组件上（状态提升）</p>
</li>
<li><p>实现交互：从绑定事件开始</p>
</li>
</ol>
<p><strong>props适用于：</strong></p>
<ol>
<li><p>父组件&#x3D;&#x3D;&gt;子组件  通信</p>
</li>
<li><p>子组件&#x3D;&#x3D;&gt; 父组件 通信(要求父先给子一个函数)</p>
</li>
</ol>
<p><strong>使用v-model时要切记：v-model绑定的值不能是props传过来的值，因为props是不可以修改的</strong></p>
<p><strong>props传过来的若是对象类型的值，修改对象中的属性时Vue不会报错，但不推荐这样做</strong></p>

        <h3 id="10-浏览器本地存储">
          <a href="#10-浏览器本地存储" class="heading-link"><i class="fas fa-link"></i></a><a href="#10-浏览器本地存储" class="headerlink" title="10 浏览器本地存储"></a>10 浏览器本地存储</h3>
      <p><strong>存储内容大小一般支持5MB左右（不同浏览器可能不一样）</strong></p>
<p>浏览器端通过<code>Window.sessionStorage</code>和<code>Window.localStorage</code>属性来实现本地存储机制</p>
<p><strong>1.localStorage</strong></p>
<p>localStorage.setItem(key,value)</p>
<p>localStorage.getItem(key)    &#x2F;&#x2F;如果key对应的value获取不到，返回值为null</p>
<p>localStorage.removeItem(key)</p>
<p>localStorage.clear()</p>
<p>即使关闭浏览器也不会清掉</p>
<p><strong>2.SessionStorage</strong></p>
<p>浏览器关闭数据就没了</p>
<p>所有方法和localStorage一样</p>

        <h3 id="9-组件自定义事件">
          <a href="#9-组件自定义事件" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-组件自定义事件" class="headerlink" title="9. 组件自定义事件"></a>9. 组件自定义事件</h3>
      <p><strong>一种组件间通信的方式，适用于：<font color="red">子组件&#x3D;&gt;父组件</font></strong></p>
<p><strong>使用场景：A是父组件，B是子组件，B想给A传数据，那么就要在A中给B绑定自定义事件(事件的回调在A中)</strong></p>
<blockquote>
<p>即父组件定义回调函数，子组件调用</p>
</blockquote>
<p><strong>绑定自定义事件</strong></p>
<ol>
<li><p>在父组件中：<code>&lt;Demo @custevent=&quot;test&quot;/&gt;</code>或者<code>&lt;Demo v-on:custevent=&quot;test&quot;/&gt;</code></p>
</li>
<li><p>在父组件中：</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Demo</span> ref=<span class="string">&quot;demo&quot;</span>/&gt;</span><br><span class="line">...</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">xxx</span>.$on(<span class="string">&quot;custevent&quot;</span>,<span class="variable language_">this</span>.<span class="property">test</span>)<span class="comment">//test是定义在methods中的方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>3.若想让自定义事件只能触发一次，可以使用<code>once</code>修饰符，或者<code>$once</code>方法</p>
<p><strong>触发自定义事件：<code>this.$emit(&quot;custevent&quot;,参数1,参数2...)</code></strong></p>
<p><strong>解绑自定义事件：<code>this.$off(&quot;custevent&quot;)</code>&#x2F;解绑多个：<code>this.$off([&#39;custevent1&#39;,&#39;custevent2&#39;])</code>&#x2F;解绑全部：<code>this.$off()</code></strong></p>
<p><strong>组件上也可以绑定原生DOM事件，需要使用<code>native</code>修饰符，否则被当做是自定义事件</strong></p>
<p><strong><font color="red">注意：通过<code>this.$refs.xxx.$on(&#39;custevent&#39;,回调函数)</code>绑定自定义事件时，回调要么配置在methods中，要么用箭头函数，否则this指向会出问题</font></strong></p>
<p>关于this的指向问题：①谁触发的自定义事件，事件的回调当中的this就是谁(即谁绑定的自定义事件，this就是谁)  ②Vue承诺，如果函数写在methods中并且是普通函数，那么函数的this一定是当前组件的实例对象。<strong>如果1、 2冲突，那么以2为主。</strong></p>

        <h3 id="10全局事件总线（GlobalEventBus）">
          <a href="#10全局事件总线（GlobalEventBus）" class="heading-link"><i class="fas fa-link"></i></a><a href="#10全局事件总线（GlobalEventBus）" class="headerlink" title="10全局事件总线（GlobalEventBus）"></a>10全局事件总线（GlobalEventBus）</h3>
      <p><strong>一种组件间通信的方式，适用于任意组件间通信</strong></p>
<p><strong>1. 安装全局事件总线</strong></p>
<p>main.js：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">    <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$bus</span> = <span class="variable language_">this</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>2. 使用事件总线</strong></p>
<p>接收数据：A组件想接收数据，则在A组件中给$bus绑定自定义事件，事件的回调留在A组件自身</p>
<p>school.vue:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果函数在mounted中写要使用箭头函数，使this指向所在(当前)组件</span></span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$bus</span>.$on(<span class="string">&quot;transdata&quot;</span>,<span class="function">(<span class="params">sname,saddress</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;学生姓名：&quot;</span>,sname)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;学生地址：&quot;</span>,saddress)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//在beforeDestroy中解绑当前组件用到的事件</span></span><br><span class="line"><span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$bus</span>.$off(<span class="string">&quot;transdata&quot;</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p>提供数据：</p>
<p>student.vue：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">dataTransSchool</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$bus</span>.$emit(<span class="string">&quot;transdata&quot;</span>,<span class="variable language_">this</span>.<span class="property">sname</span>,<span class="variable language_">this</span>.<span class="property">saddress</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="11-消息訂閲與發佈">
          <a href="#11-消息訂閲與發佈" class="heading-link"><i class="fas fa-link"></i></a><a href="#11-消息訂閲與發佈" class="headerlink" title="11.消息訂閲與發佈"></a>11.消息訂閲與發佈</h3>
      <p><strong>1. 一种组件间的通信的方式，适用于任意组件间通信</strong></p>
<p><strong>2. 使用步骤</strong></p>
<p><strong>安装库：</strong></p>
<p><code>npm i pubsub-js</code></p>
<p><strong>引入：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pubsub <span class="keyword">from</span> <span class="string">&quot;pubsub-js&quot;</span></span><br></pre></td></tr></table></div></figure>

<p><strong>接收数据：A组件想接收数据，则在A组件中订阅消息，订阅的回调留在A组件自身</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//第一个参数是消息名称，第二个参数是传递的数据。</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">pubid</span> = pubsub.<span class="title function_">subscribe</span>(<span class="string">&quot;hello&quot;</span>,<span class="function">(<span class="params">msgName,data</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;发布了hello消息，hello回调执行,参数：&quot;</span>,msgName,data)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注意：由于pubsub-js是第三方库，不由vue管理，所以如果此处回调写的普通函数，那么this指向是undefined。想要this指向vc，可以写成箭头函数或者函数写在methods中让vue管理函数</font></strong></p>
<p><strong>提供数据：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pubsub.<span class="title function_">publish</span>(<span class="string">&#x27;xxx&#x27;</span>,数据)</span><br></pre></td></tr></table></div></figure>

<p><strong>取消订阅</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">	pubsub.<span class="title function_">unsubscribe</span>(<span class="variable language_">this</span>.<span class="property">pubid</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="12-nextTick">
          <a href="#12-nextTick" class="heading-link"><i class="fas fa-link"></i></a><a href="#12-nextTick" class="headerlink" title="12.$nextTick"></a>12.$nextTick</h3>
      <p><strong>语法：<code>this.$nextTick(回调函数)</code></strong></p>
<p><strong>作用：在下一次DOM更新结束后执行其指定的回调</strong></p>
<p><strong>什么时候用：在修改数据之后，立即使用这个方法，在下次DOM更新(v-for)循环之后，执行延迟回调</strong></p>
<p><strong>可以保证页面中的结构一定是有的，经常和很多插件一起使用【都需要DOM存在】</strong></p>
<p>例如：</p>
<p>例子一：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;a&#125;&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">a</span>=<span class="number">19985</span></span><br><span class="line">    <span class="variable language_">this</span>.$nextTick(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;回调执行&quot;</span>)</span><br><span class="line">     <span class="keyword">debugger</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="green">流程：修改数据a&#x3D;&#x3D;&gt;执行到nextTick，将回调函数存起来&#x3D;&#x3D;&gt;执行页面更新流程&#x3D;&#x3D;&gt;执行nextTick中的回调函数</font></strong></p>
<p>例子二：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.$nextTick(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;回调执行&quot;</span>)</span><br><span class="line">     <span class="keyword">debugger</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="green">流程：执行到nextTick，将回调函数存起来&#x3D;&#x3D;&gt;监测不到需要更新的数据(该次流程(函数内)无数据更新)&#x3D;&#x3D;&gt;执行nextTick中的回调函数</font></strong></p>

        <h1 id="VUE动画">
          <a href="#VUE动画" class="heading-link"><i class="fas fa-link"></i></a><a href="#VUE动画" class="headerlink" title="VUE动画"></a>VUE动画</h1>
      
        <h2 id="动画和过渡效果">
          <a href="#动画和过渡效果" class="heading-link"><i class="fas fa-link"></i></a><a href="#动画和过渡效果" class="headerlink" title="动画和过渡效果"></a><font color="green">动画和过渡效果</font></h2>
      <p>作用：在插入，更新或者移除DOM元素时，在合适的时候给元素添加样式类名</p>
<p>写法：</p>
<ol>
<li><p>准备好样式</p>
<ul>
<li><p>元素进入的样式</p>
<ol>
<li><p>v-enter:进入的起点</p>
</li>
<li><p>v-enter-active：进入过程中</p>
</li>
<li><p>v-enter-to：进入的终点</p>
</li>
</ol>
</li>
<li><p>元素离开的样式</p>
<ol>
<li><p>v-leave：离开的起点</p>
</li>
<li><p>v-leave-active：离开过程中</p>
</li>
<li><p>v-leave-to：离开的终点</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p>使用<code>&lt;transition&gt;包裹要过渡的元素，并配置name属性</code></p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition appear name=<span class="string">&quot;hello&quot;</span>&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>你好啊！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>备注：若有多个元素需要过渡，则需要使用：<code>&lt;transition-group&gt;</code>，且每个元素都要指定<code>key</code>值</li>
</ol>

        <h3 id="1-使用动画">
          <a href="#1-使用动画" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-使用动画" class="headerlink" title="1. 使用动画"></a>1. 使用动画</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow=!isShow&quot;</span>&gt;</span>显示/隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">transition</span> <span class="attr">appear</span> <span class="attr">name</span>=<span class="string">&quot;hello&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>你好啊！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>:<span class="string">&quot;TestAnim&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">isShow</span>:<span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">h1</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">background-color</span>: orange;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">	//此处如果没有指定name，name就是默认的<span class="selector-class">.v-enter-active</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.hello-enter-active</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">animation</span>: testA <span class="number">1s</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.hello-leave-active</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">animation</span>: testA <span class="number">1s</span> reverse;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      </span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="keyword">@keyframes</span> testA&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-tag">from</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">100%</span>);</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-tag">to</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">0px</span>);</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>


        <h3 id="2-使用过渡">
          <a href="#2-使用过渡" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-使用过渡" class="headerlink" title="2.使用过渡"></a>2.使用过渡</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow=!isShow&quot;</span>&gt;</span>显示/隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">transition</span> <span class="attr">appear</span> <span class="attr">name</span>=<span class="string">&quot;hello&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>你好啊！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>:<span class="string">&quot;TestAnim&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">isShow</span>:<span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">h1</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">background-color</span>: orange;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="comment">/* 进入的起点，离开的终点 */</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.hello-enter</span>,<span class="selector-class">.hello-leave-to</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">100%</span>);</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="comment">/* 过渡 */</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.hello-enter-active</span>,<span class="selector-class">.hello-leave-active</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">transition</span>: <span class="number">0.5s</span> linear;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="comment">/* 进入的终点，离开的起点 */</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.hello-enter-to</span>,<span class="selector-class">.hello-leave</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">0</span>);</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>


        <h3 id="3-第三方库">
          <a href="#3-第三方库" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-第三方库" class="headerlink" title="3. 第三方库"></a>3. 第三方库</h3>
      <p>安装</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install animate.<span class="property">css</span> --save</span><br></pre></td></tr></table></div></figure>
<p>使用</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow=!isShow&quot;</span>&gt;</span>显示/隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	  <span class="comment">&lt;!-- name必须要写，是库的类的名；然后是进入以及离开的名称配置 --&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">transition</span> <span class="attr">appear</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">name</span>=<span class="string">&quot;animate__animated animate__bounce&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">enter-active-class</span>=<span class="string">&quot;animate__swing&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">leave-active-class</span>=<span class="string">&quot;animate__backOutUp&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>你好啊！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">/* 此为样式，直接引入即可 */</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="string">&#x27;animate.css&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>:<span class="string">&quot;TestAnim&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">isShow</span>:<span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">h1</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">background-color</span>: orange;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>


        <h1 id="vue中的ajax">
          <a href="#vue中的ajax" class="heading-link"><i class="fas fa-link"></i></a><a href="#vue中的ajax" class="headerlink" title="vue中的ajax"></a>vue中的ajax</h1>
      
        <h2 id="方式一">
          <a href="#方式一" class="heading-link"><i class="fas fa-link"></i></a><a href="#方式一" class="headerlink" title="方式一"></a><font color="green">方式一</font></h2>
      <p>用vue-cli配置代理服务器解决跨域问题：</p>
<p>vue-config-js：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">transpileDependencies</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">devServer</span>: &#123;</span><br><span class="line">        <span class="attr">proxy</span>: <span class="string">&#x27;http://localhost:4000&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>html：</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&quot;http://localhost:8080/students&quot;).then(</span><br><span class="line">    response=&gt;&#123;</span><br><span class="line">      console.log(&quot;请求成功了&quot;,response.data)</span><br><span class="line">    &#125;,error=&gt;&#123;</span><br><span class="line">      console.log(&quot;请求失败了&quot;,error.message)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></div></figure>

<p>页面访问<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost:8080/students%E5%88%B0%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%86%8D%E8%AE%BF%E9%97%AE4000%E7%AB%AF%E5%8F%A3%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%B0%B1%E8%A7%A3%E5%86%B3%E4%BA%86%E8%B7%A8%E5%9F%9F%E7%9A%84%E9%97%AE%E9%A2%98%E3%80%82">http://localhost:8080/students到代理服务器，代理服务器再访问4000端口到服务器，就解决了跨域的问题。</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>注：同源策略只存在浏览器-服务器。服务器-服务器之间没有这种策略</p>
<p>优点：配质检单，请求资源时直接发给前端(8080)即可</p>
<p>缺点：不能配置多个代理，不能灵活的控制请求是否走代理</p>
<p>工作方式：若按照上述配置代理，当请求了前端不存在的资源时，那么该请求会转发给服务器(优先匹配前端资源)</p>

        <h2 id="方式二">
          <a href="#方式二" class="heading-link"><i class="fas fa-link"></i></a><a href="#方式二" class="headerlink" title="方式二"></a><font color="green">方式二</font></h2>
      <p>编写vue.config.js配置具体代理规则(配置多个代理)</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">		<span class="comment">//匹配所有以&quot;/api&quot;开头的请求路径</span></span><br><span class="line">        <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">            <span class="attr">target</span>: <span class="string">&#x27;http://localhost:4000&#x27;</span>,<span class="comment">//代理目标的基础路径</span></span><br><span class="line">            <span class="comment">//去掉路径上的api</span></span><br><span class="line">            <span class="attr">pathRewrite</span>: &#123; <span class="string">&#x27;^/api&#x27;</span>: <span class="string">&quot;&quot;</span> &#125;,</span><br><span class="line">            <span class="comment">//用于支持webspcket</span></span><br><span class="line">            <span class="attr">ws</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//用于控制请求头中的host值</span></span><br><span class="line">            <span class="attr">changeOrigin</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">		<span class="comment">//匹配所有以&quot;/demo&quot;开头的请求路径</span></span><br><span class="line">        <span class="string">&#x27;/demo&#x27;</span>: &#123;</span><br><span class="line">            <span class="attr">target</span>: <span class="string">&#x27;http://localhost:5001&#x27;</span>,</span><br><span class="line">            <span class="comment">//去掉路径上的api</span></span><br><span class="line">            <span class="attr">pathRewrite</span>: &#123; <span class="string">&#x27;^/demo&#x27;</span>: <span class="string">&quot;&quot;</span> &#125;,</span><br><span class="line">            <span class="comment">//用于支持webspcket</span></span><br><span class="line">            <span class="attr">ws</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//用于控制请求头中的host值,如果为true，和请求的host保持一致，否则就是原来的host</span></span><br><span class="line">            <span class="attr">changeOrigin</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	changeOrigin为true时，服务器收到的请求头中的host为：localhost:5000</span></span><br><span class="line"><span class="comment">	changeOrigin为false时，服务器收到的请求头中的host为：localhost:8080</span></span><br><span class="line"><span class="comment">	changeOrigin默认值为true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></div></figure>

<p>html：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getStudents</span>(<span class="params"></span>)&#123;</span><br><span class="line">  axios.<span class="title function_">get</span>(<span class="string">&quot;http://localhost:8080/api/students&quot;</span>).<span class="title function_">then</span>(</span><br><span class="line">    <span class="function"><span class="params">response</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求成功了&quot;</span>,response.<span class="property">data</span>)</span><br><span class="line">    &#125;,<span class="function"><span class="params">error</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求失败了&quot;</span>,error.<span class="property">message</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">getCars</span>(<span class="params"></span>)&#123;</span><br><span class="line">  axios.<span class="title function_">get</span>(<span class="string">&quot;http://localhost:8080/demo/cars&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">response</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求成功了&quot;</span>,response.<span class="property">data</span>)</span><br><span class="line">  &#125;,<span class="function"><span class="params">error</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求失败了&quot;</span>,error.<span class="property">message</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>优点：可以配置多个代理，且可以灵活的控制请求是否走代理</p>
<p>缺点：配置略繁琐，请求资源时必须加前缀</p>

        <h2 id="插槽">
          <a href="#插槽" class="heading-link"><i class="fas fa-link"></i></a><a href="#插槽" class="headerlink" title="插槽"></a><font color="green">插槽</font></h2>
      <ol>
<li><p>作用：让父组件可以向子组件指定位置插入html结构，也是一种组件间通信的方式，适用于父组件&#x3D;&#x3D;&#x3D;&gt;子组件</p>
</li>
<li><p>分类：默认插槽、具名插槽、作用域插槽</p>
</li>
<li><p>使用方式：</p>
</li>
</ol>

        <h3 id="1-默认插槽">
          <a href="#1-默认插槽" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-默认插槽" class="headerlink" title="1. 默认插槽"></a>1. 默认插槽</h3>
      <p><strong>父组件：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">CateGory</span>&gt;</span><br><span class="line"></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>html结构<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">CateGory</span>/&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p><strong>子组件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="comment">&lt;!-- 定义插槽 --&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">slot</span>&gt;</span>默认插槽内容(如果父组件的标签内没有内容，默认显示这些)<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-具名插槽">
          <a href="#2-具名插槽" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-具名插槽" class="headerlink" title="2. 具名插槽"></a>2. 具名插槽</h3>
      <p><strong>父组件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">CateGory</span>&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">div</span>&gt;</span>html结构<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">div</span>&gt;</span>html结构<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">CateGory</span>/&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p><strong>子组件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="comment">&lt;!-- 定义插槽 --&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;center&quot;</span>&gt;</span>插槽默认内容...<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>插槽默认内容...<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-作用域插槽">
          <a href="#3-作用域插槽" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-作用域插槽" class="headerlink" title="3. 作用域插槽"></a>3. 作用域插槽</h3>
      <p>理解：数据在组件自身，但根据数据生成的结构需要组件的使用者决定。(games数据再Category组件中，但是用数据所遍历出来的结构由APP组件决定)</p>
<p><strong>父组件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">CateGory</span>&gt;</span><br><span class="line">	&lt;!-- scopeData可以随意命名 --&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">scope</span>=<span class="string">&quot;scopeData&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="comment">&lt;!-- 生成的是ul列表 --&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;g in scopeData.games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g&quot;</span>&gt;</span>&#123;&#123;g&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">CateGory</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">CateGory</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scopeData&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="comment">&lt;!-- 生成的是h4标题 --&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">h4</span> <span class="attr">v-for</span>=<span class="string">&quot;g in scopeData.games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g&quot;</span>&gt;</span>&#123;&#123;g&#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">CateGory</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>如果子组件定义了多个插槽，那么都是在scopeData中取即可</p>
<p><strong>子组件中</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;diiv&gt;</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">:games</span>=<span class="string">&quot;games&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="attr">name</span>:<span class="string">&quot;CateGory&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="comment">//数据在子组件自身</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">games</span>:[<span class="string">&#x27;艾尔登法环&#x27;</span>,<span class="string">&#x27;GTA5&#x27;</span>,<span class="string">&#x27;怪物猎人&#x27;</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h1 id="VUEX">
          <a href="#VUEX" class="heading-link"><i class="fas fa-link"></i></a><a href="#VUEX" class="headerlink" title="VUEX"></a>VUEX</h1>
      
        <h2 id="是什么">
          <a href="#是什么" class="heading-link"><i class="fas fa-link"></i></a><a href="#是什么" class="headerlink" title="是什么"></a><font color="green">是什么</font></h2>
      <p><strong>1. 概念：专门在Vue中实现集中式状态(数据)管理的一个Vue插件，对Vue应用中多个组件的共享状态进行集中式的管理(读&#x2F;写)，也是一种组件间通信的方式，且适用于任意组件间通信</strong></p>
<p><strong>2.Github地址：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://github.com/vuejs/vuex">https://github.com/vuejs/vuex</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></strong></p>

        <h2 id="什么时候使用">
          <a href="#什么时候使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#什么时候使用" class="headerlink" title="什么时候使用"></a><font color="green">什么时候使用</font></h2>
      <p><strong>1. 多个组件依赖于同一状态(数据)</strong></p>
<p><strong>2. 来自不同组件的行为需要变更同一状态</strong></p>
<p>即共享</p>

        <h2 id="搭建vuex环境">
          <a href="#搭建vuex环境" class="heading-link"><i class="fas fa-link"></i></a><a href="#搭建vuex环境" class="headerlink" title="搭建vuex环境"></a><font color="green">搭建vuex环境</font></h2>
      <p><strong>1. 创建文件<code>src/store/index.js</code></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该文件用于创建Vuex中最为核心的store</span></span><br><span class="line"><span class="comment">//引入vue</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="comment">//引入Vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//应用Vuex插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备actions--用于响应组件中的动作</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备mutations--用于操作数据(state)</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备state--用于存储数据</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并导出store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    actions,</span><br><span class="line">    mutations,</span><br><span class="line">    state</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>注意，脚手架会先扫描文件中的import关键字按顺序执行，所以import即使放在语句下面也会优先执行</strong></p>
<p><strong>2. 在<code>main.js</code>中创建vm时传入store配置项</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store/index&quot;</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">    store,</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h2 id="基本使用">
          <a href="#基本使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#基本使用" class="headerlink" title="基本使用"></a><font color="green">基本使用</font></h2>
      <p><strong>1. 初始化数据，配置actions、配置mutations、操作文件store.js</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该文件用于创建Vuex中最为核心的store</span></span><br><span class="line"><span class="comment">//引入Vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="comment">//引入vue</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//应用Vuex插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备actions--用于响应组件中的动作</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">    <span class="title function_">jiaOdd</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (context.<span class="property">state</span>.<span class="property">sum</span> % <span class="number">2</span>) &#123;</span><br><span class="line">            context.<span class="title function_">commit</span>(<span class="string">&quot;JIAODD&quot;</span>, value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">jiaWait</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            context.<span class="title function_">commit</span>(<span class="string">&quot;JIAWAIT&quot;</span>, value)</span><br><span class="line">        &#125;, <span class="number">500</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备mutations--用于操作数据(state)</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">    <span class="title function_">JIA</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">        state.<span class="property">sum</span> += value</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">JIAN</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">        state.<span class="property">sum</span> -= value</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">JIAODD</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">        state.<span class="property">sum</span> += value</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">JIAWAIT</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">        state.<span class="property">sum</span> += value</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备state--用于存储数据</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">    <span class="attr">sum</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并导出store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    actions,</span><br><span class="line">    mutations,</span><br><span class="line">    state</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>2. 组件中读取vuex中的数据：<code>$store.state.sum</code></strong></p>
<p><strong>3. 组件中修改vuex中的数据：<code>$store.dispatch(&quot;action中的方法名&quot;,数据)</code>或者<code>$store.commit(&quot;mutation中的方法名&quot;,数据)</code></strong></p>
<p>注：如果没有网络请求或其他业务逻辑，组件中也可以越过actions，即不写dispatch，直接编写commit</p>

        <h2 id="getters的使用">
          <a href="#getters的使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#getters的使用" class="headerlink" title="getters的使用"></a><font color="green">getters的使用</font></h2>
      <ol>
<li><p>概念：当state中的数据需要经过加工后再使用时，可以使用getters加工</p>
</li>
<li><p>在<code>store.js</code>中追加getters配置</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备getters--用于将state中的数据进行加工</span></span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">		<span class="comment">//需要一个返回值</span></span><br><span class="line">        <span class="title function_">bigSum</span>(<span class="params">state</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> state.<span class="property">sum</span> * <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//创建并导出store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    actions,</span><br><span class="line">    mutations,</span><br><span class="line">    state,</span><br><span class="line">    getters</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>组件中读取数据：<code>$store.getters.bigSum</code></li>
</ol>

        <h2 id="四个map方法的使用">
          <a href="#四个map方法的使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#四个map方法的使用" class="headerlink" title="四个map方法的使用"></a><font color="green">四个map方法的使用</font></h2>
      <p><strong>组件引入：<code>import &#123;mapGetters, mapState&#125; from &quot;vuex&quot;</code></strong></p>

        <h3 id="1-mapState方法：用于帮助我们映射state中的数据为计算属性">
          <a href="#1-mapState方法：用于帮助我们映射state中的数据为计算属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-mapState方法：用于帮助我们映射state中的数据为计算属性" class="headerlink" title="1.mapState方法：用于帮助我们映射state中的数据为计算属性"></a>1.mapState方法：用于帮助我们映射state中的数据为计算属性</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line">    <span class="comment">//此处sum是字符串，因为要找的是key值，如果不加引号就会是变量</span></span><br><span class="line">    <span class="comment">//借助mapState生成计算属性，从state中读取数据，(对象写法)</span></span><br><span class="line">    <span class="comment">// ...mapState(&#123;he:&#x27;sum&#x27;,xuexiao:&quot;school&quot;,xueke:&quot;subject&quot;&#125;),</span></span><br><span class="line">    <span class="comment">//借助mapState生成计算属性，从state中读取数据，数组写法</span></span><br><span class="line">    ...<span class="title function_">mapState</span>([<span class="string">&#x27;sum&#x27;</span>,<span class="string">&#x27;school&#x27;</span>,<span class="string">&#x27;subject&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>使用：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">和：&#123;&#123;he&#125;&#125;,学校:&#123;&#123;xuexiao&#125;&#125;,学科：&#123;&#123;xueke&#125;&#125;,</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">&#123;&#123;sum&#125;&#125;,&#123;&#123;school&#125;&#125;,&#123;&#123;subject&#125;&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-mapGetters方法：用于帮助我们映射getters中的数据为计算属性">
          <a href="#2-mapGetters方法：用于帮助我们映射getters中的数据为计算属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-mapGetters方法：用于帮助我们映射getters中的数据为计算属性" class="headerlink" title="2.mapGetters方法：用于帮助我们映射getters中的数据为计算属性"></a>2.mapGetters方法：用于帮助我们映射getters中的数据为计算属性</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line">    <span class="comment">// 借助mapGetters生成计算属性，从getters中读取数据，对象写法</span></span><br><span class="line">    <span class="comment">// ...mapGetters(&#123;bigSum:&quot;bigSum&quot;&#125;),</span></span><br><span class="line">    <span class="comment">// 借助mapGetters生成计算属性，从getters中读取数据，数组写法</span></span><br><span class="line">    ...<span class="title function_">mapGetters</span>([<span class="string">&#x27;bigSum&#x27;</span>])</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-mapActions方法：用于帮助我们生成与actions对话的方法，即包含-store-dispatch-xxx-的函数">
          <a href="#3-mapActions方法：用于帮助我们生成与actions对话的方法，即包含-store-dispatch-xxx-的函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-mapActions方法：用于帮助我们生成与actions对话的方法，即包含-store-dispatch-xxx-的函数" class="headerlink" title="3. mapActions方法：用于帮助我们生成与actions对话的方法，即包含$store.dispatch(xxx)的函数"></a>3. mapActions方法：用于帮助我们生成与actions对话的方法，即包含<code>$store.dispatch(xxx)</code>的函数</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line"> 	<span class="comment">//对象写法</span></span><br><span class="line">    <span class="comment">//借助mapActions生成对应的方法，方法中会调用dispatch去联系actions</span></span><br><span class="line">    ...<span class="title function_">mapActions</span>(&#123;<span class="string">&quot;incrementOdd&quot;</span>:<span class="string">&quot;jiaOdd&quot;</span>,<span class="string">&quot;incrementWait&quot;</span>:<span class="string">&quot;jiaWait&quot;</span>&#125;),</span><br><span class="line">    <span class="comment">//数组写法</span></span><br><span class="line">    <span class="comment">// ...mapActions([&quot;jiaOdd&quot;,&quot;jiaWait&quot;])</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-mapMutations方法：用于帮助我们生产与mutations对话的方法，即包含-store-commit-xxx-的函数">
          <a href="#4-mapMutations方法：用于帮助我们生产与mutations对话的方法，即包含-store-commit-xxx-的函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-mapMutations方法：用于帮助我们生产与mutations对话的方法，即包含-store-commit-xxx-的函数" class="headerlink" title="4. mapMutations方法：用于帮助我们生产与mutations对话的方法，即包含$store.commit(xxx)的函数"></a>4. mapMutations方法：用于帮助我们生产与mutations对话的方法，即包含<code>$store.commit(xxx)</code>的函数</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="comment">//借助mapMutations生成对应的方法，方法中会调用commit去联系mutations</span></span><br><span class="line">    ...<span class="title function_">mapMutations</span>(&#123;<span class="string">&quot;increment&quot;</span>:<span class="string">&quot;JIA&quot;</span>,<span class="string">&quot;decrement&quot;</span>:<span class="string">&quot;JIAN&quot;</span>&#125;),</span><br><span class="line">    <span class="comment">//数组写法</span></span><br><span class="line">    <span class="comment">// ...mapMutations([&quot;JIA&quot;,&quot;JIAN&quot;]),</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>&#x3D;&#x3D;&#x3D;&gt;实际生成</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">increment</span>(<span class="params">value</span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&quot;JIA&quot;</span>,value)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">decrement</span>(<span class="params">value</span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&quot;JIAN&quot;</span>,value)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>所以在模板中绑定事件时应该传好值，不传默认是event。</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment(n)&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;decrement(n)&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>也可以在方法中调用时传值：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line"></span><br><span class="line">	<span class="title function_">fun1</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="title function_">increment</span>(<span class="variable language_">this</span>.<span class="property">n</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="模块化-命名空间">
          <a href="#模块化-命名空间" class="heading-link"><i class="fas fa-link"></i></a><a href="#模块化-命名空间" class="headerlink" title="模块化+命名空间"></a><font color="green">模块化+命名空间</font></h2>
      <p><strong>目的：让代码更好维护，让多种数据分类更加明确</strong></p>
<ol>
<li>修改<code>store.js</code></li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该文件用于创建Vuex中最为核心的store</span></span><br><span class="line"><span class="comment">//引入Vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="comment">//引入vue</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//应用Vuex插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//计数相关</span></span><br><span class="line"><span class="keyword">const</span> countAbout = &#123;</span><br><span class="line">    <span class="attr">namespaced</span>: <span class="literal">true</span>, <span class="comment">//开启命名空间</span></span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">sum</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">school</span>: <span class="string">&quot;雷亚卢卡利亚&quot;</span>,</span><br><span class="line">        <span class="attr">subject</span>: <span class="string">&quot;起源&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        <span class="title function_">jiaOdd</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (context.<span class="property">state</span>.<span class="property">sum</span> % <span class="number">2</span>) &#123;</span><br><span class="line">                context.<span class="title function_">commit</span>(<span class="string">&quot;JIAODD&quot;</span>, value)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">jiaWait</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                context.<span class="title function_">commit</span>(<span class="string">&quot;JIAWAIT&quot;</span>, value)</span><br><span class="line">            &#125;, <span class="number">500</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="title function_">JIA</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">            state.<span class="property">sum</span> += value</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">JIAN</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">            state.<span class="property">sum</span> -= value</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">JIAODD</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">            state.<span class="property">sum</span> += value</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">JIAWAIT</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">            state.<span class="property">sum</span> += value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getters</span>: &#123;</span><br><span class="line">        <span class="title function_">bigSum</span>(<span class="params">state</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> state.<span class="property">sum</span> * <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//人员相关</span></span><br><span class="line"><span class="keyword">const</span> personAbout = &#123;</span><br><span class="line">    <span class="attr">namespaced</span>: <span class="literal">true</span>, <span class="comment">//开启命名空间</span></span><br><span class="line">    <span class="attr">state</span>: &#123; <span class="attr">personlist</span>: [&#123; <span class="attr">id</span>: <span class="string">&quot;001&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span> &#125;] &#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        <span class="title function_">addwang</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (value.<span class="property">name</span>.<span class="title function_">indexOf</span>(<span class="string">&quot;王&quot;</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">                context.<span class="title function_">commit</span>(<span class="string">&quot;ADDWANG&quot;</span>, value)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">alert</span>(<span class="string">&quot;需要姓王&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="title function_">ADD_PERSON</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">            state.<span class="property">personlist</span>.<span class="title function_">unshift</span>(value)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">ADDWANG</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">            state.<span class="property">personlist</span>.<span class="title function_">unshift</span>(value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">	<span class="attr">getters</span>:&#123;</span><br><span class="line">		<span class="title function_">firstPersonName</span>(<span class="params"></span>)&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="string">&quot;abc&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并导出store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">        countAbout,</span><br><span class="line">        personAbout</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>开启命名空间后，组件中读取state数据</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一  直接读取</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">personAbout</span>.<span class="property">personlist</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//借助mapState读取</span></span><br><span class="line">...<span class="title function_">mapState</span>(<span class="string">&quot;countAbout&quot;</span>,[<span class="string">&#x27;sum&#x27;</span>,<span class="string">&#x27;school&#x27;</span>,<span class="string">&#x27;subject&#x27;</span>])</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>开启命名空间后，组件中读取getters数据：</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一：直接读取</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>[<span class="string">&quot;personAbout/firstPersonName&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">//方式二：借助mapGetters读取</span></span><br><span class="line">...<span class="title function_">mapGetters</span>(<span class="string">&quot;countAbout&quot;</span>,[<span class="string">&quot;bigSum&quot;</span>])</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ol start="4">
<li>开启命名空间后，组件中调用dispatch</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一：直接使用dispatch</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&quot;personAbout/addwang&quot;</span>,person)</span><br><span class="line"><span class="comment">//方式二：借助mapActions</span></span><br><span class="line">...<span class="title function_">mapActions</span>(<span class="string">&quot;countAbout&quot;</span>,&#123;<span class="string">&quot;countAbout&quot;</span>:<span class="string">&quot;jiaOdd&quot;</span>,<span class="string">&quot;incrementWait&quot;</span>:<span class="string">&quot;jiaWait&quot;</span>&#125;)</span><br></pre></td></tr></table></div></figure>

<ol start="5">
<li>开启命名空间后，组件中调用commit</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一：直接使用commit</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&quot;personAbount/ADD_PERSON&quot;</span>,person)</span><br><span class="line"><span class="comment">//方式二：借助mapMutations</span></span><br><span class="line">...<span class="title function_">mapMutations</span>(<span class="string">&quot;countAbout&quot;</span>,&#123;<span class="attr">increment</span>:<span class="string">&quot;JIA&quot;</span>,<span class="attr">decrement</span>:<span class="string">&quot;JIAN&quot;</span>&#125;)</span><br></pre></td></tr></table></div></figure>


        <h1 id="路由">
          <a href="#路由" class="heading-link"><i class="fas fa-link"></i></a><a href="#路由" class="headerlink" title="路由"></a>路由</h1>
      <p>定义：</p>
<ol>
<li><p>路由就是一组key-value的对应关系</p>
</li>
<li><p>多个路由，需要经过路由器的管理</p>
</li>
</ol>

        <h2 id="vue-router">
          <a href="#vue-router" class="heading-link"><i class="fas fa-link"></i></a><a href="#vue-router" class="headerlink" title="vue-router"></a><font color="green">vue-router</font></h2>
      
        <h3 id="1-SPA">
          <a href="#1-SPA" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-SPA" class="headerlink" title="1. SPA"></a>1. SPA</h3>
      <ol>
<li><p>单页面WEB应用(single page web application,SPA)</p>
</li>
<li><p>整个应用只有一个完整的页面</p>
</li>
<li><p>点击页面中的导航链接不会刷新页面，只会做页面的局部刷新</p>
</li>
<li><p>数据需要通过ajax请求获取</p>
</li>
</ol>

        <h3 id="2-路由-vue-router">
          <a href="#2-路由-vue-router" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-路由-vue-router" class="headerlink" title="2. 路由(vue-router)"></a>2. 路由(vue-router)</h3>
      <p>vue-router是vue的一个插件库，专门用来实现SPA应用</p>
<p><strong>什么是路由</strong></p>
<ol>
<li><p>一个路由就是一组映射关系(key-value)</p>
</li>
<li><p>key为路径，value可能是function或者component</p>
</li>
</ol>
<p><strong>路由分类</strong></p>
<ol>
<li><p>后端路由</p>
<p> 理解：value是function，用于处理客户端提交的请求</p>
<p> 工作过程：服务器接收到一个请求时，根据请求路径找到匹配的函数来处理请求，返回响应数据</p>
</li>
<li><p>前端路由</p>
<p> 理解：value 是component，用于展示页面的内容</p>
<p> 工作过程：当浏览器的路径改变时，对应的组件就会显示</p>
</li>
<li><p>基本使用</p>
</li>
</ol>
<p>(1) 安装vue-router，命令<code>npm i vue-router</code></p>
<p>(2) 应用插件：<code>Vue.use(VueRouter)</code></p>
<p>main.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">//引入</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span></span><br><span class="line"><span class="comment">//引入路由器</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router/index&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">    <span class="attr">router</span>: router</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></div></figure>

<p>(3) 编写router配置项。src-router-index.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该文件专门用于创建整个应用的路由器</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span></span><br><span class="line"><span class="comment">//引入路由组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AboutInfo</span> <span class="keyword">from</span> <span class="string">&quot;../components/AboutInfo&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HomeInfo</span> <span class="keyword">from</span> <span class="string">&quot;../components/HomeInfo&quot;</span></span><br><span class="line"><span class="comment">//创建并暴露一个路由器，管理一组一组的路由规则</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: [&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">AboutInfo</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">HomeInfo</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>(4)实现切换(active-class可以配置高亮样式)</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>(5)指定展示位置</p>
<p><code>&lt;router-view&gt;&lt;/router-view&gt;</code></p>
<p><strong>注意点：</strong></p>
<ol>
<li><p>路由组件通常放在pages文件夹，一般組通常存放在components文件夹</p>
</li>
<li><p>通过切换，“隐藏”了的路由组件，默认是被销毁的，需要的时候再去挂载</p>
</li>
<li><p>每个组件都有自己的<code>$route</code>属性，里面存储着自己的路由信息</p>
</li>
<li><p>整个应用只有一个router，可以通过组件的<code>$router</code>属性获取到</p>
</li>
<li><p><strong>$route和data中的属性平级，所以watch监听路由<code>$route</code>时不用加this</strong></p>
</li>
</ol>

        <h3 id="2-嵌套路由-多级路由">
          <a href="#2-嵌套路由-多级路由" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-嵌套路由-多级路由" class="headerlink" title="2. 嵌套路由(多级路由)"></a>2. 嵌套路由(多级路由)</h3>
      <ol>
<li>配置路由规则，使用children配置项</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: [&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">AboutInfo</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">HomeInfo</span>,</span><br><span class="line">        <span class="attr">children</span>: [&#123;</span><br><span class="line">            <span class="comment">//子级在内部遍历时自动加入/，所以此处不需要加/符号了(加/会不生效)</span></span><br><span class="line">            <span class="attr">path</span>: <span class="string">&quot;message&quot;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">MessageInfo</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&quot;news&quot;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">NewsInfo</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注意：子级的path不要加<code>/</code></font></strong></p>
<ol start="2">
<li>跳转：(要写完整路径)</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link <span class="keyword">class</span>=<span class="string">&quot;list-group-item active&quot;</span> to=<span class="string">&quot;/home/news&quot;</span>&gt;<span class="title class_">News</span>&lt;/router-link&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-路由的query參數">
          <a href="#3-路由的query參數" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-路由的query參數" class="headerlink" title="3. 路由的query參數"></a>3. 路由的query參數</h3>
      <ol>
<li>傳遞參數：</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;m in messageList&quot;</span> <span class="attr">:key</span> = <span class="string">&quot;m.id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            </span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- 跳转路由并携带query参数，to的字符串写法 --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- &lt;router-link :to=&quot;`/home/message/detail?id=$&#123;m.id&#125;&amp;title=$&#123;m.title&#125;`&quot;&gt;&#123;&#123;m.title&#125;&#125;&lt;/router-link&gt;&amp;nbsp;&amp;nbsp; --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- 跳转路由并携带query参数，to的对象写法 --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span>  <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">            path:&#x27;/home/message/detail&#x27;,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">            query:&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">                id:m.id,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">                title:m.title</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">            &#125;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        &#125;&quot;</span>&gt;</span>&#123;&#123;m.title&#125;&#125;<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>接收參數：</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> &lt;ul&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>消息编号：&#123;&#123;$route.query.id&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>消息标题：&#123;&#123;$route.query.title&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-命名路由">
          <a href="#4-命名路由" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-命名路由" class="headerlink" title="4. 命名路由"></a>4. 命名路由</h3>
      <ol>
<li><p>作用：可以简化路由的跳转</p>
</li>
<li><p>如何使用</p>
</li>
</ol>
<ul>
<li>给路由命名</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: [&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">AboutInfo</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">HomeInfo</span>,</span><br><span class="line">        <span class="attr">children</span>: [&#123;</span><br><span class="line">            <span class="comment">//子级在内部遍历时自动加入/，所以此处不需要加/符号了</span></span><br><span class="line">            <span class="attr">path</span>: <span class="string">&quot;message&quot;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">MessageInfo</span>,</span><br><span class="line">            <span class="attr">children</span>: [&#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&quot;xiangxi&quot;</span>,</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&quot;detail&quot;</span>,</span><br><span class="line">                <span class="attr">component</span>: <span class="title class_">DetailInfo</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&quot;news&quot;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">NewsInfo</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ul>
<li>简化跳转</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link  :to=<span class="string">&quot;&#123;</span></span><br><span class="line"><span class="string">    name:&#x27;xiangxi&#x27;,</span></span><br><span class="line"><span class="string">    query:&#123;</span></span><br><span class="line"><span class="string">        id:m.id,</span></span><br><span class="line"><span class="string">        title:m.title</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;&quot;</span>&gt;&#123;&#123;m.<span class="property">title</span>&#125;&#125;&lt;/router-link&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="5-params参数">
          <a href="#5-params参数" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-params参数" class="headerlink" title="5. params参数"></a>5. params参数</h3>
      <ol>
<li>配置路由时，声明接收params参数</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: [&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">AboutInfo</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">HomeInfo</span>,</span><br><span class="line">        <span class="attr">children</span>: [&#123;</span><br><span class="line">            <span class="comment">//子级在内部遍历时自动加入/，所以此处不需要加/符号了</span></span><br><span class="line">            <span class="attr">path</span>: <span class="string">&quot;message&quot;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">MessageInfo</span>,</span><br><span class="line">            <span class="attr">children</span>: [&#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&quot;xiangxi&quot;</span>,</span><br><span class="line">				<span class="comment">//使用占位符声明接收params参数</span></span><br><span class="line">                <span class="attr">path</span>: <span class="string">&quot;detail/:id/:title&quot;</span>,</span><br><span class="line">                <span class="attr">component</span>: <span class="title class_">DetailInfo</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&quot;news&quot;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">NewsInfo</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注：如果在路径上使用了占位符但是实际没有传递params参数的话，路径跳转回出现问题，比如此处不显示detail路径，解决方式是加个问号<code>path: &quot;detail/:id?/:title?&quot;</code>,代表可传可不传递</font></strong></p>
<p><strong><font color="red">注：如果加了问号后传递的是空字符串，那么也会有路径不显示问题(detail不显示)，解决方式，空字符串替换为undefined</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&quot;search&quot;</span>,</span><br><span class="line">  <span class="attr">params</span>:&#123;</span><br><span class="line">     <span class="attr">keyWords</span>:<span class="variable language_">this</span>.<span class="property">keyWords</span>||<span class="literal">undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>传递参数</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> &lt;ul&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;m in messageList&quot;</span> <span class="attr">:key</span> = <span class="string">&quot;m.id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        </span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 跳转路由并携带params参数，to的字符串写法 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- &lt;router-link :to=&quot;`/home/message/detail/$&#123;m.id&#125;/$&#123;m.title&#125;`&quot;&gt;&#123;&#123;m.title&#125;&#125;&lt;/router-link&gt;&amp;nbsp;&amp;nbsp; --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 跳转路由并携带params参数，to的对象写法 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">router-link</span>  <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        //此处不允许写path，需要是name</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        name:&#x27;xiangxi&#x27;,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        params:&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">            id:m.id,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">            title:m.title</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        &#125;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">    &#125;&quot;</span>&gt;</span>&#123;&#123;m.title&#125;&#125;<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">特别注意：路由携带params参数时，若使用to的对象写法，则不能使用path配置项，必须使用name配置！</font></strong></p>
<ol start="3">
<li>接收参数</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;消息编号：&#123;&#123;$route.<span class="property">params</span>.<span class="property">id</span>&#125;&#125;&lt;/li&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>消息标题：&#123;&#123;$route.params.title&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>


        <h3 id="6-路由的props配置">
          <a href="#6-路由的props配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-路由的props配置" class="headerlink" title="6. 路由的props配置"></a>6. 路由的props配置</h3>
      <p>作用：讓路由組件更方便的收到參數</p>
<p>哪個路由組件要收到參數就写到哪个组件上</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: [ </span><br><span class="line">		&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">HomeInfo</span>,</span><br><span class="line">        <span class="attr">children</span>: [&#123;</span><br><span class="line">            <span class="comment">//子级在内部遍历时自动加入/，所以此处不需要加/符号了</span></span><br><span class="line">            <span class="attr">path</span>: <span class="string">&quot;message&quot;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">MessageInfo</span>,</span><br><span class="line">            <span class="attr">children</span>: [&#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&quot;xiangxi&quot;</span>,</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&quot;detail/:id/:title&quot;</span>,</span><br><span class="line">                <span class="attr">component</span>: <span class="title class_">DetailInfo</span>,</span><br><span class="line">                <span class="comment">//props的第一种写法，值为对象，该对象中的所有key-value都会以props的形式传给Detail组件</span></span><br><span class="line">                <span class="comment">// props: &#123; a: 1, b: &quot;hello&quot; &#125;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">//props的第二种写法，值为布尔值,若布尔值为真，就会把该路由组件收到的所有params参数，以props的形式传给Detail组件</span></span><br><span class="line">                <span class="comment">// props: true</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">//props的第三种写法，值为函数,該函數返回的對象中每一組key-value都傳給Detail組件</span></span><br><span class="line">                <span class="title function_">props</span>(<span class="params">$route</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> &#123;</span><br><span class="line">                        <span class="attr">id</span>: $route.<span class="property">query</span>.<span class="property">id</span>,</span><br><span class="line">                        <span class="attr">title</span>: $route.<span class="property">query</span>.<span class="property">title</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>接收：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>:[<span class="string">&quot;id&quot;</span>,<span class="string">&quot;title&quot;</span>]</span><br></pre></td></tr></table></div></figure>


        <h3 id="7-lt-router-link-gt-的replace属性">
          <a href="#7-lt-router-link-gt-的replace属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-lt-router-link-gt-的replace属性" class="headerlink" title="7. &lt;router-link&gt;的replace属性"></a>7. <code>&lt;router-link&gt;</code>的replace属性</h3>
      <ol>
<li><p>作用：控制路由跳转时操作浏览器历史记录的模式</p>
</li>
<li><p>浏览器的历史记录有两种写入方式，分别为push和replace，push是追加历史记录，replace是替换<strong>当前记录</strong>，路由跳转时候默认为push</p>
</li>
<li><p>如何开启replace模式：</p>
</li>
</ol>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:replace</span>=<span class="string">&quot;true&quot;</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 或者 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">replace</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></div></figure>


        <h3 id="8-编程式路由导航">
          <a href="#8-编程式路由导航" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-编程式路由导航" class="headerlink" title="8.编程式路由导航"></a>8.编程式路由导航</h3>
      <ol>
<li><p>作用：不借助<code>&lt;router-link&gt;</code>实现路由跳转，让路由跳转更加灵活</p>
</li>
<li><p>编码：</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=<span class="string">&quot;pushShow(m)&quot;</span>&gt;push查看&lt;/button&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;replaceShow(m)&quot;</span>&gt;</span>replace查看<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="title function_">pushShow</span>(<span class="params">m</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;xiangxi&#x27;</span>,</span><br><span class="line">        <span class="attr">query</span>:&#123;</span><br><span class="line">            <span class="attr">id</span>:m.<span class="property">id</span>,</span><br><span class="line">            <span class="attr">title</span>:m.<span class="property">title</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">replaceShow</span>(<span class="params">m</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;xiangxi&#x27;</span>,</span><br><span class="line">        <span class="attr">query</span>:&#123;</span><br><span class="line">            <span class="attr">id</span>:m.<span class="property">id</span>,</span><br><span class="line">            <span class="attr">title</span>:m.<span class="property">title</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">back</span>()	<span class="comment">//后退</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">forward</span>()	<span class="comment">//前进</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">go</span>(-<span class="number">2</span>)	<span class="comment">//负数为后退，正数为前进。是几就走几步</span></span><br></pre></td></tr></table></div></figure>


        <h3 id="9-缓存路由组件">
          <a href="#9-缓存路由组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-缓存路由组件" class="headerlink" title="9.缓存路由组件"></a>9.缓存路由组件</h3>
      <ol>
<li><p>作用：让不展示的路由组件保持挂载，不被销毁</p>
</li>
<li><p>具体编码：</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive include=<span class="string">&quot;NewsInfo&quot;</span>&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></div></figure>

<p>include里写的是缓存哪些组件。值为组件名。即组件内部的name。</p>
<p><strong>缓存多个写法：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive :include=<span class="string">&quot;[&#x27;NewsInfo&#x27;,&#x27;MessageInfo&#x27;]&quot;</span>&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="10-两个新的生命周期钩子">
          <a href="#10-两个新的生命周期钩子" class="heading-link"><i class="fas fa-link"></i></a><a href="#10-两个新的生命周期钩子" class="headerlink" title="10. 两个新的生命周期钩子"></a>10. 两个新的生命周期钩子</h3>
      <ol>
<li><p>作用：路由组件所独有的两个钩子，用于捕获路由组件的激活状态</p>
</li>
<li><p>具体名字</p>
<p> <code>activated</code>路由组件被激活时触发</p>
<p> <code>deactivated</code>路由组件失活时触发</p>
</li>
</ol>
<p>实际用途：如果路由组件被缓存，那么再切换组件后就不会再执行mounted和beforeDestroy，一些处理就需要在这两个钩子中执行，如开启清除定时器</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//激活</span></span><br><span class="line"><span class="title function_">activated</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;news组件被激活&quot;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;@&quot;</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">opacity</span>-=<span class="number">0.01</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">opacity</span>&lt;=<span class="number">0</span>) <span class="variable language_">this</span>.<span class="property">opacity</span>=<span class="number">1</span></span><br><span class="line">    &#125;, <span class="number">16</span>);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//失活</span></span><br><span class="line"><span class="title function_">deactivated</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;news组件失活&quot;</span>)</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timer</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h2 id="路由守卫">
          <a href="#路由守卫" class="heading-link"><i class="fas fa-link"></i></a><a href="#路由守卫" class="headerlink" title="路由守卫"></a><font color="green">路由守卫</font></h2>
      
        <h3 id="1-全局路由守卫">
          <a href="#1-全局路由守卫" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-全局路由守卫" class="headerlink" title="1. 全局路由守卫"></a>1. 全局路由守卫</h3>
      <ol>
<li><p>作用：对<strong>路由</strong>进行权限控制</p>
</li>
<li><p>分类：全局守卫，独享守卫，组件内守卫</p>
</li>
<li><p>全局守卫</p>
</li>
</ol>
<p>路由配置</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;guanyu&quot;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AboutInfo</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&quot;关于&quot;</span>,<span class="attr">isAuth</span>:<span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全局前置路由守卫--初始化的时候被调用、每次路由切换之前被调用</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">isAuth</span>) &#123;	<span class="comment">//判断当前路由是否需要进行权限控制</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;school&quot;</span>) === <span class="string">&quot;清华大学&quot;</span>) &#123;	<span class="comment">//权限控制的具体规则</span></span><br><span class="line">            <span class="title function_">next</span>()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&quot;您没有权限&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">next</span>()	<span class="comment">//放行</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局后置路由守卫--初始化的时候被调用、每次路由切换之后被调用</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">title</span>) &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">title</span> = to.<span class="property">meta</span>.<span class="property">title</span>	<span class="comment">//修改网页title</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&quot;vue-test&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>from是从哪里来，to是到哪里去。他们都是对象，存储的只是对应路由的信息（配置时的那些信息），并非路由组件实例对象</p>
<p><strong>meta属性：是一个对象，可以自定义一些数据(元数据)</strong></p>

        <h3 id="2-独享路由守卫">
          <a href="#2-独享路由守卫" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-独享路由守卫" class="headerlink" title="2. 独享路由守卫"></a>2. 独享路由守卫</h3>
      <p>只对该路由组件生效，点击该组件进行切换，在切换到该路由组件之前调用</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;guanyu&quot;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AboutInfo</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&quot;关于&quot;</span>,</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">beforeEnter</span>: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(to)</span><br><span class="line">        <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">isAuth</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;school&quot;</span>) === <span class="string">&quot;清华大学&quot;</span>) &#123;</span><br><span class="line">                <span class="title function_">next</span>()</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">alert</span>(<span class="string">&quot;无权限&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">next</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-组件内路由守卫">
          <a href="#3-组件内路由守卫" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-组件内路由守卫" class="headerlink" title="3. 组件内路由守卫"></a>3. 组件内路由守卫</h3>
      <p><strong>进入之前和离开之前，需要区别于前置和后置</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="string">&quot;AboutInfo&quot;</span>,</span><br><span class="line">	<span class="comment">//通过路由规则，进入该组件时被调用</span></span><br><span class="line">	beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">	  <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">isAuth</span>) &#123;</span><br><span class="line">	      <span class="keyword">if</span> (<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;school&quot;</span>) === <span class="string">&quot;清华大学&quot;</span>) &#123;</span><br><span class="line">	          <span class="title function_">next</span>()</span><br><span class="line">	      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	          <span class="title function_">alert</span>(<span class="string">&quot;无权限&quot;</span>)</span><br><span class="line">	      &#125;</span><br><span class="line">	  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	      <span class="title function_">next</span>()</span><br><span class="line">	  &#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//通过路由规则，离开该组件时调用</span></span><br><span class="line">	beforeRouteLeave (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">	  <span class="title function_">next</span>()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-路由器的两种工作模式">
          <a href="#4-路由器的两种工作模式" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-路由器的两种工作模式" class="headerlink" title="4. 路由器的两种工作模式"></a>4. 路由器的两种工作模式</h3>
      <ol>
<li><p>对于一个url来说，什么是hash值？ —- <code>#及其后面的内容就是hash值</code></p>
</li>
<li><p>hash值不会包含在HTTP请求中，即：hash值不会带给服务器</p>
</li>
<li><p>hash模式：</p>
<ul>
<li><p>地址中永远带着#号，不美观</p>
</li>
<li><p>若以后将地址通过第三方手机app分享，若app校验严格，则地址会被标记为不合法</p>
</li>
<li><p>兼容性较好</p>
</li>
</ul>
</li>
<li><p>history模式</p>
<ul>
<li><p>地址干净 没管</p>
</li>
<li><p>兼容性和hash模式相比略差</p>
</li>
<li><p>应用部署上线时需要后端人员支持，解决刷新页面服务端404的问题</p>
</li>
</ul>
</li>
</ol>
<p><strong>部署：</strong></p>
<ol>
<li><p>项目运行指令<code>npm run bulid</code></p>
</li>
<li><p>将生成的dist文件夹内的内容复制到服务器静态资源内。如node中放在static中，且要配置静态资源地址</p>
</li>
</ol>
<p><code>app.use(express.static(__dirname + &quot;/static&quot;))</code></p>

        <h1 id="Vue-UI组件库">
          <a href="#Vue-UI组件库" class="heading-link"><i class="fas fa-link"></i></a><a href="#Vue-UI组件库" class="headerlink" title="Vue UI组件库"></a>Vue UI组件库</h1>
      
        <h2 id="移动端常用UI组件库">
          <a href="#移动端常用UI组件库" class="heading-link"><i class="fas fa-link"></i></a><a href="#移动端常用UI组件库" class="headerlink" title="移动端常用UI组件库"></a><font color="green">移动端常用UI组件库</font></h2>
      <ol>
<li><p>Vant <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://youzan.github.io/vant" title="Vant">https://youzan.github.io/vant</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</li>
<li><p>Cube UI  <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://didi.github.io/cube-ui" title="Cube UI">https://didi.github.io/cube-ui</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</li>
<li><p>Mint UI    <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://mint-ui.github.io/" title="Mint UI">http://mint-ui.github.io</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</li>
</ol>

        <h2 id="PC端常用UI组件库">
          <a href="#PC端常用UI组件库" class="heading-link"><i class="fas fa-link"></i></a><a href="#PC端常用UI组件库" class="headerlink" title="PC端常用UI组件库"></a><font color="green">PC端常用UI组件库</font></h2>
      <ol>
<li><p>Element UI    <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://element.eleme.cn/" title="Element UI">https://element.eleme.cn</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</li>
<li><p>IView UI    <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.iviewui.com/" title="IView UI">https://www.iviewui.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</li>
</ol>

        <h1 id="Vue3">
          <a href="#Vue3" class="heading-link"><i class="fas fa-link"></i></a><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h1>
      
        <h2 id="創建工程">
          <a href="#創建工程" class="heading-link"><i class="fas fa-link"></i></a><a href="#創建工程" class="headerlink" title="創建工程"></a><font color="green">創建工程</font></h2>
      
        <h3 id="1-使用vue-cli創建工程">
          <a href="#1-使用vue-cli創建工程" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-使用vue-cli創建工程" class="headerlink" title="1. 使用vue-cli創建工程"></a>1. 使用vue-cli創建工程</h3>
      <ol>
<li>官方文檔：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">## 查看@vue/cli版本，确保@vue/cli版本在<span class="number">4.5</span><span class="number">.0</span>以上</span><br><span class="line">vue --version</span><br><span class="line"></span><br><span class="line">## 如果版本不对，安装或者升级你的@vue/cli</span><br><span class="line">npm install -g @vue/cli</span><br><span class="line"></span><br><span class="line">## 创建</span><br><span class="line">vue create vue_test</span><br><span class="line"></span><br><span class="line">## 启动</span><br><span class="line">cd vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-使用vite创建">
          <a href="#2-使用vite创建" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-使用vite创建" class="headerlink" title="2. 使用vite创建"></a>2. 使用vite创建</h3>
      <p>官方文档：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/installation.html#vite">https://v3.cn.vuejs.org/guide/installation.html#vite</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>vite官网：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://vitejs.cn/">https://vitejs.cn</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<pre><code>* 什么是vite -- 新一代前端构建工具

* 优势如下：

    *    开发环境中，无需打包操作，可快速的冷启动

    *    轻量快速的热重载(HMR)

    *    真正的按需编译，不再等待整个应用编译完成
</code></pre>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">## 创建工程</span><br><span class="line"></span><br><span class="line">npm init vite-app &lt;project-name&gt;</span><br><span class="line"></span><br><span class="line">## 进入工程目录</span><br><span class="line"></span><br><span class="line">cd &lt;project-name&gt;</span><br><span class="line"></span><br><span class="line">## 安装依赖</span><br><span class="line"></span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line">## 运行</span><br><span class="line"></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></div></figure>


        <h2 id="常用Composition-API">
          <a href="#常用Composition-API" class="heading-link"><i class="fas fa-link"></i></a><a href="#常用Composition-API" class="headerlink" title="常用Composition API"></a><font color="green">常用Composition API</font></h2>
      <p>官方文档: <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html">https://v3.cn.vuejs.org/guide/composition-api-introduction.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="1-setup">
          <a href="#1-setup" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-setup" class="headerlink" title="1. setup"></a>1. setup</h3>
      <ol>
<li><p>理解：Vue3.0中一个新的配置项，值为一个函数</p>
</li>
<li><p>setup是所有Composition API(组合API)“表演的舞台”</p>
</li>
<li><p>组件中所用到的：数据、方法等等，均瑶配置在setup中</p>
</li>
<li><p>setup函数的两种返回值：</p>
<ol>
<li>若返回一个对象，则对象中的属性、方法、在模板中均可以直接使用。（重点）</li>
</ol>
 <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> name = <span class="string">&quot;张三&quot;</span></span><br><span class="line">  <span class="keyword">let</span> age = <span class="number">18</span></span><br><span class="line">	</span><br><span class="line">  <span class="comment">//方法</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">`我叫<span class="subst">$&#123;name&#125;</span>，我<span class="subst">$&#123;age&#125;</span>岁了，你好哇！`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">	</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    name,age,sayHello</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>若返回一个渲染函数：则可以自定义渲染内容。（了解</li>
</ol>
 <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">return</span> <span class="function">()=&gt;</span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="title function_">h</span>(<span class="string">&quot;h1&quot;</span>,<span class="string">&quot;test&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line"><span class="comment">//页面显示的是h1标签包裹的test</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>注意点：</p>
<ol>
<li><p>尽量不要与Vue2.x配置混用</p>
<ul>
<li><p>Vue2.x配置(data&#x2F;methods&#x2F;computed…)中可以访问到setup中的属性、方法。</p>
</li>
<li><p>但在setup中不能访问到Vue2.x配置(data、methods、computed…)</p>
</li>
<li><p>如果2和3中配置重名，以后一个为准</p>
</li>
</ul>
</li>
<li><p>setup不能是一个async函数，因为返回值不再是return的对象，而是promise，模板看不到return对象中的属性(后期也可以返回一个Promise实例，但需要Suspense和异步组件的配合)</p>
</li>
</ol>
</li>
</ol>

        <h3 id="2-ref函数">
          <a href="#2-ref函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-ref函数" class="headerlink" title="2. ref函数"></a>2. ref函数</h3>
      <ol>
<li><p>作用：定义一个响应式的数据</p>
</li>
<li><p>语法：<code>const xxx = ref(initValue)</code></p>
<ul>
<li><p>创建一个包含响应式数据的引用对象（reference对象）</p>
</li>
<li><p>JS中操作数据：<code>xxx.value</code></p>
</li>
<li><p>模板中读取数据：不需要<code>.value</code>，直接<code>&#123;&#123;xxx&#125;&#125;</code>。vue会自动加上<code>.value</code>读取</p>
</li>
</ul>
</li>
<li><p>备注：</p>
<ul>
<li><p>接收的数据可以是：基本类型，也可以是对象类型</p>
</li>
<li><p>基本类型的数据，响应式依然是靠<code>Object.defineProperty()</code>的get与set完成的</p>
</li>
<li><p>对象类型的数据：内部“求助”了Vue3.0中的一个新函数–<code>reactive</code>函数</p>
</li>
</ul>
</li>
</ol>
<p><strong>处理基本类型</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> name = <span class="title function_">ref</span>(<span class="string">&quot;张三&quot;</span>)</span><br><span class="line">  <span class="keyword">let</span> age = <span class="title function_">ref</span>(<span class="number">18</span>)</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">changeInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">    name.<span class="property">value</span>=<span class="string">&quot;李四&quot;</span>,</span><br><span class="line">    age.<span class="property">value</span> = <span class="number">20</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    name,age,changeInfo</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>处理对象类型</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> job = <span class="title function_">ref</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>:<span class="string">&quot;前端工程师&quot;</span>,</span><br><span class="line">  <span class="attr">salary</span>:<span class="string">&#x27;30K&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">  job.<span class="property">value</span>.<span class="property">type</span> = <span class="string">&quot;UI工程师&quot;</span></span><br><span class="line">  job.<span class="property">value</span>.<span class="property">salary</span> = <span class="string">&quot;70K&quot;</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="reactive函数">
          <a href="#reactive函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#reactive函数" class="headerlink" title="reactive函数"></a>reactive函数</h3>
      <ol>
<li><p>作用：定义一个<strong>对象类型</strong>的响应式数据（基本类型不要用它，用ref函数）</p>
</li>
<li><p>语法：<code>const 代理对象 = reactive(源对象)</code>接收一个对象（或数组），返回一个代理对象（Proxy的实例对象，简称proxy对象）</p>
</li>
<li><p>reactive定义的响应式数据是“深层次的”</p>
</li>
<li><p>内部基于ES6的Proxy实现，通过代理对象操作源对象内部数据进行操作</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> job = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>:<span class="string">&quot;前端工程师&quot;</span>,</span><br><span class="line">  <span class="attr">salary</span>:<span class="string">&#x27;30K&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> hobby = <span class="title function_">reactive</span>([<span class="string">&quot;游戏&quot;</span>,<span class="string">&quot;运动&quot;</span>,<span class="string">&quot;美食&quot;</span>])</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">  job.<span class="property">type</span> = <span class="string">&quot;UI工程师&quot;</span></span><br><span class="line">  job.<span class="property">salary</span> = <span class="string">&quot;70K&quot;</span></span><br><span class="line">  hobby[<span class="number">0</span>] = <span class="string">&quot;学习&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="3-Vue3响应式原理">
          <a href="#3-Vue3响应式原理" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-Vue3响应式原理" class="headerlink" title="3. Vue3响应式原理"></a>3. Vue3响应式原理</h3>
      <p>实现原理：</p>
<ul>
<li><p>通过Proxy(代理)：拦截代理对象中任意属性的变化，包括：属性值的读写、属性的添加、属性的删除等</p>
</li>
<li><p>通过Reflect(反射)：对被代理对象（源对象）的属性进行操作。</p>
</li>
<li><p>MDN文档中描述关于Proxy和Reflect</p>
<ul>
<li><p>Proxy：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects&#x2F;Proxy</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</li>
<li><p>Reflect:<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects&#x2F;Reflect</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Proxy</span>(person,&#123;</span><br><span class="line">    <span class="comment">//有人读取p的某个属性时调用</span></span><br><span class="line">    <span class="title function_">get</span>(<span class="params">target,propName</span>)&#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`有人读取了p身上得到<span class="subst">$&#123;propName&#125;</span>属性`</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target,propName)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//有人修改p的某个属性，或给p追加某个属性时调用</span></span><br><span class="line">    <span class="title function_">set</span>(<span class="params">target,propName,value</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`有人修改了p身上的<span class="subst">$&#123;propName&#125;</span>属性`</span>)</span><br><span class="line">        <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target,propName,value)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//有人删除p的某个属性时调用</span></span><br><span class="line">    <span class="title function_">deleteProperty</span>(<span class="params">target,propName</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`有人删除了p身上的<span class="subst">$&#123;propName&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target,propName)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-reactive对比ref">
          <a href="#4-reactive对比ref" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-reactive对比ref" class="headerlink" title="4. reactive对比ref"></a>4. reactive对比ref</h3>
      <ul>
<li><p>从定义数据角度对比</p>
<ul>
<li><p>ref用来定义：基本类型数据</p>
</li>
<li><p>reactive用来定义：对象（或数组）类型数据</p>
</li>
<li><p>备注：ref也可以用来定义对象（或数组）类型数据，它内部会自动通过reactive转为代理对象</p>
</li>
</ul>
</li>
<li><p>从原理角度对比</p>
<ul>
<li><p>ref通过<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>来实现响应式（数据劫持）</p>
</li>
<li><p>reactive通过使用Proxy来实现响应式（数据劫持），并通过Reflect操作源对象内部的数据</p>
</li>
</ul>
</li>
<li><p>从使用角度对比</p>
<ul>
<li><p>ref定义的数据：操作数据需要<code>.value</code>，读取数据时模板中直接读取不需要<code>.value</code></p>
</li>
<li><p>reactive定义的数据：操作数据与读取数据：均不需要<code>.value</code></p>
</li>
</ul>
</li>
</ul>
<p><strong>注意：如果往reactive定义的对象中后天添加属性（即使该属性是一个对象），那么它也自动变成响应式的</strong></p>

        <h3 id="5-setup的两个注意点">
          <a href="#5-setup的两个注意点" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-setup的两个注意点" class="headerlink" title="5. setup的两个注意点"></a>5. setup的两个注意点</h3>
      <ul>
<li><p>setup执行的时机</p>
<ul>
<li>在beforeCreate之前执行一次，this是undefined</li>
</ul>
</li>
<li><p>setup的参数</p>
<ol>
<li><p>props：值为对象，包含：组件外部传递过来，且组件内部声明接收了的属性<code>props:[&quot;msg&quot;]</code></p>
</li>
<li><p>context:上下文对象：</p>
<ul>
<li><p>attrs：值为对象，包含：组件外部传递过来，但没有在props配置中声明的属性，相当于vue2中的<code>$attrs</code></p>
</li>
<li><p>slots：收到的插槽内容，相当于2中的<code>this.$slots</code></p>
</li>
<li><p>emit：分发自定义事件的函数，相当于vue2中的<code>this.$emit</code>.(注：vue3中，触发自定义事件要先配置出<code>emits:[&#39;hello&#39;]</code>)</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>

        <h3 id="6-计算属性">
          <a href="#6-计算属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-计算属性" class="headerlink" title="6. 计算属性"></a>6. 计算属性</h3>
      <ol>
<li><p>与Vue2.x中computed配置功能一致</p>
</li>
<li><p>写法：</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;computed,reactive&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">     <span class="attr">firstName</span>:<span class="string">&quot;张&quot;</span>,</span><br><span class="line">     <span class="attr">lastName</span>:<span class="string">&quot;三&quot;</span></span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="comment">//计算属性（没有考虑计算属性被修改的情况）</span></span><br><span class="line">  <span class="comment">//  person.fullName = computed(()=&gt;&#123;</span></span><br><span class="line">  <span class="comment">//    return person.firstName+&quot;-&quot;+person.lastName</span></span><br><span class="line">  <span class="comment">//  &#125;)</span></span><br><span class="line">  <span class="comment">//计算属性（完整写法）</span></span><br><span class="line">  person.<span class="property">fullName</span> = <span class="title function_">computed</span>(&#123;</span><br><span class="line">     <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> person.<span class="property">firstName</span>+<span class="string">&quot;-&quot;</span>+person.<span class="property">lastName</span></span><br><span class="line">    &#125;,<span class="title function_">set</span>(<span class="params">value</span>)&#123;</span><br><span class="line">      <span class="keyword">const</span> nameArr = value.<span class="title function_">split</span>(<span class="string">&quot;-&quot;</span>)</span><br><span class="line">      person.<span class="property">firstName</span> = nameArr[<span class="number">0</span>]</span><br><span class="line">      person.<span class="property">lastName</span> = nameArr[<span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;person&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>注：Vue2的计算属性写法也可以应用到Vue3，且可以访问到setup中的响应式数据，但不推荐这么做</p>

        <h3 id="7-Watch监视">
          <a href="#7-Watch监视" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-Watch监视" class="headerlink" title="7. Watch监视"></a>7. Watch监视</h3>
      <ul>
<li><p>与Vue2.x中watch配置功能一致：</p>
</li>
<li><p>两个“小坑”</p>
<ol>
<li><p>监视reactive定义的响应式数据时：oldValue无法正常读取、并强制开启了深度监视(deep配置失效)</p>
</li>
<li><p>监视reactive定义的响应式数据中某个(对象)属性时：deep配置有效</p>
</li>
</ol>
</li>
</ul>
<p>语法：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(监视属性,监视回调,监视配置)</span><br><span class="line"></span><br><span class="line"><span class="title function_">watch</span>(sum,<span class="function">()=&gt;</span>&#123;&#125;,&#123;<span class="attr">deep</span>:<span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></div></figure>

<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive, ref,watch&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">   <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">   <span class="keyword">let</span> msg = <span class="title function_">ref</span>(<span class="string">&quot;你好啊&quot;</span>)</span><br><span class="line">   <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">     <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">     <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">     <span class="attr">job</span>:&#123;</span><br><span class="line">       <span class="attr">salary</span>:<span class="number">20</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="comment">//情况一：监视ref所定义的一个响应式数据</span></span><br><span class="line">   <span class="comment">// watch(sum,(newValue,oldValue)=&gt;&#123;</span></span><br><span class="line">   <span class="comment">//   console.log(&quot;sum变了&quot;,newValue,oldValue)</span></span><br><span class="line">   <span class="comment">// &#125;,&#123;</span></span><br><span class="line">   <span class="comment">//   immediate:true,</span></span><br><span class="line">   <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">//情况二：监视ref所定义的多个响应式数据</span></span><br><span class="line">   <span class="comment">// watch([sum,msg],(newValue,oldValue)=&gt;&#123;</span></span><br><span class="line">   <span class="comment">//   console.log(&quot;msg或者sum改变了&quot;,newValue[0],oldValue[0])</span></span><br><span class="line">   <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 情况三：监视reactive所定义的一个响应式数据的全部属性</span></span><br><span class="line"><span class="comment">    * 1. 注意：此处无法正确的获取oldValue</span></span><br><span class="line"><span class="comment">    * 2. 注意：强制开启了深度监视（deep配置无效）</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// watch(person,(newValue,oldValue)=&gt;&#123;</span></span><br><span class="line">   <span class="comment">//   console.log(&quot;person发生变化&quot;)</span></span><br><span class="line">   <span class="comment">//   console.log(newValue,oldValue)</span></span><br><span class="line">   <span class="comment">// &#125;,&#123;deep:false&#125;)  //此处监视的是reactive所定义的对象，深度监视强制开启，故此处deep配置无效</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">//情况四：监视reactive所定义的一个响应式数据中的某个属性</span></span><br><span class="line">   <span class="comment">// watch(()=&gt;person.age,(newValue,oldValue)=&gt;&#123;</span></span><br><span class="line">   <span class="comment">//   console.log(&quot;person中的age发生变化&quot;)</span></span><br><span class="line">   <span class="comment">//   console.log(newValue,oldValue)</span></span><br><span class="line">   <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">//情况五：监视reactive所定义的一个响应式数据中的某些属性</span></span><br><span class="line">   <span class="comment">// watch([()=&gt;person.age,()=&gt;person.name],(newValue,oldValue)=&gt;&#123;</span></span><br><span class="line">   <span class="comment">//   console.log(&quot;person中的age或者name发生变化&quot;)</span></span><br><span class="line">   <span class="comment">//   console.log(newValue,oldValue)</span></span><br><span class="line">   <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">//特殊情况：</span></span><br><span class="line">   <span class="title function_">watch</span>(<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;person中的job发生变化&quot;</span>)</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue,oldValue)</span><br><span class="line">   &#125;,&#123;<span class="attr">deep</span>:<span class="literal">true</span>&#125;)  <span class="comment">//此处由于监视的是reactive所定义的对象中的某个属性，所有deep配置有效</span></span><br><span class="line">   <span class="keyword">return</span> &#123;sum,msg,person&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="8-watch时value问题">
          <a href="#8-watch时value问题" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-watch时value问题" class="headerlink" title="8. watch时value问题"></a>8. watch时value问题</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"><span class="title function_">watch</span>(sum,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;sum变了&quot;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;</span><br><span class="line">  <span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>此处监视的属性不需要<code>.value</code>，因为要监视的是响应式数据，如果<code>.value</code>就会变成基本类型，如<code>0</code>，无法监视</p>
<p>也就是说可以直接监视到sum中value的变化</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = <span class="title function_">ref</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">  <span class="attr">job</span>:&#123;</span><br><span class="line">    <span class="attr">salary</span>:<span class="number">20</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">watch</span>(person.<span class="property">value</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;sum变了&quot;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;</span><br><span class="line">  <span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">watch</span>(person,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;sum变了&quot;</span>,newValue,oldValue)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>person是refimpl实例对象，可以监视到value的变化，value是reactive生成的Proxy对象。不能直接监视到value内部属性的变化。需要开启深度监视。或者直接监视person.value</p>

        <h3 id="9-watchEffect函数">
          <a href="#9-watchEffect函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-watchEffect函数" class="headerlink" title="9. watchEffect函数"></a>9. watchEffect函数</h3>
      <ul>
<li><p>watch:既要志明监视的属性，也要指明监视的回调</p>
</li>
<li><p>watchEffect：不用指明监视哪个属性、监视的回调中用到哪个属性，那就监视哪个属性</p>
</li>
<li><p>watchEffect有点像computed</p>
<ul>
<li><p>单computed注重的计算出来的值（回调函数的返回值）,所以必须要写返回值</p>
</li>
<li><p>而watchEffect更注重的是过程（回调函数的函数体），所以不用写返回值</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//watchEffect所指定的回调中用到的数据只要发生变化，则直接重新执行回调</span></span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> x1 = sum.<span class="property">value</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;watchEffect所指定的回调执行&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>



        <h3 id="10-Vue3-生命周期">
          <a href="#10-Vue3-生命周期" class="heading-link"><i class="fas fa-link"></i></a><a href="#10-Vue3-生命周期" class="headerlink" title="10. Vue3 生命周期"></a>10. Vue3 生命周期</h3>
      <p>Vue3.0中可以继续使用Vue2.x中的生命周期钩子，但有两个被更名</p>
<ul>
<li><p><code>beforeDestroy</code>改名为<code>beforeUnmount</code></p>
</li>
<li><p><code>destroyed</code>改名为<code>unmounted</code></p>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过配置项的形式使用声明周期钩子</span></span><br><span class="line">   <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---beforeCreate---&quot;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---created---&quot;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">beforeMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---beforeMount---&quot;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---mounted---&quot;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">beforeUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---beforeUpdate---&quot;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">updated</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---updated---&quot;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">beforeUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---beforeUnmount---&quot;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">unmounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---unmounted---&quot;</span>)</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></div></figure>

<p>Vue3.0也提供了Composition API形式的生命周期钩子，与Vue2.x中钩子对应关系：</p>
<p><code>beforeCreate</code> &#x3D;&#x3D;&gt; <code>setup()</code></p>
<p><code>created</code> &#x3D;&#x3D;&gt; <code>setup()</code></p>
<p><code>beforeMount</code> &#x3D;&#x3D;&gt; <code>onBeforeMount</code></p>
<p><code>mounted</code> &#x3D;&#x3D;&gt; <code>onMounted</code></p>
<p><code>beforeUpdate</code> &#x3D;&#x3D;&gt; <code>onBeforeUpdate</code></p>
<p><code>updated</code> &#x3D;&#x3D;&gt; <code>onUpdated</code></p>
<p><code>beforeUnmount</code> &#x3D;&#x3D;&gt; <code>onBeforeUnmount</code></p>
<p><code>unmounted</code> &#x3D;&#x3D;&gt; <code>onUnmounted</code></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref,onBeforeMount,onMounted,onBeforeUpdate,onUpdated,onBeforeUnmount,onUnmounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="comment">//未提供beforeCreate、created的组合式API</span></span><br><span class="line">        <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">        <span class="title function_">onBeforeMount</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">           <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;--- onBeforeMount ---&quot;</span>)     </span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;--- onMounted ---&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="title function_">onBeforeUpdate</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;--- onBeforeUpdate ---&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="title function_">onUpdated</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;--- onUpdated ---&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="title function_">onBeforeUnmount</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;--- onBeforeUnmount ---&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;--- onUnmounted ---&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123;sum&#125;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="11-自定义hook函数">
          <a href="#11-自定义hook函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#11-自定义hook函数" class="headerlink" title="11. 自定义hook函数"></a>11. 自定义hook函数</h3>
      <ul>
<li><p>本质是一个函数，把setup函数中使用的Composition API进行了封装</p>
</li>
<li><p>类似于vue2.x中的mixin</p>
</li>
<li><p>自定义hook的优势：复用代码，让setup中的逻辑更清楚易懂</p>
</li>
</ul>
<ol>
<li>src下创建hooks文件夹，创建usePoint.js文件</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, onMounted, onBeforeUnmount &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//实现鼠标“打点”相关的数据</span></span><br><span class="line">    <span class="keyword">let</span> point = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">            <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">y</span>: <span class="number">0</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">//实现鼠标“打点”相关的方法</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">savePoint</span>(<span class="params">event</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;savePoint&quot;</span>)</span><br><span class="line">        point.<span class="property">x</span> = event.<span class="property">pageX</span></span><br><span class="line">        point.<span class="property">y</span> = event.<span class="property">pageY</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//实现鼠标“打点”相关的生命周期钩子</span></span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, savePoint)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">onBeforeUnmount</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&quot;click&quot;</span>, savePoint)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> point</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


<ol start="2">
<li>组件调用：</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> usePoint <span class="keyword">from</span> <span class="string">&quot;../hooks/usePoint&quot;</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">let</span> point = <span class="title function_">usePoint</span>()</span><br><span class="line">	<span class="keyword">return</span> &#123;sum,point&#125;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="12-toRef">
          <a href="#12-toRef" class="heading-link"><i class="fas fa-link"></i></a><a href="#12-toRef" class="headerlink" title="12. toRef"></a>12. toRef</h3>
      <ul>
<li><p>作用：创建一个ref对象，其value值指向另一个对象中的某个属性</p>
</li>
<li><p>语法：<code>const name = toRef(person,&quot;name&quot;)</code></p>
</li>
<li><p>应用：要将响应式对象中的某个属性单独提供给外部使用时且不丢失响应式</p>
</li>
<li><p>扩展：<code>toRefs</code>与<code>toRef</code>功能一致，但可以批量创建多个ref对象，语法：<code>toRefs(person)</code></p>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive, toRef,toRefs&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">       <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">       <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">       <span class="attr">job</span>:&#123;</span><br><span class="line">           <span class="attr">j1</span>:&#123;</span><br><span class="line">               <span class="attr">salary</span>:<span class="number">20</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">let</span> name1 = <span class="title function_">toRef</span>(person.<span class="property">name</span>)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(name1)</span><br><span class="line">   <span class="keyword">return</span> &#123;</span><br><span class="line">       <span class="attr">name</span>:<span class="title function_">toRef</span>(person,<span class="string">&quot;name&quot;</span>),</span><br><span class="line">       <span class="attr">age</span>:<span class="title function_">toRef</span>(person,<span class="string">&quot;age&quot;</span>),</span><br><span class="line">       <span class="attr">salary</span>:<span class="title function_">toRef</span>(person.<span class="property">job</span>.<span class="property">j1</span>,<span class="string">&quot;salary&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p>这样写name的值就指向了person中的name，变成了响应式的数据。如果直接写</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">	<span class="attr">name</span>:person.<span class="property">name</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>那么该name只是单纯赋了值，并非响应式数据，如果写成</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="title function_">ref</span>(person.<span class="property">name</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>那么其实是重新定义ref数据，后续无法对原数据进行修改</p>
<p><strong>toRefs</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">toRefs</span>(person))</span><br></pre></td></tr></table></div></figure>

<p>批量生成ref数据，person中的属性都变成了ObjectRefImpl类型数据。指向了原Proxy对象的对应属性，返回时可以使用<code>...</code></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>薪资：&#123;&#123;salary&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">	...<span class="title function_">toRefs</span>(person),...<span class="title function_">toRefs</span>(person.<span class="property">job</span>.<span class="property">j1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="13-shallowReactive和shallowRef">
          <a href="#13-shallowReactive和shallowRef" class="heading-link"><i class="fas fa-link"></i></a><a href="#13-shallowReactive和shallowRef" class="headerlink" title="13. shallowReactive和shallowRef"></a>13. shallowReactive和shallowRef</h3>
      <ul>
<li><p>shallowReactive：只处理对象最外层属性的响应式(浅响应式)</p>
</li>
<li><p>shallowRef：只处理基本数据类型的响应式，不进行对象的响应式处理</p>
</li>
<li><p>什么时候使用？</p>
<ul>
<li><p>如果有一个对象数据，结构比较深，但变化时只是外层属性变化&#x3D;&#x3D;&#x3D;》 shallowReactive</p>
</li>
<li><p>如果有一个对象数据，后续功能不会修改该对象中的属性，而是生新的对象来替换 &#x3D;&#x3D;&#x3D;》shallowRef</p>
</li>
</ul>
</li>
</ul>

        <h3 id="14-readonly和shallowReadonly">
          <a href="#14-readonly和shallowReadonly" class="heading-link"><i class="fas fa-link"></i></a><a href="#14-readonly和shallowReadonly" class="headerlink" title="14. readonly和shallowReadonly"></a>14. readonly和shallowReadonly</h3>
      <ul>
<li><p>readonly：让一个响应式数据变为只读的（深只读）</p>
</li>
<li><p>shallowReadonly：让一个响应式数据变成只读的（浅只读）</p>
<p>  如果应用到reactive数据上，那么不影响二层结构，如果应用到ref数据上，如果ref内是对象的话就不影响。</p>
</li>
</ul>
<p>使用：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive,ref,shallowReadonly,readonly&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">   <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">   <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">   <span class="attr">job</span>:&#123;</span><br><span class="line">       <span class="attr">j1</span>:&#123;</span><br><span class="line">           <span class="attr">salary</span>:<span class="number">20</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br><span class="line">person = <span class="title function_">readonly</span>(person)</span><br></pre></td></tr></table></div></figure>


        <h3 id="15-toRaw与markRaw">
          <a href="#15-toRaw与markRaw" class="heading-link"><i class="fas fa-link"></i></a><a href="#15-toRaw与markRaw" class="headerlink" title="15. toRaw与markRaw"></a>15. toRaw与markRaw</h3>
      <ul>
<li><p>toRaw：</p>
<ul>
<li><p>作用：将一个由<code>reactive</code>生成的响应式对象转为普通对象(ref类型不生效)</p>
</li>
<li><p>使用场景：用于读取响应式对象对应的普通对象，对这个普通对象的所有操作，不会引起页面更新</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">   <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">   <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">   <span class="attr">job</span>:&#123;</span><br><span class="line">       <span class="attr">j1</span>:&#123;</span><br><span class="line">           <span class="attr">salary</span>:<span class="number">20</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">showRawPerson</span>(<span class="params"></span>)&#123;</span><br><span class="line">		person = <span class="title function_">toRaw</span>(person)</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">info</span>(person)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<ul>
<li><p>markRaw</p>
<p>  由于reactive生成的对象，对其进行增加删除属性等等都会被监测到，并使其成为响应式的。</p>
<ul>
<li><p>作用：标记一个对象，使其永远不会再成为响应式对象</p>
</li>
<li><p>应用场景：</p>
<ol>
<li><p>有些只不应被设置为响应式的，例如复杂的第三方类库等</p>
</li>
<li><p>当渲染具有不可变数据源的大列表时，跳过响应式转换可以提高性能</p>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click = <span class="string">&quot;AddCarInfo&quot;</span>&gt;添加车信息&lt;/button&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;person.car.cname+=&#x27;!&#x27;&quot;</span>&gt;</span>修改车名称<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span> = <span class="string">&quot;person.car.cprice++&quot;</span>&gt;</span>增加车价格<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">   <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">   <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">   <span class="attr">job</span>:&#123;</span><br><span class="line">       <span class="attr">j1</span>:&#123;</span><br><span class="line">           <span class="attr">salary</span>:<span class="number">20</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">AddCarInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">   person.<span class="property">car</span> = <span class="title function_">markRaw</span>(&#123;</span><br><span class="line">       <span class="attr">cname</span>:<span class="string">&quot;奥迪&quot;</span>,</span><br><span class="line">       <span class="attr">cprice</span>:<span class="string">&quot;30&quot;</span></span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(person)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>如此一来添加的车属性就不会成为响应式的数据，对车信息作出修改页面也不会发生拜年话</p>

        <h3 id="16-customRef">
          <a href="#16-customRef" class="heading-link"><i class="fas fa-link"></i></a><a href="#16-customRef" class="headerlink" title="16. customRef"></a>16. customRef</h3>
      <p><strong>作用： 创建一个自定义的ref，并对其依赖项跟踪和更新触发进行显示控制</strong></p>
<ul>
<li>实现防抖效果</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span> = <span class="string">&quot;keyWord&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;keyWord&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;ref,customRef&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//自定义一个ref--myRef</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">myRef</span>(<span class="params">value,delay</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> <span class="title function_">customRef</span>(<span class="function">(<span class="params">track,trigger</span>)=&gt;</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">let</span> timer</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="title function_">get</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`有人从myRef这个容器中读取数据了，返回<span class="subst">$&#123;value&#125;</span>`</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">track</span>() <span class="comment">//通知Vue追踪value的变化(提前和get商量一下，让他认为这个value是有用的，可以变化的)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> value</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,<span class="title function_">set</span>(<span class="params">newValue</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`有人把myRef这个容器中数据改了：<span class="subst">$&#123;newValue&#125;</span>`</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            value = newValue</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="built_in">clearTimeout</span>(timer)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">               <span class="title function_">trigger</span>() <span class="comment">//通知Vue重新解析模板</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;, delay);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// let keyWord = ref(&quot;hello&quot;) //使用Vue提供的ref</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> keyWord = <span class="title function_">myRef</span>(<span class="string">&quot;hello&quot;</span>,<span class="number">1000</span>)  <span class="comment">//使用程序员自定义的ref</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;keyWord&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p>下面的内容延迟显示，如果连续快速点击键盘输入数据，定时器来不及执行（一直开启关闭）里面的内容，那么在最后一次(间隔超过一秒)输入的时候内容更新</p>

        <h3 id="17-provide-提供-与inject-注入">
          <a href="#17-provide-提供-与inject-注入" class="heading-link"><i class="fas fa-link"></i></a><a href="#17-provide-提供-与inject-注入" class="headerlink" title="17. provide(提供)与inject(注入)"></a>17. provide(提供)与inject(注入)</h3>
      <ul>
<li><p>作用：实现祖与后代组件间通信</p>
</li>
<li><p>套路：父组件有一个<code>provide</code>选项来提供数据，后代组件有一个<code>inject</code>选项来开始使用这些数据</p>
</li>
<li><p>写法：</p>
</li>
</ul>
<ol>
<li>祖组件中：</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">let</span> car = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&quot;奔驰&quot;</span>,<span class="attr">price</span>:<span class="string">&quot;40W&quot;</span>&#125;)</span><br><span class="line">	<span class="title function_">provice</span>(<span class="string">&quot;car&quot;</span>,car)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>孙组件中：</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params">props,context</span>)&#123;</span><br><span class="line">	...</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> car = <span class="title function_">inject</span>(<span class="string">&quot;car&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> &#123;car&#125;</span><br><span class="line"></span><br><span class="line">	...</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="18-响应式数据的判断">
          <a href="#18-响应式数据的判断" class="heading-link"><i class="fas fa-link"></i></a><a href="#18-响应式数据的判断" class="headerlink" title="18. 响应式数据的判断"></a>18. 响应式数据的判断</h3>
      <ul>
<li><p>isRef：检查一个值是否为一个ref对象</p>
</li>
<li><p>isReactive：检查一个对象是否是有Reactive创建的响应式代理</p>
</li>
<li><p>isReadonly：检查一个对象是否是由readonly创建的只读代理</p>
</li>
<li><p>isProxy：检查一个对象是否是由reactive或者readonly方法创建的代理。因为这两个方法生成的内部数据都是Proxy类型</p>
</li>
</ul>

        <h2 id="Composition-API的优势">
          <a href="#Composition-API的优势" class="heading-link"><i class="fas fa-link"></i></a><a href="#Composition-API的优势" class="headerlink" title="Composition API的优势"></a><font color="green">Composition API的优势</font></h2>
      <ol>
<li><p>Options API存在的问题</p>
<p> 使用传统OptionsAPI 中，新增或者修改一个需求，就需要分别在data、methods。computed里修改</p>
</li>
<li><p>Composition API的优势</p>
</li>
</ol>
<p>我们可以更加优雅的组织我们的代码、函数，让相关功能的代码更加有序的组织在一起</p>

        <h2 id="新的组件">
          <a href="#新的组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#新的组件" class="headerlink" title="新的组件"></a><font color="green">新的组件</font></h2>
      
        <h3 id="1-Fragment（片段-碎片）">
          <a href="#1-Fragment（片段-碎片）" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-Fragment（片段-碎片）" class="headerlink" title="1. Fragment（片段 碎片）"></a>1. Fragment（片段 碎片）</h3>
      <ul>
<li><p>在Vue2中：组件必须有一个根标签</p>
</li>
<li><p>在Vue3中：组件可以没有根标签，内部会将多个标签包含在一个Fragment虚拟元素中</p>
</li>
<li><p>好处：减少标签层级、减小内存占用</p>
</li>
</ul>

        <h3 id="2-Teleport-传送-瞬间移动">
          <a href="#2-Teleport-传送-瞬间移动" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-Teleport-传送-瞬间移动" class="headerlink" title="2.Teleport(传送 瞬间移动)"></a>2.Teleport(传送 瞬间移动)</h3>
      <p>是一种能够将我们的组件html结构移动到指定位置的技术</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;teleport to = <span class="string">&quot;移动位置&quot;</span>&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialog&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是一个弹窗<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">button</span>&gt;</span>关闭弹窗<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/teleport&gt;</span><br></pre></td></tr></table></div></figure>

<p><code>移动位置</code>内容可以是元素，如<code>body,html</code>，也可以是选择器，如：<code>#app,#root</code></p>
<p>在dom上将该teleport包裹的元素内容移动到指定位置</p>

        <h3 id="3-Suspense-悬念-悬疑">
          <a href="#3-Suspense-悬念-悬疑" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-Suspense-悬念-悬疑" class="headerlink" title="3.Suspense(悬念  悬疑)"></a>3.Suspense(悬念  悬疑)</h3>
      <ul>
<li><p>等待异步组件时渲染一些额外内容，让应用有更好的用户体验</p>
</li>
<li><p>使用步骤：</p>
</li>
</ul>
<ol>
<li>异步引入组件</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref,customRef,defineAsyncComponent&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="comment">// import Demo from &quot;./components/Demo.vue&quot;	//静态引入，等引入完成后父页面才渲染</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Demo</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">()=&gt;</span><span class="title function_">import</span>(<span class="string">&#x27;./components/Demo&#x27;</span>))	<span class="comment">//动态(异步)引入，无需等待组件引入完成，父组件可以先在页面渲染</span></span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>使用<code>Suspense</code>包裹组件，并配置好<code>default</code>和<code>fallback</code></li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Suspense</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">Demo</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:fallback</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    加载中...</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Suspense</span>&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-其他">
          <a href="#4-其他" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-其他" class="headerlink" title="4. 其他"></a>4. 其他</h3>
      <p><img src="/2022/04/10/web-vue01/VUE3.png"></p>
<ul>
<li><p>data选项应始终被声明为一个函数</p>
</li>
<li><p>过度类名的更改</p>
</li>
</ul>
<p><strong>Vue2.x写法</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">v</span>-enter,.<span class="property">v</span>-leave-to&#123;</span><br><span class="line">	<span class="attr">opacity</span>:<span class="number">0</span>;</span><br><span class="line">&#125;,</span><br><span class="line">.<span class="property">v</span>-leave,.<span class="property">v</span>-enter-to&#123;</span><br><span class="line">	<span class="attr">opacity</span>:<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>Vue 3写法</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">v</span>-enter-<span class="keyword">from</span>,.<span class="property">v</span>-leave-to&#123;</span><br><span class="line">	<span class="attr">opacity</span>:<span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">v</span>-leave-<span class="keyword">from</span>,.<span class="property">v</span>-enter-to&#123;</span><br><span class="line">	<span class="attr">opacity</span>:<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ul>
<li><p>移除keyCode作为v-on的修饰符，同时也不再支持<code>config.keyCodes</code></p>
</li>
<li><p>移除<code>v-on.native</code>修饰符（v-on.native：声明是原生事件并不是自定义事件）</p>
</li>
</ul>
<p><strong>父组件中绑定事件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component </span><br><span class="line">v-<span class="attr">on</span>:close=<span class="string">&quot;handleComponentEvent&quot;</span> </span><br><span class="line">v-<span class="attr">on</span>:click=<span class="string">&quot;handleNativeClickEvent&quot;</span></span><br><span class="line">/&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>子组件中声明自定义事件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">	<span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">		<span class="attr">emits</span>:[<span class="string">&#x27;close&#x27;</span>]</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>

<p>通过声明项指定自定义事件</p>
<ul>
<li><p>移除过滤器(filter)</p>
<p>  过滤器虽然看起来很方便，但它需要一个自定义语法，打破大括号内表达式“只是Javascript”的假设，这不仅有学习成本，而且有实现成本！建议用方法调用或计算属性去替换过滤器</p>
</li>
</ul>
</school></div></div></article></section><nav class="paginator"><div class="paginator-inner"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fas fa-angle-right"></i></a></div></nav></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><section class="sidebar-toc hide"></section><!-- ov = overview--><section class="sidebar-ov"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/stun-logo.svg" alt="avatar"></div><p class="sidebar-ov-author__text">hello world</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">46</div><div class="sidebar-ov-state-item__name">Archives</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">0</div><div class="sidebar-ov-state-item__name">Categories</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">68</div><div class="sidebar-ov-state-item__name">Tags</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2022</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>ashen</span></div><div><span>Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a></span><span> v6.1.0</span><span class="footer__devider">|</span><span>Theme - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.6.2</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.6.2"></script><script src="/js/stun-boot.js?v=2.6.2"></script><script src="/js/scroll.js?v=2.6.2"></script><script src="/js/header.js?v=2.6.2"></script><script src="/js/sidebar.js?v=2.6.2"></script></body></html>