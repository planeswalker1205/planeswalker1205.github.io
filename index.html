<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.6.2" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.6.2" type="image/png" sizes="32x32"><meta property="og:type" content="website">
<meta property="og:title" content="MIRACLE">
<meta property="og:url" content="https://planeswalker1205.github.io/index.html">
<meta property="og:site_name" content="MIRACLE">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="ashen">
<meta name="twitter:card" content="summary"><title>MIRACLE</title><link ref="canonical" href="https://planeswalker1205.github.io/index.html"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.6.2"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"Copy","copySuccess":"Copy Success","copyError":"Copy Error"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 6.1.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">Home</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">Archives</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">Categories</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">Tags</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">MIRACLE</div><div class="header-banner-info__subtitle"></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content content-home" id="content"><section class="postlist"><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/06/12/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/">前端面试相关</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-06-12</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-06-21</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="HTML">
          <a href="#HTML" class="heading-link"><i class="fas fa-link"></i></a><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1>
      <p><strong>1.HTML语义化的理解</strong></p>
<blockquote>
<p>用正确的标签做正确的事情。<br>html 语义化让页面的内容结构化，结构更清晰，便于对浏览器、搜索引擎解析；即使在没有样式 CSS 情况下也以一种文档格式显示，并且是容易阅读的;<br>搜索引擎的爬虫也依赖于 HTML 标记来确定上下文和各个关键字的权重，利于 SEO;<br>使阅读源代码的人对网站更容易将网站分块，便于阅读维护理解。</p>
</blockquote>
<p><strong>2. 标签上 title 与 alt 属性的区别是什么？</strong></p>
<blockquote>
<p>alt 是给搜索引擎识别，在图像无法显示时的替代文本；<br>title 是关于元素的注释信息，主要是给用户解读。<br>当鼠标放到文字或是图片上时有 title 文字显示。（因为 IE 不标准）在 IE 浏览器中 alt 起到了 title 的作用，变成文字提示。<br>在定义 img 对象时，将 alt 和 title 属性写全，可以保证在各种浏览器中都能正常使用。</p>
</blockquote>
<p><strong>3. href 与 src？</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">href (Hypertext Reference)指定网络资源的位置，从而在当前元素或者当前文档和由当前属性定义的需要的锚点或资源之间定义一个链接或者关系。（目的不是为了引用资源，而是为了建立联系，让当前标签能够链接到目标地址。）</span><br><span class="line">src source（缩写），指向外部资源的位置，指向的内容将会应用到文档中当前标签所在位置。</span><br><span class="line">href与src的区别</span><br><span class="line">1、请求资源类型不同：href 指向网络资源所在位置，建立和当前元素（锚点）或当前文档（链接）之间的联系。在请求 src 资源时会将其指向的资源下载并应用到文档中，比如 JavaScript 脚本，img 图片；</span><br><span class="line">2、作用结果不同：href 用于在当前文档和引用资源之间确立联系；src 用于替换当前内容；</span><br><span class="line">3、浏览器解析方式不同：当浏览器解析到src ，会暂停其他资源的下载和处理，直到将该资源加载、编译、执行完毕，图片和框架等也如此，类似于将所指向资源应用到当前内容。这也是为什么建议把 js 脚本放在底部而不是头部的原因。</span><br></pre></td></tr></table></div></figure>


        <h1 id="CSS">
          <a href="#CSS" class="heading-link"><i class="fas fa-link"></i></a><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1>
      <p><strong>1. 简明说一下 CSS link 与 @import 的区别和用法？</strong></p>
<p>link 是 XHTML 标签，除了加载CSS外，还可以定义 RSS 等其他事务；@import 属于 CSS 范畴，只能加载 CSS。</p>
<p>link 引用 CSS 时，在页面载入时同时加载；@import 需要页面网页完全载入以后加载。</p>
<p>link 是 XHTML 标签，无兼容问题；@import 是在 CSS2.1 提出的，低版本的浏览器不支持。</p>
<p>link 支持使用 Javascript 控制 DOM 去改变样式；而@import不支持。</p>
<p><strong>2. rgba和opacity的透明效果有什么不同？</strong></p>
<p>opacity 会继承父元素的 opacity 属性，而 RGBA 设置的元素的后代元素不会继承不透明属性。</p>
<p><strong>3. display:none和visibility:hidden的区别？</strong></p>
<p>display:none 隐藏对应的元素，在文档布局中不再给它分配空间，它各边的元素会合拢，就当他从来不存在。</p>
<p>visibility:hidden 隐藏对应的元素，但是在文档布局中仍保留原来的空间。</p>
<p><strong>4. position的值， relative和absolute分别是相对于谁进行定位的？</strong></p>
<p>relative:相对定位，相对于自己本身在正常文档流中的位置进行定位。</p>
<p>absolute:生成绝对定位，相对于最近一级定位不为static的父元素进行定位。</p>
<p>fixed: （老版本IE不支持）生成绝对定位，相对于浏览器窗口或者frame进行定位。</p>
<p>static:默认值，没有定位，元素出现在正常的文档流中。</p>
<p>sticky:生成粘性定位的元素，容器的位置根据正常文档流计算得出。</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/06/10/CSS%E5%B8%B8%E7%94%A8%E5%B8%83%E5%B1%80%E6%96%B9%E6%B3%95/">CSS常用布局方法</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-06-10</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-06-21</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="PC">
          <a href="#PC" class="heading-link"><i class="fas fa-link"></i></a><a href="#PC" class="headerlink" title="PC"></a>PC</h1>
      
        <h2 id="布局">
          <a href="#布局" class="heading-link"><i class="fas fa-link"></i></a><a href="#布局" class="headerlink" title="布局"></a>布局</h2>
      <p><strong>1. 元素垂直居中</strong></p>
<p>对于没有设置宽高的元素，将其在父元素中垂直居中</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    * &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.outer</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.opg</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">left</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">top</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;opg&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../images/OIP-C (3).jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>将元素绝对定位后，left和top都距父元素50%，再用transfor属性偏移相对于自身的50%实现垂直居中</p>
</blockquote>
<p><img src="/2022/06/10/CSS%E5%B8%B8%E7%94%A8%E5%B8%83%E5%B1%80%E6%96%B9%E6%B3%95/2022-06-10_165822.png"></p>

        <h1 id="移动">
          <a href="#移动" class="heading-link"><i class="fas fa-link"></i></a><a href="#移动" class="headerlink" title="移动"></a>移动</h1>
      
        <h2 id="样式">
          <a href="#样式" class="heading-link"><i class="fas fa-link"></i></a><a href="#样式" class="headerlink" title="样式"></a>样式</h2>
      
        <h3 id="1-特殊样式">
          <a href="#1-特殊样式" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-特殊样式" class="headerlink" title="1. 特殊样式"></a>1. 特殊样式</h3>
      <p><strong>1)去除点击a高亮：</strong></p>
<figure class="highlight css"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-webkit-tap-highlight-<span class="attribute">color</span>: transparent;</span><br></pre></td></tr></table></div></figure>

<p><strong>2)去除按钮的默认外观</strong></p>
<figure class="highlight css"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span> &#123;</span><br><span class="line">    -webkit-appearance: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



        <h3 id="2-Flex">
          <a href="#2-Flex" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-Flex" class="headerlink" title="2.Flex"></a>2.Flex</h3>
      <p><strong>关于给flex容器属性align-items(子元素未设置宽度高度的情况下)</strong></p>
<ol>
<li><p>设置stretch(拉伸)，并给子元素加上flex-grow的属性，才会使元素自动拉伸</p>
</li>
<li><p>设置其他属性如center，即使子元素加上flex-grow的属性，子元素也不会自动拉伸，且没有宽度</p>
</li>
</ol>

        <h2 id="rem布局">
          <a href="#rem布局" class="heading-link"><i class="fas fa-link"></i></a><a href="#rem布局" class="headerlink" title="rem布局"></a>rem布局</h2>
      
        <h3 id="1-rem单位">
          <a href="#1-rem单位" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-rem单位" class="headerlink" title="1.rem单位"></a>1.rem单位</h3>
      <p>rem(root em)是一个相对单位，类似于em，em是父元素字体大小。不同的是rem的基准是相对于html元素的字体大小</p>
<p>比如：根元素(html)设置font-size&#x3D;12px；非根元素设置width:2rem;则换成px表示就是24px</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/06/09/web-webpack01/">web-webpack01</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-06-09</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-06-21</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="基本使用">
          <a href="#基本使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h1>
      
        <h2 id="功能">
          <a href="#功能" class="heading-link"><i class="fas fa-link"></i></a><a href="#功能" class="headerlink" title="功能"></a>功能</h2>
      
        <h3 id="01-Webpack介绍">
          <a href="#01-Webpack介绍" class="heading-link"><i class="fas fa-link"></i></a><a href="#01-Webpack介绍" class="headerlink" title="01 Webpack介绍"></a>01 Webpack介绍</h3>
      <p><strong>webpack是一个静态资源打包工具</strong></p>
<p>它会以一个或多个文件作为打包的入口，将我们整个项目的所有文件编译组合成一个或多个文件输出出去</p>
<p>输出的文件就是编译好的文件，就可以在浏览器运行了</p>
<p>Webpack输出的文件叫做bundle</p>
<p><strong>注：浏览器并不识别ES6的模块化</strong></p>

        <h3 id="02-开始使用">
          <a href="#02-开始使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#02-开始使用" class="headerlink" title="02. 开始使用"></a>02. 开始使用</h3>
      <p><strong>下载依赖</strong></p>
<ol>
<li>初始化</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></div></figure>
<p>需要注意package.json温家安中name字段不能叫做webpack，否则下一步会报错</p>
<ol start="2">
<li>下载依赖</li>
</ol>
<p><code>npm i webpack webpack-cli -D</code></p>
<p><strong>启用webpack</strong></p>
<ul>
<li>开发模式</li>
</ul>
<p><code>npx webpack ./src/main.js --mode=development</code></p>
<ul>
<li>生产模式</li>
</ul>
<p><code>npx webpack ./src/main.js --mode=production</code></p>
<p><code>npx webpack</code>：是用来运行本地安装webpack包</p>
<p><code>./src/main.js</code>:指定webpack从main.js文件开始打包，不但会打包main.js，还会将其依赖也一起打包进来</p>

        <h1 id="基本配置">
          <a href="#基本配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h1>
      
        <h2 id="核心概念">
          <a href="#核心概念" class="heading-link"><i class="fas fa-link"></i></a><a href="#核心概念" class="headerlink" title="核心概念"></a>核心概念</h2>
      <ol>
<li>entry(入口)</li>
</ol>
<p>指示Webpack从哪个文件开始打包</p>
<ol start="2">
<li>output(输出)</li>
</ol>
<p>指示Webpack打包完的文件输出到那里去，如何命名等..</p>
<ol start="3">
<li>loader(加载器)</li>
</ol>
<p>Webpack本身只能处理js，JSON等资源，其他资源需要借助loader，WEbpack才能解析</p>
<ol start="4">
<li>plugins(插件)</li>
</ol>
<p>扩展Webpack功能</p>
<ol start="5">
<li>mode(模式)</li>
</ol>
<ul>
<li><p>开发模式：development</p>
</li>
<li><p>生产模式：production</p>
</li>
</ul>

        <h2 id="准备Webpack配置文件">
          <a href="#准备Webpack配置文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#准备Webpack配置文件" class="headerlink" title="准备Webpack配置文件"></a>准备Webpack配置文件</h2>
      <p>在项目<strong>根目录</strong>下新建文件：webpack.config.js</p>
<p>配置：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//所有配置文件最终都是在nodeJS平台运行，所以模块化采用commonJS模块化</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">//入口（此处用相对路径）</span></span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">    <span class="comment">//输出</span></span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 输出路径（此处要用绝对路径）</span></span><br><span class="line"><span class="comment">         * @__dirname  nodejs的变量，代表当前文件的文件夹目录(下的dist)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="comment">//要输出的文件名称</span></span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;main.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//加载器</span></span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            <span class="comment">//loader的配置</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//插件</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="comment">//plugin的配置</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">//模式</span></span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>运行：<code>npx webpack</code></p>

        <h2 id="处理样式资源">
          <a href="#处理样式资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#处理样式资源" class="headerlink" title="处理样式资源"></a>处理样式资源</h2>
      
        <h3 id="1-处理css资源">
          <a href="#1-处理css资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-处理css资源" class="headerlink" title="1. 处理css资源"></a>1. 处理css资源</h3>
      <p>Webpack本身是不能识别样式资源的，所以我们需要借助Loader来帮助Webpack解析样式资源。</p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders" title="官方文档">https://webpack.docschina.org/loaders</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>(1) 首先，你需要先安装 css-loader：</p>
<p><code>npm install --save-dev css-loader</code></p>
<p>(2) 然后把 对应样式 引用到你 webpack 的配置中。如下所示：</p>
<p>main.js:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&#x27;./js/count&#x27;</span></span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&#x27;./js/sum&#x27;</span></span><br><span class="line"><span class="comment">//想要Webpack打包资源，必须引入资源</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./css/index.css&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>))</span><br></pre></td></tr></table></div></figure>

<p>(3) webpack.config.js配置</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载器</span></span><br><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">        <span class="comment">//loader的配置</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/i</span>, <span class="comment">//只检测以css结尾文件，才会使用下面规则进行处理</span></span><br><span class="line">            <span class="attr">use</span>: [</span><br><span class="line">                <span class="string">&quot;style-loader&quot;</span>, <span class="comment">//将js中css通过创建style标签添加到html文件中生效</span></span><br><span class="line">                <span class="string">&quot;css-loader&quot;</span> <span class="comment">//将css资源编译成commonjs的模块到js中</span></span><br><span class="line">            ], <span class="comment">//use执行顺序：从右到左(从下到上)</span></span><br><span class="line">        &#125;,</span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>一般来讲，用了什么loader就下载什么loader，此处下载两个</p>
</blockquote>

        <h3 id="2-处理less资源">
          <a href="#2-处理less资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-处理less资源" class="headerlink" title="2.处理less资源"></a>2.处理less资源</h3>
      <p>(1) 首先，你需要先安装 less 和 less-loader：</p>
<p><code>npm install less less-loader --save-dev</code></p>
<p>(2) 加载器配置</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.less$/i</span>,</span><br><span class="line">   <span class="comment">//此处是use，官方文档写的loader(loader属性只能配置一个loader，use可配置多个)</span></span><br><span class="line"> 	<span class="attr">use</span>: [</span><br><span class="line">        <span class="comment">// compiles Less to CSS</span></span><br><span class="line">        <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;less-loader&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="其他saas，stylus等资源处理同理">
          <a href="#其他saas，stylus等资源处理同理" class="heading-link"><i class="fas fa-link"></i></a><a href="#其他saas，stylus等资源处理同理" class="headerlink" title="其他saas，stylus等资源处理同理"></a>其他saas，stylus等资源处理同理</h3>
      
        <h3 id="3-处理图片资源">
          <a href="#3-处理图片资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-处理图片资源" class="headerlink" title="3. 处理图片资源"></a>3. 处理图片资源</h3>
      <p>过去的webpack4，处理图片资源时通过<code>file-loader</code>和<code>url-loader</code>进行处理</p>
<p>现在webpack5已经将两个Loader功能内置到webpack里了，只需要简单配置即可处理图片资源</p>
<p>(1) css引用图片</p>
<figure class="highlight css"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box3</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">700px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">../images/20220429142150_1.jpg</span>) no-repeat;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">500px</span> auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>(2) 默认会将图片打包到dist文件中，配置将图片转换成base64直接渲染，不额外发请求</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp|svg)$/</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;asset&#x27;</span>,</span><br><span class="line">    <span class="attr">parser</span>: &#123;</span><br><span class="line">        <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="comment">//小于10kb的图片转base64</span></span><br><span class="line">            <span class="comment">//有点：减小请求数量 缺点：体积会更大</span></span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 4kb</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-修改输出文件目录">
          <a href="#4-修改输出文件目录" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-修改输出文件目录" class="headerlink" title="4.修改输出文件目录"></a>4.修改输出文件目录</h3>
      <p>相关配置</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出</span></span><br><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 输出路径（此处要用绝对路径）</span></span><br><span class="line"><span class="comment">     * @__dirname  nodejs的变量，代表当前文件的文件夹目录(下的dist)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="comment">//要输出的文件名称，js文件保存在js目录下</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;js/main.js&#x27;</span></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="attr">rules</span>:[</span><br><span class="line">	&#123;</span><br><span class="line">	    <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp|svg)$/</span>,</span><br><span class="line">	    <span class="attr">type</span>: <span class="string">&#x27;asset&#x27;</span>,</span><br><span class="line">	    <span class="attr">parser</span>: &#123;</span><br><span class="line">	        <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">	            <span class="comment">//小于10kb的图片转base64</span></span><br><span class="line">	            <span class="comment">//有点：减小请求数量 缺点：体积会更大</span></span><br><span class="line">	            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 4kb</span></span><br><span class="line">	        &#125;</span><br><span class="line">	    &#125;,</span><br><span class="line">	    <span class="attr">generator</span>: &#123;</span><br><span class="line">	        <span class="comment">//输出图片名称(图片在打包后的static/images目录下)</span></span><br><span class="line">			<span class="comment">// @hash:10 确保图片名称的唯一性，hash值取前10位  </span></span><br><span class="line">			<span class="comment">//@ext 文件扩展名(保持默认)</span></span><br><span class="line">	        <span class="attr">filename</span>: <span class="string">&quot;static/images/[hash:10][ext][query]&quot;</span></span><br><span class="line">	    &#125;</span><br><span class="line">	&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></div></figure>


        <h3 id="5-自动清空上次打包内容">
          <a href="#5-自动清空上次打包内容" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-自动清空上次打包内容" class="headerlink" title="5. 自动清空上次打包内容"></a>5. 自动清空上次打包内容</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">	<span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;js/main.js&#x27;</span>,</span><br><span class="line">    <span class="comment">//自动清空上次打包结果</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p>原理：在打包前，将path整个目录内容清空，再进行打包</p>

        <h3 id="6-处理字体图标资源等其他资源">
          <a href="#6-处理字体图标资源等其他资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-处理字体图标资源等其他资源" class="headerlink" title="6.处理字体图标资源等其他资源"></a>6.处理字体图标资源等其他资源</h3>
      <p>rules:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2|mp3|mp4|avi?)$/</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;asset/resource&#x27;</span>,</span><br><span class="line">    <span class="attr">generator</span>: &#123;</span><br><span class="line">        <span class="comment">//输出图片名称,打包后将图标文件存放到static/media目录下</span></span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:10][ext][query]&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="7-处理js资源">
          <a href="#7-处理js资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-处理js资源" class="headerlink" title="7.处理js资源"></a>7.处理js资源</h3>
      <p>Webpack对js处理是有限的，只能编译js中ES模块化语法，不能编译其他语法，导致js不能在IE等浏览器中运行，所以需要做一些兼容性处理。还可以检测代码格式</p>
<ul>
<li><p>针对js兼容性处理，使用Babel完成</p>
</li>
<li><p>针对代码格式，使用Eslint完成</p>
</li>
</ul>
<p><strong>☆ Eslint</strong></p>
<p>配置文件有很多寫法：</p>
<ul>
<li><p><code>.eslintrc.*</code>:新建文件，位于项目根目录</p>
<ul>
<li><p><code>.eslintrc</code></p>
</li>
<li><p><code>.eslintrc.js</code></p>
</li>
<li><p><code>.eslintrc.json</code></p>
</li>
<li><p>区别在于配置格式不一样</p>
</li>
</ul>
</li>
<li><p>package.json中<code>eslintConfig</code>：不需要创建文件，在原有文件基础上写</p>
</li>
</ul>
<p>ESLint会查找和自动读取它们，所以以上配置文件只需要存在一个即可</p>
<p><strong>1. 具体配置</strong></p>
<p>规则详见：</p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://eslint.bootcss.com/docs/user-guide/configuring">https://eslint.bootcss.com/docs/user-guide/configuring</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://eslint.bootcss.com/docs/rules/">https://eslint.bootcss.com/docs/rules/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><code>.eslintrc.js</code></p>
<p>extends继承：</p>
<p>开发中一点点写rules规则过于麻烦，且多，所以可以继承现有规则：</p>
<ul>
<li><p>Eslint官方的规则：<code>eslint:recommended</code></p>
</li>
<li><p>Vue Cli官方的规则：<code>plugin:vue/essential</code></p>
</li>
<li><p>React Cli官方的规则：<code>react-app</code></p>
</li>
</ul>
<p>（1） 安装插件和eslint</p>
<p><code>cnpm install eslint-webpack-plugin eslint --save-dev</code></p>
<p>（2）插件需要引入</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;eslint-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//插件</span></span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">//plugin的配置</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">        <span class="comment">//检测哪些文件</span></span><br><span class="line">        <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">],</span><br></pre></td></tr></table></div></figure>

<p>（3） 项目根目录创建文件配置<code>.eslintrc.js</code></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"><span class="comment">//继承Eslint规则</span></span><br><span class="line"><span class="attr">extends</span>: [<span class="string">&quot;eslint:recommended&quot;</span>],</span><br><span class="line"><span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span>, <span class="comment">//启用node中全局变量</span></span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>, <span class="comment">//启用浏览器中全局变量</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="number">6</span>, <span class="comment">//es6</span></span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&quot;module&quot;</span>, <span class="comment">//es modile</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;no-var&quot;</span>: <span class="number">2</span>, <span class="comment">//不能使用var定义变量(0无规则，1warn规则，2error规则)</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>（4） 新建.eslintgore文件，配置需要忽略检查的文件</p>
<p><strong>☆ babel</strong></p>
<p>主要用于将ES6语法编写的代码转换为向后兼容的Javascript语法，以便能够运行在当前和旧版本的浏览器或者其他环境中</p>
<ol>
<li>配置文件</li>
</ol>
<p>多种写法：</p>
<ul>
<li><code>babel.config.*</code>:新建文件，位于项目根目录</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">babel.config.js</span><br><span class="line"></span><br><span class="line">babel.config.json</span><br></pre></td></tr></table></div></figure>

<ul>
<li><code>.babelrc.*</code>:新建文件，位于项目根目录</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.babelrc</span><br><span class="line"></span><br><span class="line">.babelrc.js</span><br><span class="line"></span><br><span class="line">.babelrc.json</span><br></pre></td></tr></table></div></figure>

<ul>
<li><code>package.json</code>中<code>babel</code>:不需要创建文件，在原有文件基础上鞋</li>
</ul>
<p>Babel会查找和自动读取它们，所以以上配置文件只需要存在一个即可</p>
<p><strong>使用</strong></p>
<p>(1)安装相关依赖</p>
<p><code>npm install -D babel-loader @babel/core @babel/preset-env</code></p>
<p>(2)loader配置</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules</span>:[</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.m?js$/</span>,</span><br><span class="line">    <span class="attr">exclude</span>: <span class="regexp">/(node_modules)/</span>, <span class="comment">//排除node-modules文件（不处理）</span></span><br><span class="line">    <span class="attr">use</span>: &#123;</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">        <span class="comment">// options: &#123;</span></span><br><span class="line">        <span class="comment">//     presets: [&#x27;@babel/preset-env&#x27;]</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></div></figure>

<p>options配置既可以写在里面简单方便，也可以写外面方便修改，如下：</p>
<p>(3) presets属性的配置文件：根目录创建babel.config.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">//智能预设,能够编译ES6语法</span></span><br><span class="line">    <span class="attr">presets</span>: [<span class="string">&quot;@babel/preset-env&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="8-处理html资源">
          <a href="#8-处理html资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-处理html资源" class="headerlink" title="8.处理html资源"></a>8.处理html资源</h3>
      <p>html通过插件自动引入js，无需手动引入</p>
<ul>
<li>安装插件</li>
</ul>
<p><code>npm install --save-dev html-webpack-plugin</code></p>
<ul>
<li>引入</li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">    new HtmlWebpackPlugin(&#123;</span><br><span class="line">		template:path.resolve(__dirname,&quot;public/index.html&quot;)</span><br><span class="line">	&#125;),</span><br><span class="line">],</span><br></pre></td></tr></table></div></figure>

<p>template：以该路径下的html文件为模板，创建新的html文件并自动引入js。新的html文件：结构和原来一致；会自动引入打包的输出的资源</p>

        <h2 id="搭建开发环境">
          <a href="#搭建开发环境" class="heading-link"><i class="fas fa-link"></i></a><a href="#搭建开发环境" class="headerlink" title="搭建开发环境"></a>搭建开发环境</h2>
      
        <h3 id="1-开发服务器-amp-自动化">
          <a href="#1-开发服务器-amp-自动化" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-开发服务器-amp-自动化" class="headerlink" title="1.开发服务器&amp;自动化"></a>1.开发服务器&amp;自动化</h3>
      <p><strong>下载包</strong></p>
<p><code>npm i webpack-dev-server -D</code></p>
<p><strong>配置开发服务器</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>, <span class="comment">//启动服务器域名</span></span><br><span class="line">    <span class="attr">port</span>: <span class="string">&quot;3000&quot;</span>, <span class="comment">//启动服务器端口号</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">//是否自动打开浏览器</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>启动服务</strong></p>
<p><code>npx webpack serve</code></p>
<p>如此一来，每次修改文件后会自动重新编译</p>
<p>注：开发服务器不会输出资源，也就是和打包好的内容无关。它是在内存中编译打包的</p>

        <h1 id="生产模式">
          <a href="#生产模式" class="heading-link"><i class="fas fa-link"></i></a><a href="#生产模式" class="headerlink" title="生产模式"></a>生产模式</h1>
      <p>生产模式是开发完成代码后，我们需要得到代码将来部署上线，这个模式下我们主要对代码进行优化，让其运行性能更好。</p>
<ul>
<li><p>优化代码运行型男</p>
</li>
<li><p>优化代码打包速度</p>
</li>
</ul>

        <h3 id="1-准备工作">
          <a href="#1-准备工作" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-准备工作" class="headerlink" title="1.准备工作"></a>1.准备工作</h3>
      <p><strong>开发模式</strong></p>
<ol>
<li><p>根目录创建文件夹config</p>
</li>
<li><p>config创建文件<code>webpack.dev.js</code>  <code>webpack.prod.js</code></p>
</li>
</ol>
<p>webpack.dev.js</p>
<p>需要进行更改的配置</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//输出</span></span><br><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="comment">//开发模式没有输出，不需要指定输出路径</span></span><br><span class="line">    <span class="attr">path</span>: <span class="literal">undefined</span>,</span><br><span class="line">    <span class="comment">//要输出的文件名称</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;js/main.js&#x27;</span>,</span><br><span class="line">    <span class="comment">//自动清空上次打包结果</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">//插件</span></span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">        <span class="comment">//相对路径不用更改。因为到时候执行指令的地方还在根路径，绝对路径需要修改，如下</span></span><br><span class="line">        <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../src&#x27;</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">],</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>启动开发模式服务</li>
</ol>
<p><code>npx webpack serve --config ./config/webpack.dev.js </code></p>
<p><strong>生产模式</strong></p>
<p>webpack-prod.js</p>
<p>需要进行更改的配置</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 输出路径（此处要用绝对路径）</span></span><br><span class="line"><span class="comment">     * @__dirname  nodejs的变量，代表当前文件的文件夹目录(下的dist)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">	<span class="comment">//绝对路径套一层</span></span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../dist&#x27;</span>),</span><br><span class="line">    <span class="comment">//要输出的文件名称</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;js/main.js&#x27;</span>,</span><br><span class="line">    <span class="comment">//自动清空上次打包结果</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span></span><br></pre></td></tr></table></div></figure>

<p>打包：</p>
<p><code> npx webpack --config ./config/webpack.prod.js</code></p>
<p>生产模式无dev-serve，只要打包输出即可</p>
<p><strong>运行指令太长？可以在package.json配置指令</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;start&quot;</span>: <span class="string">&quot;npm run dev&quot;</span>,</span><br><span class="line">    <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;webpack serve --config ./config/webpack.dev.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack --config ./config/webpack.prod.js&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>配置时不需要加npx，因为默认.bin目录也会添加到环境变量中，所以直接运行</p>
</blockquote>
<p><code>npm start</code>    &#x2F;&#x2F;因为npm run dev比较常用，所以配置start指令，只需要执行<code>npm start</code>，即可开启dev服务</p>
<p><code>npm run dev</code></p>
<p><code>npm run build</code></p>
<blockquote>
<p>除了start  其他都要<code>npm run ***</code></p>
</blockquote>

        <h3 id="2-提取css成单独文件">
          <a href="#2-提取css成单独文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-提取css成单独文件" class="headerlink" title="2. 提取css成单独文件"></a>2. 提取css成单独文件</h3>
      <p><strong>提取Css成单独文件</strong></p>
<p>Css文件目前被打包到js文件中，当js文件加载时，会创建一个style标签来生成样式，这样对于网站来说，会出现商品现象，用户体验不好(即先解析js文件，再在js文件里生成style标签插入到页面中)</p>
<ol>
<li>下载包</li>
</ol>
<p><code>npm i mini-css-extraact-plugin -D</code></p>
<ol start="2">
<li>配置</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">rules:[</span><br><span class="line">	&#123;</span><br><span class="line">	    test: /\.css$/i, //只检测以css结尾文件，才会使用下面规则进行处理</span><br><span class="line">	    use: [</span><br><span class="line">	        // &quot;style-loader&quot;, //再加入MiniCssExtractPlugin.loader之前，不要引入style-loader</span><br><span class="line">	        MiniCssExtractPlugin.loader,</span><br><span class="line">	        &quot;css-loader&quot; //将css资源编译成commonjs的模块到js中</span><br><span class="line">	    ], //use执行顺序：从右到左(从下到上)</span><br><span class="line">	&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">//插件</span><br><span class="line">plugins: [</span><br><span class="line">    new HtmlWebpackPlugin(&#123;</span><br><span class="line">        template: path.resolve(__dirname, &quot;../public/index.html&quot;)</span><br><span class="line">    &#125;),</span><br><span class="line">    new MiniCssExtractPlugin(&#123;</span><br><span class="line">        filename: &#x27;static/css/main.css&#x27; //配置css文件保存的目录</span><br><span class="line">    &#125;),</span><br><span class="line">],</span><br></pre></td></tr></table></div></figure>



        <h3 id="3-样式兼容性处理">
          <a href="#3-样式兼容性处理" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-样式兼容性处理" class="headerlink" title="3.样式兼容性处理"></a>3.样式兼容性处理</h3>
      <ol>
<li>下载包</li>
</ol>
<p><code>npm i postcss-loader postcss postcss-preset-env</code></p>
<ol start="2">
<li>配置(需要写在css-loader后面)</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//loader的配置</span><br><span class="line">&#123;</span><br><span class="line">    test: /\.css$/i, //只检测以css结尾文件，才会使用下面规则进行处理</span><br><span class="line">    use: [</span><br><span class="line">        // &quot;style-loader&quot;, //将js中css通过创建style标签添加到html文件中生效</span><br><span class="line">        MiniCssExtractPlugin.loader,</span><br><span class="line">        &quot;css-loader&quot;, //将css资源编译成commonjs的模块到js中</span><br><span class="line">        &#123;</span><br><span class="line">            loader: &#x27;postcss-loader&#x27;,</span><br><span class="line">            options: &#123;</span><br><span class="line">                postcssOptions: &#123;</span><br><span class="line">                    plugins: [</span><br><span class="line">                        [</span><br><span class="line">                            &#x27;postcss-preset-env&#x27;,</span><br><span class="line">                        ],</span><br><span class="line">                    ],</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    ], //use执行顺序：从右到左(从下到上)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


<ol start="3">
<li>package.json配置需要兼容的程度</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//兼容到IE8</span><br><span class="line">&quot;browserslist&quot;: [</span><br><span class="line">    &quot;ie &gt;= 8&quot;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">&quot;browserslist&quot;: [</span><br><span class="line">    &quot;last 2 version&quot;,//所有浏览器的近两个版本</span><br><span class="line">    &quot;&gt;1%&quot;,//包含市面上99%以上的浏览器</span><br><span class="line">    &quot;not dead&quot;//死掉的浏览器不要</span><br><span class="line">    </span><br><span class="line">]</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-封装样式loader函数">
          <a href="#4-封装样式loader函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-封装样式loader函数" class="headerlink" title="4.封装样式loader函数"></a>4.封装样式loader函数</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getStyleLoader</span>(<span class="params">pre</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">        <span class="string">&quot;css-loader&quot;</span>, <span class="comment">//将css资源编译成commonjs的模块到js中</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;postcss-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">                <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">                    <span class="attr">plugins</span>: [</span><br><span class="line">                        [</span><br><span class="line">                            <span class="string">&#x27;postcss-preset-env&#x27;</span>,</span><br><span class="line">                        ],</span><br><span class="line">                    ],</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        pre,</span><br><span class="line">    ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line">	<span class="attr">rules</span>:[</span><br><span class="line"></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">test</span>: <span class="regexp">/\.less$/i</span>,</span><br><span class="line">	        <span class="attr">use</span>: <span class="title function_">getStyleLoader</span>(<span class="string">&#x27;less-loader&#x27;</span>),</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="5-css压缩">
          <a href="#5-css压缩" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-css压缩" class="headerlink" title="5. css压缩"></a>5. css压缩</h3>
      <ol>
<li>下载</li>
</ol>
<p><code>npm install css-minimizer-webpack-plugin --save-dev</code></p>
<ol start="2">
<li>引入</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const CssMinimizerPlugin = require(&quot;css-minimizer-webpack-plugin&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plugins:[</span><br><span class="line">	new CssMinimizerPlugin()</span><br><span class="line">]</span><br></pre></td></tr></table></div></figure>



        <h3 id="6-html压缩">
          <a href="#6-html压缩" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-html压缩" class="headerlink" title="6.html压缩"></a>6.html压缩</h3>
      <p>默认生产模式已经开启了：html压缩和js压缩，无需额外配置</p>

        <h1 id="高級">
          <a href="#高級" class="heading-link"><i class="fas fa-link"></i></a><a href="#高級" class="headerlink" title="高級"></a>高級</h1>
      
        <h2 id="提升开发体验">
          <a href="#提升开发体验" class="heading-link"><i class="fas fa-link"></i></a><a href="#提升开发体验" class="headerlink" title="提升开发体验"></a>提升开发体验</h2>
      
        <h3 id="1-SourceMap">
          <a href="#1-SourceMap" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-SourceMap" class="headerlink" title="1. SourceMap"></a>1. SourceMap</h3>
      <p>开发时我们运行的代码是经过webpack编译后的，所有css和js合并成了一个文件，并且多了其他代码，此时如果代码运行出错那么提示代码错误位置是看不懂的，一旦将来开发代码文件很多，那么很难去发现错误出现在哪里。</p>
<p><strong>是什么</strong></p>
<p>SourceMap(源代码映射)是一个用来生成源代码与构建后代码–映射的文件的方案</p>
<p>它会生成一个xxx.mapa文件，里面包含源代码和构建后代码每一行，每一列的映射关系，当构建后代码出错了，会通过xxx.map文件，从构建后代码出错位置找到映射后源代码出错位置，从而让浏览器提示源代码文件出错位置，帮助我们更快的找到错误根源</p>
<p><strong>如何用</strong></p>
<p>查阅webpack官方文档，配置–&gt;devtool</p>
<p><strong>1. 开发模式</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devtool</span>: <span class="string">&quot;cheap-module-source-map&quot;</span>,</span><br></pre></td></tr></table></div></figure>

<p>优点：打包编译速度快，只包含行映射</p>
<p>缺点：无列映射</p>
<p><strong>2. 生产模式</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">devtool:&quot;source-map&quot;,</span><br></pre></td></tr></table></div></figure>

<p>包含行&#x2F;列映射；打包编译速度更慢</p>

        <h2 id="提升打包构建速度-开发模式">
          <a href="#提升打包构建速度-开发模式" class="heading-link"><i class="fas fa-link"></i></a><a href="#提升打包构建速度-开发模式" class="headerlink" title="提升打包构建速度(开发模式)"></a>提升打包构建速度(开发模式)</h2>
      
        <h3 id="1-HotModuleReplacement">
          <a href="#1-HotModuleReplacement" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-HotModuleReplacement" class="headerlink" title="1.HotModuleReplacement"></a>1.HotModuleReplacement</h3>
      <p>开发时我们修改了其中一个模块代码，webpack默认会将所有模块全部重新打包编译，速度很慢，所以我们需要做到修改某个模块代码，就只有这个模块代码需要重新打包编译，其他模块不变，这样打包速度更快。</p>
<p>HotModuleReplacement(HMR&#x2F;热模块替换)：在程序运行中，替换，添加或删除模块，而无需要重新加载整个页面</p>
<p>HMR默认开启，可手动关闭</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">    hot: false, //关闭HMR</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p>开启后默认只对css文件有效，如果对js生效需要另外配置main.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">module</span>.<span class="property">hot</span>) &#123;</span><br><span class="line">    <span class="comment">//只对count.js和sum.js模块进行处理</span></span><br><span class="line">    <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&quot;./js/count&quot;</span>)</span><br><span class="line">    <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&quot;./js/sum&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>或者</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">module</span>.<span class="property">hot</span>) &#123;</span><br><span class="line">    <span class="comment">//只对count.js和sum.js模块进行处理</span></span><br><span class="line">    <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&quot;./js/count&quot;</span>,<span class="keyword">function</span>(<span class="params">count</span>)&#123;</span><br><span class="line">	<span class="comment">//一但该文件发生变化，调用此回调函数</span></span><br><span class="line">	<span class="keyword">const</span> result = <span class="title function_">count</span>(<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">info</span>(result)</span><br><span class="line">&#125;)</span><br><span class="line">    <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&quot;./js/sum&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>如果有多个js会比较麻烦，实际开发中可以使用其他loader解决(vue-loader  react-hot-loader)</p>

        <h2 id="OneOf【生产-x2F-开发模式】">
          <a href="#OneOf【生产-x2F-开发模式】" class="heading-link"><i class="fas fa-link"></i></a><a href="#OneOf【生产-x2F-开发模式】" class="headerlink" title="OneOf【生产&#x2F;开发模式】"></a>OneOf【生产&#x2F;开发模式】</h2>
      <p>打包时每个文件都会经历所有Loader处理，虽然因为test正则原因实际没有处理上，但是都要过一遍，比较慢。OneOf顾名思义就是只能匹配上一个loader，剩下的就不匹配了</p>
<p>使用：将所有loader包裹在OneOf中</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">module: &#123;</span><br><span class="line">    rules: [&#123;</span><br><span class="line">        //每个文件只能被其中一个loader配置处理(第一个命中了就不会再执行后面)</span><br><span class="line">        oneOf: [</span><br><span class="line">            //loader的配置</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.css$/i, //只检测以css结尾文件，才会使用下面规则进行处理</span><br><span class="line">                use: [</span><br><span class="line">                    &quot;style-loader&quot;, //将js中css通过创建style标签添加到html文件中生效</span><br><span class="line">                    &quot;css-loader&quot; //将css资源编译成commonjs的模块到js中</span><br><span class="line">                ], //use执行顺序：从右到左(从下到上)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.less$/i,</span><br><span class="line">                use: [</span><br><span class="line">                    // compiles Less to CSS</span><br><span class="line">                    &#x27;style-loader&#x27;,</span><br><span class="line">                    &#x27;css-loader&#x27;,</span><br><span class="line">                    &#x27;less-loader&#x27;,</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.(png|jpe?g|gif|webp|svg)$/,</span><br><span class="line">                type: &#x27;asset&#x27;,</span><br><span class="line">                parser: &#123;</span><br><span class="line">                    dataUrlCondition: &#123;</span><br><span class="line">                        //小于10kb的图片转base64</span><br><span class="line">                        //有点：减小请求数量 缺点：体积会更大</span><br><span class="line">                        maxSize: 10 * 1024 // 4kb</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                generator: &#123;</span><br><span class="line">                    //输出图片名称</span><br><span class="line">                    filename: &quot;static/images/[hash:10][ext][query]&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.(ttf|woff2?)$/,</span><br><span class="line">                type: &#x27;asset/resource&#x27;,</span><br><span class="line">                generator: &#123;</span><br><span class="line">                    //输出图片名称</span><br><span class="line">                    filename: &quot;static/media/[hash:10][ext][query]&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.m?js$/,</span><br><span class="line">                exclude: /(node_modules)/, //排除node-modules文件（不处理）</span><br><span class="line">                use: &#123;</span><br><span class="line">                    loader: &#x27;babel-loader&#x27;,</span><br><span class="line">                    // options: &#123;</span><br><span class="line">                    //     presets: [&#x27;@babel/preset-env&#x27;]</span><br><span class="line">                    // &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h2 id="Include-x2F-Exclude">
          <a href="#Include-x2F-Exclude" class="heading-link"><i class="fas fa-link"></i></a><a href="#Include-x2F-Exclude" class="headerlink" title="Include&#x2F;Exclude"></a>Include&#x2F;Exclude</h2>
      <p>开发时饿哦们需要使用第三方的库或插件，所有文件都下载到node_modules中了，而这些文件是不需要编译可以直接使用的，所以我们在对js文件处理时，要排除node_mudules下面的文件</p>
<p><strong>要么包含 要么排除，Include&#x2F;Exclude两者只能写一个</strong></p>

        <h3 id="1-Include">
          <a href="#1-Include" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-Include" class="headerlink" title="1.Include"></a>1.Include</h3>
      <p>包含，只处理xxx文件</p>

        <h3 id="2-exclude">
          <a href="#2-exclude" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-exclude" class="headerlink" title="2.exclude"></a>2.exclude</h3>
      <p>排除，除了xxx文件以外其他文件都处理</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">rules</span>:[</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="attr">test</span>: <span class="regexp">/\.m?js$/</span>,</span><br><span class="line">		<span class="attr">exclude</span>: <span class="regexp">/(node_modules)/</span>, <span class="comment">//排除node-modules文件（不处理）</span></span><br><span class="line">		<span class="comment">// include:path.resolve(__dirname,&quot;../src&quot;),//只处理src下的文件，其他文件不处理</span></span><br><span class="line">		<span class="attr">use</span>: &#123;</span><br><span class="line">		    <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">		    <span class="comment">// options: &#123;</span></span><br><span class="line">		    <span class="comment">//     presets: [&#x27;@babel/preset-env&#x27;]</span></span><br><span class="line">		    <span class="comment">// &#125;</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">plugins</span>:[</span><br><span class="line"></span><br><span class="line"><span class="comment">//plugin的配置</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">    <span class="comment">//检测哪些文件</span></span><br><span class="line">    <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../src&#x27;</span>),</span><br><span class="line">    <span class="attr">exclude</span>: <span class="string">&quot;node_modules&quot;</span>,<span class="comment">//默认值</span></span><br><span class="line">&#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></div></figure>


        <h2 id="Cache">
          <a href="#Cache" class="heading-link"><i class="fas fa-link"></i></a><a href="#Cache" class="headerlink" title="Cache"></a>Cache</h2>
      <p>每次打包时js文件都要经过Eslint检车和Babel编译，速度比较慢。</p>
<p>我们可以缓存之前的Eslint检查和Babel编译结果，这样第二次打包的速度就会更快了</p>
<p><strong>对Eslint检查和Babel编译结果进行缓存</strong></p>
<p>babel开启缓存：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: /\.m?js$/,</span><br><span class="line">    exclude: /(node_modules)/, //排除node-modules文件（不处理）</span><br><span class="line">    use: &#123;</span><br><span class="line">        loader: &#x27;babel-loader&#x27;,</span><br><span class="line">        options: &#123;</span><br><span class="line">            // presets: [&#x27;@babel/preset-env&#x27;]</span><br><span class="line">            cacheDirectory: true, //开启babel缓存</span><br><span class="line">            cacheCompression: false, //关闭缓存文件压缩</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p>eslint开启缓存：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">new ESLintPlugin(&#123;</span><br><span class="line">    //检测哪些文件</span><br><span class="line">    context: path.resolve(__dirname, &#x27;../src&#x27;),</span><br><span class="line">    cache: true, //开启缓存</span><br><span class="line">    cacheLocation: path.resolve(__dirname, &quot;../node_modules/.cache/eslintcache&quot;)</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></div></figure>


        <h2 id="Thread">
          <a href="#Thread" class="heading-link"><i class="fas fa-link"></i></a><a href="#Thread" class="headerlink" title="Thread"></a>Thread</h2>
      <p>当项目越来越庞大时，打包的速度越来越慢，甚至于需要一个下午才能打包出来代码。我们想要继续提升打包速度，其实就是提升js的打包速度，因为其他文件都比较少。而对js文件处理主要就是eslint  babel  terser三个工具，所以我们要提升它们的运行速度，可以开启多进程同时处理js文件，这样速度更快</p>
<p><strong>多进程打包：开启电脑的多个进程同时干一件事，速度更快。(当文件比较打包处理事件长到一个临界值时，使用多进程打包会缩短事件，如果比较少使用的话可能会加长打包时间)</strong></p>
<p><strong><font color="red">注意：请仅在特别耗时的操作中使用，因为每一个进程启动就有大约为600ms左右开销 </font></strong></p>
<p><strong>1. 下载包</strong></p>
<p><code>cnpm i thread-loader -D</code></p>
<p><strong>2. 引入os，设置多进程数量，引入terser</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const os = require(&quot;os&quot;)</span><br><span class="line">const threads = os.cpus().length</span><br><span class="line">const TerserWebpackPlugin = require(&quot;terser-webpack-plugin&quot;)</span><br></pre></td></tr></table></div></figure>

<p><strong>3. babel  eslint  terser配置</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">rules:[</span><br><span class="line">    &#123;</span><br><span class="line">        test: /\.m?js$/,</span><br><span class="line">        exclude: /(node_modules)/, //排除node-modules文件（不处理）</span><br><span class="line">        use: [&#123;</span><br><span class="line">            loader: &#x27;thread-loader&#x27;, //开启多进程</span><br><span class="line">            options: &#123;</span><br><span class="line">                works: threads, //进程数量</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            loader: &#x27;babel-loader&#x27;,</span><br><span class="line">            options: &#123;</span><br><span class="line">                // presets: [&#x27;@babel/preset-env&#x27;]</span><br><span class="line">                cacheDirectory: true, //开启babel缓存</span><br><span class="line">                cacheCompression: false, //关闭缓存文件压缩</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">plugins:[</span><br><span class="line"></span><br><span class="line">new ESLintPlugin(&#123;</span><br><span class="line">    //检测哪些文件</span><br><span class="line">    context: path.resolve(__dirname, &#x27;../src&#x27;),</span><br><span class="line">    cache: true, //开启缓存</span><br><span class="line">    cacheLocation: path.resolve(__dirname, &quot;../node_modules/.cache/eslintcache&quot;),</span><br><span class="line">    threads, //开启多进程和设置进程数量</span><br><span class="line">&#125;),</span><br><span class="line"></span><br><span class="line">new TerserWebpackPlugin(&#123;</span><br><span class="line">    parallel: threads, //开启多进程和设置进程数量</span><br><span class="line">&#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></div></figure>

<p>官方推荐写法：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line"></span><br><span class="line">    //压缩的操作</span><br><span class="line">    minimizer: [</span><br><span class="line">		//压缩css</span><br><span class="line">        new CssMinimizerPlugin(),</span><br><span class="line">		//压缩js</span><br><span class="line">        new TerserWebpackPlugin(&#123;</span><br><span class="line">            parallel: threads, //开启多进程和设置进程数量</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h2 id="TreeShaking">
          <a href="#TreeShaking" class="heading-link"><i class="fas fa-link"></i></a><a href="#TreeShaking" class="headerlink" title="TreeShaking"></a>TreeShaking</h2>
      <p>减少代码体积</p>
<p>开发时我们定义了一些工具函数库，或者引用第三方工具函数库或组件库。如果没有特殊处理的话我们打包时会引入整个库，但是实际上可能我们只用上极小部分的功能。这样将整个库都打包进来，体积过大。</p>
<p><code>TreeShaking</code>是一个术语，通常用于描述移除Javascript中的没有使用上的代码。依赖<code>ES Module</code></p>
<p>Webpack已经默认开启了这个功能，无需其他配置</p>

        <h2 id="减少Babel生成文件的体积">
          <a href="#减少Babel生成文件的体积" class="heading-link"><i class="fas fa-link"></i></a><a href="#减少Babel生成文件的体积" class="headerlink" title="减少Babel生成文件的体积"></a>减少Babel生成文件的体积</h2>
      <p>Babel为编译的文件都插入了辅助代码，使代码体积过大。</p>
<p>Babel对一些公共方法使用了非常小的辅助代码，比如_extend,默认情况下会被添加到每一个需要它的而文件中，可以将这些辅助代码作为一个独立模块，来避免重复引入</p>
<p><code>@babel/plugin-transform-runtime</code>:禁用了Babel自动对每个文件的runtime注入，而是引入<code>@babel/plugin-transform-runtime</code>并且使所有辅助代码从这里引用</p>
<p><strong>1. 下载包</strong></p>
<p><code>cnpm i @babel/plugin-transform-runtime -D</code></p>
<p><strong>2. 配置</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    loader: &#x27;babel-loader&#x27;,</span><br><span class="line">    options: &#123;</span><br><span class="line">        // presets: [&#x27;@babel/preset-env&#x27;]</span><br><span class="line">        cacheDirectory: true, //开启babel缓存</span><br><span class="line">        cacheCompression: false, //关闭缓存文件压缩</span><br><span class="line">        plugins: [&#x27;@babel/plugin-transform-runtime&#x27;], //减少代码体积</span><br><span class="line">    &#125;</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></div></figure>


        <h2 id="压缩图片">
          <a href="#压缩图片" class="heading-link"><i class="fas fa-link"></i></a><a href="#压缩图片" class="headerlink" title="压缩图片"></a>压缩图片</h2>
      <p>如果项目中图片都是在线链接，那么就不需要了，本地项目静态图片才需要进行压缩</p>
<p><strong>下载包</strong></p>
<p><code>npm i image-minimizer-webpack-plugin imagemin -D</code></p>
<p>还有剩下包需要下载，有两种模式：</p>
<ul>
<li>无损压缩</li>
</ul>
<p><code>npm install imagemin-gifsicle imagemin-jpegtran imagemin-optipng imagemin-svgo -D</code></p>
<ul>
<li>有损压缩</li>
</ul>
<p><code>npm install imagemin-gifsicle imagemin-mozjpeg imagemin-pngquant imagemin-svgo -D</code></p>
<p><strong>配置</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">const ImageMinimizerPlugin = require(&quot;image-minimizer-webpack-plugin&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">optimization: &#123;</span><br><span class="line"></span><br><span class="line">    //压缩的操作</span><br><span class="line">    minimizer: [</span><br><span class="line">        new CssMinimizerPlugin(),</span><br><span class="line">        new TerserWebpackPlugin(&#123;</span><br><span class="line">            parallel: threads, //开启多进程和设置进程数量</span><br><span class="line">        &#125;),</span><br><span class="line">        //图片压缩</span><br><span class="line">        new ImageMinimizerPlugin(&#123;</span><br><span class="line">            minimizer: &#123;</span><br><span class="line">                implementation: ImageMinimizerPlugin.imageminGenerate,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    plugins: [</span><br><span class="line">                        [&quot;gifsicle&quot;, &#123; interlaced: true &#125;],</span><br><span class="line">                        [&quot;jpegtran&quot;, &#123; progressive: true &#125;],</span><br><span class="line">                        [&quot;optipng&quot;, &#123; optimizationLevel: 5 &#125;],</span><br><span class="line">                        [</span><br><span class="line">                            &quot;svgo&quot;,</span><br><span class="line">                            &#123;</span><br><span class="line">                                plugins: [</span><br><span class="line">                                    &quot;preset-default&quot;,</span><br><span class="line">                                    &quot;prefixIds&quot;,</span><br><span class="line">                                    &#123;</span><br><span class="line">                                        name: &quot;sortAttrs&quot;,</span><br><span class="line">                                        params: &#123;</span><br><span class="line">                                            xmlnsOrder: &quot;alphabetical&quot;,</span><br><span class="line">                                        &#125;</span><br><span class="line">                                    &#125;</span><br><span class="line">                                ]</span><br><span class="line">                            &#125;,</span><br><span class="line">                        ],</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h1 id="优化代码运行性能">
          <a href="#优化代码运行性能" class="heading-link"><i class="fas fa-link"></i></a><a href="#优化代码运行性能" class="headerlink" title="优化代码运行性能"></a>优化代码运行性能</h1>
      <p>打包代码时会将所有js文件打包到一个文件中，体积太大了，我们如果只要渲染首页，就应该只加载首页的js文件，其他文件不应该加载。所以需要将打包生成的文件进行代码分割，生成多个js文件，渲染哪个页面就只加载某个js文件，这样加载的资源就少，速度就更快</p>
<p><strong>代码分割(Code Split)主要做了两件事：</strong></p>
<ol>
<li><p>分割文件：将打包生成的文件进行分割，生成多个js文件</p>
</li>
<li><p>按需加载：需要哪个文件就加载哪个文件</p>
</li>
</ol>

        <h2 id="多入口">
          <a href="#多入口" class="heading-link"><i class="fas fa-link"></i></a><a href="#多入口" class="headerlink" title="多入口"></a>多入口</h2>
      <p>webpack.config.js</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&quot;path&quot;)</span><br><span class="line">const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">    entry: &#123;</span><br><span class="line">        //多入口文件，有多个入口文件</span><br><span class="line">        app: &#x27;./src/app.js&#x27;,</span><br><span class="line">        main: &#x27;./src/main.js&#x27;,</span><br><span class="line">    &#125;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, &quot;dist&quot;),</span><br><span class="line">        filename: &quot;[name].js&quot;, //webpack命名方式，以文件名自己命名</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: path.resolve(__dirname, &quot;public/index.html&quot;)</span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    mode: &quot;production&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="多入口提取公共模块">
          <a href="#多入口提取公共模块" class="heading-link"><i class="fas fa-link"></i></a><a href="#多入口提取公共模块" class="headerlink" title="多入口提取公共模块"></a>多入口提取公共模块</h2>
      <p>多个入口文件引用了公共的代码，需要处理。把公共的模块单独打包，其他文件就可以复用它。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">        chunks: &#x27;all&#x27;, //对所有模块都进行分割</span><br><span class="line">        minSize: 0,</span><br><span class="line">        minRemainingSize: 0,</span><br><span class="line">        minChunks: 1,</span><br><span class="line">        maxAsyncRequests: 30,</span><br><span class="line">        maxInitialRequests: 30,</span><br><span class="line">        enforceSizeThreshold: 50000,</span><br><span class="line">        cacheGroups: &#123;</span><br><span class="line">            defaultVendors: &#123;</span><br><span class="line">                test: /[\\/]node_modules[\\/]/,</span><br><span class="line">                priority: -10,</span><br><span class="line">                reuseExistingChunk: true,</span><br><span class="line">            &#125;,</span><br><span class="line">            default: &#123;</span><br><span class="line">                minChunks: 2,</span><br><span class="line">                priority: -20,</span><br><span class="line">                reuseExistingChunk: true,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h2 id="多入口按需加载">
          <a href="#多入口按需加载" class="heading-link"><i class="fas fa-link"></i></a><a href="#多入口按需加载" class="headerlink" title="多入口按需加载"></a>多入口按需加载</h2>
      <p>想要实现按需加载，动态导入模块，还需要额外配置</p>
<ol>
<li>修改文件</li>
</ol>
<p>main.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./math&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello main&quot;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//import动态导入，会将动态导入的文件代码分割（拆分成单独模块，在需要的使用的时候自动加载）</span></span><br><span class="line">    <span class="keyword">import</span> (<span class="string">&#x27;./count&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;加载成功&quot;</span>, res)</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;加载失败&quot;</span>, reason)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="单入口">
          <a href="#单入口" class="heading-link"><i class="fas fa-link"></i></a><a href="#单入口" class="headerlink" title="单入口"></a>单入口</h2>
      <p>开发室我们可能是单页面应用，只有一个入口120</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">splitChunks:&#123;</span><br><span class="line">	chunks:&quot;all&quot;,</span><br><span class="line">	//其他使用默认值</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>eslint不识别动态导入，需要额外配置：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins</span>:[<span class="string">&#x27;import&#x27;</span>]</span><br></pre></td></tr></table></div></figure>


        <h2 id="给导入的模块命名">
          <a href="#给导入的模块命名" class="heading-link"><i class="fas fa-link"></i></a><a href="#给导入的模块命名" class="headerlink" title="给导入的模块命名"></a>给导入的模块命名</h2>
      <ol>
<li>main.js</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById(&quot;btn&quot;).onclick = function() &#123;</span><br><span class="line">    //webpack魔法命名</span><br><span class="line">    import ( /* webpackChunkName:&quot;count&quot; */ &quot;./count&quot;).then((&#123; count &#125;) =&gt; &#123;</span><br><span class="line">        console.log(&quot;加载成功&quot;, count(5, 3))</span><br><span class="line">    &#125;).catch(reason =&gt; &#123;</span><br><span class="line">        console.log(&quot;加载失败&quot;, reason)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>使用，输出配置</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, &quot;dist&quot;),</span><br><span class="line">    filename: &quot;[name].js&quot;, //webpack命名方式，以文件名自己命名</span><br><span class="line">    chunkFilename: &#x27;static/js/[name].js&#x27;, //打包输出的其他文件命名</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h2 id="统一命名配置">
          <a href="#统一命名配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#统一命名配置" class="headerlink" title="统一命名配置"></a>统一命名配置</h2>
      <p>输出的文件可能分不清主入口和其他模块js，此时可以在配置时就添加后缀以用来区分</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hunkFilename: &#x27;static/js/[name].chunk.js&#x27;, </span><br></pre></td></tr></table></div></figure>

<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, &quot;dist&quot;),</span><br><span class="line">    filename: &quot;[name].js&quot;, //webpack命名方式，以文件名自己命名</span><br><span class="line">    chunkFilename: &#x27;static/js/[name].chunk.js&#x27;, //打包输出的其他文件命名，chunk为识别其他模块的后缀</span><br><span class="line">    assetModuleFilename: &quot;static/media/[hash:10][ext][query]&quot;, //图片。字体等通过tyoe:asset处理资源命名方式</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>css模块统一命名配置</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;static/css/main.css&#x27;</span>,</span><br><span class="line">    <span class="attr">chunkFilename</span>: <span class="string">&quot;static/css/[name].chunk.js&quot;</span>,</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></div></figure>


        <h2 id="Preoload-x2F-Prefetch">
          <a href="#Preoload-x2F-Prefetch" class="heading-link"><i class="fas fa-link"></i></a><a href="#Preoload-x2F-Prefetch" class="headerlink" title="Preoload&#x2F;Prefetch"></a>Preoload&#x2F;Prefetch</h2>
      <p>import动态导入语法来进行代码按需加载，（懒加载，比如路由懒加载就是这样实现的），但是加载速度不够好，比如：是用户点击按钮时才加载这个资源，如果资源体积很大，那么用户会感觉到明显卡顿效果</p>
<p><code>Preload</code>：告诉浏览器立即加载资源</p>
<p><code>Prefetch</code>：告诉浏览器在空闲时才开始加载资源</p>
<p>共同点：</p>
<p>都知会加载资源，并不执行；都有缓存</p>
<p>区别：</p>
<p>Preload加载优先级高，Prefetch加载优先级低。</p>
<p>Preload只能加载当前页面需要使用的资源，Prefetch可以加载当前页面资源，也可以加载下一个页面需要使用的资源</p>

        <h3 id="1-Preload">
          <a href="#1-Preload" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-Preload" class="headerlink" title="1.Preload"></a>1.Preload</h3>
      <ol>
<li>下载</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save-dev @vue/preload-webpack-plugin</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>引入配置</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const PreloadWebpackPlugin = require(&#x27;@vue/preload-webpack-plugin&#x27;);</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">    new HtmlWebpackPlugin(&#123;</span><br><span class="line">        template: path.resolve(__dirname, &quot;public/index.html&quot;)</span><br><span class="line">    &#125;),</span><br><span class="line">    new PreloadWebpackPlugin(&#123;</span><br><span class="line">        rel: &quot;preload&quot;,</span><br><span class="line">        as: &#x27;script&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line">],</span><br></pre></td></tr></table></div></figure>


        <h2 id="Core-js">
          <a href="#Core-js" class="heading-link"><i class="fas fa-link"></i></a><a href="#Core-js" class="headerlink" title="Core-js"></a>Core-js</h2>
      <p>过去使用babel对js代码进行兼容性处理，但是async函数，promise对象，数组的一些方法等没办法处理。</p>
<p><code>core-js</code>是专门用来做ES6以及以上API的polyfill(补丁)</p>
<ol>
<li>下载</li>
</ol>
<p><code>cnpm i core-js</code></p>
<ol start="2">
<li>mian.js引入</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &quot;core-js&quot;</span><br></pre></td></tr></table></div></figure>

<p>按需引入（推荐）</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &quot;core-js/es/promise&quot;</span><br></pre></td></tr></table></div></figure>


        <h2 id="PWA">
          <a href="#PWA" class="heading-link"><i class="fas fa-link"></i></a><a href="#PWA" class="headerlink" title="PWA"></a>PWA</h2>
      <p>开发WebApp项目  项目一旦处于网络离线情况，就没法访问了。</p>
<p>渐进式网络应用程序(progressive web application)是一种提供类似于native app(原生应用程序)体验的WebApp的技术，其中最重要的是，在离线是应用程序能够继续运行功能。</p>
<ol>
<li>下载</li>
</ol>
<p><code>npm install workbox-webpack-plugin --save-dev</code></p>
<ol start="2">
<li>plugin配置</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">new WorkboxPlugin.GenerateSW(&#123;</span><br><span class="line">  // these options encourage the ServiceWorkers to get in there fast</span><br><span class="line">  // and not allow any straggling &quot;old&quot; SWs to hang around</span><br><span class="line">  clientsClaim: true,</span><br><span class="line">  skipWaiting: true,</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>main.js配置</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if (&#x27;serviceWorker&#x27; in navigator) &#123;</span><br><span class="line">  window.addEventListener(&#x27;load&#x27;, () =&gt; &#123;</span><br><span class="line">    navigator.serviceWorker.register(&#x27;/service-worker.js&#x27;).then(registration =&gt; &#123;</span><br><span class="line">      console.log(&#x27;SW registered: &#x27;, registration);</span><br><span class="line">    &#125;).catch(registrationError =&gt; &#123;</span><br><span class="line">      console.log(&#x27;SW registration failed: &#x27;, registrationError);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>测试时dist需要在根目录部署服务</strong></p>

        <h1 id="Vue配置">
          <a href="#Vue配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#Vue配置" class="headerlink" title="Vue配置"></a>Vue配置</h1>
      
        <h2 id="开发模式配置">
          <a href="#开发模式配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#开发模式配置" class="headerlink" title="开发模式配置"></a>开发模式配置</h2>
      <p><strong>目录结构</strong></p>
<p><img src="/2022/06/09/web-webpack01/vuecli.png"></p>
<p><strong>webpack.dev.js</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&quot;path&quot;)</span><br><span class="line">const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;)</span><br><span class="line">const ESLintWebpackPlugin = require(&quot;eslint-webpack-plugin&quot;)</span><br><span class="line">const &#123; VueLoaderPlugin &#125; = require(&#x27;vue-loader&#x27;)</span><br><span class="line"></span><br><span class="line">//引入定义环境变量</span><br><span class="line">const &#123; DefinePlugin &#125; = require(&quot;webpack&quot;)</span><br><span class="line"></span><br><span class="line">//返回样式处理loader函数</span><br><span class="line">const getStyleLoaders = (pre) =&gt; &#123;</span><br><span class="line">    return [</span><br><span class="line">        &#x27;vue-style-loader&#x27;,</span><br><span class="line">        &quot;css-loader&quot;,</span><br><span class="line">        &#123;</span><br><span class="line">            loader: &#x27;postcss-loader&#x27;,</span><br><span class="line">            options: &#123;</span><br><span class="line">                postcssOptions: &#123;</span><br><span class="line">                    plugins: [</span><br><span class="line">                        [</span><br><span class="line">                            &#x27;postcss-preset-env&#x27;,</span><br><span class="line">                        ],</span><br><span class="line">                    ],</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        pre,</span><br><span class="line">    ].filter(Boolean)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    entry: &quot;./src/main.js&quot;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: undefined,</span><br><span class="line">        filename: &quot;static/js/[name].js&quot;,</span><br><span class="line">        chunkFilename: &quot;static/js/[name].chunk.js&quot;,</span><br><span class="line">        assetModuleFilename: &quot;static/media/[hash:10][ext][query]&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        rules: [&#123;</span><br><span class="line">                test: /\.css$/,</span><br><span class="line">                use: getStyleLoaders(),</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.less$/,</span><br><span class="line">                use: getStyleLoaders(&quot;less-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.s[ac]ss$/,</span><br><span class="line">                use: getStyleLoaders(&quot;sass-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.styl$/,</span><br><span class="line">                use: getStyleLoaders(&quot;stylus-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.(jpe?g|png|gif|webp|svg)$/,</span><br><span class="line">                type: &quot;asset&quot;,</span><br><span class="line">                parser: &#123;</span><br><span class="line">                    dataUrlCondition: &#123;</span><br><span class="line">                        maxSize: 10 * 1024,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            //处理其他资源</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.(woff2?|ttf)$/,</span><br><span class="line">                type: &quot;asset/resource&quot;,</span><br><span class="line">            &#125;,</span><br><span class="line">            //处理js</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.js$/,</span><br><span class="line">                include: path.resolve(__dirname, &quot;../src&quot;),</span><br><span class="line">                loader: &quot;babel-loader&quot;,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    cacheDirectory: true,</span><br><span class="line">                    cacheCompression: false,</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.vue$/,</span><br><span class="line">                loader: &#x27;vue-loader&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new ESLintWebpackPlugin(&#123;</span><br><span class="line">            context: path.resolve(__dirname, &quot;../src&quot;),</span><br><span class="line">            exclude: &quot;node_modules&quot;,</span><br><span class="line">            cache: true,</span><br><span class="line">            cacheLocation: path.resolve(__dirname, &quot;../node_modules/.cache/.eslintcache&quot;),</span><br><span class="line">        &#125;),</span><br><span class="line">        new HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: path.resolve(__dirname, &quot;../public/index.html&quot;),</span><br><span class="line">        &#125;),</span><br><span class="line">        new VueLoaderPlugin(),</span><br><span class="line">        //cross-env定义的环境变量给打包工具使用</span><br><span class="line">        //DefinePlugin定义环境变量给源代码使用，从而解决vue3页面警告的问题</span><br><span class="line">        new DefinePlugin(&#123;</span><br><span class="line">            __VUE_OPTIONS_API__: true,</span><br><span class="line">            __VUE_PROD_DEVTOOLS__: false,</span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    mode: &quot;development&quot;,</span><br><span class="line">    devtool: &quot;cheap-module-source-map&quot;,</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        splitChunks: &#123;</span><br><span class="line">            chunks: &quot;all&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        runtimeChunk: &#123;</span><br><span class="line">            name: (entrypoint) =&gt; `runtime~$&#123;entrypoint.name&#125;.js`</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    //webppack解析模块加载选啊想</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        //自动补全文件扩展名</span><br><span class="line">        extensions: [&quot;.vue&quot;, &quot;.js&quot;, &quot;.json&quot;]</span><br><span class="line">    &#125;,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        host: &quot;localhost&quot;,</span><br><span class="line">        port: 3000,</span><br><span class="line">        open: true,</span><br><span class="line">        hot: true,</span><br><span class="line">        historyApiFallback: true, //解决前端路由刷新404问题</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>.eslinttrc.js</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    root: true,</span><br><span class="line">    env: &#123;</span><br><span class="line">        node: true,</span><br><span class="line">    &#125;,</span><br><span class="line">    extends: [&quot;plugin:vue/vue3-essential&quot;, &quot;eslint:recommended&quot;],</span><br><span class="line">    parserOptions: &#123;</span><br><span class="line">        parser: &quot;@babel/eslint-parser&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></div></figure>

<p><strong>babel.config.js</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    presets: [&quot;@vue/cli-plugin-babel/preset&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>package.json指令配置</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;start&quot;: &quot;npm run dev&quot;,</span><br><span class="line">  &quot;dev&quot;: &quot;cross-env NODE_ENV=development webpack serve --config ./config/webpack.dev.js&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>main.js</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &quot;vue&quot;</span><br><span class="line">import App from &quot;./App&quot;</span><br><span class="line">createApp(App).mount(document.getElementById(&#x27;app&#x27;));</span><br></pre></td></tr></table></div></figure>


        <h2 id="生产模式配置">
          <a href="#生产模式配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#生产模式配置" class="headerlink" title="生产模式配置"></a>生产模式配置</h2>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&quot;path&quot;)</span><br><span class="line">const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;)</span><br><span class="line">const ESLintWebpackPlugin = require(&quot;eslint-webpack-plugin&quot;)</span><br><span class="line">const &#123; VueLoaderPlugin &#125; = require(&#x27;vue-loader&#x27;)</span><br><span class="line">const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;)</span><br><span class="line">const CssMinimizerWebpackPlugin = require(&quot;css-minimizer-webpack-plugin&quot;)</span><br><span class="line">const TerserWebpackPlugin = require(&quot;terser-webpack-plugin&quot;)</span><br><span class="line">const ImageMinimizerPlugin = require(&quot;image-minimizer-webpack-plugin&quot;)</span><br><span class="line">const CopyPlugin = require(&quot;copy-webpack-plugin&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//引入定义环境变量</span><br><span class="line">const &#123; DefinePlugin &#125; = require(&quot;webpack&quot;)</span><br><span class="line"></span><br><span class="line">//返回样式处理loader函数</span><br><span class="line">const getStyleLoaders = (pre) =&gt; &#123;</span><br><span class="line">    return [</span><br><span class="line">        MiniCssExtractPlugin.loader,</span><br><span class="line">        &quot;css-loader&quot;,</span><br><span class="line">        &#123;</span><br><span class="line">            loader: &#x27;postcss-loader&#x27;,</span><br><span class="line">            options: &#123;</span><br><span class="line">                postcssOptions: &#123;</span><br><span class="line">                    plugins: [</span><br><span class="line">                        [</span><br><span class="line">                            &#x27;postcss-preset-env&#x27;,</span><br><span class="line">                        ],</span><br><span class="line">                    ],</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        pre,</span><br><span class="line">    ].filter(Boolean)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    entry: &quot;./src/main.js&quot;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: undefined,</span><br><span class="line">        filename: &quot;static/js/[name].js&quot;,</span><br><span class="line">        chunkFilename: &quot;static/js/[name].chunk.js&quot;,</span><br><span class="line">        assetModuleFilename: &quot;static/media/[hash:10][ext][query]&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        rules: [&#123;</span><br><span class="line">                test: /\.css$/,</span><br><span class="line">                use: getStyleLoaders(),</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.less$/,</span><br><span class="line">                use: getStyleLoaders(&quot;less-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.s[ac]ss$/,</span><br><span class="line">                use: getStyleLoaders(&quot;sass-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.styl$/,</span><br><span class="line">                use: getStyleLoaders(&quot;stylus-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.(jpe?g|png|gif|webp|svg)$/,</span><br><span class="line">                type: &quot;asset&quot;,</span><br><span class="line">                parser: &#123;</span><br><span class="line">                    dataUrlCondition: &#123;</span><br><span class="line">                        maxSize: 10 * 1024,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            //处理其他资源</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.(woff2?|ttf)$/,</span><br><span class="line">                type: &quot;asset/resource&quot;,</span><br><span class="line">            &#125;,</span><br><span class="line">            //处理js</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.js$/,</span><br><span class="line">                include: path.resolve(__dirname, &quot;../src&quot;),</span><br><span class="line">                loader: &quot;babel-loader&quot;,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    cacheDirectory: true,</span><br><span class="line">                    cacheCompression: false,</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.vue$/,</span><br><span class="line">                loader: &#x27;vue-loader&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new ESLintWebpackPlugin(&#123;</span><br><span class="line">            context: path.resolve(__dirname, &quot;../src&quot;),</span><br><span class="line">            exclude: &quot;node_modules&quot;,</span><br><span class="line">            cache: true,</span><br><span class="line">            cacheLocation: path.resolve(__dirname, &quot;../node_modules/.cache/.eslintcache&quot;),</span><br><span class="line">        &#125;),</span><br><span class="line">        new HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: path.resolve(__dirname, &quot;../public/index.html&quot;),</span><br><span class="line">        &#125;),</span><br><span class="line">        new MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: &quot;static/css/[name].[contenthash:10].css&quot;,</span><br><span class="line">        &#125;),</span><br><span class="line">        new CopyPlugin(&#123;</span><br><span class="line">            patterns: [&#123;</span><br><span class="line">                from: path.resolve(__dirname, &quot;../public&quot;),</span><br><span class="line">                to: path.resolve(__dirname, &quot;../dist&quot;),</span><br><span class="line">                globOptions: &#123;</span><br><span class="line">                    ignore: [&quot;**/index.html&quot;],</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;, ],</span><br><span class="line">        &#125;),</span><br><span class="line">        new VueLoaderPlugin(),</span><br><span class="line">        //cross-env定义的环境变量给打包工具使用</span><br><span class="line">        //DefinePlugin定义环境变量给源代码使用，从而解决vue3页面警告的问题</span><br><span class="line">        new DefinePlugin(&#123;</span><br><span class="line">            __VUE_OPTIONS_API__: true,</span><br><span class="line">            __VUE_PROD_DEVTOOLS__: false,</span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    mode: &quot;production&quot;,</span><br><span class="line">    devtool: &quot;source-map&quot;,</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        splitChunks: &#123;</span><br><span class="line">            chunks: &quot;all&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        runtimeChunk: &#123;</span><br><span class="line">            name: (entrypoint) =&gt; `runtime~$&#123;entrypoint.name&#125;.js`</span><br><span class="line">        &#125;,</span><br><span class="line">        minimizer: [</span><br><span class="line">            new CssMinimizerWebpackPlugin(),</span><br><span class="line">            new TerserWebpackPlugin(),</span><br><span class="line">            new ImageMinimizerPlugin(&#123;</span><br><span class="line">                minimizer: &#123;</span><br><span class="line">                    implementation: ImageMinimizerPlugin.imageminGenerate,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        plugin: [</span><br><span class="line">                            [&quot;gifsicle&quot;, &#123; interlaced: true &#125;],</span><br><span class="line">                            [&quot;jpegtran&quot;, &#123;</span><br><span class="line">                                progressive: true</span><br><span class="line">                            &#125;],</span><br><span class="line">                            [&quot;optipng&quot;, &#123; optimizationLevel: 5 &#125;],</span><br><span class="line">                            [</span><br><span class="line">                                &quot;svgo&quot;,</span><br><span class="line">                                &#123;</span><br><span class="line">                                    plugins: [</span><br><span class="line">                                        &quot;preset-default&quot;,</span><br><span class="line">                                        &quot;prefixIds&quot;,</span><br><span class="line">                                        &#123;</span><br><span class="line">                                            name: &quot;sortAttrs&quot;,</span><br><span class="line">                                            params: &#123;</span><br><span class="line">                                                xmlnsOrder: &quot;alphabetical&quot;,</span><br><span class="line">                                            &#125;</span><br><span class="line">                                        &#125;</span><br><span class="line">                                    ]</span><br><span class="line">                                &#125;</span><br><span class="line">                            ]</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    //webppack解析模块加载选啊想</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        //自动补全文件扩展名</span><br><span class="line">        extensions: [&quot;.vue&quot;, &quot;.js&quot;, &quot;.json&quot;]</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>package.json</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;npm run dev&quot;,</span><br><span class="line">    &quot;dev&quot;: &quot;cross-env NODE_ENV=development webpack serve --config ./config/webpack.dev.js&quot;,</span><br><span class="line">    &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack --config ./config/webpack.prod.js&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>index.html</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;shortcut icon&quot; href=&quot;favicon.ico&quot; type=&quot;image/x-icon&quot;&gt;</span><br><span class="line">    &lt;title&gt;Vue&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></div></figure>


        <h2 id="合并配置">
          <a href="#合并配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#合并配置" class="headerlink" title="合并配置"></a>合并配置</h2>
      <p><strong>webpack.config.js</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&quot;path&quot;)</span><br><span class="line">const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;)</span><br><span class="line">const ESLintWebpackPlugin = require(&quot;eslint-webpack-plugin&quot;)</span><br><span class="line">const &#123; VueLoaderPlugin &#125; = require(&#x27;vue-loader&#x27;)</span><br><span class="line">const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;)</span><br><span class="line">const CssMinimizerWebpackPlugin = require(&quot;css-minimizer-webpack-plugin&quot;)</span><br><span class="line">const TerserWebpackPlugin = require(&quot;terser-webpack-plugin&quot;)</span><br><span class="line">const ImageMinimizerPlugin = require(&quot;image-minimizer-webpack-plugin&quot;)</span><br><span class="line">const CopyPlugin = require(&quot;copy-webpack-plugin&quot;)</span><br><span class="line"></span><br><span class="line">const isProduction = process.env.NODE_ENV === &quot;production&quot;;</span><br><span class="line">//引入定义环境变量</span><br><span class="line">const &#123; DefinePlugin &#125; = require(&quot;webpack&quot;)</span><br><span class="line"></span><br><span class="line">//返回样式处理loader函数</span><br><span class="line">const getStyleLoaders = (pre) =&gt; &#123;</span><br><span class="line">    return [</span><br><span class="line">        isProduction ? MiniCssExtractPlugin.loader : &quot;vue-style-loader&quot;,</span><br><span class="line">        &quot;css-loader&quot;,</span><br><span class="line">        &#123;</span><br><span class="line">            loader: &#x27;postcss-loader&#x27;,</span><br><span class="line">            options: &#123;</span><br><span class="line">                postcssOptions: &#123;</span><br><span class="line">                    plugins: [</span><br><span class="line">                        [</span><br><span class="line">                            &#x27;postcss-preset-env&#x27;,</span><br><span class="line">                        ],</span><br><span class="line">                    ],</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        pre,</span><br><span class="line">    ].filter(Boolean)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    entry: &quot;./src/main.js&quot;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: isProduction ? path.resolve(__dirname, &quot;../dist&quot;) : undefined,</span><br><span class="line">        filename: isProduction ? &quot;static/js/[name].[contenthash:10].js&quot; : &quot;static/js/[name].js&quot;,</span><br><span class="line">        chunkFilename: isProduction ? &quot;static/js/[name].[contenthash:10].chunk.js&quot; : &quot;static/js/[name].chunk.js&quot;,</span><br><span class="line">        assetModuleFilename: &quot;static/media/[hash:10][ext][query]&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        rules: [&#123;</span><br><span class="line">                test: /\.css$/,</span><br><span class="line">                use: getStyleLoaders(),</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.less$/,</span><br><span class="line">                use: getStyleLoaders(&quot;less-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.s[ac]ss$/,</span><br><span class="line">                use: getStyleLoaders(&quot;sass-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.styl$/,</span><br><span class="line">                use: getStyleLoaders(&quot;stylus-loader&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.(jpe?g|png|gif|webp|svg)$/,</span><br><span class="line">                type: &quot;asset&quot;,</span><br><span class="line">                parser: &#123;</span><br><span class="line">                    dataUrlCondition: &#123;</span><br><span class="line">                        maxSize: 10 * 1024,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            //处理其他资源</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.(woff2?|ttf)$/,</span><br><span class="line">                type: &quot;asset/resource&quot;,</span><br><span class="line">            &#125;,</span><br><span class="line">            //处理js</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.js$/,</span><br><span class="line">                include: path.resolve(__dirname, &quot;../src&quot;),</span><br><span class="line">                loader: &quot;babel-loader&quot;,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    cacheDirectory: true,</span><br><span class="line">                    cacheCompression: false,</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.vue$/,</span><br><span class="line">                loader: &#x27;vue-loader&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new ESLintWebpackPlugin(&#123;</span><br><span class="line">            context: path.resolve(__dirname, &quot;../src&quot;),</span><br><span class="line">            exclude: &quot;node_modules&quot;,</span><br><span class="line">            cache: true,</span><br><span class="line">            cacheLocation: path.resolve(__dirname, &quot;../node_modules/.cache/.eslintcache&quot;),</span><br><span class="line">        &#125;),</span><br><span class="line">        new HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: path.resolve(__dirname, &quot;../public/index.html&quot;),</span><br><span class="line">        &#125;),</span><br><span class="line">        isProduction &amp;&amp; new MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: &quot;static/css/[name].[contenthash:10].css&quot;,</span><br><span class="line">            chunkFilename: &quot;static/css/[name].[contenthash:10].chunk.css&quot;,</span><br><span class="line">        &#125;),</span><br><span class="line">        isProduction &amp;&amp; new CopyPlugin(&#123;</span><br><span class="line">            patterns: [&#123;</span><br><span class="line">                from: path.resolve(__dirname, &quot;../public&quot;),</span><br><span class="line">                to: path.resolve(__dirname, &quot;../dist&quot;),</span><br><span class="line">                globOptions: &#123;</span><br><span class="line">                    ignore: [&quot;**/index.html&quot;],</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;, ],</span><br><span class="line">        &#125;),</span><br><span class="line">        new VueLoaderPlugin(),</span><br><span class="line">        //cross-env定义的环境变量给打包工具使用</span><br><span class="line">        //DefinePlugin定义环境变量给源代码使用，从而解决vue3页面警告的问题</span><br><span class="line">        new DefinePlugin(&#123;</span><br><span class="line">            __VUE_OPTIONS_API__: true,</span><br><span class="line">            __VUE_PROD_DEVTOOLS__: false,</span><br><span class="line">        &#125;)</span><br><span class="line">    ].filter(Boolean),</span><br><span class="line">    mode: isProduction ? &quot;production&quot; : &quot;development&quot;,</span><br><span class="line">    devtool: isProduction ? &quot;source-map&quot; : &quot;cheap-module-source-map&quot;,</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        splitChunks: &#123;</span><br><span class="line">            chunks: &quot;all&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        runtimeChunk: &#123;</span><br><span class="line">            name: (entrypoint) =&gt; `runtime~$&#123;entrypoint.name&#125;.js`</span><br><span class="line">        &#125;,</span><br><span class="line">        minimize: isProduction,</span><br><span class="line">        minimizer: [</span><br><span class="line">            new CssMinimizerWebpackPlugin(),</span><br><span class="line">            new TerserWebpackPlugin(),</span><br><span class="line">            new ImageMinimizerPlugin(&#123;</span><br><span class="line">                minimizer: &#123;</span><br><span class="line">                    implementation: ImageMinimizerPlugin.imageminGenerate,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        plugin: [</span><br><span class="line">                            [&quot;gifsicle&quot;, &#123; interlaced: true &#125;],</span><br><span class="line">                            [&quot;jpegtran&quot;, &#123;</span><br><span class="line">                                progressive: true</span><br><span class="line">                            &#125;],</span><br><span class="line">                            [&quot;optipng&quot;, &#123; optimizationLevel: 5 &#125;],</span><br><span class="line">                            [</span><br><span class="line">                                &quot;svgo&quot;,</span><br><span class="line">                                &#123;</span><br><span class="line">                                    plugins: [</span><br><span class="line">                                        &quot;preset-default&quot;,</span><br><span class="line">                                        &quot;prefixIds&quot;,</span><br><span class="line">                                        &#123;</span><br><span class="line">                                            name: &quot;sortAttrs&quot;,</span><br><span class="line">                                            params: &#123;</span><br><span class="line">                                                xmlnsOrder: &quot;alphabetical&quot;,</span><br><span class="line">                                            &#125;</span><br><span class="line">                                        &#125;</span><br><span class="line">                                    ]</span><br><span class="line">                                &#125;</span><br><span class="line">                            ]</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    //webppack解析模块加载选啊想</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        //自动补全文件扩展名</span><br><span class="line">        extensions: [&quot;.vue&quot;, &quot;.js&quot;, &quot;.json&quot;]</span><br><span class="line">    &#125;,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        host: &quot;localhost&quot;,</span><br><span class="line">        port: 3000,</span><br><span class="line">        open: true,</span><br><span class="line">        hot: true,</span><br><span class="line">        historyApiFallback: true, //解决前端路由刷新404问题</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>PACKAGE.JSON</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;npm run dev&quot;,</span><br><span class="line">    &quot;dev&quot;: &quot;cross-env NODE_ENV=development webpack serve --config ./config/webpack.config.js&quot;,</span><br><span class="line">    &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack --config ./config/webpack.config.js&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h2 id="优化配置">
          <a href="#优化配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#优化配置" class="headerlink" title="优化配置"></a>优化配置</h2>
      
        <h3 id="1-引入element-plus">
          <a href="#1-引入element-plus" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-引入element-plus" class="headerlink" title="1.引入element-plus"></a>1.引入element-plus</h3>
      <p><strong>全部引入</strong></p>
<p><strong>1. 下载element-plus</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i element-plus</span><br></pre></td></tr></table></div></figure>

<p><strong>2. main.js中引入</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementPlus</span> <span class="keyword">from</span> <span class="string">&quot;element-plus&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/dist/index.css&#x27;</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(<span class="title class_">ElementPlus</span>).<span class="title function_">mount</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;app&#x27;</span>));</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>3. 使用</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=&quot;primary&quot;&gt;按按钮&lt;/el-button&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>按需引入</strong></p>
<p><strong>1. 下载包</strong></p>
<p><code>npm install -D unplugin-vue-components unplugin-auto-import</code></p>
<p><strong>2. webpack.config.js配置</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// webpack.config.js</span><br><span class="line">const AutoImport = require(&#x27;unplugin-auto-import/webpack&#x27;)</span><br><span class="line">const Components = require(&#x27;unplugin-vue-components/webpack&#x27;)</span><br><span class="line">const &#123; ElementPlusResolver &#125; = require(&#x27;unplugin-vue-components/resolvers&#x27;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  plugins: [</span><br><span class="line">    AutoImport(&#123;</span><br><span class="line">      resolvers: [ElementPlusResolver()],</span><br><span class="line">    &#125;),</span><br><span class="line">    Components(&#123;</span><br><span class="line">      resolvers: [ElementPlusResolver()],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>3.删除全部引入样式和js，在需要使用的地方引入注册</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-button&gt;I am ElButton&lt;/el-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &#123; ElButton &#125; from &#x27;element-plus&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    components: &#123; ElButton &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/05/27/web-axios/">web-axios</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-05-27</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-06-21</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h2 id="axios基本使用">
          <a href="#axios基本使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#axios基本使用" class="headerlink" title="axios基本使用"></a>axios基本使用</h2>
      
        <h3 id="1-發送請求">
          <a href="#1-發送請求" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-發送請求" class="headerlink" title="1. 發送請求"></a>1. 發送請求</h3>
      <p><strong>基本请求</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;http://localhost:3000/posts/2&quot;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;http://localhost:3000/posts/2&quot;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>post請求</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">post</span>(<span class="string">&quot;http://localhost:3000/comments&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">body</span>: <span class="string">&quot;一個評論&quot;</span>,</span><br><span class="line">    <span class="attr">postId</span>: <span class="number">2</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-请求配置">
          <a href="#2-请求配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-请求配置" class="headerlink" title="2. 请求配置"></a>2. 请求配置</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// `url` 是用于请求的服务器 URL</span></span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/user&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `method` 是创建请求时使用的方法</span></span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>, <span class="comment">// 默认值</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `baseURL` 将自动加在 `url` 前面，除非 `url` 是一个绝对 URL。</span></span><br><span class="line">  <span class="comment">// 它可以通过设置一个 `baseURL` 便于为 axios 实例的方法传递相对 URL</span></span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;https://some-domain.com/api/&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `transformRequest` 允许在向服务器发送前，修改请求数据</span></span><br><span class="line">  <span class="comment">// 它只能用于 &#x27;PUT&#x27;, &#x27;POST&#x27; 和 &#x27;PATCH&#x27; 这几个请求方法</span></span><br><span class="line">  <span class="comment">// 数组中最后一个函数必须返回一个字符串， 一个Buffer实例，ArrayBuffer，FormData，或 Stream</span></span><br><span class="line">  <span class="comment">// 你可以修改请求头。</span></span><br><span class="line">  <span class="attr">transformRequest</span>: [<span class="keyword">function</span> (<span class="params">data, headers</span>) &#123;</span><br><span class="line">    <span class="comment">// 对发送的 data 进行任意转换处理</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `transformResponse` 在传递给 then/catch 前，允许修改响应数据</span></span><br><span class="line">  <span class="attr">transformResponse</span>: [<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="comment">// 对接收的 data 进行任意转换处理</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 自定义请求头</span></span><br><span class="line">  <span class="attr">headers</span>: &#123;<span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span>&#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `params` 是与请求一起发送的 URL 参数</span></span><br><span class="line">  <span class="comment">// 必须是一个简单对象或 URLSearchParams 对象</span></span><br><span class="line">  <span class="attr">params</span>: &#123;</span><br><span class="line">    <span class="attr">ID</span>: <span class="number">12345</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `paramsSerializer`是可选方法，主要用于序列化`params`</span></span><br><span class="line">  <span class="comment">// (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)</span></span><br><span class="line">  <span class="attr">paramsSerializer</span>: <span class="keyword">function</span> (<span class="params">params</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Qs</span>.<span class="title function_">stringify</span>(params, &#123;<span class="attr">arrayFormat</span>: <span class="string">&#x27;brackets&#x27;</span>&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `data` 是作为请求体被发送的数据</span></span><br><span class="line">  <span class="comment">// 仅适用 &#x27;PUT&#x27;, &#x27;POST&#x27;, &#x27;DELETE 和 &#x27;PATCH&#x27; 请求方法</span></span><br><span class="line">  <span class="comment">// 在没有设置 `transformRequest` 时，则必须是以下类型之一:</span></span><br><span class="line">  <span class="comment">// - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams</span></span><br><span class="line">  <span class="comment">// - 浏览器专属: FormData, File, Blob</span></span><br><span class="line">  <span class="comment">// - Node 专属: Stream, Buffer</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&#x27;Fred&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 发送请求体数据的可选语法</span></span><br><span class="line">  <span class="comment">// 请求方式 post</span></span><br><span class="line">  <span class="comment">// 只有 value 会被发送，key 则不会</span></span><br><span class="line">  <span class="attr">data</span>: <span class="string">&#x27;Country=Brasil&amp;City=Belo Horizonte&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `timeout` 指定请求超时的毫秒数。</span></span><br><span class="line">  <span class="comment">// 如果请求时间超过 `timeout` 的值，则请求会被中断</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">1000</span>, <span class="comment">// 默认值是 `0` (永不超时)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `withCredentials` 表示跨域请求时是否需要使用凭证</span></span><br><span class="line">  <span class="attr">withCredentials</span>: <span class="literal">false</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `adapter` 允许自定义处理请求，这使测试更加容易。</span></span><br><span class="line">  <span class="comment">// 返回一个 promise 并提供一个有效的响应 （参见 lib/adapters/README.md）。</span></span><br><span class="line">  <span class="attr">adapter</span>: <span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `auth` HTTP Basic Auth</span></span><br><span class="line">  <span class="attr">auth</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;janedoe&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;s00pers3cret&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `responseType` 表示浏览器将要响应的数据类型</span></span><br><span class="line">  <span class="comment">// 选项包括: &#x27;arraybuffer&#x27;, &#x27;document&#x27;, &#x27;json&#x27;, &#x27;text&#x27;, &#x27;stream&#x27;</span></span><br><span class="line">  <span class="comment">// 浏览器专属：&#x27;blob&#x27;</span></span><br><span class="line">  <span class="attr">responseType</span>: <span class="string">&#x27;json&#x27;</span>, <span class="comment">// 默认值</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `responseEncoding` 表示用于解码响应的编码 (Node.js 专属)</span></span><br><span class="line">  <span class="comment">// 注意：忽略 `responseType` 的值为 &#x27;stream&#x27;，或者是客户端请求</span></span><br><span class="line">  <span class="comment">// Note: Ignored for `responseType` of &#x27;stream&#x27; or client-side requests</span></span><br><span class="line">  <span class="attr">responseEncoding</span>: <span class="string">&#x27;utf8&#x27;</span>, <span class="comment">// 默认值</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `xsrfCookieName` 是 xsrf token 的值，被用作 cookie 的名称</span></span><br><span class="line">  <span class="attr">xsrfCookieName</span>: <span class="string">&#x27;XSRF-TOKEN&#x27;</span>, <span class="comment">// 默认值</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `xsrfHeaderName` 是带有 xsrf token 值的http 请求头名称</span></span><br><span class="line">  <span class="attr">xsrfHeaderName</span>: <span class="string">&#x27;X-XSRF-TOKEN&#x27;</span>, <span class="comment">// 默认值</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `onUploadProgress` 允许为上传处理进度事件</span></span><br><span class="line">  <span class="comment">// 浏览器专属</span></span><br><span class="line">  <span class="attr">onUploadProgress</span>: <span class="keyword">function</span> (<span class="params">progressEvent</span>) &#123;</span><br><span class="line">    <span class="comment">// 处理原生进度事件</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `onDownloadProgress` 允许为下载处理进度事件</span></span><br><span class="line">  <span class="comment">// 浏览器专属</span></span><br><span class="line">  <span class="attr">onDownloadProgress</span>: <span class="keyword">function</span> (<span class="params">progressEvent</span>) &#123;</span><br><span class="line">    <span class="comment">// 处理原生进度事件</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `maxContentLength` 定义了node.js中允许的HTTP响应内容的最大字节数</span></span><br><span class="line">  <span class="attr">maxContentLength</span>: <span class="number">2000</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `maxBodyLength`（仅Node）定义允许的http请求内容的最大字节数</span></span><br><span class="line">  <span class="attr">maxBodyLength</span>: <span class="number">2000</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `validateStatus` 定义了对于给定的 HTTP状态码是 resolve 还是 reject promise。</span></span><br><span class="line">  <span class="comment">// 如果 `validateStatus` 返回 `true` (或者设置为 `null` 或 `undefined`)，</span></span><br><span class="line">  <span class="comment">// 则promise 将会 resolved，否则是 rejected。</span></span><br><span class="line">  <span class="attr">validateStatus</span>: <span class="keyword">function</span> (<span class="params">status</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> status &gt;= <span class="number">200</span> &amp;&amp; status &lt; <span class="number">300</span>; <span class="comment">// 默认值</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `maxRedirects` 定义了在node.js中要遵循的最大重定向数。</span></span><br><span class="line">  <span class="comment">// 如果设置为0，则不会进行重定向</span></span><br><span class="line">  <span class="attr">maxRedirects</span>: <span class="number">5</span>, <span class="comment">// 默认值</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `socketPath` 定义了在node.js中使用的UNIX套接字。</span></span><br><span class="line">  <span class="comment">// e.g. &#x27;/var/run/docker.sock&#x27; 发送请求到 docker 守护进程。</span></span><br><span class="line">  <span class="comment">// 只能指定 `socketPath` 或 `proxy` 。</span></span><br><span class="line">  <span class="comment">// 若都指定，这使用 `socketPath` 。</span></span><br><span class="line">  <span class="attr">socketPath</span>: <span class="literal">null</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `httpAgent` and `httpsAgent` define a custom agent to be used when performing http</span></span><br><span class="line">  <span class="comment">// and https requests, respectively, in node.js. This allows options to be added like</span></span><br><span class="line">  <span class="comment">// `keepAlive` that are not enabled by default.</span></span><br><span class="line">  <span class="attr">httpAgent</span>: <span class="keyword">new</span> http.<span class="title class_">Agent</span>(&#123; <span class="attr">keepAlive</span>: <span class="literal">true</span> &#125;),</span><br><span class="line">  <span class="attr">httpsAgent</span>: <span class="keyword">new</span> https.<span class="title class_">Agent</span>(&#123; <span class="attr">keepAlive</span>: <span class="literal">true</span> &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `proxy` 定义了代理服务器的主机名，端口和协议。</span></span><br><span class="line">  <span class="comment">// 您可以使用常规的`http_proxy` 和 `https_proxy` 环境变量。</span></span><br><span class="line">  <span class="comment">// 使用 `false` 可以禁用代理功能，同时环境变量也会被忽略。</span></span><br><span class="line">  <span class="comment">// `auth`表示应使用HTTP Basic auth连接到代理，并且提供凭据。</span></span><br><span class="line">  <span class="comment">// 这将设置一个 `Proxy-Authorization` 请求头，它会覆盖 `headers` 中已存在的自定义 `Proxy-Authorization` 请求头。</span></span><br><span class="line">  <span class="comment">// 如果代理服务器使用 HTTPS，则必须设置 protocol 为`https`</span></span><br><span class="line">  <span class="attr">proxy</span>: &#123;</span><br><span class="line">    <span class="attr">protocol</span>: <span class="string">&#x27;https&#x27;</span>,</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">9000</span>,</span><br><span class="line">    <span class="attr">auth</span>: &#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&#x27;mikeymike&#x27;</span>,</span><br><span class="line">      <span class="attr">password</span>: <span class="string">&#x27;rapunz3l&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// see https://axios-http.com/zh/docs/cancellation</span></span><br><span class="line">  <span class="attr">cancelToken</span>: <span class="keyword">new</span> <span class="title class_">CancelToken</span>(<span class="keyword">function</span> (<span class="params">cancel</span>) &#123;</span><br><span class="line">  &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `decompress` indicates whether or not the response body should be decompressed </span></span><br><span class="line">  <span class="comment">// automatically. If set to `true` will also remove the &#x27;content-encoding&#x27; header </span></span><br><span class="line">  <span class="comment">// from the responses objects of all decompressed responses</span></span><br><span class="line">  <span class="comment">// - Node only (XHR cannot turn off decompression)</span></span><br><span class="line">  <span class="attr">decompress</span>: <span class="literal">true</span> <span class="comment">// 默认值</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-默认配置">
          <a href="#3-默认配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-默认配置" class="headerlink" title="3. 默认配置"></a>3. 默认配置</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//默认请求类型</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">method</span>=<span class="string">&quot;GET&quot;</span>;</span><br><span class="line"><span class="comment">//默认baseURL</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span>=<span class="string">&quot;http://localhost:3000&quot;</span></span><br></pre></td></tr></table></div></figure>


        <h3 id="创建多个axios实例对象">
          <a href="#创建多个axios实例对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#创建多个axios实例对象" class="headerlink" title="创建多个axios实例对象"></a>创建多个axios实例对象</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> requests = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;http://localhost:3000/&#x27;</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">2000</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> anotherRequests = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;https://api.apiopen.top&#x27;</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">2000</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>requests实例对象与axios对象的功能几近是一样的</strong></p>
<p>使用：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">requests</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;/posts&quot;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">reponse</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reponse)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//get请求</span></span><br><span class="line">requests.<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>)</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-拦截器">
          <a href="#4-拦截器" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-拦截器" class="headerlink" title="4. 拦截器"></a>4. 拦截器</h3>
      <p><strong>请求拦截器</strong></p>
<p>发送请求之前借助函数来对参数内容进行处理和检测</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//config就是配置对象</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">	config.<span class="property">params</span> = &#123;<span class="attr">a</span>:<span class="number">100</span>&#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求拦截器成功,&quot;</span>, config)</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求拦截器失败,&quot;</span>, error)</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="keyword">function</span>(<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;响应拦截器成功,&quot;</span>, response)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">	<span class="comment">//此处可以return response.data，使返回的结果没有状态码等等东西</span></span><br><span class="line">&#125;, <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;响应拦截器失败,&quot;</span>, error)</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;http://localhost:3000/posts&quot;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;res:&quot;</span>, response)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="5-取消请求">
          <a href="#5-取消请求" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-取消请求" class="headerlink" title="5.取消请求"></a>5.取消请求</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2. 声明全局变量</span></span><br><span class="line"><span class="keyword">let</span> cancel = <span class="literal">null</span></span><br><span class="line"><span class="keyword">const</span> btns = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;button&quot;</span>)</span><br><span class="line">btns[<span class="number">0</span>].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//发送之前检测上一次请求是否已经完成，防止用户连续点击造成服务器压力</span></span><br><span class="line">    <span class="keyword">if</span> (cancel != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;取消1&quot;</span>)</span><br><span class="line">        <span class="title function_">cancel</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">axios</span>(&#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&quot;http://localhost:3000/posts&quot;</span>,</span><br><span class="line">        <span class="comment">//1. 添加配置对象的属性</span></span><br><span class="line">        <span class="attr">cancelToken</span>: <span class="keyword">new</span> axios.<span class="title class_">CancelToken</span>(<span class="keyword">function</span>(<span class="params">c</span>) &#123;</span><br><span class="line">            <span class="comment">//3. c赋值给cancel</span></span><br><span class="line">            cancel = c</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(response)</span><br><span class="line"></span><br><span class="line">        <span class="comment">//请求响应完毕，重置cancel</span></span><br><span class="line">        cancel = <span class="literal">null</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">btns[<span class="number">1</span>].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//4.执行函数</span></span><br><span class="line">    <span class="title function_">cancel</span>()</span><br><span class="line">    cancel = <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="axios源码分析">
          <a href="#axios源码分析" class="heading-link"><i class="fas fa-link"></i></a><a href="#axios源码分析" class="headerlink" title="axios源码分析"></a>axios源码分析</h2>
      
        <h3 id="1-axios对象创建过程模拟实现">
          <a href="#1-axios对象创建过程模拟实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-axios对象创建过程模拟实现" class="headerlink" title="1.axios对象创建过程模拟实现"></a>1.axios对象创建过程模拟实现</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Axios</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">//初始化Axios构造函数</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">defaults</span> = config</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">interceptor</span> = &#123;</span><br><span class="line">        <span class="attr">requests</span>: &#123;&#125;,</span><br><span class="line">        <span class="attr">response</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加Axios原型方法</span></span><br><span class="line"><span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">request</span> = <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;发送的请求类型为：&quot;</span>, config.<span class="property">method</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">get</span> = <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;发送的请求类型为：get&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">post</span> = <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;发送的请求类型为：post&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//声明函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createInstance</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">//实例化Axios,此时context有Axios的原型方法和对象内方法</span></span><br><span class="line">    <span class="keyword">let</span> context = <span class="keyword">new</span> <span class="title class_">Axios</span>(config)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建请求函数,instance=Axios.prototype.request,且this是Axios的实例(context)指向</span></span><br><span class="line">    <span class="keyword">let</span> instance = <span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">request</span>.<span class="title function_">bind</span>(context)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//遍历Axios的原型方法并添加进instance中</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//使instance中的所有方法的this都指向Axios的实例对象(context)</span></span><br><span class="line">        instance[item] = <span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>[item].<span class="title function_">bind</span>(context)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//遍历context中的方法并添加到instance中</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(context).<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            instance[item] = context[item]</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">//返回实例</span></span><br><span class="line">    <span class="keyword">return</span> instance</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> axios = <span class="title function_">createInstance</span>()</span><br><span class="line"></span><br><span class="line">axios.<span class="title function_">post</span>()</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-模拟实现axios发送请求">
          <a href="#2-模拟实现axios发送请求" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-模拟实现axios发送请求" class="headerlink" title="2. 模拟实现axios发送请求"></a>2. 模拟实现axios发送请求</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Axios</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">config</span> = config</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">request</span> = <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">//创建promise对象，由于config是一个对象，此处必成功</span></span><br><span class="line">    <span class="keyword">let</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(config)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//声明一个数组</span></span><br><span class="line">    <span class="keyword">let</span> chains = [dispatchRequest, <span class="literal">undefined</span>]</span><br><span class="line">    <span class="keyword">let</span> result = promise.<span class="title function_">then</span>(chains[<span class="number">0</span>], chains[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">dispatchRequest</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">xhrAdapter</span>(config).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//响应的结果进行处理</span></span><br><span class="line">        <span class="keyword">return</span> response</span><br><span class="line">    &#125;, <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> error</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//adapter适配器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">xhrAdapter</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//发送ajax请求</span></span><br><span class="line">        <span class="keyword">let</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//初始化</span></span><br><span class="line">        xhr.<span class="title function_">open</span>(config.<span class="property">method</span>, config.<span class="property">url</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">//发送</span></span><br><span class="line">        xhr.<span class="title function_">send</span>()</span><br><span class="line"></span><br><span class="line">        <span class="comment">//绑定事件</span></span><br><span class="line">        xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span><br><span class="line">                <span class="comment">//判断成功的条件</span></span><br><span class="line">                <span class="keyword">if</span> (xhr.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; xhr.<span class="property">status</span> &lt; <span class="number">300</span>) &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(&#123;</span><br><span class="line">                        <span class="comment">//配置对象</span></span><br><span class="line">                        <span class="attr">config</span>: config,</span><br><span class="line">                        <span class="comment">//响应体</span></span><br><span class="line">                        <span class="attr">data</span>: xhr.<span class="property">response</span>,</span><br><span class="line">                        <span class="comment">//响应头</span></span><br><span class="line">                        <span class="attr">headers</span>: xhr.<span class="title function_">getAllResponseHeaders</span>(),</span><br><span class="line">                        <span class="comment">//xhr请求对象</span></span><br><span class="line">                        <span class="attr">request</span>: xhr,</span><br><span class="line">                        <span class="comment">//响应状态码</span></span><br><span class="line">                        <span class="attr">status</span>: xhr.<span class="property">status</span>,</span><br><span class="line">                        <span class="comment">//响应状态字符串</span></span><br><span class="line">                        <span class="attr">statusText</span>: xhr.<span class="property">statusText</span></span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;请求失败：&quot;</span>, xhr.<span class="property">status</span>))</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建axios方法，等同Axios原型对象的request方法</span></span><br><span class="line"><span class="keyword">let</span> axios = <span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">request</span>.<span class="title function_">bind</span>(<span class="literal">null</span>)</span><br><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;http://localhost:3000/posts&quot;</span>,</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-模擬实现axios拦截器功能">
          <a href="#3-模擬实现axios拦截器功能" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-模擬实现axios拦截器功能" class="headerlink" title="3. 模擬实现axios拦截器功能"></a>3. 模擬实现axios拦截器功能</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Axios</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">config</span> = config</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">interceptors</span> = &#123;</span><br><span class="line">        <span class="attr">request</span>: <span class="keyword">new</span> <span class="title class_">InterceptorManager</span>(),</span><br><span class="line">        <span class="attr">response</span>: <span class="keyword">new</span> <span class="title class_">InterceptorManager</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">request</span> = <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">//创建一个promise对象</span></span><br><span class="line">    <span class="keyword">let</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(config)</span><br><span class="line">    <span class="keyword">const</span> chains = [dispatchRequest, <span class="literal">undefined</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理拦截器</span></span><br><span class="line">    <span class="comment">//请求拦截器：将请求拦截器的回调压入到chains的前面</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="property">handlers</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        chains.<span class="title function_">unshift</span>(item.<span class="property">fulfilled</span>, item.<span class="property">rejected</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//响应拦截器</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="property">handlers</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        chains.<span class="title function_">push</span>(item.<span class="property">fulfilled</span>, item.<span class="property">rejected</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(chains)</span><br><span class="line">    遍历</span><br><span class="line">    <span class="keyword">while</span> (chains.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="comment">//shift方法：删除数组的第一个元素并返回</span></span><br><span class="line"></span><br><span class="line">        promise = promise.<span class="title function_">then</span>(chains.<span class="title function_">shift</span>(), chains.<span class="title function_">shift</span>())</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> promise</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">dispatchRequest</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;dispatchRequest&quot;</span>)</span><br><span class="line">        <span class="title function_">resolve</span>(&#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="attr">statusText</span>: <span class="string">&quot;OK&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> context = <span class="keyword">new</span> <span class="title class_">Axios</span>(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建axios方法，等同Axios原型对象的request方法</span></span><br><span class="line"><span class="keyword">let</span> axios = <span class="title class_">Axios</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">request</span>.<span class="title function_">bind</span>(context)</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(context).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    axios[key] = context[key]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">InterceptorManager</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handlers</span> = []</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">InterceptorManager</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">use</span> = <span class="keyword">function</span>(<span class="params">fulfilled, rejected</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handlers</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">        fulfilled,</span><br><span class="line">        rejected</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试代码</span></span><br><span class="line"><span class="comment">//请求拦截器</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> <span class="title function_">one</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求拦截器1&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="keyword">function</span> <span class="title function_">one</span>(<span class="params">err</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> <span class="title function_">two</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求拦截器2&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="keyword">function</span> <span class="title function_">two</span>(<span class="params">err</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//响应拦截器</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="keyword">function</span> <span class="title function_">one</span>(<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;响应拦截器1&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">&#125;, <span class="keyword">function</span> <span class="title function_">one</span>(<span class="params">err</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="keyword">function</span> <span class="title function_">two</span>(<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;响应拦截器2&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">&#125;, <span class="keyword">function</span> <span class="title function_">two</span>(<span class="params">err</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;get&quot;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-模拟事项axios取消请求功能">
          <a href="#4-模拟事项axios取消请求功能" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-模拟事项axios取消请求功能" class="headerlink" title="4. 模拟事项axios取消请求功能"></a>4. 模拟事项axios取消请求功能</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;button&gt;发送&lt;/button&gt;</span><br><span class="line">    &lt;button&gt;取消&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        //2. 声明全局变量</span><br><span class="line">        let cancel = null</span><br><span class="line">        const btns = document.querySelectorAll(&quot;button&quot;)</span><br><span class="line">        btns[0].onclick = function() &#123;</span><br><span class="line">            axios(&#123;</span><br><span class="line">                method: &quot;get&quot;,</span><br><span class="line">                url: &quot;http://localhost:3000/posts&quot;,</span><br><span class="line">                //1. 添加配置对象的属性</span><br><span class="line">                cancelToken: new CancelToken(function(c) &#123;</span><br><span class="line">                    /**</span><br><span class="line">                     * c赋值给cancel</span><br><span class="line">                     * 对应源码：c = function()&#123;resolvePromise()&#125;</span><br><span class="line">                     * executor(function() &#123;</span><br><span class="line">                     *    resolvePromise()</span><br><span class="line">                     * &#125;)</span><br><span class="line">                     */</span><br><span class="line">                    cancel = c //将可以改变cancelToken实例上的promise状态的方法暴露到全局</span><br><span class="line"></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;).then(response =&gt; &#123;</span><br><span class="line">                console.log(response)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        btns[1].onclick = function() &#123;</span><br><span class="line">            cancel()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //取消请求实现</span><br><span class="line">        function Axios(config) &#123;</span><br><span class="line">            this.config = config</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Axios.prototype.request = function(config) &#123;</span><br><span class="line">            return dispatchRequest(config)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //dispatchRequest</span><br><span class="line">        function dispatchRequest(config) &#123;</span><br><span class="line">            return xhrAdapter(config)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //xhrAdapter</span><br><span class="line">        function xhrAdapter(config) &#123;</span><br><span class="line">            //发送ajax请求</span><br><span class="line">            return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">                const xhr = new XMLHttpRequest</span><br><span class="line">                xhr.open(config.method, config.url)</span><br><span class="line">                xhr.send()</span><br><span class="line">                xhr.onreadystatechange = function() &#123;</span><br><span class="line">                    if (xhr.readyState === 4) &#123;</span><br><span class="line">                        if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) &#123;</span><br><span class="line">                            resolve(&#123;</span><br><span class="line">                                status: xhr.status,</span><br><span class="line">                                statusText: xhr.statusText</span><br><span class="line">                            &#125;)</span><br><span class="line">                        &#125; else &#123;</span><br><span class="line">                            reject(new Error(&quot;请求失败&quot;))</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                //5. 关于取消请求的处理</span><br><span class="line">                //如果config中配置了cancelToken</span><br><span class="line">                if (config.cancelToken) &#123;</span><br><span class="line">                    //对cancelToken对象身上的promise指定成功的回调</span><br><span class="line">                    config.cancelToken.promise.then(value =&gt; &#123;</span><br><span class="line">                        //取消请求</span><br><span class="line">                        xhr.abort()</span><br><span class="line">                        reject(new Error(&quot;请求已经被取消&quot;))</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //创建axios函数</span><br><span class="line">        const context = new Axios(&#123;&#125;)</span><br><span class="line">        const axios = Axios.prototype.request.bind(context)</span><br><span class="line"></span><br><span class="line">        //1. CancelToken构造函数</span><br><span class="line">        function CancelToken(executor) &#123;</span><br><span class="line">            var resolvePromise;</span><br><span class="line">            //2. 为实例对象添加属性</span><br><span class="line">            this.promise = new Promise((resolve) =&gt; &#123;</span><br><span class="line">                //3. 将resolve赋值给resolvePromise,此时resolvePromise的功能和resolve一致</span><br><span class="line">                resolvePromise = resolve</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">            //4. 调用executor函数</span><br><span class="line">            executor(function() &#123;</span><br><span class="line">                //executor的参数为函数对象，作用为将实例的promise对象的状态改为成功</span><br><span class="line">                resolvePromise()</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        console.dir(axios)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></div></figure></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/05/03/%E8%A7%A3%E5%86%B3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AEgithub/">解决无法访问github</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-05-03</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-21</span></span></div></header><div class="post-body"><div class="post-excerpt"><p><strong>如果有穿墙插件如Google助手  VPN  SS 之类别 有可能被全局代理 首先关闭这些软件 或者浏览器插件</strong></p>
<p>假设，您的本地代理端口为：1080 ，打开git base窗口进行按下列的方式设置。（在Linux及OSX系统环境下测试通过。）</p>
<p><strong>全局代理(不推荐)</strong></p>
<p>设置代理：</p>
<p><code>git config --global http.proxy socks5://127.0.0.1:1080git config --global https.proxy socks5://127.0.0.1:1080</code></p>
<p>取消代理：</p>
<p><code>git config --global --unset http.proxygit config --global --unset https.proxy</code></p>
<p><strong>只对部分域名代理(推荐)</strong></p>
<p>只对github进行代理，不会影响国内仓库。</p>
<p><code>git config --global http.https://github.com.proxy socks5://127.0.0.1:10808git config --global https.https://github.com.proxy socks5://127.0.0.1:10808</code></p>
<font color="green">
相信很多小伙伴都遇到过访问不了GitHub问题，一直加载不出来，漫长等待时间后出现无法加载的提示，心情爆炸！今天就彻底解决这个问题。下面的IP地址，小伙伴们一定不要按照我的来，因为这个IP过一段好像会改变，大家按照我给的网址一步步操作就可以了。</font>

<p><strong>一、确定ip</strong></p>
<p>进入网址  <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://github.com.ipaddress.com/">https://github.com.ipaddress.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>查看GitHub的ip地址。</p>
<p><img src="/2022/05/03/%E8%A7%A3%E5%86%B3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AEgithub/1522016-20211012115630416-1260864177.png"></p>
<p> <strong>二、确定域名ip</strong></p>
<p>进入网址  <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://fastly.net.ipaddress.com/github.global.ssl.fastly.net">https://fastly.net.ipaddress.com/github.global.ssl.fastly.net</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><img src="/2022/05/03/%E8%A7%A3%E5%86%B3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AEgithub/1522016-20211012115631274-528124061.png"></p>
<p><strong>三、确定静态资源ip</strong></p>
<p>进入网址 <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://github.com.ipaddress.com/assets-cdn.github.com">https://github.com.ipaddress.com/assets-cdn.github.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><img src="/2022/05/03/%E8%A7%A3%E5%86%B3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AEgithub/1522016-20211012115631778-317634013.png"></p>
<p><strong>四、修改hosts文件</strong></p>
<p>Windows系统：打开C:\Windows\System32\drivers\etc</p>
<p>找到hosts文件</p>
<p>在底部加上前三步获得的内容</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">140.82.114.4 github.com</span><br><span class="line">199.232.69.194 github.global.ssl.fastly.net</span><br><span class="line">185.199.108.153 assets-cdn.github.com</span><br><span class="line">185.199.110.153 assets-cdn.github.com</span><br><span class="line">185.199.111.153 assets-cdn.github.com</span><br></pre></td></tr></table></div></figure>

<p>保存并退出即可。需要提供管理员权限！！！</p>
<p>接着还需要刷新DNS</p>
<p>windows下刷新DNS的方法：</p>
<p>打开CMD</p>
<p>输入   ipconfig &#x2F;flushdns</p>
<p>参考：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.cnblogs.com/jiannanchun/p/15397235.html">https://www.cnblogs.com/jiannanchun/p/15397235.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/04/10/web-vue01/">web-vue01</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-04-10</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-30</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="VUE基础">
          <a href="#VUE基础" class="heading-link"><i class="fas fa-link"></i></a><a href="#VUE基础" class="headerlink" title="VUE基础"></a>VUE基础</h1>
      
        <h2 id="基础案例">
          <a href="#基础案例" class="heading-link"><i class="fas fa-link"></i></a><a href="#基础案例" class="headerlink" title="基础案例"></a><font color="green">基础案例</font></h2>
      
        <h3 id="1-初识vue">
          <a href="#1-初识vue" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-初识vue" class="headerlink" title="1. 初识vue"></a>1. 初识vue</h3>
      <p><strong>首先创建vue实例，实例有一个参数用于配置</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span>&gt;</span><br><span class="line">	&lt;!-- &#123;&#123;&#125;&#125;写法可以看做是分隔符，是<span class="title class_">Vue</span>的模板 --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello &#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//创建vue实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="comment">//el(element)用于指定当前Vue实例为哪个容器服务。值通常为css选择器字符</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="comment">//用于存储数据，数据供el所指定的容器去使用。值可以是一个对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">name</span>: <span class="string">&#x27;拉达冈&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p><strong>总结：</strong></p>
<ul>
<li><ol>
<li>想让vue工作。就必须创建一个vue实例，且要传入一个配置对象</li>
</ol>
</li>
<li><ol start="2">
<li>容器里的写法依然符合html规范，只不过混入一些特殊的vue语法</li>
</ol>
</li>
<li><ol start="3">
<li>容器中代码被称为【Vue模板】</li>
</ol>
</li>
<li><ol start="4">
<li>容器和vue实例一一对应，不能一对多或者多对一</li>
</ol>
</li>
<li><ol start="5">
<li>真实开发中只有一个Vue实例，并且会配合着组件一起使用</li>
</ol>
</li>
<li><ol start="6">
<li>模板<code>&#123;&#123;&#125;&#125;</code>中必须要是js表达式，且可以自动读取到data中的所有属性</li>
</ol>
<p>  js表达式和js代码(语句)</p>
<p>  表达式：一个表达式会生成一个值，可以放在任何一个需要值的地方。如：<code>a;a+b;method();x===y?&#39;a&#39;:&#39;b&#39;</code></p>
</li>
<li><ol start="7">
<li>一旦data中的数据发生改变，那么模板中用到该数据的地方也会自动更新(data会被持续监测，改变页面上的数据也会改变)</li>
</ol>
</li>
</ul>

        <h3 id="2-模板语法">
          <a href="#2-模板语法" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-模板语法" class="headerlink" title="2. 模板语法"></a>2. 模板语法</h3>
      <p><strong>1. 插值语法</strong></p>
<p><code>&#123;&#123;&#125;&#125;</code></p>
<p>功能：用于解析标签体内容，如</p><p></p><p></p>
<p><strong>2. 指令语法</strong></p>
<p>功能：用于解析标签(包括标签属性，标签体内容，绑定事件…)</p>
<p>如：<code>v-bind:</code>可简写为<code>:</code></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a :href=<span class="string">&#x27;url&#x27;</span>&gt;百度&lt;/a&gt;</span><br></pre></td></tr></table></div></figure>

<p>注：Vue中有很多的指令，且形式都是v-xxxx，此处v-bind为例子</p>
<p>2.1 <code>v-bind:</code>单向绑定：数据只能从data流向页面</p>
<p>2.2 <code>v-model:</code>双向绑定(<code>v-model:value</code>可简写为<code>v-model</code>)：数据不仅能从data流向页面，还可以从页面流向data。且双向绑定一般都应用在表单类元素上(如input、select等)。v-model默认收集的就是value的值</p>
<p><strong>3. el和data的两种写法</strong></p>
<p>el:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">	<span class="attr">data</span>:&#123;</span><br><span class="line">		<span class="attr">name</span>:<span class="string">&#x27;nm&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">x.$mount(<span class="string">&#x27;#root&#x27;</span>)</span><br></pre></td></tr></table></div></figure>

<p>data:(data在vm实例中被写在了vm._data中)</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种对象式</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;.root&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;拉达冈&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://www.baidu.com&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种函数式(必须有返回值，且不要写成箭头函数)</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;.root&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;拉达冈&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-MVVM模型">
          <a href="#3-MVVM模型" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-MVVM模型" class="headerlink" title="3.MVVM模型"></a>3.MVVM模型</h3>
      <p>MVVM模型：</p>
<ol>
<li><p>M：模型（Model）：data中的数据</p>
</li>
<li><p>V：视图（View）：模板代码</p>
</li>
<li><p>VM：视图模型（ViewModel）:Vue实例</p>
</li>
</ol>
<p>注：</p>
<ol>
<li><p>data中所有的属性，最后都出现在了vm身上</p>
</li>
<li><p>vm身上所有的属性，及Vue原型上所有属性，在Vue模板中都可以直接使用</p>
</li>
</ol>

        <h3 id="4-数据代理">
          <a href="#4-数据代理" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-数据代理" class="headerlink" title="4. 数据代理"></a>4. 数据代理</h3>
      
        <h4 id="4-1-Object-defineProperty方法">
          <a href="#4-1-Object-defineProperty方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-1-Object-defineProperty方法" class="headerlink" title="4.1 Object.defineProperty方法"></a>4.1 Object.defineProperty方法</h4>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">	<span class="attr">sex</span>:<span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> number = <span class="number">18</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person,<span class="string">&#x27;age&#x27;</span>,&#123;</span><br><span class="line">	<span class="comment">//value:18,</span></span><br><span class="line">	<span class="attr">enmuerable</span>:<span class="literal">true</span>, <span class="comment">//控制属性是否可以被枚举，默认false</span></span><br><span class="line">	<span class="attr">writable</span>:<span class="literal">true</span>, <span class="comment">//控制属性是否可以被修改，默认false。</span></span><br><span class="line">	<span class="attr">configurable</span>:<span class="literal">true</span>, <span class="comment">//控制属性是否可以被删除，默认false</span></span><br><span class="line">	<span class="attr">get</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;	<span class="comment">//当有人读取person的age属性时，get函数就会被调用，且返回值就是age的值。不能与value属性共存</span></span><br><span class="line">		<span class="keyword">return</span> number</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="title function_">set</span>(<span class="params">value</span>)&#123;	<span class="comment">//当有人修改person的age属性时，set函数(setter)就会被调用，且会收到修改的具体值</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//修改了number，那么get返回的值就会是修改后的number的值</span></span><br><span class="line">		number = value</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>不可以被枚举：，不参与遍历，即如果直接输出该对象的属性，不会有该方法添加的属性</p>
<p><strong><font color="red">如果一个描述符同时拥有 value 或 writable 和 get 或 set 键，则会产生一个异常</font></strong></p>
<p>get方法；在调用属性时执行：person.age</p>
<p>set方法：在修改属性值时执行：person.age &#x3D; 30</p>

        <h4 id="4-2-数据代理">
          <a href="#4-2-数据代理" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-2-数据代理" class="headerlink" title="4.2 数据代理"></a>4.2 数据代理</h4>
      <p>定义：通过一个对象代理对另一个对象中属性的操作(读&#x2F;写)</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">x</span>: <span class="number">100</span> &#125;</span><br><span class="line"><span class="keyword">let</span> obj2 = &#123; <span class="attr">y</span>: <span class="number">200</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj2, <span class="string">&#x27;x&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj.<span class="property">x</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        obj.<span class="property">x</span> = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">obj2.<span class="property">x</span> = <span class="number">1000</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">x</span>)</span><br></pre></td></tr></table></div></figure>


        <h4 id="4-3vue的数据代理">
          <a href="#4-3vue的数据代理" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-3vue的数据代理" class="headerlink" title="4.3vue的数据代理"></a>4.3vue的数据代理</h4>
      <ol>
<li><p>通过vm对象来代理data对象中属性的操作</p>
</li>
<li><p>Vue中数据代理的好处</p>
<p> 更加方便的操作data中的数据</p>
</li>
<li><p>基本原理</p>
<p> 通过Object.defineProperty()吧data对象中所有属性添加到vm上，为每一个添加到vm上的属性，都指定一个getter&#x2F;setter。在getter&#x2F;setter内部去操作(读&#x2F;写)data中对应的属性</p>
</li>
</ol>
<p><img src="/2022/04/10/web-vue01/%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86.jpg"></p>

        <h3 id="5-事件处理">
          <a href="#5-事件处理" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-事件处理" class="headerlink" title="5.事件处理"></a>5.事件处理</h3>
      <p><strong>点击事件：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id = <span class="string">&#x27;root&#x27;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&#x27;cmethod&#x27;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></div></figure>

<p>可简写为：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=<span class="string">&#x27;cmethod(66,$event)&#x27;</span>&gt;点击&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建vue实例</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="attr">cmethod</span>: <span class="keyword">function</span>(<span class="params">num,event</span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&#x27;点击事件&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>可以用$event关键字传入event，不会在传参数时丢失event</p>
<p>绑定事件的时候：<code>@xxx=&quot;yyy&quot;</code> yyy可以写一些简单的语句，不过yyyy都是在vm中找的</p>
<p><strong>事件的基本使用</strong></p>
<ol>
<li><p>使用v-on:xxx 或者 @xxx绑定事件，其中xxx是事件名</p>
</li>
<li><p>事件的回调需要配置在methods对象中，最终也会在vm(vue实例)上</p>
</li>
<li><p>methods中配置的函数，不要用箭头函数，否则this不指向vm</p>
</li>
<li><p>methods中配置的函数，都是被vue所管理的函数，this的指向是vm或组件实例对象</p>
</li>
<li><p>@click&#x3D;’demo’和@click&#x3D;’demo($event)’效果一致，后者可以传参数</p>
</li>
</ol>

        <h3 id="6-事件修饰符">
          <a href="#6-事件修饰符" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-事件修饰符" class="headerlink" title="6.事件修饰符"></a>6.事件修饰符</h3>
      <ol>
<li><p>prevent：阻止默认事件</p>
</li>
<li><p>stop：阻止事件冒泡</p>
</li>
<li><p>once：事件只触发一次</p>
</li>
<li><p>capture：使用事件的捕获模式</p>
</li>
<li><p>self：只有event.target是当前操作的元素时才触发事件</p>
</li>
<li><p>passive：事件的默认行为立即执行，无需等待事件回调执行完毕</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;https://www.baidu.com&quot;</span> @click.<span class="property">stop</span>.<span class="property">prevent</span>=<span class="string">&quot;showInfo&quot;</span>&gt;点击提示&lt;/a&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>可以连续写多个修饰符，比如先阻止冒泡，再停止默认行为</strong></p>

        <h3 id="7-键盘事件">
          <a href="#7-键盘事件" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-键盘事件" class="headerlink" title="7.键盘事件"></a>7.键盘事件</h3>
      <ol>
<li><p>Vue中常用的按键别名</p>
<p> 回车&#x3D;&gt;enter</p>
<p> 删除&#x3D;&gt;delete(捕获删除和退格键)</p>
<p> 退出&#x3D;&gt;esc</p>
<p> 空格&#x3D;&gt;space</p>
<p> 换行&#x3D;&gt;tab</p>
<p> 上下左右&#x3D;&gt;up down left right</p>
</li>
<li><p>Vue未提供别名的按键，可以使用按键原始的Key值去绑定，但注意要转为kebab-case(短横线命名)</p>
</li>
<li><p>系统修饰键（特殊用法）：ctrl alt shift meta</p>
<p> 配合keyup使用：按下修饰键的同时，再按下其他键，随后释放其他键，事件才被触发</p>
<p> 配合keydown使用：正常触发事件</p>
</li>
<li><p>也可以使用keyCode去指定具体的按键（不推荐。可能被弃用）</p>
</li>
<li><p>Vue.config.keyCodes.自定义键名 &#x3D; 键码，可以去定制按键别名</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type = <span class="string">&#x27;text&#x27;</span> @keyup.<span class="property">delete</span>=<span class="string">&#x27;showInfo&#x27;</span>&gt;</span><br></pre></td></tr></table></div></figure>

<p>如：输入ctrl+y才执行</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type = <span class="string">&#x27;text&#x27;</span> @keyup.<span class="property">ctrl</span>.<span class="property">y</span>=<span class="string">&#x27;showInfo&#x27;</span>&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="8-计算属性（computed）">
          <a href="#8-计算属性（computed）" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-计算属性（computed）" class="headerlink" title="8.计算属性（computed）"></a>8.计算属性（computed）</h3>
      <p><strong>只要data的数据发生改变，vue就会重新解析模板</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span>&gt;</span><br><span class="line">    姓：&lt;input type=<span class="string">&quot;text&quot;</span> v-model=<span class="string">&quot;firstName&quot;</span>&gt;&lt;br&gt; </span><br><span class="line">	名：&lt;input type=<span class="string">&quot;text&quot;</span> v-model=<span class="string">&quot;lastName&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;fullName&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">firstName</span>: <span class="string">&quot;张&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">lastName</span>: <span class="string">&quot;三&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">fullName</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">//当有人读取fullName时，get就会被调用，返回值就作为fullName的值.且此处的this是vm实例(vm处理过)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">/**</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">                 * get调用时机：1. 初次读取fullNames时调用，后续使用缓存  2. 所依赖的数据发生变化时调用</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">                 **/</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="title function_">get</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&quot;-&quot;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">/**</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">                 * set调用时机：fullNames被修改时</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">                 **/</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">let</span> nameStr = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="variable language_">this</span>.<span class="property">firstName</span> = nameStr[<span class="number">0</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="variable language_">this</span>.<span class="property">lastName</span> = nameStr[<span class="number">1</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(vm)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p><strong>总结：</strong></p>
<ol>
<li><p>定义：要用的属性不存在，要通过已有的属性计算得来(vue所管理的属性)</p>
</li>
<li><p>原理：底层借助了Object.defineproperty方法提供的getter和setter</p>
</li>
<li><p>get函数执行时机：1. 初次读取fullNames时调用，后续使用缓存  2. 所依赖的数据发生变化时调用</p>
</li>
<li><p>优势：与methods实现相比，内部有缓存机制(复用)，效率更高，调试方便</p>
</li>
<li><p>备注：1. 计算属性最终会出现在vm上，直接使用即可  2.如果计算属性需要修改，那必须写set函数去响应修改，且set中要引起计算时依赖的数据发生变化</p>
</li>
</ol>
<p><strong>计算属性如果只考虑读取不考虑修改(只有get没有set)可简写：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">	<span class="comment">//此处可以当成getter</span></span><br><span class="line">    <span class="title function_">fullName</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&quot;-&quot;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>此处表面上是函数，但是实际上会将fullName当做属性给vm，所以模板调用时不要加括号</p>

        <h3 id="9-监视属性-watch">
          <a href="#9-监视属性-watch" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-监视属性-watch" class="headerlink" title="9. 监视属性(watch)"></a>9. 监视属性(watch)</h3>
      <ol>
<li><p>当被监视的属性变化时，回调函数自动调用，进行相关操作</p>
</li>
<li><p>监视的属性必须存在，才能进行监视</p>
</li>
<li><p>监视的两种写法：new Vue时就传入watch配置；vm.$watch监视、</p>
</li>
</ol>
<p><strong>第一种</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">ishot</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="attr">ishot</span>: &#123;</span><br><span class="line">            <span class="comment">//初始化时，让handler调用一下，默认为false</span></span><br><span class="line">            <span class="attr">immediate</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//当ishot发生改变时，调用</span></span><br><span class="line">            <span class="title function_">handler</span>(<span class="params">newVauue, oldVaue</span>) &#123;</span><br><span class="line">                <span class="comment">//传递两个参数--修改前的值和修改后的值</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(newVauue + <span class="string">&quot;--&quot;</span> + oldVaue)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>第二种</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vm.$watch(<span class="string">&#x27;ishot&#x27;</span>, &#123;</span><br><span class="line">    <span class="comment">//初始化时，让handler调用一下，默认为false</span></span><br><span class="line">    <span class="attr">immediate</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">//当ishot发生改变时，调用</span></span><br><span class="line">    <span class="title function_">handler</span>(<span class="params">newVauue, oldVaue</span>) &#123;</span><br><span class="line">        <span class="comment">//传递两个参数--修改前的值和修改后的值</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(newVauue + <span class="string">&quot;--&quot;</span> + oldVaue)</span><br><span class="line">	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>深度监视：</strong></p>
<ol>
<li><p>Vue中的watch默认不监测对象内部值的改变(一层)</p>
<p> <strong>原因：对象和数组(对象)的值实际上是一个地址，改变对象内部值就相当于修改对应地址里面的值，地址本身没有改变，所以无法监视到对象内部。另外如果要监视到数组内部的值，需要用到vue指定的数组的方法。详见下图</strong></p>
</li>
</ol>
<p><img src="/2022/04/10/web-vue01/watchdata.png"></p>
<ol start="2">
<li>配置deep:true可以检测对象内部值(包括数组内的对象的内部值)改变(多层)</li>
</ol>
<p>备注：</p>
<ol>
<li>Vue自身可以检测对象内部值的改变，但Vue提供的watch默认不可以，使用watch时根据数据的具体结构，决定是否采用深度监视</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">numbers</span>: &#123;</span><br><span class="line">            <span class="attr">a</span>: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="attr">numbers</span>: &#123;</span><br><span class="line">            <span class="attr">deep</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="title function_">handler</span>(<span class="params">newVauue, oldVaue</span>) &#123;</span><br><span class="line">                <span class="comment">//传递两个参数--修改前的值和修改后的值</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(newVauue.<span class="property">a</span> + <span class="string">&quot;--&quot;</span> + oldVaue.<span class="property">a</span>)</span><br><span class="line">				<span class="comment">//此处两个a的值一样，猜测实际监听的是numbers对象，对象本身的内存地址没有改变，所以找到的两个a的值是一样的</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">		<span class="comment">//如果监听numbers中的a.此处一定要添加双引号，key值本身就是字符串，平常默认省略。但是此处引了属性值，所以需要加双引号</span></span><br><span class="line">		<span class="string">&quot;numbers.a&quot;</span>:&#123;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>简写形式（如果不需要其他配置项比如deep，immediate）</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">ishot</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">numbers</span>: &#123;</span><br><span class="line">            <span class="attr">a</span>: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="title function_">ishot</span>(<span class="params">newValue, oldVaule</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue + <span class="string">&quot;---&quot;</span> + oldVaule)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>computed和watch之间的区别</strong></p>
<ol>
<li><p>computed能完成的功能，watch都可以完成</p>
</li>
<li><p>watch能完成的功能，computed不一定能完成。例如：watch可以进行异步操作</p>
</li>
</ol>
<p><strong>两个原则</strong></p>
<ol>
<li><p>所被Vue管理的函数，最好写成普通函数，这样this的指向才是vm或组件实例对象</p>
</li>
<li><p>所有不被Vue所管理的函数(定时器的回调函数，ajax的回调函数，Promise的回调函数等)，最好写成箭头函数，这样this的指向才是vm或组件实例对象</p>
</li>
</ol>
<p><strong>如果在某个方法中为对象添加属性：$set(操作对象，要添加的属性，属性值)</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$set(todo,<span class="string">&quot;isEdit&quot;</span>,<span class="literal">true</span>)</span><br></pre></td></tr></table></div></figure>


        <h3 id="10-样式操作">
          <a href="#10-样式操作" class="heading-link"><i class="fas fa-link"></i></a><a href="#10-样式操作" class="headerlink" title="10. 样式操作"></a>10. 样式操作</h3>
      <p><strong>9.1绑定class</strong></p>
<p>三种绑定方式</p>
<ol>
<li>字符串写法–样式类名不确定，需要动态指定</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span> :<span class="keyword">class</span>=<span class="string">&quot;mood&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">firstname</span>: <span class="string">&#x27;张&#x27;</span>,</span><br><span class="line">        <span class="attr">lastname</span>: <span class="string">&quot;三&quot;</span>,</span><br><span class="line">        <span class="attr">mood</span>: <span class="string">&quot;green&quot;</span>	<span class="comment">//green是在css中定义的类名</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>数组写法–要绑定的样式个数不确定，名字也不确定</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span> :<span class="keyword">class</span>=<span class="string">&quot;classArr&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">firstname</span>: <span class="string">&#x27;张&#x27;</span>,</span><br><span class="line">        <span class="attr">lastname</span>: <span class="string">&quot;三&quot;</span>,</span><br><span class="line">        <span class="attr">classArr</span>: [<span class="string">&quot;green&quot;</span>, <span class="string">&quot;bradius&quot;</span>, <span class="string">&quot;bdcolor&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>对象写法–要绑定的样式个数确定，名字确定，但是动态决定是否存在样式</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span> :<span class="keyword">class</span>=<span class="string">&quot;classObj&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">firstname</span>: <span class="string">&#x27;张&#x27;</span>,</span><br><span class="line">        <span class="attr">lastname</span>: <span class="string">&quot;三&quot;</span>,</span><br><span class="line">        <span class="attr">classObj</span>: &#123;</span><br><span class="line">            <span class="string">&quot;green&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">&quot;bradius&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&quot;bdcolor&quot;</span>: <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>9.2绑定style</strong></p>
<ol>
<li>对象形式</li>
</ol>
<p><code>:style=&quot;&#123;fontSize:xxx&#125;&quot;</code>:xxx是动态值</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span> :style=<span class="string">&quot;styleObj&quot;</span>&gt;</span><br><span class="line">    一个例子</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">firstname</span>: <span class="string">&#x27;张&#x27;</span>,</span><br><span class="line">        <span class="attr">lastname</span>: <span class="string">&quot;三&quot;</span>,</span><br><span class="line">        <span class="attr">styleObj</span>: &#123;</span><br><span class="line">            <span class="attr">fontSize</span>: <span class="string">&quot;20px&quot;</span>,</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&quot;blue&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>2.数组形式（用的少）</p>
<p><code>:style=&quot;[a,b]&quot;</code>，a和b都是样式对象</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span> :style=<span class="string">&quot;styleArr&quot;</span>&gt;</span><br><span class="line">    一个例子</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">firstname</span>: <span class="string">&#x27;张&#x27;</span>,</span><br><span class="line">        <span class="attr">lastname</span>: <span class="string">&quot;三&quot;</span>,</span><br><span class="line">        <span class="attr">styleArr</span>: [&#123;</span><br><span class="line">            <span class="attr">fontSize</span>: <span class="string">&quot;20px&quot;</span>,</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&quot;blue&quot;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">backgroundColor</span>: <span class="string">&quot;yellow&quot;</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="11-条件渲染">
          <a href="#11-条件渲染" class="heading-link"><i class="fas fa-link"></i></a><a href="#11-条件渲染" class="headerlink" title="11. 条件渲染"></a>11. 条件渲染</h3>
      <ol>
<li>v-if</li>
</ol>
<p>写法：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v-<span class="keyword">if</span>=<span class="string">&#x27;表达式&#x27;</span></span><br><span class="line"></span><br><span class="line">v-<span class="keyword">else</span>-<span class="keyword">if</span>=<span class="string">&#x27;表达式</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">v-else&#x27;</span></span><br></pre></td></tr></table></div></figure>

<p>适用于：切换频率较低的场景</p>
<p>特点：不展示的DOM元素直接移除</p>
<p>注意：v-if可以喝v-else-if，v-else一起使用，但要求结构不能被打断(结构上需要连在一起)</p>
<p><strong>可以配合template使用，不会打乱页面原有结构</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template v-<span class="keyword">if</span>=<span class="string">&quot;1===1&quot;</span>&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Angular<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>React<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Vue<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>v-show</li>
</ol>
<p>写法：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v-show=<span class="string">&#x27;表达式&#x27;</span></span><br></pre></td></tr></table></div></figure>

<p>适用于：切换频率较高的场景</p>
<p>特点：不展示的DOM元素未被移除，仅仅是使用样式隐藏掉</p>
<p><strong>使用v-if时，元素可能无法获取到，使用v-show一定可以获取到</strong></p>

        <h3 id="12-列表渲染">
          <a href="#12-列表渲染" class="heading-link"><i class="fas fa-link"></i></a><a href="#12-列表渲染" class="headerlink" title="12.列表渲染"></a>12.列表渲染</h3>
      <p>v-for指令</p>
<ol>
<li><p>用于展示列表数据</p>
</li>
<li><p>语法：</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v-<span class="keyword">for</span>=<span class="string">&quot;(item,index) in xxx&quot;</span> :key=<span class="string">&quot;yyy&quot;</span></span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>可遍历：数组，对象，字符串，指定次数</li>
</ol>
<p><strong>关于key：</strong></p>
<p><img src="/2022/04/10/web-vue01/listRender.png"></p>

        <h3 id="13-列表过滤-amp-排序">
          <a href="#13-列表过滤-amp-排序" class="heading-link"><i class="fas fa-link"></i></a><a href="#13-列表过滤-amp-排序" class="headerlink" title="13.列表过滤&amp;排序"></a>13.列表过滤&amp;排序</h3>
      <p>conputed实现过滤：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=<span class="string">&quot;root&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;输入搜索&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;keyWord&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(p,idx) in filData&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;p.id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#123;p.name&#125;&#125;-&#123;&#123;p.age&#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">keyWord</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">personArr</span>: [&#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;001&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;马冬梅&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;002&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;周冬雨&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">19</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;003&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;周杰伦&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;004&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;温兆伦&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">21</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;005&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;温冬周&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">22</span></span><br><span class="line">        &#125;],</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="title function_">filData</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">personArr</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">f</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> f.<span class="property">name</span>.<span class="title function_">indexOf</span>(<span class="variable language_">this</span>.<span class="property">keyWord</span>) !== -<span class="number">1</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>watch实现过滤</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=<span class="string">&quot;root&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;输入搜索&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;keyWord&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(p,idx) in filperson&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;p.id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#123;p.name&#125;&#125;-&#123;&#123;p.age&#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">keyWord</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">personArr</span>: [&#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;001&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;马冬梅&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;002&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;周冬雨&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">19</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;003&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;周杰伦&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;004&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;温兆伦&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">21</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;005&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;温冬周&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">22</span></span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="attr">filperson</span>: []</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="attr">keyWord</span>: &#123;</span><br><span class="line">            <span class="attr">immediate</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="title function_">handler</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">filperson</span> = <span class="variable language_">this</span>.<span class="property">personArr</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">p</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> p.<span class="property">name</span>.<span class="title function_">indexOf</span>(<span class="variable language_">this</span>.<span class="property">keyWord</span>) !== -<span class="number">1</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>



        <h3 id="14-表单数据收集">
          <a href="#14-表单数据收集" class="heading-link"><i class="fas fa-link"></i></a><a href="#14-表单数据收集" class="headerlink" title="14. 表单数据收集"></a>14. 表单数据收集</h3>
      <p>收集表单数据：</p>
<p>若：<code>&lt;input type=&quot;text&quot; v-model=&quot;account&quot;&gt;</code>,则v-model收集的就是value值，用户输入的就是value值</p>
<p>若：<code>&lt;input type=&quot;radio&quot;&gt;</code>，则v-model收集的就是value值，且要给标签配置value值</p>
<p>若：<code>&lt;input type=&quot;checkbox&quot;&gt;</code></p>
<ol>
<li><p>没有配置input的value属性，那么收集的就是checked(是否勾选，true或者false)</p>
</li>
<li><p>配置input的value属性：(1)v-model的初始值是非数组，那么收集的就是checked；(2)v-mode的初始值是数组，那么收集的就是value组成的数组</p>
</li>
</ol>
<p><strong>v-mode的三个修饰符</strong></p>
<ol>
<li>lazy：失去焦点再收集数据</li>
</ol>
<p>number：输入字符串转为有效的数字，搭配<code>input type=&quot;number&quot;</code>使用</p>
<p>trim：输入首尾空格过滤</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span>&gt;</span><br><span class="line">    &lt;form @submit.prevent=&quot;demo&quot;&gt;</span><br><span class="line">        &lt;label for=&quot;acc&quot;&gt;賬號：&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; id=&quot;acc&quot; v-model=&quot;account&quot;&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">        &lt;label for=&quot;pwd&quot;&gt;密碼：&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;password&quot; id=&quot;pwd&quot; v-model=&quot;password&quot;&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">        &lt;label&gt;性別：&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;radio&quot; name=&quot;gender&quot; id=&quot;male&quot; v-model=&quot;sex&quot; value=&quot;male&quot;&gt;&lt;label for=&quot;male&quot;&gt;男&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;radio&quot; name=&quot;gender&quot; id=&quot;female&quot; v-model=&quot;sex&quot; value=&quot;female&quot;&gt;&lt;label for=&quot;female&quot;&gt;女&lt;/label&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">        &lt;label&gt;愛好：&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; id=&quot;study&quot; v-model=&quot;hobby&quot; value=&quot;study&quot;&gt;&lt;label for=&quot;study&quot;&gt;學習&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; id=&quot;game&quot; v-model=&quot;hobby&quot; value=&quot;game&quot;&gt;&lt;label for=&quot;game&quot;&gt;打游戲&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; id=&quot;eat&quot; v-model=&quot;hobby&quot; value=&quot;eat&quot;&gt;&lt;label for=&quot;eat&quot;&gt;吃飯&lt;/label&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">        &lt;label for=&quot;school&quot;&gt;所屬校區：&lt;/label&gt;</span><br><span class="line">        &lt;select name=&quot;shcool&quot; id=&quot;school&quot; v-model=&quot;school&quot;&gt;</span><br><span class="line">            &lt;option value=&quot;beijing&quot;&gt;北京&lt;/option&gt;</span><br><span class="line">            &lt;option value=&quot;shenzhen&quot;&gt;深圳&lt;/option&gt;</span><br><span class="line">            &lt;option value=&quot;shanghai&quot;&gt;上海&lt;/option&gt;</span><br><span class="line">        &lt;/select&gt;</span><br><span class="line">        &lt;br&gt;&lt;br&gt;</span><br><span class="line">        &lt;label for=&quot;others&quot;&gt;其他信息：&lt;/label&gt;</span><br><span class="line">        &lt;textarea name=&quot;&quot; id=&quot;others&quot; v-model=&quot;others&quot;&gt;&lt;/textarea&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">        &lt;input type=&quot;checkbox&quot; id=&quot;agree&quot; v-model=&quot;agree&quot;&gt;&lt;label for=&quot;agree&quot;&gt;閲讀並接受&lt;a href=&quot;www.baidu.com&quot;&gt;《用戶協議》&lt;/a&gt;&lt;/label&gt;&lt;button&gt;提交&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    Vue.config.productionTip = false;</span><br><span class="line">    const vm = new Vue(&#123;</span><br><span class="line">        el: &#x27;#root&#x27;,</span><br><span class="line">        data: &#123;</span><br><span class="line">            account: &#x27;&#x27;,</span><br><span class="line">            password: &#x27;&#x27;,</span><br><span class="line">            sex: &#x27;&#x27;,</span><br><span class="line">            hobby: [],</span><br><span class="line">            school: &#x27;&#x27;,</span><br><span class="line">            others: &#x27;&#x27;,</span><br><span class="line">            agree: &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            demo() &#123;</span><br><span class="line">                console.log(JSON.stringify(this._data))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="15-过滤器">
          <a href="#15-过滤器" class="heading-link"><i class="fas fa-link"></i></a><a href="#15-过滤器" class="headerlink" title="15. 过滤器"></a>15. 过滤器</h3>
      <p><strong>对要显示的数据进行特定格式化后再显示（适用于一些简单逻辑的处理）</strong></p>
<p><strong>语法：</strong></p>
<ol>
<li><p>注册过滤器：<code>Vue.filter(name,callback)</code>或者<code>new Vue&#123;filters:&#123;&#125;&#125;</code></p>
</li>
<li><p>使用过滤器：<code>&#123;&#123;xxx | 过滤器名&#125;&#125;</code>或者<code>v-bind:属性=&quot;xxx | 过滤器名&quot;</code></p>
</li>
</ol>
<p>模板语法：</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 可串联，后一个过滤器的参数是前一个过滤器返回的值 --&gt;</span></span><br><span class="line">&#123;&#123;time | timeFormater(&#x27;YYYY年MM月DD日 HH时mm分ss秒&#x27;) | mySlice&#125;&#125;</span><br></pre></td></tr></table></div></figure>
<p><strong>过滤器也可以接收额外参数，多个过滤器也可以串联；并没有改变原本的数据，是产生新的对应的数据</strong></p>
<p>第一个参数是要处理的数据，第二个参数是过滤器名称，过滤器中可传参，第一个参数固定为管道符前的值。</p>
<p>局部过滤器(只能这一个vm实例使用)：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">time</span>: <span class="number">1650190373778</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">filters</span>: &#123;</span><br><span class="line">        <span class="title function_">timeFormater</span>(<span class="params">value, str = <span class="string">&quot;YYYY-MM-DD HH:mm:ss&quot;</span></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">dayjs</span>(value).<span class="title function_">format</span>(str)</span><br><span class="line">        &#125;,</span><br><span class="line">		 <span class="title function_">mySlice</span>(<span class="params">value</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> value.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">4</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>全局过滤器：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>,<span class="title function_">filter</span>(<span class="string">&#x27;mySlice&#x27;</span>,<span class="keyword">function</span>(<span class="params">value</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> value.<span class="title function_">slice</span>(<span class="number">0</span>,<span class="number">4</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="16-其他内置指令">
          <a href="#16-其他内置指令" class="heading-link"><i class="fas fa-link"></i></a><a href="#16-其他内置指令" class="headerlink" title="16. 其他内置指令"></a>16. 其他内置指令</h3>
      <p><code>v-text</code></p>
<ol>
<li><p>作用：向其所在节点中渲染文本内容</p>
</li>
<li><p>与插值语法的区别：v-text会替换掉节点中的(原本)内容，不会</p>
</li>
</ol>
<p><code>v-html</code></p>
<ol>
<li><p>作用：向指定节点中渲染包含html结构的内容</p>
</li>
<li><p>与插值语法得到区别：</p>
</li>
</ol>
<p>v-html会替换掉节点中所有的内容。则不会</p>
<p>v-html可以识别html结构</p>
<p><font color="red">存在安全性问题，容易导致xss的攻击。一定要在可信的内容上使用v-html，永远不要在用户提交的内容上</font></p>
<p><code>v-cloak</code></p>
<p>没有值</p>
<ol>
<li><p>本质是一个特殊属性，Vue实例创建完毕并接管容器后，会删掉v-cloak属性</p>
</li>
<li><p>使用css配合v-cloak可以解决网速慢时页面展示出的问题</p>
</li>
</ol>
<p><code>v-once</code></p>
<ol>
<li><p>v-once所在节点在初次动态渲染后，就视为静态内容了</p>
</li>
<li><p>以后数据的改变不会引起v-once所在结构的更新，可以用于优化性能</p>
</li>
</ol>
<p><code>v-pre</code></p>
<ol>
<li><p>跳过其所在节点的编译过程</p>
</li>
<li><p>可利用它跳过：没有使用指令语法、没有使用插值语法的节点，会加快编译</p>
</li>
</ol>

        <h3 id="17-自定义指令">
          <a href="#17-自定义指令" class="heading-link"><i class="fas fa-link"></i></a><a href="#17-自定义指令" class="headerlink" title="17. 自定义指令"></a>17. 自定义指令</h3>
      <p>示例</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前的n值是：<span class="tag">&lt;<span class="name">span</span> <span class="attr">v-text</span>=<span class="string">&quot;n&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>放大十倍后的n值是：<span class="tag">&lt;<span class="name">span</span> <span class="attr">v-big</span>=<span class="string">&quot;n&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-fbind</span>=<span class="string">&quot;n&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;n++&quot;</span>&gt;</span>点我+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//全局指令</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;fbind1&#x27;</span>, &#123;</span><br><span class="line">    <span class="comment">//指令与元素成功绑定时(一上来)</span></span><br><span class="line">    <span class="title function_">bind</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">        element.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//指令所在元素被插入页面时</span></span><br><span class="line">    <span class="title function_">inserted</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">        element.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//指令所在的模板被重新解析时</span></span><br><span class="line">    <span class="title function_">update</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">        element.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//局部自定义指令</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">n</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">directives</span>: &#123;</span><br><span class="line">        <span class="comment">//《简写：一个函数》big函数何时会被调用。1.指令与元素成功绑定时  2.指令所在的模板被重新解析时</span></span><br><span class="line">        <span class="title function_">big</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">            <span class="comment">//此处的this是window</span></span><br><span class="line">            element.<span class="property">innerText</span> = binding.<span class="property">value</span> * <span class="number">10</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//《正常写：一个对象》此处的this是window</span></span><br><span class="line">        <span class="attr">fbind</span>: &#123;</span><br><span class="line">            <span class="comment">//指令与元素成功绑定时(一上来)</span></span><br><span class="line">            <span class="title function_">bind</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">                element.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//指令所在元素被插入页面时</span></span><br><span class="line">            <span class="title function_">inserted</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">                element.<span class="title function_">focus</span>()</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//指令所在的模板被重新解析时</span></span><br><span class="line">            <span class="title function_">update</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">                element.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>总结：</strong></p>
<p>一：</p>
<p>局部指令：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">	<span class="attr">directives</span>:&#123;指令名：配置对象&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">	directives&#123;指令名：回调函数&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>函数中有两个参数，element和binding。第一个参数为指令所在模板的元素，第二个参数可用binding.value获取指令的值</strong></p>
<p>全局指令；</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(指令名：配置对象)  或者  <span class="title class_">Vue</span>.<span class="title function_">directive</span>(指令名,回调函数)</span><br></pre></td></tr></table></div></figure>
<p>二：</p>
<p>配置对象中常用的3个回调：</p>
<ol>
<li><p>.bind：指令与元素成功绑定时调用</p>
</li>
<li><p>.inserted：指令所在元素被插入页面时调用</p>
</li>
<li><p>.update：指令所在模板结构被重新解析时调用</p>
</li>
</ol>
<p>三：</p>
<ol>
<li><p>指令定义时不加v-，使用时需要加</p>
</li>
<li><p>指令如果是多个单词，要是用kebab-case的命名方式，不要使用cameCase命名。尽量不要用大写单词</p>
</li>
</ol>

        <h2 id="生命周期">
          <a href="#生命周期" class="heading-link"><i class="fas fa-link"></i></a><a href="#生命周期" class="headerlink" title="生命周期"></a><font color="green">生命周期</font></h2>
      
        <h3 id="1-mounted">
          <a href="#1-mounted" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-mounted" class="headerlink" title="1.mounted"></a>1.mounted</h3>
      <p>Vue完成模板的解析并把初始的真实DOM元素放入页面后（挂载完毕）调用mounted。也就是第一次完成模板解析后调用，后续的模板解析叫做更新，不会调用</p>
<p>生命周期：</p>
<ol>
<li><p>又名：生命周期回调函数、生命周期函数、生命周期钩子</p>
</li>
<li><p>Vue在关键时刻帮我们调用的一些特殊名称的函数</p>
</li>
<li><p>生命周期函数的名字不可更改，但函数的具体内容是程序员根据需求编写的</p>
</li>
<li><p>生命周期函数中的this指向是vm或组件实例函数</p>
</li>
</ol>

        <h3 id="2-常用的生命周期钩子">
          <a href="#2-常用的生命周期钩子" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-常用的生命周期钩子" class="headerlink" title="2. 常用的生命周期钩子"></a>2. 常用的生命周期钩子</h3>
      <ol>
<li><p>mounted：发送ajax请求，启动定时器，绑定自定义事件，订阅消息等【初始化操作】</p>
</li>
<li><p>beforeDestroy：清除定时器，解绑自定义事件，取消订阅消息等【收尾工作】</p>
</li>
</ol>
<p>关于销毁Vue实例</p>
<ol>
<li><p>销毁后借助Vue开发者工具看不到任何信息</p>
</li>
<li><p>销毁后自定义事件会失效，但原生DOM事件依然有效</p>
</li>
<li><p>一般不会在beforeDestroy操作数据，因为即便操作数据，也不会再触发更新流程了，而是直接走向销毁</p>
</li>
</ol>
<p><img src="/2022/04/10/web-vue01/vuelifecycle.png"></p>
<p><strong>有无template属性区别：有template：template中的内容会整个替换掉原html中的元素，包括根节点。且template中根节点只能有一个</strong></p>

        <h1 id="组件化编程">
          <a href="#组件化编程" class="heading-link"><i class="fas fa-link"></i></a><a href="#组件化编程" class="headerlink" title="组件化编程"></a>组件化编程</h1>
      
        <h2 id="理解组件">
          <a href="#理解组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#理解组件" class="headerlink" title="理解组件"></a><font color="green">理解组件</font></h2>
      <p>组件的定义：实现应用中局部功能代码和资源的集合</p>
<p><strong>单文件组件：一个文件中只包含有一个组件</strong></p>
<p><strong>非单文件组件：一个文件中包含有n个组件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">school</span>&gt;</span><span class="tag">&lt;/<span class="name">school</span>&gt;</span></span></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">student</span>&gt;</span><span class="tag">&lt;/<span class="name">student</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">hello</span>&gt;</span><span class="tag">&lt;/<span class="name">hello</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    Vue.config.productionTip = false</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    //创建组件</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    const school = Vue.extend(&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        template: `</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span>&gt;</span>学校名称：</span><span class="template-variable">&#123;&#123;<span class="name">schoolName</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>学校地址：</span><span class="template-variable">&#123;&#123;<span class="name">address</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>`,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        data() &#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            return &#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                schoolName: &#x27;雷亚卢卡利亚&#x27;,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                address: &#x27;利耶尼亚&#x27;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    &#125;)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    const student = Vue.extend(&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        template: `</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span>&gt;</span>学生姓名：</span><span class="template-variable">&#123;&#123;<span class="name">studentName</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>学生年龄：</span><span class="template-variable">&#123;&#123;<span class="name">age</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>`,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        data() &#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            return &#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                studentName: &#x27;拓普斯&#x27;,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                age: 30</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    &#125;)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    const hello = Vue.extend(&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        template: `<span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>你好,</span><span class="template-variable">&#123;&#123;<span class="name">helloname</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span>`,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        data() &#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            return &#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                helloname: &#x27;张三&#x27;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    &#125;)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    //注册组件(全局注册，要注册在所使用的el之前。如果注册的全局组件和局部组件重名，以后一个定义的为准</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    Vue.component(&#x27;hello&#x27;, hello)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    Vue.component(&#x27;school&#x27;, school)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    //注册组件(局部注册)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    new Vue(&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        el: &#x27;#root&#x27;,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        components: &#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            school,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            student</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    &#125;)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p><strong>总结：</strong></p>
<p>Vue中使用组件的三大步骤</p>
<ol>
<li><p>定义组件（创建组件）</p>
<p> 使用Vue.extend(options)创建，其中options和new Vue(options)时传入的哪个options几乎一样，但区别如下：</p>
<p> (1)不用写el属性，因为最终所有的组件都要经过一个vm的管理，由vm中的el决定服务哪个容器</p>
<p> (2)data必须写成函数。避免组件被复用时，数据存在引用关系。</p>
<p> (3)使用template配置组件结构 </p>
</li>
<li><p>注册组件</p>
<p> (1)局部注册：靠new Vue时传入components选项</p>
<p> (2)全局注册：靠Vue.component(‘组件名’,组件)</p>
</li>
<li><p>使用组件</p>
<p> 编写组件标签：<code>&lt;school&gt;&lt;/school&gt;</code></p>
</li>
</ol>
<p><strong>组件命名注意点</strong></p>
<ol>
<li>关于组件名：</li>
</ol>
<p>由一个单词构成时:</p>
<p>(首字母小写):school</p>
<p>(首字母大写)：School</p>
<p>多个单词构成时：</p>
<p>(kebab-case命名)：my-school</p>
<p>(CameCase命名)：MySchool（需要Vue脚手架支持）</p>
<p>其他：</p>
<p>组件名尽可能回避HTML中已有的元素名称，如：h2，H2都不可以；可以使用name配置项指定组件在开发者工具中呈现的名字（不影响使用）</p>
<ol start="2">
<li>关于组件标签</li>
</ol>
<p><school></school></p>
<school>

<p>备注：不用使用脚手架时，<school>会导致后续组件不能渲染</school></p>
<ol start="3">
<li>简写方式：</li>
</ol>
<p><code>const school = Vue.extend(options)</code>可简写为<code>const school = options</code></p>

        <h2 id="VueComponent构造函数">
          <a href="#VueComponent构造函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#VueComponent构造函数" class="headerlink" title="VueComponent构造函数"></a><font color="green">VueComponent构造函数</font></h2>
      <ol>
<li><p>一个组件–school组件本质是一个名为VueComponent的构造函数，且不是程序员定义的，而是Vue.extend生成的。</p>
</li>
<li><p>我们只需要写对应标签<school></school>，Vue解析时会帮我们创建school组件的实例对象。即Vue帮我们执行的：new VueComponent(options)。</p>
</li>
<li><p>特别注意：每次调用Vue.extend，返回得到都是一个全新的VueComponent！</p>
</li>
<li><p>关于this的指向：</p>
</li>
</ol>
<p><strong>(1) 组件配置中：</strong></p>
<p>data函数，methods中的函数，watch中的函数，computed中的函数，它们的this均是【VueComponent实例对象】。因为组件本质是一个名为VueComponent的构造函数，写标签时，Vue解析时会自动执行new VueComponent</p>
<p><strong>(2) new Vue(options)配置中：</strong></p>
<p>data函数，methods中的函数，watch中的函数，computed中的函数，它们的this均是【Vue实例对象】</p>
<ol start="5">
<li>VueComponent的实例对象，也可称之为组件实例对象(vc)</li>
</ol>

        <h3 id="1-重要的内置關係：">
          <a href="#1-重要的内置關係：" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-重要的内置關係：" class="headerlink" title="1. 重要的内置關係："></a>1. 重要的内置關係：</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">VueComponent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span></span><br></pre></td></tr></table></div></figure>

<p>此处VueComponent和Vue都是函数对象。不是实例</p>
<p>即：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vc.<span class="property">__proto__</span>.<span class="property">__proto__</span> === <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span></span><br></pre></td></tr></table></div></figure>

<p>此处vc是VueComponent实例对象，可以直接通过vc访问到Vue.prototype里面的东西</p>
<p><strong>为什么要有这个关系？</strong>&#x3D;&#x3D;》 让组件实例对象(vc)可以访问到Vue原型上的属性，方法</p>
<p>图示：</p>
<p><img src="/2022/04/10/web-vue01/protoRELA.png"></p>
<p><img src="/2022/04/10/web-vue01/vueREvuecomponent.jpg"></p>

        <h2 id="单文件组件">
          <a href="#单文件组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#单文件组件" class="headerlink" title="单文件组件"></a><font color="green">单文件组件</font></h2>
      
        <h3 id="1-创建Vue脚手架">
          <a href="#1-创建Vue脚手架" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-创建Vue脚手架" class="headerlink" title="1.创建Vue脚手架"></a>1.创建Vue脚手架</h3>
      <p><strong>Vue脚手架是Vue官方提供的标准化开发工具</strong></p>
<ol>
<li>全局安装@vue&#x2F;cli</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></div></figure>
<ol start="2">
<li>切换到你要创建项目的目录，然后使用指令创建项目</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create xxx</span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>启动项目</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></div></figure>

<p><strong>注意：有一些版本的脚手架，组件名称命名需要是双驼峰命名，否则可能会报错</strong></p>
<p><strong>脚手架文件结构</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">.文件目录</span><br><span class="line">├── node_modules </span><br><span class="line">├── public</span><br><span class="line">│   ├── favicon.<span class="property">ico</span>: 页签图标</span><br><span class="line">│   └── index.<span class="property">html</span>: 主页面</span><br><span class="line">├── src</span><br><span class="line">│   ├── <span class="attr">assets</span>: 存放静态资源</span><br><span class="line">│   │   └── logo.<span class="property">png</span></span><br><span class="line">│   │── <span class="attr">component</span>: 存放组件</span><br><span class="line">│   │   └── <span class="title class_">HelloWorld</span>.<span class="property">vue</span></span><br><span class="line">│   │── <span class="title class_">App</span>.<span class="property">vue</span>: 汇总所有组件</span><br><span class="line">│   └── main.<span class="property">js</span>: 入口文件</span><br><span class="line">├── .<span class="property">gitignore</span>: git版本管制忽略的配置</span><br><span class="line">├── babel.<span class="property">config</span>.<span class="property">js</span>: babel的配置文件</span><br><span class="line">├── package.<span class="property">json</span>: 应用包配置文件 </span><br><span class="line">├── <span class="variable constant_">README</span>.<span class="property">md</span>: 应用描述文件</span><br><span class="line">└── package-lock.<span class="property">json</span>: 包版本控制文件</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-关于不同版本的Vue：">
          <a href="#2-关于不同版本的Vue：" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-关于不同版本的Vue：" class="headerlink" title="2.关于不同版本的Vue："></a>2.关于不同版本的Vue：</h3>
      <ol>
<li><p>vue.js和vue.runtime.xxx.js的区别：</p>
<p> (1) vue.js是完整版的Vue，包含核心功能和模板解析器</p>
<p> (2)vue.runtime.xxx.js是运行版的Vue，只包含：核心功能，没有模板解析器</p>
</li>
<li><p>因为vue.runtime.xxx.js没有模板解析器，所以不能使用template配置项，需要使用render函数接收到的createElement函数去指定具体内容</p>
</li>
</ol>

        <h3 id="3-修改默认配置">
          <a href="#3-修改默认配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-修改默认配置" class="headerlink" title="3.修改默认配置"></a>3.修改默认配置</h3>
      <p>Vue脚手架隐藏了所有webpack相关的配置，若想查看，执行：<code>vue inspect&gt;output.js</code> <strong>只能查看</strong></p>
<p><strong>项目中有哪些不可以改：</strong></p>
<ol>
<li><p>public路径下的favicon.ico、index.html不可以改</p>
</li>
<li><p>src路径名称不能改</p>
</li>
<li><p>main.js不能改</p>
</li>
</ol>
<p><strong>vue.config.js：</strong>是一个可选的配置文件，如果项目的 (和 package.json 同级的) 根目录中存在这个文件，那么它会被 @vue&#x2F;cli-service 自动加载</p>

        <h3 id="4-ref">
          <a href="#4-ref" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-ref" class="headerlink" title="4.ref"></a>4.ref</h3>
      <p><strong>模板上的指令语法：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>学校名称：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">ref</span> = <span class="string">&quot;title&quot;</span>&gt;</span>学校地址：&#123;&#123;address&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;getSchoolAddressEle&quot;</span>&gt;</span> 点击获取学校地址元素<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>通过ref标签获取该元素</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;SchoolInfo&#x27;</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&#x27;雷亚鲁卡利亚&#x27;</span>,</span><br><span class="line">            <span class="attr">address</span>:<span class="string">&#x27;利耶尼亚&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        <span class="title function_">getSchoolAddressEle</span>(<span class="params"></span>)&#123;</span><br><span class="line">			<span class="comment">//获取真实DOM元素</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">title</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>
<p><strong>可以用在组件标签上，以获取到组件的实例对象</strong></p>
<p><strong><font color="green">总结：</font></strong></p>
<ol>
<li><p>被用来给元素或子组件注册引用信息(id的代替者)</p>
</li>
<li><p>应用在html标签上获取的是真实DOM元素，应用在(子)组件标签上是组件实例对象(vc)</p>
</li>
<li><p>使用方式：</p>
</li>
</ol>
<p>打标识：<code>&lt;h1 ref=&quot;xxx&quot;&gt;&lt;/h1&gt;</code>或者<code>&lt;School ref=&quot;xxx&quot;&gt;&lt;/School&gt;</code></p>
<p>获取：<code>this.$refs.xxx</code></p>

        <h3 id="5-props-属性-配置">
          <a href="#5-props-属性-配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-props-属性-配置" class="headerlink" title="5. props(属性)配置"></a>5. props(属性)配置</h3>
      <p>功能：让组件接收外部传过来的数据</p>
<p>传递数据：App.vue</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	//此处School是组件标签</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">School</span> <span class="attr">name</span>=<span class="string">&quot;雷亚卢卡利亚&quot;</span> <span class="attr">address</span>=<span class="string">&quot;利耶尼亚&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注意：此处发送的数据都是字符串类型的，故不能直接在模板中进行计算。可以在发送时使用指令语法v-bind，将发送的数据成为引号内的内容(表达式)，就可以发送原始数据了</font></strong></p>
<p>如：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	//此处School是组件标签</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">School</span> <span class="attr">name</span>=<span class="string">&quot;雷亚卢卡利亚&quot;</span> <span class="attr">address</span>=<span class="string">&quot;利耶尼亚&quot;</span> <span class="attr">:age</span>=<span class="string">&quot;18&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></div></figure>
<p>因为v-bind指令语法中，引号里的内容是表达式，所以接收数据时就会是原始的数据。</p>
<p>接收数据：School.vue</p>
<p><strong>1. 简单声明接收：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>学校名称：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span> &gt;</span>学校地址：&#123;&#123;address&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>:<span class="string">&#x27;SchoolInfo&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">props</span>:[<span class="string">&quot;name&quot;</span>,<span class="string">&quot;address&quot;</span>],<span class="comment">//简单接收</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p><strong>2. 接收的同时对数据进行类型限制</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>学校名称：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span> &gt;</span>学校地址：&#123;&#123;address&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>:<span class="string">&#x27;SchoolInfo&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">props</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	    <span class="attr">name</span>:<span class="title class_">String</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	    <span class="attr">age</span>:<span class="title class_">Number</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	    <span class="attr">address</span>:<span class="title class_">String</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p>如果接收到的不是对应的数据类型可能会报错</p>
<p><strong>3. 接收的同时对数据进行类型限制+默认值指定+必要性限制</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>:&#123;</span><br><span class="line">    <span class="attr">name</span>:&#123;</span><br><span class="line">        <span class="attr">type</span>:<span class="title class_">String</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">age</span>:&#123;</span><br><span class="line">        <span class="attr">type</span>:<span class="title class_">Number</span>,</span><br><span class="line">        <span class="attr">default</span>:<span class="number">99</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">address</span>:&#123;</span><br><span class="line">        <span class="attr">type</span>:<span class="title class_">String</span>,</span><br><span class="line">  	    <span class="attr">required</span>:<span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>一般required和default不写一起</p>
<p><strong>props是只读的，Vue底层会监测你对props的修改，如果进行了修改，就会发出警告。若业务需求确实需要修改，可以复制props的内容到data中一份，然后去修改data中的数据</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;SchoolInfo&#x27;</span>,</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        <span class="title function_">getSchoolAddressEle</span>(<span class="params"></span>)&#123;</span><br><span class="line">           <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">			<span class="comment">//赋值</span></span><br><span class="line">            <span class="attr">myName</span>:<span class="variable language_">this</span>.<span class="property">name</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">props</span>:&#123;</span><br><span class="line">        <span class="attr">name</span>:&#123;</span><br><span class="line">            <span class="attr">type</span>:<span class="title class_">String</span>,</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>如果传入子组件的function是定义在methods和computed中的方法或计算属性，那么子组件调用此方法时方法内部依然是父组件的this。如果传入子组件的function是定义在data中的方法，那么子组件调用此方法时方法内部是子组件的this</p>
</blockquote>
<p><strong>4. 属性修饰符sync【组件通信方式一种】</strong></p>
<p>可以实现父子组件数据同步</p>
<p>父组件：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123;money&#125;&#125;</span></span><br><span class="line"><span class="language-xml">    子组件</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">:money.sync</span>=<span class="string">&quot;money&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">HelloWorld</span> <span class="keyword">from</span> <span class="string">&#x27;./components/HelloWorld.vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">money</span>:<span class="number">10000</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">HelloWorld</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><code>:money.sync</code>，代表父组件给字符串传递props【money】，自动给当前子组件绑定一个自定义事件【update:money】(此处money是属性名称)</p>
<p>子组件：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$emit(&#x27;update:money&#x27;,money-100)&quot;</span>&gt;</span>减少100<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">div</span>&gt;</span>剩余&#123;&#123;money&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;HelloWorld&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">props</span>: [<span class="string">&#x27;money&#x27;</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- <span class="title class_">Add</span> <span class="string">&quot;scoped&quot;</span> attribute to limit <span class="variable constant_">CSS</span> to <span class="variable language_">this</span> component only --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>触发该自定义事件</p>
<p><strong>5. $attrs</strong></p>
<p>属于组件的一个属性，可以获取到父组件传递过来的props数据</p>
<blockquote>
<p>对于子组件而言，父组件给的数据可以利用$attrs接收，但是需要注意，如果子组件通过props接收的属性，在$attrs属性当中是获取不到的</p>
</blockquote>
<p>父组件：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">HintButton</span> type=<span class="string">&quot;success&quot;</span> icon=<span class="string">&quot;el-icon-delete&quot;</span> size=<span class="string">&quot;mini&quot;</span> title=<span class="string">&quot;提示按钮&quot;</span> /&gt;</span><br></pre></td></tr></table></div></figure>

<p>子组件：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">:title</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">v-bind</span>=<span class="string">&quot;$attrs&quot;</span> &gt;</span> 添加 <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;HintButton&quot;</span>,</span><br><span class="line">  <span class="attr">props</span>:[<span class="string">&quot;title&quot;</span>],</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></div></figure>

<p>或者单个引入：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button :type=<span class="string">&quot;$attrs.type&quot;</span> &gt; 添加 &lt;/el-button&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>6. $listeners</strong></p>
<p>它也是组件实例自身的一个属性，它可以获取到父组件给子组件传递自定义事件</p>
<p>父组件：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">HintButton</span> @click=<span class="string">&quot;aletText&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">aletText</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;abc&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p>子组件：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">:title</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">v-bind</span>=<span class="string">&quot;$attrs&quot;</span> <span class="attr">v-on</span>=<span class="string">&quot;$listeners&quot;</span>&gt;</span> 添加 <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></div></figure>

<p>或者单个引入</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button  @click=<span class="string">&quot;$listeners.click&quot;</span>&gt; 添加 &lt;/el-button&gt;</span><br></pre></td></tr></table></div></figure>



<p><strong>$listeners和$attrs</strong>：它们两者是组件实例的属性，可以获取到父组件给子组件传递props与自定义事件</p>
<p><strong>7. $children&amp;$parent</strong></p>
<p>组件实例自身拥有一个属性$children,可以获取到当前组件中，全部子组件</p>
<p>可以通过$parent属性获取到某一个组件父组件，可以操作父组件的数据与方法</p>

        <h3 id="6-mixin混入">
          <a href="#6-mixin混入" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-mixin混入" class="headerlink" title="6.mixin混入"></a>6.mixin混入</h3>
      <p><strong>功能：可以把多个组件共用的配置提取成一个混入对象</strong></p>
<p>注：混合中如果有data属性，那么：组件已经存在的属性用组件中的，组件不存在mixin存在的属性，mixin会添加。</p>
<p>另外生命周期的方法(如mounted)则组件中的和mixin中的都会执行，优先执行mixin中的</p>
<ol>
<li>创建混合用的js–mixin.js</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mixin = &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">x</span>: <span class="number">100</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;你好啊~混合&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>引入</li>
</ol>
<p><strong>局部混合</strong></p>
<p>StudentInfo.vue</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123;mixin&#125; <span class="keyword">from</span> <span class="string">&quot;../mixin.js&quot;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;StudentInfo&#x27;</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&#x27;拓普斯&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">           </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mixins</span>:[mixin],</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>全局混合</strong></p>
<p>main.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mixin,mixin1 &#125; <span class="keyword">from</span> <span class="string">&#x27;./mixin.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(mixin)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(mixin1)</span><br></pre></td></tr></table></div></figure>


        <h3 id="7-插件">
          <a href="#7-插件" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-插件" class="headerlink" title="7.插件"></a>7.插件</h3>
      <p>功能：用于增强Vue</p>
<p>本质：包含install方法的一个对象。install的第一个参数是Vue(非vm实例对象，是构造vm的函数对象)，第二个以后的参数是插件使用者传递的数据</p>
<ol>
<li>定义插件</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	<span class="title function_">install</span>(<span class="params">Vue,option1,option2</span>)&#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//1. 添加全局过滤器</span></span><br><span class="line">		<span class="title class_">Vue</span>.<span class="title function_">filter</span>(...)</span><br><span class="line">		<span class="comment">//2. 添加全局指令</span></span><br><span class="line">		<span class="title class_">Vue</span>.<span class="title function_">directive</span>(...)</span><br><span class="line">		<span class="comment">//3.配置全局混入</span></span><br><span class="line">		<span class="title class_">Vue</span>.<span class="title function_">mixin</span>(...)</span><br><span class="line">		<span class="comment">//4.添加实例方法</span></span><br><span class="line">		<span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$myMethod</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;...&#125;</span><br><span class="line">		<span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$myProperty</span> = xxxx</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>使用插件</li>
</ol>
<p>main.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plugin <span class="keyword">from</span> <span class="string">&#x27;./plugin.js&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(plugin,<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></div></figure>


        <h3 id="8-scoped样式">
          <a href="#8-scoped样式" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-scoped样式" class="headerlink" title="8. scoped样式"></a>8. scoped样式</h3>
      <p>组件的样式在解析后会全局生效，如果多个组件有相同的样式名称，如(class&#x3D;”demo”)，那么后import会覆盖前import的样式。此时可以使用scoped</p>
<p>作用：让组件的样式在局部生效，防止冲突</p>
<p>写法：<code>&lt;script scoped&gt;&gt;</code></p>

        <h3 id="9-组件化编码">
          <a href="#9-组件化编码" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-组件化编码" class="headerlink" title="9.组件化编码"></a>9.组件化编码</h3>
      <p><strong>顺序</strong></p>
<ol>
<li><p>实现静态组件：抽取组件，使用组件实现静态页面效果</p>
</li>
<li><p>展示动态数据：</p>
<p> 数据的类型，名称是什么</p>
<p> 数据保存在哪个组件</p>
</li>
<li><p>交互：从绑定事件监听开始</p>
</li>
</ol>
<p><strong>組件化编码流程</strong></p>
<ol>
<li><p>拆分静态组件：组件要按照功能点拆分，命名不要与html元素冲突</p>
</li>
<li><p>拆分动态组件：考虑好数据的存放位置，数据是一个组件在用，还是一些组件在用</p>
<p> 1)一个组件在用：放在组件自身即可</p>
<p> 2)一些组件在用：放在它们共同的父组件上（状态提升）</p>
</li>
<li><p>实现交互：从绑定事件开始</p>
</li>
</ol>
<p><strong>props适用于：</strong></p>
<ol>
<li><p>父组件&#x3D;&#x3D;&gt;子组件  通信</p>
</li>
<li><p>子组件&#x3D;&#x3D;&gt; 父组件 通信(要求父先给子一个函数)</p>
</li>
</ol>
<p><strong>使用v-model时要切记：v-model绑定的值不能是props传过来的值，因为props是不可以修改的</strong></p>
<p><strong>props传过来的若是对象类型的值，修改对象中的属性时Vue不会报错，但不推荐这样做</strong></p>

        <h3 id="10-浏览器本地存储">
          <a href="#10-浏览器本地存储" class="heading-link"><i class="fas fa-link"></i></a><a href="#10-浏览器本地存储" class="headerlink" title="10 浏览器本地存储"></a>10 浏览器本地存储</h3>
      <p><strong>存储内容大小一般支持5MB左右（不同浏览器可能不一样）</strong></p>
<p>浏览器端通过<code>Window.sessionStorage</code>和<code>Window.localStorage</code>属性来实现本地存储机制</p>
<p><strong>1.localStorage</strong></p>
<p>localStorage.setItem(key,value)</p>
<p>localStorage.getItem(key)    &#x2F;&#x2F;如果key对应的value获取不到，返回值为null</p>
<p>localStorage.removeItem(key)</p>
<p>localStorage.clear()</p>
<p>即使关闭浏览器也不会清掉</p>
<p><strong>2.SessionStorage</strong></p>
<p>浏览器关闭数据就没了</p>
<p>所有方法和localStorage一样</p>

        <h3 id="9-组件自定义事件">
          <a href="#9-组件自定义事件" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-组件自定义事件" class="headerlink" title="9. 组件自定义事件"></a>9. 组件自定义事件</h3>
      <p><strong>一种组件间通信的方式，适用于：<font color="red">子组件&#x3D;&gt;父组件</font></strong></p>
<p><strong>使用场景：A是父组件，B是子组件，B想给A传数据，那么就要在A中给B绑定自定义事件(事件的回调在A中)</strong></p>
<blockquote>
<p>即父组件定义回调函数，子组件调用</p>
</blockquote>
<p><strong>绑定自定义事件</strong></p>
<ol>
<li><p>在父组件中：<code>&lt;Demo @custevent=&quot;test&quot;/&gt;</code>或者<code>&lt;Demo v-on:custevent=&quot;test&quot;/&gt;</code></p>
</li>
<li><p>在父组件中：</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Demo</span> ref=<span class="string">&quot;demo&quot;</span>/&gt;</span><br><span class="line">...</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">xxx</span>.$on(<span class="string">&quot;custevent&quot;</span>,<span class="variable language_">this</span>.<span class="property">test</span>)<span class="comment">//test是定义在methods中的方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>3.若想让自定义事件只能触发一次，可以使用<code>once</code>修饰符，或者<code>$once</code>方法</p>
<p><strong>触发自定义事件：<code>this.$emit(&quot;custevent&quot;,参数1,参数2...)</code></strong></p>
<p><strong>解绑自定义事件：<code>this.$off(&quot;custevent&quot;)</code>&#x2F;解绑多个：<code>this.$off([&#39;custevent1&#39;,&#39;custevent2&#39;])</code>&#x2F;解绑全部：<code>this.$off()</code></strong></p>
<p><strong>组件上也可以绑定原生DOM事件，需要使用<code>native</code>修饰符，否则被当做是自定义事件</strong></p>
<p><strong><font color="red">注意：通过<code>this.$refs.xxx.$on(&#39;custevent&#39;,回调函数)</code>绑定自定义事件时，回调要么配置在methods中，要么用箭头函数，否则this指向会出问题</font></strong></p>
<p>关于this的指向问题：①谁触发的自定义事件，事件的回调当中的this就是谁(即谁绑定的自定义事件，this就是谁)  ②Vue承诺，如果函数写在methods中并且是普通函数，那么函数的this一定是当前组件的实例对象。<strong>如果1、 2冲突，那么以2为主。</strong></p>

        <h3 id="10全局事件总线（GlobalEventBus）">
          <a href="#10全局事件总线（GlobalEventBus）" class="heading-link"><i class="fas fa-link"></i></a><a href="#10全局事件总线（GlobalEventBus）" class="headerlink" title="10全局事件总线（GlobalEventBus）"></a>10全局事件总线（GlobalEventBus）</h3>
      <p><strong>一种组件间通信的方式，适用于任意组件间通信</strong></p>
<p><strong>1. 安装全局事件总线</strong></p>
<p>main.js：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">    <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$bus</span> = <span class="variable language_">this</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>2. 使用事件总线</strong></p>
<p>接收数据：A组件想接收数据，则在A组件中给$bus绑定自定义事件，事件的回调留在A组件自身</p>
<p>school.vue:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果函数在mounted中写要使用箭头函数，使this指向所在(当前)组件</span></span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$bus</span>.$on(<span class="string">&quot;transdata&quot;</span>,<span class="function">(<span class="params">sname,saddress</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;学生姓名：&quot;</span>,sname)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;学生地址：&quot;</span>,saddress)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//在beforeDestroy中解绑当前组件用到的事件</span></span><br><span class="line"><span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$bus</span>.$off(<span class="string">&quot;transdata&quot;</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p>提供数据：</p>
<p>student.vue：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">dataTransSchool</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$bus</span>.$emit(<span class="string">&quot;transdata&quot;</span>,<span class="variable language_">this</span>.<span class="property">sname</span>,<span class="variable language_">this</span>.<span class="property">saddress</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="11-消息訂閲與發佈">
          <a href="#11-消息訂閲與發佈" class="heading-link"><i class="fas fa-link"></i></a><a href="#11-消息訂閲與發佈" class="headerlink" title="11.消息訂閲與發佈"></a>11.消息訂閲與發佈</h3>
      <p><strong>1. 一种组件间的通信的方式，适用于任意组件间通信</strong></p>
<p><strong>2. 使用步骤</strong></p>
<p><strong>安装库：</strong></p>
<p><code>npm i pubsub-js</code></p>
<p><strong>引入：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pubsub <span class="keyword">from</span> <span class="string">&quot;pubsub-js&quot;</span></span><br></pre></td></tr></table></div></figure>

<p><strong>接收数据：A组件想接收数据，则在A组件中订阅消息，订阅的回调留在A组件自身</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//第一个参数是消息名称，第二个参数是传递的数据。</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">pubid</span> = pubsub.<span class="title function_">subscribe</span>(<span class="string">&quot;hello&quot;</span>,<span class="function">(<span class="params">msgName,data</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;发布了hello消息，hello回调执行,参数：&quot;</span>,msgName,data)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注意：由于pubsub-js是第三方库，不由vue管理，所以如果此处回调写的普通函数，那么this指向是undefined。想要this指向vc，可以写成箭头函数或者函数写在methods中让vue管理函数</font></strong></p>
<p><strong>提供数据：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pubsub.<span class="title function_">publish</span>(<span class="string">&#x27;xxx&#x27;</span>,数据)</span><br></pre></td></tr></table></div></figure>

<p><strong>取消订阅</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">	pubsub.<span class="title function_">unsubscribe</span>(<span class="variable language_">this</span>.<span class="property">pubid</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="12-nextTick">
          <a href="#12-nextTick" class="heading-link"><i class="fas fa-link"></i></a><a href="#12-nextTick" class="headerlink" title="12.$nextTick"></a>12.$nextTick</h3>
      <p><strong>语法：<code>this.$nextTick(回调函数)</code></strong></p>
<p><strong>作用：在下一次DOM更新结束后执行其指定的回调</strong></p>
<p><strong>什么时候用：在修改数据之后，立即使用这个方法，在下次DOM更新(v-for)循环之后，执行延迟回调</strong></p>
<p><strong>可以保证页面中的结构一定是有的，经常和很多插件一起使用【都需要DOM存在】</strong></p>
<p>例如：</p>
<p>例子一：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;a&#125;&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">a</span>=<span class="number">19985</span></span><br><span class="line">    <span class="variable language_">this</span>.$nextTick(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;回调执行&quot;</span>)</span><br><span class="line">     <span class="keyword">debugger</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="green">流程：修改数据a&#x3D;&#x3D;&gt;执行到nextTick，将回调函数存起来&#x3D;&#x3D;&gt;执行页面更新流程&#x3D;&#x3D;&gt;执行nextTick中的回调函数</font></strong></p>
<p>例子二：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.$nextTick(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;回调执行&quot;</span>)</span><br><span class="line">     <span class="keyword">debugger</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="green">流程：执行到nextTick，将回调函数存起来&#x3D;&#x3D;&gt;监测不到需要更新的数据(该次流程(函数内)无数据更新)&#x3D;&#x3D;&gt;执行nextTick中的回调函数</font></strong></p>

        <h1 id="VUE动画">
          <a href="#VUE动画" class="heading-link"><i class="fas fa-link"></i></a><a href="#VUE动画" class="headerlink" title="VUE动画"></a>VUE动画</h1>
      
        <h2 id="动画和过渡效果">
          <a href="#动画和过渡效果" class="heading-link"><i class="fas fa-link"></i></a><a href="#动画和过渡效果" class="headerlink" title="动画和过渡效果"></a><font color="green">动画和过渡效果</font></h2>
      <p>作用：在插入，更新或者移除DOM元素时，在合适的时候给元素添加样式类名</p>
<p>写法：</p>
<ol>
<li><p>准备好样式</p>
<ul>
<li><p>元素进入的样式</p>
<ol>
<li><p>v-enter:进入的起点</p>
</li>
<li><p>v-enter-active：进入过程中</p>
</li>
<li><p>v-enter-to：进入的终点</p>
</li>
</ol>
</li>
<li><p>元素离开的样式</p>
<ol>
<li><p>v-leave：离开的起点</p>
</li>
<li><p>v-leave-active：离开过程中</p>
</li>
<li><p>v-leave-to：离开的终点</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p>使用<code>&lt;transition&gt;包裹要过渡的元素，并配置name属性</code></p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition appear name=<span class="string">&quot;hello&quot;</span>&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>你好啊！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>备注：若有多个元素需要过渡，则需要使用：<code>&lt;transition-group&gt;</code>，且每个元素都要指定<code>key</code>值</li>
</ol>

        <h3 id="1-使用动画">
          <a href="#1-使用动画" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-使用动画" class="headerlink" title="1. 使用动画"></a>1. 使用动画</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow=!isShow&quot;</span>&gt;</span>显示/隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">transition</span> <span class="attr">appear</span> <span class="attr">name</span>=<span class="string">&quot;hello&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>你好啊！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>:<span class="string">&quot;TestAnim&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">isShow</span>:<span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">h1</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">background-color</span>: orange;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">	//此处如果没有指定name，name就是默认的<span class="selector-class">.v-enter-active</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.hello-enter-active</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">animation</span>: testA <span class="number">1s</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.hello-leave-active</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">animation</span>: testA <span class="number">1s</span> reverse;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      </span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="keyword">@keyframes</span> testA&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-tag">from</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">100%</span>);</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-tag">to</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">0px</span>);</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>


        <h3 id="2-使用过渡">
          <a href="#2-使用过渡" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-使用过渡" class="headerlink" title="2.使用过渡"></a>2.使用过渡</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow=!isShow&quot;</span>&gt;</span>显示/隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">transition</span> <span class="attr">appear</span> <span class="attr">name</span>=<span class="string">&quot;hello&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>你好啊！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>:<span class="string">&quot;TestAnim&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">isShow</span>:<span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">h1</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">background-color</span>: orange;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="comment">/* 进入的起点，离开的终点 */</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.hello-enter</span>,<span class="selector-class">.hello-leave-to</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">100%</span>);</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="comment">/* 过渡 */</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.hello-enter-active</span>,<span class="selector-class">.hello-leave-active</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">transition</span>: <span class="number">0.5s</span> linear;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="comment">/* 进入的终点，离开的起点 */</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.hello-enter-to</span>,<span class="selector-class">.hello-leave</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">0</span>);</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>


        <h3 id="3-第三方库">
          <a href="#3-第三方库" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-第三方库" class="headerlink" title="3. 第三方库"></a>3. 第三方库</h3>
      <p>安装</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install animate.<span class="property">css</span> --save</span><br></pre></td></tr></table></div></figure>
<p>使用</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow=!isShow&quot;</span>&gt;</span>显示/隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	  <span class="comment">&lt;!-- name必须要写，是库的类的名；然后是进入以及离开的名称配置 --&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">transition</span> <span class="attr">appear</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">name</span>=<span class="string">&quot;animate__animated animate__bounce&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">enter-active-class</span>=<span class="string">&quot;animate__swing&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">leave-active-class</span>=<span class="string">&quot;animate__backOutUp&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>你好啊！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">/* 此为样式，直接引入即可 */</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="string">&#x27;animate.css&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>:<span class="string">&quot;TestAnim&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">isShow</span>:<span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">h1</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">background-color</span>: orange;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>


        <h1 id="vue中的ajax">
          <a href="#vue中的ajax" class="heading-link"><i class="fas fa-link"></i></a><a href="#vue中的ajax" class="headerlink" title="vue中的ajax"></a>vue中的ajax</h1>
      
        <h2 id="方式一">
          <a href="#方式一" class="heading-link"><i class="fas fa-link"></i></a><a href="#方式一" class="headerlink" title="方式一"></a><font color="green">方式一</font></h2>
      <p>用vue-cli配置代理服务器解决跨域问题：</p>
<p>vue-config-js：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">transpileDependencies</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">devServer</span>: &#123;</span><br><span class="line">        <span class="attr">proxy</span>: <span class="string">&#x27;http://localhost:4000&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>html：</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&quot;http://localhost:8080/students&quot;).then(</span><br><span class="line">    response=&gt;&#123;</span><br><span class="line">      console.log(&quot;请求成功了&quot;,response.data)</span><br><span class="line">    &#125;,error=&gt;&#123;</span><br><span class="line">      console.log(&quot;请求失败了&quot;,error.message)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></div></figure>

<p>页面访问<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost:8080/students%E5%88%B0%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%86%8D%E8%AE%BF%E9%97%AE4000%E7%AB%AF%E5%8F%A3%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%B0%B1%E8%A7%A3%E5%86%B3%E4%BA%86%E8%B7%A8%E5%9F%9F%E7%9A%84%E9%97%AE%E9%A2%98%E3%80%82">http://localhost:8080/students到代理服务器，代理服务器再访问4000端口到服务器，就解决了跨域的问题。</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>注：同源策略只存在浏览器-服务器。服务器-服务器之间没有这种策略</p>
<p>优点：配质检单，请求资源时直接发给前端(8080)即可</p>
<p>缺点：不能配置多个代理，不能灵活的控制请求是否走代理</p>
<p>工作方式：若按照上述配置代理，当请求了前端不存在的资源时，那么该请求会转发给服务器(优先匹配前端资源)</p>

        <h2 id="方式二">
          <a href="#方式二" class="heading-link"><i class="fas fa-link"></i></a><a href="#方式二" class="headerlink" title="方式二"></a><font color="green">方式二</font></h2>
      <p>编写vue.config.js配置具体代理规则(配置多个代理)</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">		<span class="comment">//匹配所有以&quot;/api&quot;开头的请求路径</span></span><br><span class="line">        <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">            <span class="attr">target</span>: <span class="string">&#x27;http://localhost:4000&#x27;</span>,<span class="comment">//代理目标的基础路径</span></span><br><span class="line">            <span class="comment">//去掉路径上的api</span></span><br><span class="line">            <span class="attr">pathRewrite</span>: &#123; <span class="string">&#x27;^/api&#x27;</span>: <span class="string">&quot;&quot;</span> &#125;,</span><br><span class="line">            <span class="comment">//用于支持webspcket</span></span><br><span class="line">            <span class="attr">ws</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//用于控制请求头中的host值</span></span><br><span class="line">            <span class="attr">changeOrigin</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">		<span class="comment">//匹配所有以&quot;/demo&quot;开头的请求路径</span></span><br><span class="line">        <span class="string">&#x27;/demo&#x27;</span>: &#123;</span><br><span class="line">            <span class="attr">target</span>: <span class="string">&#x27;http://localhost:5001&#x27;</span>,</span><br><span class="line">            <span class="comment">//去掉路径上的api</span></span><br><span class="line">            <span class="attr">pathRewrite</span>: &#123; <span class="string">&#x27;^/demo&#x27;</span>: <span class="string">&quot;&quot;</span> &#125;,</span><br><span class="line">            <span class="comment">//用于支持webspcket</span></span><br><span class="line">            <span class="attr">ws</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//用于控制请求头中的host值,如果为true，和请求的host保持一致，否则就是原来的host</span></span><br><span class="line">            <span class="attr">changeOrigin</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	changeOrigin为true时，服务器收到的请求头中的host为：localhost:5000</span></span><br><span class="line"><span class="comment">	changeOrigin为false时，服务器收到的请求头中的host为：localhost:8080</span></span><br><span class="line"><span class="comment">	changeOrigin默认值为true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></div></figure>

<p>html：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getStudents</span>(<span class="params"></span>)&#123;</span><br><span class="line">  axios.<span class="title function_">get</span>(<span class="string">&quot;http://localhost:8080/api/students&quot;</span>).<span class="title function_">then</span>(</span><br><span class="line">    <span class="function"><span class="params">response</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求成功了&quot;</span>,response.<span class="property">data</span>)</span><br><span class="line">    &#125;,<span class="function"><span class="params">error</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求失败了&quot;</span>,error.<span class="property">message</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">getCars</span>(<span class="params"></span>)&#123;</span><br><span class="line">  axios.<span class="title function_">get</span>(<span class="string">&quot;http://localhost:8080/demo/cars&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">response</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求成功了&quot;</span>,response.<span class="property">data</span>)</span><br><span class="line">  &#125;,<span class="function"><span class="params">error</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求失败了&quot;</span>,error.<span class="property">message</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>优点：可以配置多个代理，且可以灵活的控制请求是否走代理</p>
<p>缺点：配置略繁琐，请求资源时必须加前缀</p>

        <h2 id="插槽">
          <a href="#插槽" class="heading-link"><i class="fas fa-link"></i></a><a href="#插槽" class="headerlink" title="插槽"></a><font color="green">插槽</font></h2>
      <ol>
<li><p>作用：让父组件可以向子组件指定位置插入html结构，也是一种组件间通信的方式，适用于父组件&#x3D;&#x3D;&#x3D;&gt;子组件</p>
</li>
<li><p>分类：默认插槽、具名插槽、作用域插槽</p>
</li>
<li><p>使用方式：</p>
</li>
</ol>

        <h3 id="1-默认插槽">
          <a href="#1-默认插槽" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-默认插槽" class="headerlink" title="1. 默认插槽"></a>1. 默认插槽</h3>
      <p><strong>父组件：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">CateGory</span>&gt;</span><br><span class="line"></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>html结构<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">CateGory</span>/&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p><strong>子组件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="comment">&lt;!-- 定义插槽 --&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">slot</span>&gt;</span>默认插槽内容(如果父组件的标签内没有内容，默认显示这些)<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-具名插槽">
          <a href="#2-具名插槽" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-具名插槽" class="headerlink" title="2. 具名插槽"></a>2. 具名插槽</h3>
      <p><strong>父组件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">CateGory</span>&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">div</span>&gt;</span>html结构<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">div</span>&gt;</span>html结构<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">CateGory</span>/&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p><strong>子组件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="comment">&lt;!-- 定义插槽 --&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;center&quot;</span>&gt;</span>插槽默认内容...<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>插槽默认内容...<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-作用域插槽">
          <a href="#3-作用域插槽" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-作用域插槽" class="headerlink" title="3. 作用域插槽"></a>3. 作用域插槽</h3>
      <p>理解：数据在组件自身，但根据数据生成的结构需要组件的使用者决定。(games数据再Category组件中，但是用数据所遍历出来的结构由APP组件决定)</p>
<p><strong>父组件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">CateGory</span>&gt;</span><br><span class="line">	&lt;!-- scopeData可以随意命名 --&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">scope</span>=<span class="string">&quot;scopeData&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="comment">&lt;!-- 生成的是ul列表 --&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;g in scopeData.games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g&quot;</span>&gt;</span>&#123;&#123;g&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">CateGory</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">CateGory</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scopeData&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="comment">&lt;!-- 生成的是h4标题 --&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">h4</span> <span class="attr">v-for</span>=<span class="string">&quot;g in scopeData.games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g&quot;</span>&gt;</span>&#123;&#123;g&#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">CateGory</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>如果子组件定义了多个插槽，那么都是在scopeData中取即可</p>
<p><strong>子组件中</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;diiv&gt;</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">:games</span>=<span class="string">&quot;games&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="attr">name</span>:<span class="string">&quot;CateGory&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="comment">//数据在子组件自身</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">games</span>:[<span class="string">&#x27;艾尔登法环&#x27;</span>,<span class="string">&#x27;GTA5&#x27;</span>,<span class="string">&#x27;怪物猎人&#x27;</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h1 id="VUEX">
          <a href="#VUEX" class="heading-link"><i class="fas fa-link"></i></a><a href="#VUEX" class="headerlink" title="VUEX"></a>VUEX</h1>
      
        <h2 id="是什么">
          <a href="#是什么" class="heading-link"><i class="fas fa-link"></i></a><a href="#是什么" class="headerlink" title="是什么"></a><font color="green">是什么</font></h2>
      <p><strong>1. 概念：专门在Vue中实现集中式状态(数据)管理的一个Vue插件，对Vue应用中多个组件的共享状态进行集中式的管理(读&#x2F;写)，也是一种组件间通信的方式，且适用于任意组件间通信</strong></p>
<p><strong>2.Github地址：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://github.com/vuejs/vuex">https://github.com/vuejs/vuex</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></strong></p>

        <h2 id="什么时候使用">
          <a href="#什么时候使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#什么时候使用" class="headerlink" title="什么时候使用"></a><font color="green">什么时候使用</font></h2>
      <p><strong>1. 多个组件依赖于同一状态(数据)</strong></p>
<p><strong>2. 来自不同组件的行为需要变更同一状态</strong></p>
<p>即共享</p>

        <h2 id="搭建vuex环境">
          <a href="#搭建vuex环境" class="heading-link"><i class="fas fa-link"></i></a><a href="#搭建vuex环境" class="headerlink" title="搭建vuex环境"></a><font color="green">搭建vuex环境</font></h2>
      <p><strong>1. 创建文件<code>src/store/index.js</code></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该文件用于创建Vuex中最为核心的store</span></span><br><span class="line"><span class="comment">//引入vue</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="comment">//引入Vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//应用Vuex插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备actions--用于响应组件中的动作</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备mutations--用于操作数据(state)</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备state--用于存储数据</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并导出store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    actions,</span><br><span class="line">    mutations,</span><br><span class="line">    state</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>注意，脚手架会先扫描文件中的import关键字按顺序执行，所以import即使放在语句下面也会优先执行</strong></p>
<p><strong>2. 在<code>main.js</code>中创建vm时传入store配置项</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store/index&quot;</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">    store,</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h2 id="基本使用">
          <a href="#基本使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#基本使用" class="headerlink" title="基本使用"></a><font color="green">基本使用</font></h2>
      <p><strong>1. 初始化数据，配置actions、配置mutations、操作文件store.js</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该文件用于创建Vuex中最为核心的store</span></span><br><span class="line"><span class="comment">//引入Vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="comment">//引入vue</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//应用Vuex插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备actions--用于响应组件中的动作</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">    <span class="title function_">jiaOdd</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (context.<span class="property">state</span>.<span class="property">sum</span> % <span class="number">2</span>) &#123;</span><br><span class="line">            context.<span class="title function_">commit</span>(<span class="string">&quot;JIAODD&quot;</span>, value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">jiaWait</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            context.<span class="title function_">commit</span>(<span class="string">&quot;JIAWAIT&quot;</span>, value)</span><br><span class="line">        &#125;, <span class="number">500</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备mutations--用于操作数据(state)</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">    <span class="title function_">JIA</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">        state.<span class="property">sum</span> += value</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">JIAN</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">        state.<span class="property">sum</span> -= value</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">JIAODD</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">        state.<span class="property">sum</span> += value</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">JIAWAIT</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">        state.<span class="property">sum</span> += value</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备state--用于存储数据</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">    <span class="attr">sum</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并导出store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    actions,</span><br><span class="line">    mutations,</span><br><span class="line">    state</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>2. 组件中读取vuex中的数据：<code>$store.state.sum</code></strong></p>
<p><strong>3. 组件中修改vuex中的数据：<code>$store.dispatch(&quot;action中的方法名&quot;,数据)</code>或者<code>$store.commit(&quot;mutation中的方法名&quot;,数据)</code></strong></p>
<p>注：如果没有网络请求或其他业务逻辑，组件中也可以越过actions，即不写dispatch，直接编写commit</p>

        <h2 id="getters的使用">
          <a href="#getters的使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#getters的使用" class="headerlink" title="getters的使用"></a><font color="green">getters的使用</font></h2>
      <ol>
<li><p>概念：当state中的数据需要经过加工后再使用时，可以使用getters加工</p>
</li>
<li><p>在<code>store.js</code>中追加getters配置</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备getters--用于将state中的数据进行加工</span></span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">		<span class="comment">//需要一个返回值</span></span><br><span class="line">        <span class="title function_">bigSum</span>(<span class="params">state</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> state.<span class="property">sum</span> * <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//创建并导出store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    actions,</span><br><span class="line">    mutations,</span><br><span class="line">    state,</span><br><span class="line">    getters</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>组件中读取数据：<code>$store.getters.bigSum</code></li>
</ol>

        <h2 id="四个map方法的使用">
          <a href="#四个map方法的使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#四个map方法的使用" class="headerlink" title="四个map方法的使用"></a><font color="green">四个map方法的使用</font></h2>
      <p><strong>组件引入：<code>import &#123;mapGetters, mapState&#125; from &quot;vuex&quot;</code></strong></p>

        <h3 id="1-mapState方法：用于帮助我们映射state中的数据为计算属性">
          <a href="#1-mapState方法：用于帮助我们映射state中的数据为计算属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-mapState方法：用于帮助我们映射state中的数据为计算属性" class="headerlink" title="1.mapState方法：用于帮助我们映射state中的数据为计算属性"></a>1.mapState方法：用于帮助我们映射state中的数据为计算属性</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line">    <span class="comment">//此处sum是字符串，因为要找的是key值，如果不加引号就会是变量</span></span><br><span class="line">    <span class="comment">//借助mapState生成计算属性，从state中读取数据，(对象写法)</span></span><br><span class="line">    <span class="comment">// ...mapState(&#123;he:&#x27;sum&#x27;,xuexiao:&quot;school&quot;,xueke:&quot;subject&quot;&#125;),</span></span><br><span class="line">    <span class="comment">//借助mapState生成计算属性，从state中读取数据，数组写法</span></span><br><span class="line">    ...<span class="title function_">mapState</span>([<span class="string">&#x27;sum&#x27;</span>,<span class="string">&#x27;school&#x27;</span>,<span class="string">&#x27;subject&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>使用：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">和：&#123;&#123;he&#125;&#125;,学校:&#123;&#123;xuexiao&#125;&#125;,学科：&#123;&#123;xueke&#125;&#125;,</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">&#123;&#123;sum&#125;&#125;,&#123;&#123;school&#125;&#125;,&#123;&#123;subject&#125;&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-mapGetters方法：用于帮助我们映射getters中的数据为计算属性">
          <a href="#2-mapGetters方法：用于帮助我们映射getters中的数据为计算属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-mapGetters方法：用于帮助我们映射getters中的数据为计算属性" class="headerlink" title="2.mapGetters方法：用于帮助我们映射getters中的数据为计算属性"></a>2.mapGetters方法：用于帮助我们映射getters中的数据为计算属性</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line">    <span class="comment">// 借助mapGetters生成计算属性，从getters中读取数据，对象写法</span></span><br><span class="line">    <span class="comment">// ...mapGetters(&#123;bigSum:&quot;bigSum&quot;&#125;),</span></span><br><span class="line">    <span class="comment">// 借助mapGetters生成计算属性，从getters中读取数据，数组写法</span></span><br><span class="line">    ...<span class="title function_">mapGetters</span>([<span class="string">&#x27;bigSum&#x27;</span>])</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-mapActions方法：用于帮助我们生成与actions对话的方法，即包含-store-dispatch-xxx-的函数">
          <a href="#3-mapActions方法：用于帮助我们生成与actions对话的方法，即包含-store-dispatch-xxx-的函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-mapActions方法：用于帮助我们生成与actions对话的方法，即包含-store-dispatch-xxx-的函数" class="headerlink" title="3. mapActions方法：用于帮助我们生成与actions对话的方法，即包含$store.dispatch(xxx)的函数"></a>3. mapActions方法：用于帮助我们生成与actions对话的方法，即包含<code>$store.dispatch(xxx)</code>的函数</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line"> 	<span class="comment">//对象写法</span></span><br><span class="line">    <span class="comment">//借助mapActions生成对应的方法，方法中会调用dispatch去联系actions</span></span><br><span class="line">    ...<span class="title function_">mapActions</span>(&#123;<span class="string">&quot;incrementOdd&quot;</span>:<span class="string">&quot;jiaOdd&quot;</span>,<span class="string">&quot;incrementWait&quot;</span>:<span class="string">&quot;jiaWait&quot;</span>&#125;),</span><br><span class="line">    <span class="comment">//数组写法</span></span><br><span class="line">    <span class="comment">// ...mapActions([&quot;jiaOdd&quot;,&quot;jiaWait&quot;])</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-mapMutations方法：用于帮助我们生产与mutations对话的方法，即包含-store-commit-xxx-的函数">
          <a href="#4-mapMutations方法：用于帮助我们生产与mutations对话的方法，即包含-store-commit-xxx-的函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-mapMutations方法：用于帮助我们生产与mutations对话的方法，即包含-store-commit-xxx-的函数" class="headerlink" title="4. mapMutations方法：用于帮助我们生产与mutations对话的方法，即包含$store.commit(xxx)的函数"></a>4. mapMutations方法：用于帮助我们生产与mutations对话的方法，即包含<code>$store.commit(xxx)</code>的函数</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="comment">//借助mapMutations生成对应的方法，方法中会调用commit去联系mutations</span></span><br><span class="line">    ...<span class="title function_">mapMutations</span>(&#123;<span class="string">&quot;increment&quot;</span>:<span class="string">&quot;JIA&quot;</span>,<span class="string">&quot;decrement&quot;</span>:<span class="string">&quot;JIAN&quot;</span>&#125;),</span><br><span class="line">    <span class="comment">//数组写法</span></span><br><span class="line">    <span class="comment">// ...mapMutations([&quot;JIA&quot;,&quot;JIAN&quot;]),</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>&#x3D;&#x3D;&#x3D;&gt;实际生成</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">increment</span>(<span class="params">value</span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&quot;JIA&quot;</span>,value)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">decrement</span>(<span class="params">value</span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&quot;JIAN&quot;</span>,value)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>所以在模板中绑定事件时应该传好值，不传默认是event。</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment(n)&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;decrement(n)&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>也可以在方法中调用时传值：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line"></span><br><span class="line">	<span class="title function_">fun1</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="title function_">increment</span>(<span class="variable language_">this</span>.<span class="property">n</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="模块化-命名空间">
          <a href="#模块化-命名空间" class="heading-link"><i class="fas fa-link"></i></a><a href="#模块化-命名空间" class="headerlink" title="模块化+命名空间"></a><font color="green">模块化+命名空间</font></h2>
      <p><strong>目的：让代码更好维护，让多种数据分类更加明确</strong></p>
<ol>
<li>修改<code>store.js</code></li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该文件用于创建Vuex中最为核心的store</span></span><br><span class="line"><span class="comment">//引入Vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="comment">//引入vue</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//应用Vuex插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//计数相关</span></span><br><span class="line"><span class="keyword">const</span> countAbout = &#123;</span><br><span class="line">    <span class="attr">namespaced</span>: <span class="literal">true</span>, <span class="comment">//开启命名空间</span></span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">sum</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">school</span>: <span class="string">&quot;雷亚卢卡利亚&quot;</span>,</span><br><span class="line">        <span class="attr">subject</span>: <span class="string">&quot;起源&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        <span class="title function_">jiaOdd</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (context.<span class="property">state</span>.<span class="property">sum</span> % <span class="number">2</span>) &#123;</span><br><span class="line">                context.<span class="title function_">commit</span>(<span class="string">&quot;JIAODD&quot;</span>, value)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">jiaWait</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                context.<span class="title function_">commit</span>(<span class="string">&quot;JIAWAIT&quot;</span>, value)</span><br><span class="line">            &#125;, <span class="number">500</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="title function_">JIA</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">            state.<span class="property">sum</span> += value</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">JIAN</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">            state.<span class="property">sum</span> -= value</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">JIAODD</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">            state.<span class="property">sum</span> += value</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">JIAWAIT</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">            state.<span class="property">sum</span> += value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getters</span>: &#123;</span><br><span class="line">        <span class="title function_">bigSum</span>(<span class="params">state</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> state.<span class="property">sum</span> * <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//人员相关</span></span><br><span class="line"><span class="keyword">const</span> personAbout = &#123;</span><br><span class="line">    <span class="attr">namespaced</span>: <span class="literal">true</span>, <span class="comment">//开启命名空间</span></span><br><span class="line">    <span class="attr">state</span>: &#123; <span class="attr">personlist</span>: [&#123; <span class="attr">id</span>: <span class="string">&quot;001&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span> &#125;] &#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        <span class="title function_">addwang</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (value.<span class="property">name</span>.<span class="title function_">indexOf</span>(<span class="string">&quot;王&quot;</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">                context.<span class="title function_">commit</span>(<span class="string">&quot;ADDWANG&quot;</span>, value)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">alert</span>(<span class="string">&quot;需要姓王&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="title function_">ADD_PERSON</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">            state.<span class="property">personlist</span>.<span class="title function_">unshift</span>(value)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">ADDWANG</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">            state.<span class="property">personlist</span>.<span class="title function_">unshift</span>(value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">	<span class="attr">getters</span>:&#123;</span><br><span class="line">		<span class="title function_">firstPersonName</span>(<span class="params"></span>)&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="string">&quot;abc&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并导出store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">        countAbout,</span><br><span class="line">        personAbout</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>开启命名空间后，组件中读取state数据</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一  直接读取</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">personAbout</span>.<span class="property">personlist</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//借助mapState读取</span></span><br><span class="line">...<span class="title function_">mapState</span>(<span class="string">&quot;countAbout&quot;</span>,[<span class="string">&#x27;sum&#x27;</span>,<span class="string">&#x27;school&#x27;</span>,<span class="string">&#x27;subject&#x27;</span>])</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>开启命名空间后，组件中读取getters数据：</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一：直接读取</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>[<span class="string">&quot;personAbout/firstPersonName&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">//方式二：借助mapGetters读取</span></span><br><span class="line">...<span class="title function_">mapGetters</span>(<span class="string">&quot;countAbout&quot;</span>,[<span class="string">&quot;bigSum&quot;</span>])</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ol start="4">
<li>开启命名空间后，组件中调用dispatch</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一：直接使用dispatch</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&quot;personAbout/addwang&quot;</span>,person)</span><br><span class="line"><span class="comment">//方式二：借助mapActions</span></span><br><span class="line">...<span class="title function_">mapActions</span>(<span class="string">&quot;countAbout&quot;</span>,&#123;<span class="string">&quot;countAbout&quot;</span>:<span class="string">&quot;jiaOdd&quot;</span>,<span class="string">&quot;incrementWait&quot;</span>:<span class="string">&quot;jiaWait&quot;</span>&#125;)</span><br></pre></td></tr></table></div></figure>

<ol start="5">
<li>开启命名空间后，组件中调用commit</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一：直接使用commit</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&quot;personAbount/ADD_PERSON&quot;</span>,person)</span><br><span class="line"><span class="comment">//方式二：借助mapMutations</span></span><br><span class="line">...<span class="title function_">mapMutations</span>(<span class="string">&quot;countAbout&quot;</span>,&#123;<span class="attr">increment</span>:<span class="string">&quot;JIA&quot;</span>,<span class="attr">decrement</span>:<span class="string">&quot;JIAN&quot;</span>&#125;)</span><br></pre></td></tr></table></div></figure>


        <h1 id="路由">
          <a href="#路由" class="heading-link"><i class="fas fa-link"></i></a><a href="#路由" class="headerlink" title="路由"></a>路由</h1>
      <p>定义：</p>
<ol>
<li><p>路由就是一组key-value的对应关系</p>
</li>
<li><p>多个路由，需要经过路由器的管理</p>
</li>
</ol>

        <h2 id="vue-router">
          <a href="#vue-router" class="heading-link"><i class="fas fa-link"></i></a><a href="#vue-router" class="headerlink" title="vue-router"></a><font color="green">vue-router</font></h2>
      
        <h3 id="1-SPA">
          <a href="#1-SPA" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-SPA" class="headerlink" title="1. SPA"></a>1. SPA</h3>
      <ol>
<li><p>单页面WEB应用(single page web application,SPA)</p>
</li>
<li><p>整个应用只有一个完整的页面</p>
</li>
<li><p>点击页面中的导航链接不会刷新页面，只会做页面的局部刷新</p>
</li>
<li><p>数据需要通过ajax请求获取</p>
</li>
</ol>

        <h3 id="2-路由-vue-router">
          <a href="#2-路由-vue-router" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-路由-vue-router" class="headerlink" title="2. 路由(vue-router)"></a>2. 路由(vue-router)</h3>
      <p>vue-router是vue的一个插件库，专门用来实现SPA应用</p>
<p><strong>什么是路由</strong></p>
<ol>
<li><p>一个路由就是一组映射关系(key-value)</p>
</li>
<li><p>key为路径，value可能是function或者component</p>
</li>
</ol>
<p><strong>路由分类</strong></p>
<ol>
<li><p>后端路由</p>
<p> 理解：value是function，用于处理客户端提交的请求</p>
<p> 工作过程：服务器接收到一个请求时，根据请求路径找到匹配的函数来处理请求，返回响应数据</p>
</li>
<li><p>前端路由</p>
<p> 理解：value 是component，用于展示页面的内容</p>
<p> 工作过程：当浏览器的路径改变时，对应的组件就会显示</p>
</li>
<li><p>基本使用</p>
</li>
</ol>
<p>(1) 安装vue-router，命令<code>npm i vue-router</code></p>
<p>(2) 应用插件：<code>Vue.use(VueRouter)</code></p>
<p>main.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">//引入</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span></span><br><span class="line"><span class="comment">//引入路由器</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router/index&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">    <span class="attr">router</span>: router</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></div></figure>

<p>(3) 编写router配置项。src-router-index.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该文件专门用于创建整个应用的路由器</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span></span><br><span class="line"><span class="comment">//引入路由组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AboutInfo</span> <span class="keyword">from</span> <span class="string">&quot;../components/AboutInfo&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HomeInfo</span> <span class="keyword">from</span> <span class="string">&quot;../components/HomeInfo&quot;</span></span><br><span class="line"><span class="comment">//创建并暴露一个路由器，管理一组一组的路由规则</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: [&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">AboutInfo</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">HomeInfo</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>(4)实现切换(active-class可以配置高亮样式)</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>(5)指定展示位置</p>
<p><code>&lt;router-view&gt;&lt;/router-view&gt;</code></p>
<p><strong>注意点：</strong></p>
<ol>
<li><p>路由组件通常放在pages文件夹，一般組通常存放在components文件夹</p>
</li>
<li><p>通过切换，“隐藏”了的路由组件，默认是被销毁的，需要的时候再去挂载</p>
</li>
<li><p>每个组件都有自己的<code>$route</code>属性，里面存储着自己的路由信息</p>
</li>
<li><p>整个应用只有一个router，可以通过组件的<code>$router</code>属性获取到</p>
</li>
<li><p><strong>$route和data中的属性平级，所以watch监听路由<code>$route</code>时不用加this</strong></p>
</li>
</ol>

        <h3 id="2-嵌套路由-多级路由">
          <a href="#2-嵌套路由-多级路由" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-嵌套路由-多级路由" class="headerlink" title="2. 嵌套路由(多级路由)"></a>2. 嵌套路由(多级路由)</h3>
      <ol>
<li>配置路由规则，使用children配置项</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: [&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">AboutInfo</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">HomeInfo</span>,</span><br><span class="line">        <span class="attr">children</span>: [&#123;</span><br><span class="line">            <span class="comment">//子级在内部遍历时自动加入/，所以此处不需要加/符号了(加/会不生效)</span></span><br><span class="line">            <span class="attr">path</span>: <span class="string">&quot;message&quot;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">MessageInfo</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&quot;news&quot;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">NewsInfo</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注意：子级的path不要加<code>/</code></font></strong></p>
<ol start="2">
<li>跳转：(要写完整路径)</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link <span class="keyword">class</span>=<span class="string">&quot;list-group-item active&quot;</span> to=<span class="string">&quot;/home/news&quot;</span>&gt;<span class="title class_">News</span>&lt;/router-link&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-路由的query參數">
          <a href="#3-路由的query參數" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-路由的query參數" class="headerlink" title="3. 路由的query參數"></a>3. 路由的query參數</h3>
      <ol>
<li>傳遞參數：</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;m in messageList&quot;</span> <span class="attr">:key</span> = <span class="string">&quot;m.id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            </span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- 跳转路由并携带query参数，to的字符串写法 --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- &lt;router-link :to=&quot;`/home/message/detail?id=$&#123;m.id&#125;&amp;title=$&#123;m.title&#125;`&quot;&gt;&#123;&#123;m.title&#125;&#125;&lt;/router-link&gt;&amp;nbsp;&amp;nbsp; --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- 跳转路由并携带query参数，to的对象写法 --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span>  <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">            path:&#x27;/home/message/detail&#x27;,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">            query:&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">                id:m.id,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">                title:m.title</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">            &#125;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        &#125;&quot;</span>&gt;</span>&#123;&#123;m.title&#125;&#125;<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>接收參數：</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> &lt;ul&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>消息编号：&#123;&#123;$route.query.id&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>消息标题：&#123;&#123;$route.query.title&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-命名路由">
          <a href="#4-命名路由" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-命名路由" class="headerlink" title="4. 命名路由"></a>4. 命名路由</h3>
      <ol>
<li><p>作用：可以简化路由的跳转</p>
</li>
<li><p>如何使用</p>
</li>
</ol>
<ul>
<li>给路由命名</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: [&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">AboutInfo</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">HomeInfo</span>,</span><br><span class="line">        <span class="attr">children</span>: [&#123;</span><br><span class="line">            <span class="comment">//子级在内部遍历时自动加入/，所以此处不需要加/符号了</span></span><br><span class="line">            <span class="attr">path</span>: <span class="string">&quot;message&quot;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">MessageInfo</span>,</span><br><span class="line">            <span class="attr">children</span>: [&#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&quot;xiangxi&quot;</span>,</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&quot;detail&quot;</span>,</span><br><span class="line">                <span class="attr">component</span>: <span class="title class_">DetailInfo</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&quot;news&quot;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">NewsInfo</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ul>
<li>简化跳转</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link  :to=<span class="string">&quot;&#123;</span></span><br><span class="line"><span class="string">    name:&#x27;xiangxi&#x27;,</span></span><br><span class="line"><span class="string">    query:&#123;</span></span><br><span class="line"><span class="string">        id:m.id,</span></span><br><span class="line"><span class="string">        title:m.title</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;&quot;</span>&gt;&#123;&#123;m.<span class="property">title</span>&#125;&#125;&lt;/router-link&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="5-params参数">
          <a href="#5-params参数" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-params参数" class="headerlink" title="5. params参数"></a>5. params参数</h3>
      <ol>
<li>配置路由时，声明接收params参数</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: [&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">AboutInfo</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">HomeInfo</span>,</span><br><span class="line">        <span class="attr">children</span>: [&#123;</span><br><span class="line">            <span class="comment">//子级在内部遍历时自动加入/，所以此处不需要加/符号了</span></span><br><span class="line">            <span class="attr">path</span>: <span class="string">&quot;message&quot;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">MessageInfo</span>,</span><br><span class="line">            <span class="attr">children</span>: [&#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&quot;xiangxi&quot;</span>,</span><br><span class="line">				<span class="comment">//使用占位符声明接收params参数</span></span><br><span class="line">                <span class="attr">path</span>: <span class="string">&quot;detail/:id/:title&quot;</span>,</span><br><span class="line">                <span class="attr">component</span>: <span class="title class_">DetailInfo</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&quot;news&quot;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">NewsInfo</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注：如果在路径上使用了占位符但是实际没有传递params参数的话，路径跳转回出现问题，比如此处不显示detail路径，解决方式是加个问号<code>path: &quot;detail/:id?/:title?&quot;</code>,代表可传可不传递</font></strong></p>
<p><strong><font color="red">注：如果加了问号后传递的是空字符串，那么也会有路径不显示问题(detail不显示)，解决方式，空字符串替换为undefined</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&quot;search&quot;</span>,</span><br><span class="line">  <span class="attr">params</span>:&#123;</span><br><span class="line">     <span class="attr">keyWords</span>:<span class="variable language_">this</span>.<span class="property">keyWords</span>||<span class="literal">undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>传递参数</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> &lt;ul&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;m in messageList&quot;</span> <span class="attr">:key</span> = <span class="string">&quot;m.id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        </span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 跳转路由并携带params参数，to的字符串写法 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- &lt;router-link :to=&quot;`/home/message/detail/$&#123;m.id&#125;/$&#123;m.title&#125;`&quot;&gt;&#123;&#123;m.title&#125;&#125;&lt;/router-link&gt;&amp;nbsp;&amp;nbsp; --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 跳转路由并携带params参数，to的对象写法 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">router-link</span>  <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        //此处不允许写path，需要是name</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        name:&#x27;xiangxi&#x27;,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        params:&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">            id:m.id,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">            title:m.title</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        &#125;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">    &#125;&quot;</span>&gt;</span>&#123;&#123;m.title&#125;&#125;<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">特别注意：路由携带params参数时，若使用to的对象写法，则不能使用path配置项，必须使用name配置！</font></strong></p>
<ol start="3">
<li>接收参数</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;消息编号：&#123;&#123;$route.<span class="property">params</span>.<span class="property">id</span>&#125;&#125;&lt;/li&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>消息标题：&#123;&#123;$route.params.title&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>


        <h3 id="6-路由的props配置">
          <a href="#6-路由的props配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-路由的props配置" class="headerlink" title="6. 路由的props配置"></a>6. 路由的props配置</h3>
      <p>作用：讓路由組件更方便的收到參數</p>
<p>哪個路由組件要收到參數就写到哪个组件上</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: [ </span><br><span class="line">		&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">HomeInfo</span>,</span><br><span class="line">        <span class="attr">children</span>: [&#123;</span><br><span class="line">            <span class="comment">//子级在内部遍历时自动加入/，所以此处不需要加/符号了</span></span><br><span class="line">            <span class="attr">path</span>: <span class="string">&quot;message&quot;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">MessageInfo</span>,</span><br><span class="line">            <span class="attr">children</span>: [&#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&quot;xiangxi&quot;</span>,</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&quot;detail/:id/:title&quot;</span>,</span><br><span class="line">                <span class="attr">component</span>: <span class="title class_">DetailInfo</span>,</span><br><span class="line">                <span class="comment">//props的第一种写法，值为对象，该对象中的所有key-value都会以props的形式传给Detail组件</span></span><br><span class="line">                <span class="comment">// props: &#123; a: 1, b: &quot;hello&quot; &#125;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">//props的第二种写法，值为布尔值,若布尔值为真，就会把该路由组件收到的所有params参数，以props的形式传给Detail组件</span></span><br><span class="line">                <span class="comment">// props: true</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">//props的第三种写法，值为函数,該函數返回的對象中每一組key-value都傳給Detail組件</span></span><br><span class="line">                <span class="title function_">props</span>(<span class="params">$route</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> &#123;</span><br><span class="line">                        <span class="attr">id</span>: $route.<span class="property">query</span>.<span class="property">id</span>,</span><br><span class="line">                        <span class="attr">title</span>: $route.<span class="property">query</span>.<span class="property">title</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>接收：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>:[<span class="string">&quot;id&quot;</span>,<span class="string">&quot;title&quot;</span>]</span><br></pre></td></tr></table></div></figure>


        <h3 id="7-lt-router-link-gt-的replace属性">
          <a href="#7-lt-router-link-gt-的replace属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-lt-router-link-gt-的replace属性" class="headerlink" title="7. &lt;router-link&gt;的replace属性"></a>7. <code>&lt;router-link&gt;</code>的replace属性</h3>
      <ol>
<li><p>作用：控制路由跳转时操作浏览器历史记录的模式</p>
</li>
<li><p>浏览器的历史记录有两种写入方式，分别为push和replace，push是追加历史记录，replace是替换<strong>当前记录</strong>，路由跳转时候默认为push</p>
</li>
<li><p>如何开启replace模式：</p>
</li>
</ol>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:replace</span>=<span class="string">&quot;true&quot;</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 或者 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">replace</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></div></figure>


        <h3 id="8-编程式路由导航">
          <a href="#8-编程式路由导航" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-编程式路由导航" class="headerlink" title="8.编程式路由导航"></a>8.编程式路由导航</h3>
      <ol>
<li><p>作用：不借助<code>&lt;router-link&gt;</code>实现路由跳转，让路由跳转更加灵活</p>
</li>
<li><p>编码：</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=<span class="string">&quot;pushShow(m)&quot;</span>&gt;push查看&lt;/button&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;replaceShow(m)&quot;</span>&gt;</span>replace查看<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="title function_">pushShow</span>(<span class="params">m</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;xiangxi&#x27;</span>,</span><br><span class="line">        <span class="attr">query</span>:&#123;</span><br><span class="line">            <span class="attr">id</span>:m.<span class="property">id</span>,</span><br><span class="line">            <span class="attr">title</span>:m.<span class="property">title</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">replaceShow</span>(<span class="params">m</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;xiangxi&#x27;</span>,</span><br><span class="line">        <span class="attr">query</span>:&#123;</span><br><span class="line">            <span class="attr">id</span>:m.<span class="property">id</span>,</span><br><span class="line">            <span class="attr">title</span>:m.<span class="property">title</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">back</span>()	<span class="comment">//后退</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">forward</span>()	<span class="comment">//前进</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">go</span>(-<span class="number">2</span>)	<span class="comment">//负数为后退，正数为前进。是几就走几步</span></span><br></pre></td></tr></table></div></figure>


        <h3 id="9-缓存路由组件">
          <a href="#9-缓存路由组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-缓存路由组件" class="headerlink" title="9.缓存路由组件"></a>9.缓存路由组件</h3>
      <ol>
<li><p>作用：让不展示的路由组件保持挂载，不被销毁</p>
</li>
<li><p>具体编码：</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive include=<span class="string">&quot;NewsInfo&quot;</span>&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></div></figure>

<p>include里写的是缓存哪些组件。值为组件名。即组件内部的name。</p>
<p><strong>缓存多个写法：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive :include=<span class="string">&quot;[&#x27;NewsInfo&#x27;,&#x27;MessageInfo&#x27;]&quot;</span>&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="10-两个新的生命周期钩子">
          <a href="#10-两个新的生命周期钩子" class="heading-link"><i class="fas fa-link"></i></a><a href="#10-两个新的生命周期钩子" class="headerlink" title="10. 两个新的生命周期钩子"></a>10. 两个新的生命周期钩子</h3>
      <ol>
<li><p>作用：路由组件所独有的两个钩子，用于捕获路由组件的激活状态</p>
</li>
<li><p>具体名字</p>
<p> <code>activated</code>路由组件被激活时触发</p>
<p> <code>deactivated</code>路由组件失活时触发</p>
</li>
</ol>
<p>实际用途：如果路由组件被缓存，那么再切换组件后就不会再执行mounted和beforeDestroy，一些处理就需要在这两个钩子中执行，如开启清除定时器</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//激活</span></span><br><span class="line"><span class="title function_">activated</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;news组件被激活&quot;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;@&quot;</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">opacity</span>-=<span class="number">0.01</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">opacity</span>&lt;=<span class="number">0</span>) <span class="variable language_">this</span>.<span class="property">opacity</span>=<span class="number">1</span></span><br><span class="line">    &#125;, <span class="number">16</span>);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//失活</span></span><br><span class="line"><span class="title function_">deactivated</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;news组件失活&quot;</span>)</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timer</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h2 id="路由守卫">
          <a href="#路由守卫" class="heading-link"><i class="fas fa-link"></i></a><a href="#路由守卫" class="headerlink" title="路由守卫"></a><font color="green">路由守卫</font></h2>
      
        <h3 id="1-全局路由守卫">
          <a href="#1-全局路由守卫" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-全局路由守卫" class="headerlink" title="1. 全局路由守卫"></a>1. 全局路由守卫</h3>
      <ol>
<li><p>作用：对<strong>路由</strong>进行权限控制</p>
</li>
<li><p>分类：全局守卫，独享守卫，组件内守卫</p>
</li>
<li><p>全局守卫</p>
</li>
</ol>
<p>路由配置</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;guanyu&quot;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AboutInfo</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&quot;关于&quot;</span>,<span class="attr">isAuth</span>:<span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全局前置路由守卫--初始化的时候被调用、每次路由切换之前被调用</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">isAuth</span>) &#123;	<span class="comment">//判断当前路由是否需要进行权限控制</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;school&quot;</span>) === <span class="string">&quot;清华大学&quot;</span>) &#123;	<span class="comment">//权限控制的具体规则</span></span><br><span class="line">            <span class="title function_">next</span>()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&quot;您没有权限&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">next</span>()	<span class="comment">//放行</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局后置路由守卫--初始化的时候被调用、每次路由切换之后被调用</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">title</span>) &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">title</span> = to.<span class="property">meta</span>.<span class="property">title</span>	<span class="comment">//修改网页title</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&quot;vue-test&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>from是从哪里来，to是到哪里去。他们都是对象，存储的只是对应路由的信息（配置时的那些信息），并非路由组件实例对象</p>
<p><strong>meta属性：是一个对象，可以自定义一些数据(元数据)</strong></p>

        <h3 id="2-独享路由守卫">
          <a href="#2-独享路由守卫" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-独享路由守卫" class="headerlink" title="2. 独享路由守卫"></a>2. 独享路由守卫</h3>
      <p>只对该路由组件生效，点击该组件进行切换，在切换到该路由组件之前调用</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;guanyu&quot;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AboutInfo</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&quot;关于&quot;</span>,</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">beforeEnter</span>: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(to)</span><br><span class="line">        <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">isAuth</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;school&quot;</span>) === <span class="string">&quot;清华大学&quot;</span>) &#123;</span><br><span class="line">                <span class="title function_">next</span>()</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">alert</span>(<span class="string">&quot;无权限&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">next</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-组件内路由守卫">
          <a href="#3-组件内路由守卫" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-组件内路由守卫" class="headerlink" title="3. 组件内路由守卫"></a>3. 组件内路由守卫</h3>
      <p><strong>进入之前和离开之前，需要区别于前置和后置</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="string">&quot;AboutInfo&quot;</span>,</span><br><span class="line">	<span class="comment">//通过路由规则，进入该组件时被调用</span></span><br><span class="line">	beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">	  <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">isAuth</span>) &#123;</span><br><span class="line">	      <span class="keyword">if</span> (<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;school&quot;</span>) === <span class="string">&quot;清华大学&quot;</span>) &#123;</span><br><span class="line">	          <span class="title function_">next</span>()</span><br><span class="line">	      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	          <span class="title function_">alert</span>(<span class="string">&quot;无权限&quot;</span>)</span><br><span class="line">	      &#125;</span><br><span class="line">	  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	      <span class="title function_">next</span>()</span><br><span class="line">	  &#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//通过路由规则，离开该组件时调用</span></span><br><span class="line">	beforeRouteLeave (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">	  <span class="title function_">next</span>()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-路由器的两种工作模式">
          <a href="#4-路由器的两种工作模式" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-路由器的两种工作模式" class="headerlink" title="4. 路由器的两种工作模式"></a>4. 路由器的两种工作模式</h3>
      <ol>
<li><p>对于一个url来说，什么是hash值？ —- <code>#及其后面的内容就是hash值</code></p>
</li>
<li><p>hash值不会包含在HTTP请求中，即：hash值不会带给服务器</p>
</li>
<li><p>hash模式：</p>
<ul>
<li><p>地址中永远带着#号，不美观</p>
</li>
<li><p>若以后将地址通过第三方手机app分享，若app校验严格，则地址会被标记为不合法</p>
</li>
<li><p>兼容性较好</p>
</li>
</ul>
</li>
<li><p>history模式</p>
<ul>
<li><p>地址干净 没管</p>
</li>
<li><p>兼容性和hash模式相比略差</p>
</li>
<li><p>应用部署上线时需要后端人员支持，解决刷新页面服务端404的问题</p>
</li>
</ul>
</li>
</ol>
<p><strong>部署：</strong></p>
<ol>
<li><p>项目运行指令<code>npm run bulid</code></p>
</li>
<li><p>将生成的dist文件夹内的内容复制到服务器静态资源内。如node中放在static中，且要配置静态资源地址</p>
</li>
</ol>
<p><code>app.use(express.static(__dirname + &quot;/static&quot;))</code></p>

        <h1 id="Vue-UI组件库">
          <a href="#Vue-UI组件库" class="heading-link"><i class="fas fa-link"></i></a><a href="#Vue-UI组件库" class="headerlink" title="Vue UI组件库"></a>Vue UI组件库</h1>
      
        <h2 id="移动端常用UI组件库">
          <a href="#移动端常用UI组件库" class="heading-link"><i class="fas fa-link"></i></a><a href="#移动端常用UI组件库" class="headerlink" title="移动端常用UI组件库"></a><font color="green">移动端常用UI组件库</font></h2>
      <ol>
<li><p>Vant <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://youzan.github.io/vant" title="Vant">https://youzan.github.io/vant</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</li>
<li><p>Cube UI  <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://didi.github.io/cube-ui" title="Cube UI">https://didi.github.io/cube-ui</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</li>
<li><p>Mint UI    <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://mint-ui.github.io/" title="Mint UI">http://mint-ui.github.io</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</li>
</ol>

        <h2 id="PC端常用UI组件库">
          <a href="#PC端常用UI组件库" class="heading-link"><i class="fas fa-link"></i></a><a href="#PC端常用UI组件库" class="headerlink" title="PC端常用UI组件库"></a><font color="green">PC端常用UI组件库</font></h2>
      <ol>
<li><p>Element UI    <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://element.eleme.cn/" title="Element UI">https://element.eleme.cn</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</li>
<li><p>IView UI    <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.iviewui.com/" title="IView UI">https://www.iviewui.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</li>
</ol>

        <h1 id="Vue3">
          <a href="#Vue3" class="heading-link"><i class="fas fa-link"></i></a><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h1>
      
        <h2 id="創建工程">
          <a href="#創建工程" class="heading-link"><i class="fas fa-link"></i></a><a href="#創建工程" class="headerlink" title="創建工程"></a><font color="green">創建工程</font></h2>
      
        <h3 id="1-使用vue-cli創建工程">
          <a href="#1-使用vue-cli創建工程" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-使用vue-cli創建工程" class="headerlink" title="1. 使用vue-cli創建工程"></a>1. 使用vue-cli創建工程</h3>
      <ol>
<li>官方文檔：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">## 查看@vue/cli版本，确保@vue/cli版本在<span class="number">4.5</span><span class="number">.0</span>以上</span><br><span class="line">vue --version</span><br><span class="line"></span><br><span class="line">## 如果版本不对，安装或者升级你的@vue/cli</span><br><span class="line">npm install -g @vue/cli</span><br><span class="line"></span><br><span class="line">## 创建</span><br><span class="line">vue create vue_test</span><br><span class="line"></span><br><span class="line">## 启动</span><br><span class="line">cd vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-使用vite创建">
          <a href="#2-使用vite创建" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-使用vite创建" class="headerlink" title="2. 使用vite创建"></a>2. 使用vite创建</h3>
      <p>官方文档：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/installation.html#vite">https://v3.cn.vuejs.org/guide/installation.html#vite</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>vite官网：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://vitejs.cn/">https://vitejs.cn</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<pre><code>* 什么是vite -- 新一代前端构建工具

* 优势如下：

    *    开发环境中，无需打包操作，可快速的冷启动

    *    轻量快速的热重载(HMR)

    *    真正的按需编译，不再等待整个应用编译完成
</code></pre>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">## 创建工程</span><br><span class="line"></span><br><span class="line">npm init vite-app &lt;project-name&gt;</span><br><span class="line"></span><br><span class="line">## 进入工程目录</span><br><span class="line"></span><br><span class="line">cd &lt;project-name&gt;</span><br><span class="line"></span><br><span class="line">## 安装依赖</span><br><span class="line"></span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line">## 运行</span><br><span class="line"></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></div></figure>


        <h2 id="常用Composition-API">
          <a href="#常用Composition-API" class="heading-link"><i class="fas fa-link"></i></a><a href="#常用Composition-API" class="headerlink" title="常用Composition API"></a><font color="green">常用Composition API</font></h2>
      <p>官方文档: <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html">https://v3.cn.vuejs.org/guide/composition-api-introduction.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="1-setup">
          <a href="#1-setup" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-setup" class="headerlink" title="1. setup"></a>1. setup</h3>
      <ol>
<li><p>理解：Vue3.0中一个新的配置项，值为一个函数</p>
</li>
<li><p>setup是所有Composition API(组合API)“表演的舞台”</p>
</li>
<li><p>组件中所用到的：数据、方法等等，均瑶配置在setup中</p>
</li>
<li><p>setup函数的两种返回值：</p>
<ol>
<li>若返回一个对象，则对象中的属性、方法、在模板中均可以直接使用。（重点）</li>
</ol>
 <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> name = <span class="string">&quot;张三&quot;</span></span><br><span class="line">  <span class="keyword">let</span> age = <span class="number">18</span></span><br><span class="line">	</span><br><span class="line">  <span class="comment">//方法</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">`我叫<span class="subst">$&#123;name&#125;</span>，我<span class="subst">$&#123;age&#125;</span>岁了，你好哇！`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">	</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    name,age,sayHello</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>若返回一个渲染函数：则可以自定义渲染内容。（了解</li>
</ol>
 <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">return</span> <span class="function">()=&gt;</span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="title function_">h</span>(<span class="string">&quot;h1&quot;</span>,<span class="string">&quot;test&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line"><span class="comment">//页面显示的是h1标签包裹的test</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>注意点：</p>
<ol>
<li><p>尽量不要与Vue2.x配置混用</p>
<ul>
<li><p>Vue2.x配置(data&#x2F;methods&#x2F;computed…)中可以访问到setup中的属性、方法。</p>
</li>
<li><p>但在setup中不能访问到Vue2.x配置(data、methods、computed…)</p>
</li>
<li><p>如果2和3中配置重名，以后一个为准</p>
</li>
</ul>
</li>
<li><p>setup不能是一个async函数，因为返回值不再是return的对象，而是promise，模板看不到return对象中的属性(后期也可以返回一个Promise实例，但需要Suspense和异步组件的配合)</p>
</li>
</ol>
</li>
</ol>

        <h3 id="2-ref函数">
          <a href="#2-ref函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-ref函数" class="headerlink" title="2. ref函数"></a>2. ref函数</h3>
      <ol>
<li><p>作用：定义一个响应式的数据</p>
</li>
<li><p>语法：<code>const xxx = ref(initValue)</code></p>
<ul>
<li><p>创建一个包含响应式数据的引用对象（reference对象）</p>
</li>
<li><p>JS中操作数据：<code>xxx.value</code></p>
</li>
<li><p>模板中读取数据：不需要<code>.value</code>，直接<code>&#123;&#123;xxx&#125;&#125;</code>。vue会自动加上<code>.value</code>读取</p>
</li>
</ul>
</li>
<li><p>备注：</p>
<ul>
<li><p>接收的数据可以是：基本类型，也可以是对象类型</p>
</li>
<li><p>基本类型的数据，响应式依然是靠<code>Object.defineProperty()</code>的get与set完成的</p>
</li>
<li><p>对象类型的数据：内部“求助”了Vue3.0中的一个新函数–<code>reactive</code>函数</p>
</li>
</ul>
</li>
</ol>
<p><strong>处理基本类型</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> name = <span class="title function_">ref</span>(<span class="string">&quot;张三&quot;</span>)</span><br><span class="line">  <span class="keyword">let</span> age = <span class="title function_">ref</span>(<span class="number">18</span>)</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">changeInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">    name.<span class="property">value</span>=<span class="string">&quot;李四&quot;</span>,</span><br><span class="line">    age.<span class="property">value</span> = <span class="number">20</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    name,age,changeInfo</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>处理对象类型</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> job = <span class="title function_">ref</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>:<span class="string">&quot;前端工程师&quot;</span>,</span><br><span class="line">  <span class="attr">salary</span>:<span class="string">&#x27;30K&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">  job.<span class="property">value</span>.<span class="property">type</span> = <span class="string">&quot;UI工程师&quot;</span></span><br><span class="line">  job.<span class="property">value</span>.<span class="property">salary</span> = <span class="string">&quot;70K&quot;</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="reactive函数">
          <a href="#reactive函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#reactive函数" class="headerlink" title="reactive函数"></a>reactive函数</h3>
      <ol>
<li><p>作用：定义一个<strong>对象类型</strong>的响应式数据（基本类型不要用它，用ref函数）</p>
</li>
<li><p>语法：<code>const 代理对象 = reactive(源对象)</code>接收一个对象（或数组），返回一个代理对象（Proxy的实例对象，简称proxy对象）</p>
</li>
<li><p>reactive定义的响应式数据是“深层次的”</p>
</li>
<li><p>内部基于ES6的Proxy实现，通过代理对象操作源对象内部数据进行操作</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> job = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>:<span class="string">&quot;前端工程师&quot;</span>,</span><br><span class="line">  <span class="attr">salary</span>:<span class="string">&#x27;30K&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> hobby = <span class="title function_">reactive</span>([<span class="string">&quot;游戏&quot;</span>,<span class="string">&quot;运动&quot;</span>,<span class="string">&quot;美食&quot;</span>])</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">  job.<span class="property">type</span> = <span class="string">&quot;UI工程师&quot;</span></span><br><span class="line">  job.<span class="property">salary</span> = <span class="string">&quot;70K&quot;</span></span><br><span class="line">  hobby[<span class="number">0</span>] = <span class="string">&quot;学习&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="3-Vue3响应式原理">
          <a href="#3-Vue3响应式原理" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-Vue3响应式原理" class="headerlink" title="3. Vue3响应式原理"></a>3. Vue3响应式原理</h3>
      <p>实现原理：</p>
<ul>
<li><p>通过Proxy(代理)：拦截代理对象中任意属性的变化，包括：属性值的读写、属性的添加、属性的删除等</p>
</li>
<li><p>通过Reflect(反射)：对被代理对象（源对象）的属性进行操作。</p>
</li>
<li><p>MDN文档中描述关于Proxy和Reflect</p>
<ul>
<li><p>Proxy：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects&#x2F;Proxy</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</li>
<li><p>Reflect:<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects&#x2F;Reflect</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Proxy</span>(person,&#123;</span><br><span class="line">    <span class="comment">//有人读取p的某个属性时调用</span></span><br><span class="line">    <span class="title function_">get</span>(<span class="params">target,propName</span>)&#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`有人读取了p身上得到<span class="subst">$&#123;propName&#125;</span>属性`</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target,propName)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//有人修改p的某个属性，或给p追加某个属性时调用</span></span><br><span class="line">    <span class="title function_">set</span>(<span class="params">target,propName,value</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`有人修改了p身上的<span class="subst">$&#123;propName&#125;</span>属性`</span>)</span><br><span class="line">        <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target,propName,value)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//有人删除p的某个属性时调用</span></span><br><span class="line">    <span class="title function_">deleteProperty</span>(<span class="params">target,propName</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`有人删除了p身上的<span class="subst">$&#123;propName&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target,propName)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-reactive对比ref">
          <a href="#4-reactive对比ref" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-reactive对比ref" class="headerlink" title="4. reactive对比ref"></a>4. reactive对比ref</h3>
      <ul>
<li><p>从定义数据角度对比</p>
<ul>
<li><p>ref用来定义：基本类型数据</p>
</li>
<li><p>reactive用来定义：对象（或数组）类型数据</p>
</li>
<li><p>备注：ref也可以用来定义对象（或数组）类型数据，它内部会自动通过reactive转为代理对象</p>
</li>
</ul>
</li>
<li><p>从原理角度对比</p>
<ul>
<li><p>ref通过<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>来实现响应式（数据劫持）</p>
</li>
<li><p>reactive通过使用Proxy来实现响应式（数据劫持），并通过Reflect操作源对象内部的数据</p>
</li>
</ul>
</li>
<li><p>从使用角度对比</p>
<ul>
<li><p>ref定义的数据：操作数据需要<code>.value</code>，读取数据时模板中直接读取不需要<code>.value</code></p>
</li>
<li><p>reactive定义的数据：操作数据与读取数据：均不需要<code>.value</code></p>
</li>
</ul>
</li>
</ul>
<p><strong>注意：如果往reactive定义的对象中后天添加属性（即使该属性是一个对象），那么它也自动变成响应式的</strong></p>

        <h3 id="5-setup的两个注意点">
          <a href="#5-setup的两个注意点" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-setup的两个注意点" class="headerlink" title="5. setup的两个注意点"></a>5. setup的两个注意点</h3>
      <ul>
<li><p>setup执行的时机</p>
<ul>
<li>在beforeCreate之前执行一次，this是undefined</li>
</ul>
</li>
<li><p>setup的参数</p>
<ol>
<li><p>props：值为对象，包含：组件外部传递过来，且组件内部声明接收了的属性<code>props:[&quot;msg&quot;]</code></p>
</li>
<li><p>context:上下文对象：</p>
<ul>
<li><p>attrs：值为对象，包含：组件外部传递过来，但没有在props配置中声明的属性，相当于vue2中的<code>$attrs</code></p>
</li>
<li><p>slots：收到的插槽内容，相当于2中的<code>this.$slots</code></p>
</li>
<li><p>emit：分发自定义事件的函数，相当于vue2中的<code>this.$emit</code>.(注：vue3中，触发自定义事件要先配置出<code>emits:[&#39;hello&#39;]</code>)</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>

        <h3 id="6-计算属性">
          <a href="#6-计算属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-计算属性" class="headerlink" title="6. 计算属性"></a>6. 计算属性</h3>
      <ol>
<li><p>与Vue2.x中computed配置功能一致</p>
</li>
<li><p>写法：</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;computed,reactive&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">     <span class="attr">firstName</span>:<span class="string">&quot;张&quot;</span>,</span><br><span class="line">     <span class="attr">lastName</span>:<span class="string">&quot;三&quot;</span></span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="comment">//计算属性（没有考虑计算属性被修改的情况）</span></span><br><span class="line">  <span class="comment">//  person.fullName = computed(()=&gt;&#123;</span></span><br><span class="line">  <span class="comment">//    return person.firstName+&quot;-&quot;+person.lastName</span></span><br><span class="line">  <span class="comment">//  &#125;)</span></span><br><span class="line">  <span class="comment">//计算属性（完整写法）</span></span><br><span class="line">  person.<span class="property">fullName</span> = <span class="title function_">computed</span>(&#123;</span><br><span class="line">     <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> person.<span class="property">firstName</span>+<span class="string">&quot;-&quot;</span>+person.<span class="property">lastName</span></span><br><span class="line">    &#125;,<span class="title function_">set</span>(<span class="params">value</span>)&#123;</span><br><span class="line">      <span class="keyword">const</span> nameArr = value.<span class="title function_">split</span>(<span class="string">&quot;-&quot;</span>)</span><br><span class="line">      person.<span class="property">firstName</span> = nameArr[<span class="number">0</span>]</span><br><span class="line">      person.<span class="property">lastName</span> = nameArr[<span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;person&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>注：Vue2的计算属性写法也可以应用到Vue3，且可以访问到setup中的响应式数据，但不推荐这么做</p>

        <h3 id="7-Watch监视">
          <a href="#7-Watch监视" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-Watch监视" class="headerlink" title="7. Watch监视"></a>7. Watch监视</h3>
      <ul>
<li><p>与Vue2.x中watch配置功能一致：</p>
</li>
<li><p>两个“小坑”</p>
<ol>
<li><p>监视reactive定义的响应式数据时：oldValue无法正常读取、并强制开启了深度监视(deep配置失效)</p>
</li>
<li><p>监视reactive定义的响应式数据中某个(对象)属性时：deep配置有效</p>
</li>
</ol>
</li>
</ul>
<p>语法：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(监视属性,监视回调,监视配置)</span><br><span class="line"></span><br><span class="line"><span class="title function_">watch</span>(sum,<span class="function">()=&gt;</span>&#123;&#125;,&#123;<span class="attr">deep</span>:<span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></div></figure>

<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive, ref,watch&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">   <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">   <span class="keyword">let</span> msg = <span class="title function_">ref</span>(<span class="string">&quot;你好啊&quot;</span>)</span><br><span class="line">   <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">     <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">     <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">     <span class="attr">job</span>:&#123;</span><br><span class="line">       <span class="attr">salary</span>:<span class="number">20</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="comment">//情况一：监视ref所定义的一个响应式数据</span></span><br><span class="line">   <span class="comment">// watch(sum,(newValue,oldValue)=&gt;&#123;</span></span><br><span class="line">   <span class="comment">//   console.log(&quot;sum变了&quot;,newValue,oldValue)</span></span><br><span class="line">   <span class="comment">// &#125;,&#123;</span></span><br><span class="line">   <span class="comment">//   immediate:true,</span></span><br><span class="line">   <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">//情况二：监视ref所定义的多个响应式数据</span></span><br><span class="line">   <span class="comment">// watch([sum,msg],(newValue,oldValue)=&gt;&#123;</span></span><br><span class="line">   <span class="comment">//   console.log(&quot;msg或者sum改变了&quot;,newValue[0],oldValue[0])</span></span><br><span class="line">   <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 情况三：监视reactive所定义的一个响应式数据的全部属性</span></span><br><span class="line"><span class="comment">    * 1. 注意：此处无法正确的获取oldValue</span></span><br><span class="line"><span class="comment">    * 2. 注意：强制开启了深度监视（deep配置无效）</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// watch(person,(newValue,oldValue)=&gt;&#123;</span></span><br><span class="line">   <span class="comment">//   console.log(&quot;person发生变化&quot;)</span></span><br><span class="line">   <span class="comment">//   console.log(newValue,oldValue)</span></span><br><span class="line">   <span class="comment">// &#125;,&#123;deep:false&#125;)  //此处监视的是reactive所定义的对象，深度监视强制开启，故此处deep配置无效</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">//情况四：监视reactive所定义的一个响应式数据中的某个属性</span></span><br><span class="line">   <span class="comment">// watch(()=&gt;person.age,(newValue,oldValue)=&gt;&#123;</span></span><br><span class="line">   <span class="comment">//   console.log(&quot;person中的age发生变化&quot;)</span></span><br><span class="line">   <span class="comment">//   console.log(newValue,oldValue)</span></span><br><span class="line">   <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">//情况五：监视reactive所定义的一个响应式数据中的某些属性</span></span><br><span class="line">   <span class="comment">// watch([()=&gt;person.age,()=&gt;person.name],(newValue,oldValue)=&gt;&#123;</span></span><br><span class="line">   <span class="comment">//   console.log(&quot;person中的age或者name发生变化&quot;)</span></span><br><span class="line">   <span class="comment">//   console.log(newValue,oldValue)</span></span><br><span class="line">   <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">//特殊情况：</span></span><br><span class="line">   <span class="title function_">watch</span>(<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;person中的job发生变化&quot;</span>)</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue,oldValue)</span><br><span class="line">   &#125;,&#123;<span class="attr">deep</span>:<span class="literal">true</span>&#125;)  <span class="comment">//此处由于监视的是reactive所定义的对象中的某个属性，所有deep配置有效</span></span><br><span class="line">   <span class="keyword">return</span> &#123;sum,msg,person&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="8-watch时value问题">
          <a href="#8-watch时value问题" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-watch时value问题" class="headerlink" title="8. watch时value问题"></a>8. watch时value问题</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"><span class="title function_">watch</span>(sum,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;sum变了&quot;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;</span><br><span class="line">  <span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>此处监视的属性不需要<code>.value</code>，因为要监视的是响应式数据，如果<code>.value</code>就会变成基本类型，如<code>0</code>，无法监视</p>
<p>也就是说可以直接监视到sum中value的变化</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = <span class="title function_">ref</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">  <span class="attr">job</span>:&#123;</span><br><span class="line">    <span class="attr">salary</span>:<span class="number">20</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">watch</span>(person.<span class="property">value</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;sum变了&quot;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;</span><br><span class="line">  <span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">watch</span>(person,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;sum变了&quot;</span>,newValue,oldValue)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>person是refimpl实例对象，可以监视到value的变化，value是reactive生成的Proxy对象。不能直接监视到value内部属性的变化。需要开启深度监视。或者直接监视person.value</p>

        <h3 id="9-watchEffect函数">
          <a href="#9-watchEffect函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-watchEffect函数" class="headerlink" title="9. watchEffect函数"></a>9. watchEffect函数</h3>
      <ul>
<li><p>watch:既要志明监视的属性，也要指明监视的回调</p>
</li>
<li><p>watchEffect：不用指明监视哪个属性、监视的回调中用到哪个属性，那就监视哪个属性</p>
</li>
<li><p>watchEffect有点像computed</p>
<ul>
<li><p>单computed注重的计算出来的值（回调函数的返回值）,所以必须要写返回值</p>
</li>
<li><p>而watchEffect更注重的是过程（回调函数的函数体），所以不用写返回值</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//watchEffect所指定的回调中用到的数据只要发生变化，则直接重新执行回调</span></span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> x1 = sum.<span class="property">value</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;watchEffect所指定的回调执行&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>



        <h3 id="10-Vue3-生命周期">
          <a href="#10-Vue3-生命周期" class="heading-link"><i class="fas fa-link"></i></a><a href="#10-Vue3-生命周期" class="headerlink" title="10. Vue3 生命周期"></a>10. Vue3 生命周期</h3>
      <p>Vue3.0中可以继续使用Vue2.x中的生命周期钩子，但有两个被更名</p>
<ul>
<li><p><code>beforeDestroy</code>改名为<code>beforeUnmount</code></p>
</li>
<li><p><code>destroyed</code>改名为<code>unmounted</code></p>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过配置项的形式使用声明周期钩子</span></span><br><span class="line">   <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---beforeCreate---&quot;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---created---&quot;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">beforeMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---beforeMount---&quot;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---mounted---&quot;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">beforeUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---beforeUpdate---&quot;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">updated</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---updated---&quot;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">beforeUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---beforeUnmount---&quot;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">unmounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---unmounted---&quot;</span>)</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></div></figure>

<p>Vue3.0也提供了Composition API形式的生命周期钩子，与Vue2.x中钩子对应关系：</p>
<p><code>beforeCreate</code> &#x3D;&#x3D;&gt; <code>setup()</code></p>
<p><code>created</code> &#x3D;&#x3D;&gt; <code>setup()</code></p>
<p><code>beforeMount</code> &#x3D;&#x3D;&gt; <code>onBeforeMount</code></p>
<p><code>mounted</code> &#x3D;&#x3D;&gt; <code>onMounted</code></p>
<p><code>beforeUpdate</code> &#x3D;&#x3D;&gt; <code>onBeforeUpdate</code></p>
<p><code>updated</code> &#x3D;&#x3D;&gt; <code>onUpdated</code></p>
<p><code>beforeUnmount</code> &#x3D;&#x3D;&gt; <code>onBeforeUnmount</code></p>
<p><code>unmounted</code> &#x3D;&#x3D;&gt; <code>onUnmounted</code></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref,onBeforeMount,onMounted,onBeforeUpdate,onUpdated,onBeforeUnmount,onUnmounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="comment">//未提供beforeCreate、created的组合式API</span></span><br><span class="line">        <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">        <span class="title function_">onBeforeMount</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">           <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;--- onBeforeMount ---&quot;</span>)     </span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;--- onMounted ---&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="title function_">onBeforeUpdate</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;--- onBeforeUpdate ---&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="title function_">onUpdated</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;--- onUpdated ---&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="title function_">onBeforeUnmount</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;--- onBeforeUnmount ---&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;--- onUnmounted ---&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123;sum&#125;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="11-自定义hook函数">
          <a href="#11-自定义hook函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#11-自定义hook函数" class="headerlink" title="11. 自定义hook函数"></a>11. 自定义hook函数</h3>
      <ul>
<li><p>本质是一个函数，把setup函数中使用的Composition API进行了封装</p>
</li>
<li><p>类似于vue2.x中的mixin</p>
</li>
<li><p>自定义hook的优势：复用代码，让setup中的逻辑更清楚易懂</p>
</li>
</ul>
<ol>
<li>src下创建hooks文件夹，创建usePoint.js文件</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, onMounted, onBeforeUnmount &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//实现鼠标“打点”相关的数据</span></span><br><span class="line">    <span class="keyword">let</span> point = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">            <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">y</span>: <span class="number">0</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">//实现鼠标“打点”相关的方法</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">savePoint</span>(<span class="params">event</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;savePoint&quot;</span>)</span><br><span class="line">        point.<span class="property">x</span> = event.<span class="property">pageX</span></span><br><span class="line">        point.<span class="property">y</span> = event.<span class="property">pageY</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//实现鼠标“打点”相关的生命周期钩子</span></span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, savePoint)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">onBeforeUnmount</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&quot;click&quot;</span>, savePoint)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> point</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


<ol start="2">
<li>组件调用：</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> usePoint <span class="keyword">from</span> <span class="string">&quot;../hooks/usePoint&quot;</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">let</span> point = <span class="title function_">usePoint</span>()</span><br><span class="line">	<span class="keyword">return</span> &#123;sum,point&#125;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>


        <h3 id="12-toRef">
          <a href="#12-toRef" class="heading-link"><i class="fas fa-link"></i></a><a href="#12-toRef" class="headerlink" title="12. toRef"></a>12. toRef</h3>
      <ul>
<li><p>作用：创建一个ref对象，其value值指向另一个对象中的某个属性</p>
</li>
<li><p>语法：<code>const name = toRef(person,&quot;name&quot;)</code></p>
</li>
<li><p>应用：要将响应式对象中的某个属性单独提供给外部使用时且不丢失响应式</p>
</li>
<li><p>扩展：<code>toRefs</code>与<code>toRef</code>功能一致，但可以批量创建多个ref对象，语法：<code>toRefs(person)</code></p>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive, toRef,toRefs&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">       <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">       <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">       <span class="attr">job</span>:&#123;</span><br><span class="line">           <span class="attr">j1</span>:&#123;</span><br><span class="line">               <span class="attr">salary</span>:<span class="number">20</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">let</span> name1 = <span class="title function_">toRef</span>(person.<span class="property">name</span>)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(name1)</span><br><span class="line">   <span class="keyword">return</span> &#123;</span><br><span class="line">       <span class="attr">name</span>:<span class="title function_">toRef</span>(person,<span class="string">&quot;name&quot;</span>),</span><br><span class="line">       <span class="attr">age</span>:<span class="title function_">toRef</span>(person,<span class="string">&quot;age&quot;</span>),</span><br><span class="line">       <span class="attr">salary</span>:<span class="title function_">toRef</span>(person.<span class="property">job</span>.<span class="property">j1</span>,<span class="string">&quot;salary&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p>这样写name的值就指向了person中的name，变成了响应式的数据。如果直接写</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">	<span class="attr">name</span>:person.<span class="property">name</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>那么该name只是单纯赋了值，并非响应式数据，如果写成</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="title function_">ref</span>(person.<span class="property">name</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>那么其实是重新定义ref数据，后续无法对原数据进行修改</p>
<p><strong>toRefs</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">toRefs</span>(person))</span><br></pre></td></tr></table></div></figure>

<p>批量生成ref数据，person中的属性都变成了ObjectRefImpl类型数据。指向了原Proxy对象的对应属性，返回时可以使用<code>...</code></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>薪资：&#123;&#123;salary&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">	...<span class="title function_">toRefs</span>(person),...<span class="title function_">toRefs</span>(person.<span class="property">job</span>.<span class="property">j1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="13-shallowReactive和shallowRef">
          <a href="#13-shallowReactive和shallowRef" class="heading-link"><i class="fas fa-link"></i></a><a href="#13-shallowReactive和shallowRef" class="headerlink" title="13. shallowReactive和shallowRef"></a>13. shallowReactive和shallowRef</h3>
      <ul>
<li><p>shallowReactive：只处理对象最外层属性的响应式(浅响应式)</p>
</li>
<li><p>shallowRef：只处理基本数据类型的响应式，不进行对象的响应式处理</p>
</li>
<li><p>什么时候使用？</p>
<ul>
<li><p>如果有一个对象数据，结构比较深，但变化时只是外层属性变化&#x3D;&#x3D;&#x3D;》 shallowReactive</p>
</li>
<li><p>如果有一个对象数据，后续功能不会修改该对象中的属性，而是生新的对象来替换 &#x3D;&#x3D;&#x3D;》shallowRef</p>
</li>
</ul>
</li>
</ul>

        <h3 id="14-readonly和shallowReadonly">
          <a href="#14-readonly和shallowReadonly" class="heading-link"><i class="fas fa-link"></i></a><a href="#14-readonly和shallowReadonly" class="headerlink" title="14. readonly和shallowReadonly"></a>14. readonly和shallowReadonly</h3>
      <ul>
<li><p>readonly：让一个响应式数据变为只读的（深只读）</p>
</li>
<li><p>shallowReadonly：让一个响应式数据变成只读的（浅只读）</p>
<p>  如果应用到reactive数据上，那么不影响二层结构，如果应用到ref数据上，如果ref内是对象的话就不影响。</p>
</li>
</ul>
<p>使用：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive,ref,shallowReadonly,readonly&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">   <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">   <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">   <span class="attr">job</span>:&#123;</span><br><span class="line">       <span class="attr">j1</span>:&#123;</span><br><span class="line">           <span class="attr">salary</span>:<span class="number">20</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br><span class="line">person = <span class="title function_">readonly</span>(person)</span><br></pre></td></tr></table></div></figure>


        <h3 id="15-toRaw与markRaw">
          <a href="#15-toRaw与markRaw" class="heading-link"><i class="fas fa-link"></i></a><a href="#15-toRaw与markRaw" class="headerlink" title="15. toRaw与markRaw"></a>15. toRaw与markRaw</h3>
      <ul>
<li><p>toRaw：</p>
<ul>
<li><p>作用：将一个由<code>reactive</code>生成的响应式对象转为普通对象(ref类型不生效)</p>
</li>
<li><p>使用场景：用于读取响应式对象对应的普通对象，对这个普通对象的所有操作，不会引起页面更新</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">   <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">   <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">   <span class="attr">job</span>:&#123;</span><br><span class="line">       <span class="attr">j1</span>:&#123;</span><br><span class="line">           <span class="attr">salary</span>:<span class="number">20</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">showRawPerson</span>(<span class="params"></span>)&#123;</span><br><span class="line">		person = <span class="title function_">toRaw</span>(person)</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">info</span>(person)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<ul>
<li><p>markRaw</p>
<p>  由于reactive生成的对象，对其进行增加删除属性等等都会被监测到，并使其成为响应式的。</p>
<ul>
<li><p>作用：标记一个对象，使其永远不会再成为响应式对象</p>
</li>
<li><p>应用场景：</p>
<ol>
<li><p>有些只不应被设置为响应式的，例如复杂的第三方类库等</p>
</li>
<li><p>当渲染具有不可变数据源的大列表时，跳过响应式转换可以提高性能</p>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click = <span class="string">&quot;AddCarInfo&quot;</span>&gt;添加车信息&lt;/button&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;person.car.cname+=&#x27;!&#x27;&quot;</span>&gt;</span>修改车名称<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span> = <span class="string">&quot;person.car.cprice++&quot;</span>&gt;</span>增加车价格<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">   <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">   <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">   <span class="attr">job</span>:&#123;</span><br><span class="line">       <span class="attr">j1</span>:&#123;</span><br><span class="line">           <span class="attr">salary</span>:<span class="number">20</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">AddCarInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">   person.<span class="property">car</span> = <span class="title function_">markRaw</span>(&#123;</span><br><span class="line">       <span class="attr">cname</span>:<span class="string">&quot;奥迪&quot;</span>,</span><br><span class="line">       <span class="attr">cprice</span>:<span class="string">&quot;30&quot;</span></span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(person)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>如此一来添加的车属性就不会成为响应式的数据，对车信息作出修改页面也不会发生拜年话</p>

        <h3 id="16-customRef">
          <a href="#16-customRef" class="heading-link"><i class="fas fa-link"></i></a><a href="#16-customRef" class="headerlink" title="16. customRef"></a>16. customRef</h3>
      <p><strong>作用： 创建一个自定义的ref，并对其依赖项跟踪和更新触发进行显示控制</strong></p>
<ul>
<li>实现防抖效果</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span> = <span class="string">&quot;keyWord&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;keyWord&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;ref,customRef&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//自定义一个ref--myRef</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">myRef</span>(<span class="params">value,delay</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> <span class="title function_">customRef</span>(<span class="function">(<span class="params">track,trigger</span>)=&gt;</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">let</span> timer</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="title function_">get</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`有人从myRef这个容器中读取数据了，返回<span class="subst">$&#123;value&#125;</span>`</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">track</span>() <span class="comment">//通知Vue追踪value的变化(提前和get商量一下，让他认为这个value是有用的，可以变化的)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> value</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,<span class="title function_">set</span>(<span class="params">newValue</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`有人把myRef这个容器中数据改了：<span class="subst">$&#123;newValue&#125;</span>`</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            value = newValue</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="built_in">clearTimeout</span>(timer)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">               <span class="title function_">trigger</span>() <span class="comment">//通知Vue重新解析模板</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;, delay);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// let keyWord = ref(&quot;hello&quot;) //使用Vue提供的ref</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> keyWord = <span class="title function_">myRef</span>(<span class="string">&quot;hello&quot;</span>,<span class="number">1000</span>)  <span class="comment">//使用程序员自定义的ref</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;keyWord&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p>下面的内容延迟显示，如果连续快速点击键盘输入数据，定时器来不及执行（一直开启关闭）里面的内容，那么在最后一次(间隔超过一秒)输入的时候内容更新</p>

        <h3 id="17-provide-提供-与inject-注入">
          <a href="#17-provide-提供-与inject-注入" class="heading-link"><i class="fas fa-link"></i></a><a href="#17-provide-提供-与inject-注入" class="headerlink" title="17. provide(提供)与inject(注入)"></a>17. provide(提供)与inject(注入)</h3>
      <ul>
<li><p>作用：实现祖与后代组件间通信</p>
</li>
<li><p>套路：父组件有一个<code>provide</code>选项来提供数据，后代组件有一个<code>inject</code>选项来开始使用这些数据</p>
</li>
<li><p>写法：</p>
</li>
</ul>
<ol>
<li>祖组件中：</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">let</span> car = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&quot;奔驰&quot;</span>,<span class="attr">price</span>:<span class="string">&quot;40W&quot;</span>&#125;)</span><br><span class="line">	<span class="title function_">provice</span>(<span class="string">&quot;car&quot;</span>,car)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>孙组件中：</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params">props,context</span>)&#123;</span><br><span class="line">	...</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> car = <span class="title function_">inject</span>(<span class="string">&quot;car&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> &#123;car&#125;</span><br><span class="line"></span><br><span class="line">	...</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="18-响应式数据的判断">
          <a href="#18-响应式数据的判断" class="heading-link"><i class="fas fa-link"></i></a><a href="#18-响应式数据的判断" class="headerlink" title="18. 响应式数据的判断"></a>18. 响应式数据的判断</h3>
      <ul>
<li><p>isRef：检查一个值是否为一个ref对象</p>
</li>
<li><p>isReactive：检查一个对象是否是有Reactive创建的响应式代理</p>
</li>
<li><p>isReadonly：检查一个对象是否是由readonly创建的只读代理</p>
</li>
<li><p>isProxy：检查一个对象是否是由reactive或者readonly方法创建的代理。因为这两个方法生成的内部数据都是Proxy类型</p>
</li>
</ul>

        <h2 id="Composition-API的优势">
          <a href="#Composition-API的优势" class="heading-link"><i class="fas fa-link"></i></a><a href="#Composition-API的优势" class="headerlink" title="Composition API的优势"></a><font color="green">Composition API的优势</font></h2>
      <ol>
<li><p>Options API存在的问题</p>
<p> 使用传统OptionsAPI 中，新增或者修改一个需求，就需要分别在data、methods。computed里修改</p>
</li>
<li><p>Composition API的优势</p>
</li>
</ol>
<p>我们可以更加优雅的组织我们的代码、函数，让相关功能的代码更加有序的组织在一起</p>

        <h2 id="新的组件">
          <a href="#新的组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#新的组件" class="headerlink" title="新的组件"></a><font color="green">新的组件</font></h2>
      
        <h3 id="1-Fragment（片段-碎片）">
          <a href="#1-Fragment（片段-碎片）" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-Fragment（片段-碎片）" class="headerlink" title="1. Fragment（片段 碎片）"></a>1. Fragment（片段 碎片）</h3>
      <ul>
<li><p>在Vue2中：组件必须有一个根标签</p>
</li>
<li><p>在Vue3中：组件可以没有根标签，内部会将多个标签包含在一个Fragment虚拟元素中</p>
</li>
<li><p>好处：减少标签层级、减小内存占用</p>
</li>
</ul>

        <h3 id="2-Teleport-传送-瞬间移动">
          <a href="#2-Teleport-传送-瞬间移动" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-Teleport-传送-瞬间移动" class="headerlink" title="2.Teleport(传送 瞬间移动)"></a>2.Teleport(传送 瞬间移动)</h3>
      <p>是一种能够将我们的组件html结构移动到指定位置的技术</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;teleport to = <span class="string">&quot;移动位置&quot;</span>&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialog&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是一个弹窗<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">button</span>&gt;</span>关闭弹窗<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/teleport&gt;</span><br></pre></td></tr></table></div></figure>

<p><code>移动位置</code>内容可以是元素，如<code>body,html</code>，也可以是选择器，如：<code>#app,#root</code></p>
<p>在dom上将该teleport包裹的元素内容移动到指定位置</p>

        <h3 id="3-Suspense-悬念-悬疑">
          <a href="#3-Suspense-悬念-悬疑" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-Suspense-悬念-悬疑" class="headerlink" title="3.Suspense(悬念  悬疑)"></a>3.Suspense(悬念  悬疑)</h3>
      <ul>
<li><p>等待异步组件时渲染一些额外内容，让应用有更好的用户体验</p>
</li>
<li><p>使用步骤：</p>
</li>
</ul>
<ol>
<li>异步引入组件</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref,customRef,defineAsyncComponent&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="comment">// import Demo from &quot;./components/Demo.vue&quot;	//静态引入，等引入完成后父页面才渲染</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Demo</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">()=&gt;</span><span class="title function_">import</span>(<span class="string">&#x27;./components/Demo&#x27;</span>))	<span class="comment">//动态(异步)引入，无需等待组件引入完成，父组件可以先在页面渲染</span></span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>使用<code>Suspense</code>包裹组件，并配置好<code>default</code>和<code>fallback</code></li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Suspense</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">Demo</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:fallback</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    加载中...</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Suspense</span>&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="4-其他">
          <a href="#4-其他" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-其他" class="headerlink" title="4. 其他"></a>4. 其他</h3>
      <p><img src="/2022/04/10/web-vue01/VUE3.png"></p>
<ul>
<li><p>data选项应始终被声明为一个函数</p>
</li>
<li><p>过度类名的更改</p>
</li>
</ul>
<p><strong>Vue2.x写法</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">v</span>-enter,.<span class="property">v</span>-leave-to&#123;</span><br><span class="line">	<span class="attr">opacity</span>:<span class="number">0</span>;</span><br><span class="line">&#125;,</span><br><span class="line">.<span class="property">v</span>-leave,.<span class="property">v</span>-enter-to&#123;</span><br><span class="line">	<span class="attr">opacity</span>:<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>Vue 3写法</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">v</span>-enter-<span class="keyword">from</span>,.<span class="property">v</span>-leave-to&#123;</span><br><span class="line">	<span class="attr">opacity</span>:<span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">v</span>-leave-<span class="keyword">from</span>,.<span class="property">v</span>-enter-to&#123;</span><br><span class="line">	<span class="attr">opacity</span>:<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ul>
<li><p>移除keyCode作为v-on的修饰符，同时也不再支持<code>config.keyCodes</code></p>
</li>
<li><p>移除<code>v-on.native</code>修饰符（v-on.native：声明是原生事件并不是自定义事件）</p>
</li>
</ul>
<p><strong>父组件中绑定事件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component </span><br><span class="line">v-<span class="attr">on</span>:close=<span class="string">&quot;handleComponentEvent&quot;</span> </span><br><span class="line">v-<span class="attr">on</span>:click=<span class="string">&quot;handleNativeClickEvent&quot;</span></span><br><span class="line">/&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>子组件中声明自定义事件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">	<span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">		<span class="attr">emits</span>:[<span class="string">&#x27;close&#x27;</span>]</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>

<p>通过声明项指定自定义事件</p>
<ul>
<li><p>移除过滤器(filter)</p>
<p>  过滤器虽然看起来很方便，但它需要一个自定义语法，打破大括号内表达式“只是Javascript”的假设，这不仅有学习成本，而且有实现成本！建议用方法调用或计算属性去替换过滤器</p>
</li>
</ul>
</school></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/02/25/web-nodeJS01/">web-nodeJS</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-02-25</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-30</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h2 id="fs文件系统模块">
          <a href="#fs文件系统模块" class="heading-link"><i class="fas fa-link"></i></a><a href="#fs文件系统模块" class="headerlink" title="fs文件系统模块"></a><font color="#44bd32">fs文件系统模块</font></h2>
      <p>fs模块是Node.js官方提供的，用来操作文件的模块。它提供了一系列的属性和方法，用来满足用户对文件的操作需求。</p>
<ul>
<li><p><code>fs.readFile()</code>方法，用来读取指定文件中的内容</p>
</li>
<li><p><code>fs.writeFile()</code>方法，用来向指定的文件中写入内容</p>
</li>
</ul>
<p><strong>需要先导入fs模块</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="01-fs-readFile-方法，可以读取指定文件中的内容。">
          <a href="#01-fs-readFile-方法，可以读取指定文件中的内容。" class="heading-link"><i class="fas fa-link"></i></a><a href="#01-fs-readFile-方法，可以读取指定文件中的内容。" class="headerlink" title="01. fs.readFile()方法，可以读取指定文件中的内容。"></a>01. fs.readFile()方法，可以读取指定文件中的内容。</h3>
      <p><code>fs.readFile(path,[option],callback)</code></p>
<ul>
<li><p>参数1：必选参数，字符串，表示文件的路径</p>
</li>
<li><p>参数2：可选参数，表示以什么编码格式来读取文件</p>
</li>
<li><p>参数3：必选参数，文件读取完成后，通过回调函数拿到读取的结果</p>
</li>
</ul>

        <h3 id="02-fs-writeFile-方法，向指定的文件中写入内容。">
          <a href="#02-fs-writeFile-方法，向指定的文件中写入内容。" class="heading-link"><i class="fas fa-link"></i></a><a href="#02-fs-writeFile-方法，向指定的文件中写入内容。" class="headerlink" title="02. fs.writeFile()方法，向指定的文件中写入内容。"></a>02. fs.writeFile()方法，向指定的文件中写入内容。</h3>
      <p><code>fs.writeFile(file,data,[options],callback)</code></p>
<ul>
<li><p>参数1：必选参数，需要指定一个文件路径的字符串。表示文件的存放路径</p>
</li>
<li><p>参数2：必选参数，表示要写入文件的内容</p>
</li>
<li><p>参数3：可选参数，表示以什么格式写入文件内容，默认值是utf8</p>
</li>
<li><p>参数4：必选参数，文件写入完成后的回调函数</p>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">writeFile</span>(<span class="string">&#x27;../resources/txt4.md&#x27;</span>, <span class="string">&#x27;hesssllo world&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;打印：&#x27;</span> + err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>如果文件写入成功，err打印null</p>
</blockquote>

        <h3 id="03-fs模块，路径动态拼接问题">
          <a href="#03-fs模块，路径动态拼接问题" class="heading-link"><i class="fas fa-link"></i></a><a href="#03-fs模块，路径动态拼接问题" class="headerlink" title="03. fs模块，路径动态拼接问题"></a>03. fs模块，路径动态拼接问题</h3>
      <blockquote>
<p>在使用fs模块操作文件时，如果提供的操作路径是以.&#x2F;或者..&#x2F;开头的相对路径时，很容易出现路径动态拼接错误的问题。原因是代码在运行的时候，会以执行node命令时所在的目录，动态拼接出被操作文件的完整路径</p>
</blockquote>
<p>可使用绝对路径解决，但是维护性、移植性较差</p>
<p><strong>__dirname表示当前运行的js文件所在的<font color="red">目录</font></strong></p>

        <h2 id="path路径模块">
          <a href="#path路径模块" class="heading-link"><i class="fas fa-link"></i></a><a href="#path路径模块" class="headerlink" title="path路径模块"></a><font color="#44bd32">path路径模块</font></h2>
      <p><strong>导入</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br></pre></td></tr></table></div></figure>
<p><strong>语法：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.<span class="title function_">join</span>([option])</span><br></pre></td></tr></table></div></figure>

<p>参数不限，可以将多个字符串拼接成一个字符串返回</p>
<p><strong>注意：如果参数为<code>../</code>的字符串，那么它会抵消掉紧挨着前面的字符串的一层路径</strong></p>
<p>涉及到路径拼接的操作，使用path.join操作</p>
<p><strong>path.basename()</strong></p>
<p>语法：</p>
<p><code>path.basename(path,[ext])</code></p>
<ul>
<li><p>第一个参数：必选参数，表示一个路径的字符串</p>
</li>
<li><p>第二个参数：可选参数，表示文件扩展名。去除掉文件路径最后一个部分的此参数后缀名</p>
</li>
<li><p>返回，<string>表示路径中的最后一个部分</string></p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> fpath = <span class="string">&#x27;a/b/c/d/text.html&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fullbane = path.<span class="title function_">basename</span>(fpath, <span class="string">&#x27;.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullbane)</span><br><span class="line"><span class="comment">//输出text</span></span><br></pre></td></tr></table></div></figure>

<p><strong>path.extname()</strong></p>
<p>获取路径中的扩展名部分</p>
<p>语法：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.<span class="title function_">extname</span>(path)</span><br></pre></td></tr></table></div></figure>


        <h2 id="http模块">
          <a href="#http模块" class="heading-link"><i class="fas fa-link"></i></a><a href="#http模块" class="headerlink" title="http模块"></a><font color="#44bd32">http模块</font></h2>
      <p><strong>http模块是Node.js官方提供的，用来创建web服务器模块，通过http提供的htto.creatServer()方法，就能方便的把一台普通的电脑，变成一台Web服务器，从而对外提供Web资源服务</strong></p>
<blockquote>
<p>服务器与普通电脑的区别：服务器上安装了web服务器软件，丽日：IIS,Apache等。通过这些服务器软件，就能把一台普通的电脑变成一台web服务器</p>
</blockquote>

        <h3 id="01-创建web服务器的基本步骤">
          <a href="#01-创建web服务器的基本步骤" class="heading-link"><i class="fas fa-link"></i></a><a href="#01-创建web服务器的基本步骤" class="headerlink" title="01. 创建web服务器的基本步骤"></a>01. 创建web服务器的基本步骤</h3>
      <ul>
<li><p>导入http模块</p>
</li>
<li><p>创建web服务器实例</p>
</li>
<li><p>为服务器实例绑定request事件，监听客户端的请求</p>
<p>  req参数：req是请求对象，它包含了与客户端相关的数据和属性。例如：</p>
<p>  <strong><font color="green">req.url：是客户端请求的url地址</font></strong></p>
<p>  <strong><font color="green">req.method：是客户端的method请求类型</font></strong></p>
<p>  res参数：res是响应对象，它包含了与服务器相关的数据和属性。例如：</p>
<p>  <code>res.setHeader(&#39;Content-Type&#39;,&#39;text/html;charset=utf-8&#39;)</code><strong>或者</strong></p>
<p>  <code>res.writeHead(200,&#123;&#39;Content-Type&#39;:&#39;text/plain;charset=utf-8&#39;&#125;) //解决响应的值乱码</code></p>
<p>  <strong><font color="green">req.end():向客户端发送指定的内容，并结束这次请求的处理过程</font></strong></p>
</li>
<li><p>启动服务器</p>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>()</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">on</span>(<span class="string">&#x27;request&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有客户端发送请求&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="string">&#x27;5134&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已启动&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h2 id="模块化">
          <a href="#模块化" class="heading-link"><i class="fas fa-link"></i></a><a href="#模块化" class="headerlink" title="模块化"></a><font color="#44bd32">模块化</font></h2>
      
        <h3 id="01-Node-js中模块的分类">
          <a href="#01-Node-js中模块的分类" class="heading-link"><i class="fas fa-link"></i></a><a href="#01-Node-js中模块的分类" class="headerlink" title="01. Node.js中模块的分类"></a>01. Node.js中模块的分类</h3>
      <ul>
<li><p>内置模块(有Node.js官方提供，例如fs，http，path等)</p>
</li>
<li><p>自定义模块(用户创建的每个.js文件，都是自定义模块)</p>
</li>
<li><p>第三方模块(由第三方开发出来的模块，并非官方提供的内置模块，也不是用户创建的自定义模块，使用前需要先下载)</p>
</li>
</ul>

        <h3 id="02-加载模块">
          <a href="#02-加载模块" class="heading-link"><i class="fas fa-link"></i></a><a href="#02-加载模块" class="headerlink" title="02. 加载模块"></a>02. 加载模块</h3>
      <ul>
<li>使用强大的require()方法，可以加载需要的内置模块，自定义模块，第三方模块进行使用</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 加载内置模块</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 加载用户自定义模块,可以省略.js后缀名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> custom = <span class="built_in">require</span>(<span class="string">&#x27;./custom.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 加载第三方模块</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> moment = <span class="built_in">require</span>(<span class="string">&#x27;moment&#x27;</span>)</span><br></pre></td></tr></table></div></figure>


        <h3 id="03-模块作用域">
          <a href="#03-模块作用域" class="heading-link"><i class="fas fa-link"></i></a><a href="#03-模块作用域" class="headerlink" title="03. 模块作用域"></a>03. 模块作用域</h3>
      <p>和函数作用域类似，在自定义模块中定义的变量，方法等成员，只能在当前模块内被访问，这种模块级别的访问限制，叫做模块作用域</p>
<p>即使require了自定义模块，也不能直接访问其变量</p>

        <h3 id="04-module对象">
          <a href="#04-module对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#04-module对象" class="headerlink" title="04. module对象"></a>04. module对象</h3>
      <p>在每个.js自定义模块中都有一个module对象，它里面存储了和当前模块有关的信息。</p>
<p><strong>在自定义模块中，可以使用module.exports对象，将模块内的成员共享出去，供外界使用，外界用require()方法导入自定义模块时，返回得到的就是module.exports所指向的对象</strong></p>
<p>在一个自定义模块中，默认情况下，module.exports &#x3D; {}。可以向module.exports对象上挂在属性或者方法</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>.<span class="property">username</span> = <span class="string">&#x27;zs&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>.<span class="property">fn1</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>调用：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> m = <span class="built_in">require</span>(<span class="string">&#x27;./m1.js&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m.<span class="property">username</span>)</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">使用require()方法导入模块时，导入的结果，永远以module.exports指向的对象为准，比如在模块中重写了module.exports对象，那么就以这个重写的对象为准</font></strong></p>

        <h3 id="05-exports对象">
          <a href="#05-exports对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#05-exports对象" class="headerlink" title="05. exports对象"></a>05. exports对象</h3>
      <p>由于module.exports单词写起来比较复杂，为了简化向外共享成员的代码，Node提供了exports对象，默认下，exports和module.exports指向同一个对象。最终共享的结果，以module.exports指向的对象为准。比如为exports设置属性name,module.exports也设置了属性name，那么以module.exports.name为准</p>
<p><strong><font color="red">注意：exports和module.exports默认指向同一个对象，但是如果另外为exports或module.exports赋值一个对象的话，那么被赋值的那个就指向了新的对象，最终共享的结果，则是以module。exports指向的对象为准</font></strong></p>
<p>比如：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span> = &#123;</span><br><span class="line">	<span class="string">&#x27;uname&#x27;</span>:<span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">	<span class="string">&#x27;uage&#x27;</span>:<span class="string">&#x27;18&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//exports指向了新得对象，module.exports还是指向默认的对象</span></span><br></pre></td></tr></table></div></figure>

<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> c = <span class="built_in">require</span>(<span class="string">&#x27;./n1.js&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c.<span class="property">uname</span>)</span><br></pre></td></tr></table></div></figure>

<p>&#x3D;&gt;打印undefined</p>

        <h3 id="05-npm与包">
          <a href="#05-npm与包" class="heading-link"><i class="fas fa-link"></i></a><a href="#05-npm与包" class="headerlink" title="05.npm与包"></a>05.npm与包</h3>
      <p>node_modules文件夹用来存放所有已安装到项目中的包，require()导入第三方包时，就是从这个目录中查找并加载包</p>
<p>package-lock.json配置文件用来记录node_modules目录下的每一个包的下载信息，例如包的名字，版本号，下载地址等</p>
<p><strong>(1) 安装包</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install moment</span><br></pre></td></tr></table></div></figure>

<p><strong>安装指定版本的包</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i moment@<span class="number">2.24</span><span class="number">.0</span></span><br></pre></td></tr></table></div></figure>

<p><strong>包的版本号是以“点分十进制”进行定义的。总共有三位数字。丽日2.24.0</strong></p>
<p>第一位数字：大版本(底层重构)</p>
<p>第二位数字：功能版本(更新了功能)</p>
<p>第三位数字：Bug修复版本(修复了bug)</p>
<p>版本号提升规则：只要前面的版本号增长了，则后面的版本号归零</p>
<p><strong>(2)包管理配置文件</strong></p>
<p>下载的第三方包过大，不方便共享到github上，所以一般不上传第三方包，但是要在项目上标记下用了哪些包方便其他人下载后部署。</p>
<p>在项目根目录中，创建一个叫做package.json的配置文件，即用来记录项目中安装了哪些包，从而方便提出node_modules目录之后，在团队成员之间共享项目的源代码</p>
<p>注意：今后项目开发中，一定要吧node_modules文件夹，添加到.gitgore忽略文件中</p>
<p>package.json创建指令：</p>
<p><code>npm init -y</code></p>
<blockquote>
<p>指令只能在英文的目录下运行，当运行npm install命令安装包的时候，npm包管理工具自动把包的名称和版本号，记录到package.json中</p>
</blockquote>
<p><strong>(3)一次性安装所有包</strong></p>
<p>当拿到一个剔除‘node_modules’的项目之后，需要先把所有的包下载到项目中，才能将项目运行起来</p>
<p>运行    <code>npm install</code>&#x2F;<code>npm i</code>,一次性安装所有的依赖包</p>
<blockquote>
<p>执行npm install指令时，npm包管理工具会先读取package.json中的dependencies节点，读取到记录的所有依赖包名称和版本号之后，npm包管理工具会把这些包一次性下载到项目中</p>
</blockquote>
<p><strong>(3)移除包（需要指定包名）</strong></p>
<p><code>npm uninstall moment</code></p>
<p>执行成功后，会把卸载的包，自动从package.json的dependencies中移除掉</p>
<p>如果某些包只在项目开发阶段用到，上线用不到，则可以把这些包记录到devDependencies节点中。</p>
<p><code>npm i 包名 D</code>(简写)</p>
<p>&#x3D;&#x3D;</p>
<p><code>npm install 包名 --save-dev</code></p>
<p><strong>(4)解决下包速度慢</strong></p>
<p>淘宝在国内搭建了一个服务器，专门把国外官方服务器上的包同步到国内的服务器，然后在国内提供下包的服务，从而极大的提高了下包的速度</p>
<ul>
<li>切换npm的下包镜像源头：</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 查看当前的下包镜像源（<span class="attr">https</span>:<span class="comment">//registry.npmjs.org/）</span></span><br><span class="line"></span><br><span class="line">npm config get registry</span><br><span class="line"></span><br><span class="line"># 将下包的镜像源切换为淘宝镜像源</span><br><span class="line"></span><br><span class="line">npm config set registry = <span class="attr">https</span>:<span class="comment">//registry.npm.taobao.org/</span></span><br></pre></td></tr></table></div></figure>

<ul>
<li>nrm</li>
</ul>
<p>nrm工具，可以快速查看和切换下包的镜像源</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#通过npm，将nrm安装为全局可用的工具</span><br><span class="line"></span><br><span class="line">npm i nrm -g</span><br><span class="line"></span><br><span class="line">#查看所有可用的镜像源</span><br><span class="line"></span><br><span class="line">nrm ls</span><br><span class="line"></span><br><span class="line">#切换</span><br><span class="line"></span><br><span class="line">nrm use taobao</span><br></pre></td></tr></table></div></figure>

<p><strong>(5)包的分类</strong></p>
<p>项目包&#x2F;全局包</p>
<ul>
<li><p>项目包：{开发依赖包,核心依赖包} &#x3D; {devDependencies,dependencies}</p>
</li>
<li><p>全局包：在执行安装指令时，提供了-g参数。(默认在C:\Users\planeswalker\AppData\Roaming\npm\node_modules)</p>
</li>
</ul>
<p>安装全局包&#x2F;卸载全局包</p>
<p><code>npm i [packagename] -g</code>&#x2F;<code>npm uninstall [packagename] -g</code></p>
<blockquote>
<p>注意：只有工具性质的包，才有全局安装的必要性。判断某个包是否需要全局安装后才使用，参考官方提供的使用说明即可</p>
</blockquote>
<p><strong>(6)自定义模块加载机制</strong></p>
<p><strong><font color="red">注意：使用require()加载自定义模块时，必须指定以.&#x2F;或..&#x2F;开头的路径标识符。如果没有指定，则node会把它当作内置模块或者第三方模块来加载</font></strong></p>
<blockquote>
<p>同时，在使用require()导入自定义模块时，如果省略了文件的扩展名，则Node.js会按顺序分别尝试加载以下的文件：(1)按照确切的文件名进行加载 (2)补全.js扩展名进行加载  (3)补全.json扩展名进行加载 (4)补全.node扩展名进行加载 (5)报错</p>
</blockquote>
<p><strong>(7)第三方模块加载机制</strong></p>
<p>如果没有找到对应的第三方模块，则移动到再上一层父目录中，进行加载，直到文件系统的跟目录</p>
<p><strong>(8)目录作为模块加载机制</strong></p>
<p>把目录作为模块标识符，传递给require()进行加载的时候，有三种加载方式。</p>
<ul>
<li><p>在被加载的目录下查找一个叫做package.json的文件，寻找main属性作为加载入口</p>
</li>
<li><p>如果没有package.json文件，或者main入口不存在或无法解析，则Node.js将会试图加载目录下的index.js文件</p>
</li>
<li><p>如果都失败，打印错误</p>
</li>
</ul>

        <h2 id="Express">
          <a href="#Express" class="heading-link"><i class="fas fa-link"></i></a><a href="#Express" class="headerlink" title="Express"></a><font color="#44bd32">Express</font></h2>
      
        <h2 id="1-创建服务器">
          <a href="#1-创建服务器" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-创建服务器" class="headerlink" title="1. 创建服务器"></a>1. 创建服务器</h2>
      <p>Express是基于Node.js平台，快速 开放 极简的Web开发框架</p>
<p><strong>1.1. 创建一个基本的web服务器</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 导入express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 创建web服务器</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.调用app.listen(端口号,启用成功的回调函数)，启动服务器</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">8199</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;express server running at http://127.0.0.1:8199&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>1.2. 监听GET&#x2F;POST请求</strong></p>
<p>通过app.get()方法，可以监听客户端的GET请求，</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 参数1：/user 客户端请求的url地址</span></span><br><span class="line"><span class="comment"> * 参数2：请求对应的处理函数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@req</span> 请求对象(包含了与请求相关的属性和方法)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@res</span> 响应对象(包含了与响应相关的属性和方法)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//向客户端发送json对象</span></span><br><span class="line">    res.<span class="title function_">send</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="string">&#x27;20&#x27;</span>, <span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span> &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>1.3. 获取URL中携带的查询参数</strong></p>
<p>通过<code>req.query</code>对象，可以访问到客户端通过查询字符串的形式，发送到服务器的参数</p>
<p><code>req.query.name</code></p>
<p>默认req.query是空对象</p>
<p><strong>1.4.获取URL中的动态参数</strong></p>
<p>通过<code>req.params</code>对象，可以访问到URL中，通过:匹配到的动态参数</p>
<p>URL地址中，可以通过<code>:参数名</code>的形式，匹配动态参数值</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/users:id&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">params</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/users/:id&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">params</span>)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></div></figure>
<p>访问 <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost:8494/users3%E6%88%96%E8%80%85http://localhost:8494/users/3%E3%80%82req.params%E4%B8%AD%E7%9A%84id%E5%B1%9E%E6%80%A7%E5%80%BC%E4%B8%BA3">http://localhost:8494/users3或者http://localhost:8494/users/3。req.params中的id属性值为3</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><strong><font color="red">如果有多个参数，:id和:name之间要有斜杠区分，不然报错</font></strong></p>

        <h2 id="2-托管静态资源">
          <a href="#2-托管静态资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-托管静态资源" class="headerlink" title="2. 托管静态资源"></a>2. 托管静态资源</h2>
      <p>express提供了一个非常好用的函数，叫做express.static()，通过它，我们可以非常方便地创建一个静态资源服务器，比如，将public目录下的图片，CSS文件，Javascript文件对外开放访问</p>
<p><code>app.use(express.static(&#39;public&#39;))</code></p>
<p><strong><font color="red">Express在指定的静态目录中查找文件，并对外提供资源的访问路径，因此，存放静态文件的目录名不会出现在URL中</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//快速对外提供静态资源</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(<span class="string">&#x27;../HTML&#x27;</span>))</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;http://localhost:80&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>访问HTML路径下的weather.html资源</p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost/weather.html">http://localhost:80/weather.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>注：如果要托管多个静态资源目录，可以多次调用express.static()，访问静态资源时，express.static()函数会根据目录的添加顺序查找所需的文件。如果第一个目录有此文件，就用第一个的，不会继续往后面找了</p>
<p><strong>如果希望在托管的静态资源访问路径之前，挂在路径前缀，则可以使用如下方式</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/public&#x27;</span>, express.<span class="title function_">static</span>(<span class="string">&#x27;../HTML&#x27;</span>))</span><br></pre></td></tr></table></div></figure>

<p>只从有public的路径去查找。</p>
<p><strong><font color="red">注意：如果托管了比如PAGE文件夹，里面都是HTML文件，那么要注意该文件引入的JS,CSS等也会是ip，端口下的访问路径，如：</font></strong></p>
<p><code>&lt;script type=&quot;text/javascript&quot; src=&quot;../JS/jquery-3.5.1.js&quot;&gt;&lt;/script&gt;</code></p>
<p>变成</p>
<p><code>&lt;script type=&quot;text/javascript&quot; src=&quot;http://localhost:5141/JS/jquery-3.5.1.js&quot;&gt;&lt;/script&gt;</code></p>
<p>可以将这些文件也托管为静态资源解决</p>

        <h2 id="3-Express路由">
          <a href="#3-Express路由" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-Express路由" class="headerlink" title="3. Express路由"></a>3. Express路由</h2>
      <p>比如打电话10086的人工客服，1-&gt;业务查询；2-&gt;手机充值；3-&gt;业务办理</p>
<p><strong>在这里，路由是案件与服务之间的映射关系</strong></p>
<p><strong>Express中，路由指的是客户端的请求与服务器处理函数之间的映射关系</strong></p>
<p>Express中的路由分3部分组成，分别是请求的类型，请求的URL地址，处理函数</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.请求类型(URL,处理函数)</span></span><br><span class="line">app.<span class="title function_">METHOD</span>(<span class="variable constant_">PATH</span>,<span class="variable constant_">HANDLER</span>)</span><br></pre></td></tr></table></div></figure>

<p>Express中路由的例子</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//匹配get请求，且请求URL为/</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">	res.<span class="title function_">send</span>(<span class="string">&#x27;hw&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//匹配post请求，且请求URL为/</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">	res.<span class="title function_">send</span>(<span class="string">&#x27;hw&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>路由匹配：1. 按照定义的先后顺序进行匹配 ；2.请求类型和请求的URL同时匹配成功，才会调用对应的处理函数 </p>
</blockquote>

        <h2 id="4-模块化路由">
          <a href="#4-模块化路由" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-模块化路由" class="headerlink" title="4. 模块化路由"></a>4. 模块化路由</h2>
      <p>(1) 创建路由模块对应的.js文件</p>
<p>(2) 调用express.Router()函数创建路由对象</p>
<p>(3) 向路由对象上挂在具体的路由</p>
<p>(4) 使用module.exports向外共享路由对象</p>
<p>(5) 使用app.use()函数注册路由模块</p>
<p><strong>路由模块</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>) <span class="comment">//导入express</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> router = express.<span class="title class_">Router</span>() <span class="comment">//创建路由对象</span></span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/user/list&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123; <span class="comment">//挂载获取用户列表的路由</span></span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Get user list&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/user/add&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123; <span class="comment">//挂载添加用户的路由</span></span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Add new user&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router <span class="comment">//向外导出路由对象</span></span><br></pre></td></tr></table></div></figure>

<p><strong>注册路由模块</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line">    <span class="comment">//1. 导入路由模块</span></span><br><span class="line"><span class="keyword">const</span> userRouter = <span class="built_in">require</span>(<span class="string">&#x27;./tNode01.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.使用app.user注册路由模块</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="string">&#x27;80&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已启动：http://localhost:80&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">use</span>(userRouter)</span><br></pre></td></tr></table></div></figure>

<p>接着就可以发起请求了</p>
<p><strong>app.use()函数的作用，就是来注册全局中间件</strong></p>
<p><strong><font color="green">为路由模块添加前缀</font></strong></p>
<p><code>app.use(&#39;/api&#39;，userRouter)</code></p>

        <h2 id="5-Express中间件">
          <a href="#5-Express中间件" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-Express中间件" class="headerlink" title="5. Express中间件"></a>5. Express中间件</h2>
      <p><strong>1. Express的中间件，本质上就是一个function处理函数，Express中间件的格式如下：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,<span class="keyword">function</span>(<span class="params">req,res,next</span>)&#123;</span><br><span class="line">	<span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注意：中间件函数的形参列表中，必须包含next参数，而路由处理函数中只包含req和res</font></strong></p>
<p><strong>2. next函数的作用</strong></p>
<p>next函数是实现多个中间件连续调用的关键，它表示把流转关系转交给下一个中间件或路由</p>
<p>定义中间件函数：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> mw = <span class="keyword">function</span>(<span class="params">req, res, next</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;这是一个简单的中间件函数&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//注意，在当前中间件的业务处理完毕后，必须调用next()函数</span></span><br><span class="line">    <span class="comment">//表示把流转关系转交给下一个中间件或路由</span></span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>客户端发起的任何请求，到达服务器之后，都会触发的中间件，叫做全局生效的中间件</strong></p>
<p>通过调用app.use(中间件函数)，即可定义一个全局生效的中间件</p>
<p><strong>3. 全局中间件的简写</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req,res,next</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;简单的中间件函数&#x27;</span>)</span><br><span class="line">	<span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>多个中间件之间，共享同一份req和res。基于这样的特性，可以在上游的中间件中，统一为req或res对象添加自定义的属性和方法，供下游的中间件或路由进行使用</strong></p>
<p><strong>4.定义多个全局中间件</strong></p>
<p>可以使用app.use()连续定义多个全局中间件。客户端请求到达服务器之后，会按照中间件定义的先后顺序依次进行调用</p>
<p><strong>5. 全局中间件的执行顺序</strong></p>
<p><font color="blue">以JS中的执行顺序为准，从上往下执行，如果没有全局中间件中没有执行next()，那么就不会继续往下执行了。</font></p>
<p>如：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;get方法&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第一个全局中间件&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第二个全局中间件&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第三个全局中间件&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>访问<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost/user%E5%9C%B0%E5%9D%80%E5%90%8E%E4%B8%8D%E4%BC%9A%E7%BB%A7%E7%BB%AD%E5%BE%80%E4%B8%8B%E6%89%A7%E8%A1%8C%E5%85%A8%E5%B1%80%E4%B8%AD%E9%97%B4%E4%BB%B6">http://localhost:80/user地址后不会继续往下执行全局中间件</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>如：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res,next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;get方法&#x27;</span>)</span><br><span class="line">	<span class="title function_">next</span>()</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第一个全局中间件&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第二个全局中间件&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第三个全局中间件&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>访问<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost/user%E5%90%8E%E4%BC%9A%E7%BB%A7%E7%BB%AD%E5%BE%80%E4%B8%8B%E6%89%A7%E8%A1%8C%E3%80%82%E4%BB%A5%E4%B8%8A%E6%B3%A8%E5%86%8C%E7%9A%84%E8%B7%AF%E7%94%B1%E5%90%8C%E7%90%86">http://localhost/user后会继续往下执行。以上注册的路由同理</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>注意：如果全局中间件中只有一个中间件函数</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第一个全局中间件&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>那么此中间件拦截的路径包含所有:<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost/">http://localhost:80/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>…</p>
<p>如果全局中间件中第一个参数加了路径</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/get&#x27;</span>,<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第一个全局中间件&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>那么此全局中间件就只拦截该路径下的地址:<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost/user/">http://localhost:80/user/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>…</p>
<p><strong>6. 局部中间件</strong></p>
<p>不受用app.use()定义的中间件，叫做局部生效的中间件</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">mw1</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;局部生效的中间件&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/getUser&#x27;</span>, mw1, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;局部生效&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>访问getUser地址会生效，访问&#x2F;地址不会生效此中间件</p>
<p><strong>7. 定义多个局部中间件</strong></p>
<p>可以在路由中，通过如下两种等价的方式，使用多个局部中间件</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">mw1</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;局部生效的中间件1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mw2</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;局部生效的中间件2&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mw3</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;局部生效的中间件3&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/getUser&#x27;</span>, [mw1, mw2, mw3], <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;dddd&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>
<p>或者</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/getUser&#x27;</span>, mw1, mw2, mw3, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;dddd&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">使用中间件的注意事项</font></strong></p>
<ul>
<li><p>当一个请求到服务器上时，都是从上往下进行匹配的，匹配成功了则直接响应，不会继续向下匹配了。所以无论时全局生效的中间件，还是局部定义的中间件，都需要在请求的上面</p>
</li>
<li><p>执行完中间件的业务代码之后，不要忘记调用next()函数</p>
</li>
<li><p>客户端发送过来的请求，可以连续调用多个中间件进行处理</p>
</li>
<li><p>为了防止代码逻辑混乱，调用next()函数后不要再写额外的代码</p>
</li>
<li><p>连续调用多个中间件时，多个中间件之间，共享req和res</p>
</li>
</ul>

        <h2 id="6-中间件的分类">
          <a href="#6-中间件的分类" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-中间件的分类" class="headerlink" title="6. 中间件的分类"></a>6. 中间件的分类</h2>
      <ul>
<li><p><strong>应用级别的中间件</strong></p>
<p>  <font color="green">通过app.use(),app.get(),app.post()等绑定到app实例尚的中间件，叫做应用级别的中间件</font></p>
</li>
<li><p><strong>路由级别的中间件</strong></p>
<p>  <font color="green">绑定到express.Router()实例上的中间件，叫做路由级别的中间件，它的用法和应用级别中间件没有任何区别，只是应用级别中间件时绑定到app实例上，路由级别的中间件绑定到router实例上</font></p>
  <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;路由级别的中间件&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>
</li>
<li><p><strong>错误级别的中间件</strong></p>
<p>  <font color="green">作用：专门用来捕获整个项目中发生的异常错误，从而防止项目异常崩溃问题</font></p>
<p>  错误级别中间件的function处理函数中，必须有四个形参，形参顺序从前到后，分别是(err,req,res,next)。</p>
  <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">use</span>(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;发生了错误:&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;ERROR!&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line"><span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>
<p>  <strong><font color="red">注意：错误级别的中间件，必须注册在所有路由之后</font></strong></p>
<p>  因为抛出错误后，该服务后面的代码不会继续执行，会找后面有没有错误级别的中间件，如果没有服务崩溃。如果有捕获错误</p>
</li>
<li><p><strong>Express的内置中间件</strong></p>
<p>  自Express 4.16.0 版本开始，Express内置了3个常用的中间件，极大提高了Express项目的开发效率和体验</p>
<ol>
<li>express.static快速托管静态资源的内置中间件，例如HTML文件、图片、CSS样式等(无兼容性)</li>
<li>express.json解析JSON格式的请求体数据(有兼容性，仅在4.16.0+版本可用)</li>
</ol>
  <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">use</span>(express.<span class="title function_">json</span>())</span><br></pre></td></tr></table></div></figure>
<p>  在服务器中，可以使用req.body来接收客户端发送的POST请求体数据。默认情况下，如果客户端发送的是JSON格式的请求体，服务端不配置解析表单数据的中间件，则req.body默认为undefined。只有配置了此内置中间件，才会正常解析json数据</p>
<ol start="3">
<li>express.urlencoded解析URL-encoded格式的请求体数据(有兼容性，仅在4.16.0+版本可用)</li>
</ol>
<p>  <code>router.use(express.urlencoded(&#123; extended: false &#125;))</code></p>
<p>  <font color="red">注意：req.body是对象，console.log(‘’+req.body)写法会报错<code>Cannot convert object to primitive value</code>，需要写成console.log(‘’,req.body)</font></p>
</li>
<li><p><strong>第三方的中间件</strong></p>
<p>  非Express官方内置的，而是由第三方开发出来的中间件，叫做第三方中间件</p>
<p>  例如：body-parse这个第三方中间件来解析请求体数据</p>
<ol>
<li><p>运行<code>npm install body-parse</code>安装中间件</p>
</li>
<li><p>使用require导入中间件</p>
</li>
<li><p>调用app.use()注册并使用中间件</p>
</li>
</ol>
<p>  <strong>如果没有配置任何解析表单数据的中间件，则req.body默认等于undefined</strong></p>
  <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> parser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>)</span><br><span class="line">router.<span class="title function_">use</span>(parser.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/user/list&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123; </span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">body</span>) <span class="comment">//此处如果用+符号加上字符串会报错</span></span><br><span class="line">   res.<span class="title function_">send</span>(<span class="string">&#x27;Get user list&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>  Express内置的express.urlencoded中间件，就是基于body-parse这个第三方中间件进一步封装出来的</p>
</li>
</ul>

        <h2 id="7-CORS跨域资源共享">
          <a href="#7-CORS跨域资源共享" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-CORS跨域资源共享" class="headerlink" title="7. CORS跨域资源共享"></a>7. CORS跨域资源共享</h2>
      <p><strong>解决接口跨域问题的方案主要有两种：</strong></p>
<ol>
<li><p>CORS(主流解决方案，推荐使用)</p>
</li>
<li><p>JSONP(只支持get请求)</p>
</li>
</ol>
<p><strong>CORS是Express的一个第三方中间件，通过安装和配置cors中间件，可以比较方便解决跨域问题</strong></p>
<ol>
<li><p>运行<code>npm i cors</code></p>
</li>
<li><p>导入<code>const cors = require(&#39;cors&#39;)</code></p>
</li>
<li><p>在路由之前调用<code>app.use(cors())</code></p>
</li>
</ol>

        <h2 id="8-项目中操作mysql">
          <a href="#8-项目中操作mysql" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-项目中操作mysql" class="headerlink" title="8. 项目中操作mysql"></a>8. 项目中操作mysql</h2>
      <ol>
<li><p>安装Mysql数据库的第三方模块</p>
</li>
<li><p>通过mysql模块链接到MySQL数据库</p>
</li>
<li><p>通过mysql模块执行SQL语句</p>
</li>
</ol>
<p><strong>1. 安装mysql模块</strong></p>
<p>mysql模块是托管于npm尚的第三方模块，它提供了在Node.js项目中连接和操作MtSQL数据库的能力</p>
<p><code>npm install mysql</code></p>
<p><strong>2. 配置mysql模块</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 导入mysql</span></span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.建立与MySQL数据库的连接</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> db = mysql.<span class="title function_">createPool</span>(&#123;</span><br><span class="line">    <span class="comment">//默认端口3306</span></span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="comment">//数据库的IP地址</span></span><br><span class="line">    <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>, <span class="comment">//登录数据库的账号</span></span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span>, <span class="comment">//登录数据库的密码</span></span><br><span class="line">    <span class="attr">database</span>: <span class="string">&#x27;testsgg&#x27;</span> <span class="comment">//要操作的数据库的名称</span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">db.<span class="title function_">query</span>(<span class="string">&#x27;select * from userInfo&#x27;</span>, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(results)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><code>query</code>方法，第一个参数为要执行的语句</p>
<p><strong>3. 使用占位符向数据表中插入数据</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> insertUser = &#123; <span class="attr">uid</span>: <span class="string">&#x27;3&#x27;</span>, <span class="attr">uname</span>: <span class="string">&#x27;lte&#x27;</span>, <span class="attr">uage</span>: <span class="string">&#x27;34&#x27;</span>, <span class="attr">uaddress</span>: <span class="string">&#x27;hszc&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&quot;insert into userInfo values (?,?,?,?)&quot;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, [insertUser.<span class="property">uid</span>, insertUser.<span class="property">uname</span>, insertUser.<span class="property">uage</span>, insertUser.<span class="property">uaddress</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;错误信息：&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(results.<span class="property">affectedRows</span>)</span><br><span class="line">	<span class="comment">//affectedRows代表受影响的行，为1时代表插入数据成功</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>更新数据同理</p>
<p><code>const sqlStr = &quot;update userinfo set Name=? where ID=?&quot;</code></p>
<p><strong>4.插入数据的快捷方式</strong></p>
<p><strong>需要数据对象的每个属性和数据表的字段一一对应</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该对象的属性名称需要与数据库的列名对应，不区分大小写，如果一个不对应，执行报错</span></span><br><span class="line"><span class="keyword">const</span> insertUser = &#123; <span class="attr">id</span>: <span class="string">&#x27;5&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;vvv&#x27;</span>, <span class="attr">age</span>: <span class="string">&#x27;27&#x27;</span>, <span class="attr">address</span>: <span class="string">&#x27;wszx&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&quot;insert into userInfo set ?&quot;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, insertUser, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;错误信息：&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(results.<span class="property">affectedRows</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>更新数据同理</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> insertUser = &#123; <span class="attr">id</span>: <span class="string">&#x27;2&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;xiaosb&#x27;</span>, <span class="attr">age</span>: <span class="string">&#x27;15&#x27;</span>, <span class="attr">address</span>: <span class="string">&#x27;jiaojiedi&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&quot;update userinfo set ? where id=?&quot;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, [insertUser, insertUser.<span class="property">id</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;错误信息：&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(results.<span class="property">affectedRows</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


<p><strong><font color="red">注：如果sql语句有多个占位符时，必须使用数组为每个占位符指定具体的值。如果sql语句中只有一个占位符，可以省略数组</font></strong></p>

        <h2 id="9-前后端的身份认证">
          <a href="#9-前后端的身份认证" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-前后端的身份认证" class="headerlink" title="9. 前后端的身份认证"></a>9. 前后端的身份认证</h2>
      <p>Web开发模式</p>
<p><strong>①基于服务端渲染的传统Web开发模式</strong></p>
<p>  服务器发送给客户端的HTML页面，是在服务器通过字符串的拼接，动态生成的。因此，客户端不需要使用Ajax这样的技术额外请求页面的数据</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> html = <span class="string">`&lt;h1&gt;姓名:<span class="subst">$&#123;user.name&#125;</span>&lt;/h1&gt;`</span></span><br><span class="line"></span><br><span class="line">res.<span class="title function_">send</span>(html)</span><br></pre></td></tr></table></div></figure>

<p>优点：前端耗时少；7有利于SEO</p>
<p>缺点：占用服务器资源；不利于前后端分离，开发效率低</p>
<p><strong>②基于前后端分离的新型Web开发模式</strong></p>
<p>前后端分离的开发模式，依赖于Ajax技术的广泛应用。简单来说，前后端分离的Web开发模式，就是后端只负责提供API接口，前端使用Ajax调用接口的开发模式</p>
<p>优点：开发体验好，前端专注于UI页面的开发，后端专注于api的开发，前端有更多选择性；用户体验号，轻松实现局部刷新；减轻服务器端的渲染压力</p>

        <h3 id="9-1-身份认证">
          <a href="#9-1-身份认证" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-1-身份认证" class="headerlink" title="9.1 身份认证"></a>9.1 身份认证</h3>
      <p><strong>1. 服务端渲染推荐使用Session认证机制</strong></p>
<p><strong>2.前后端分离推荐使用JWT认证机制</strong></p>

        <h3 id="9-2-Session认证机制">
          <a href="#9-2-Session认证机制" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-2-Session认证机制" class="headerlink" title="9.2 Session认证机制"></a>9.2 Session认证机制</h3>
      <p><strong>Cookie的几大特性</strong></p>
<ul>
<li><p>自动发送</p>
</li>
<li><p>域名独立</p>
</li>
<li><p>过期时限</p>
</li>
<li><p>4kb限制</p>
</li>
</ul>
<p>当express-session中间件配置成功后，即可通过req.session来访问和使用session对象，从而存储用户的关键信息</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入</span></span><br><span class="line"><span class="keyword">const</span> session = <span class="built_in">require</span>(<span class="string">&#x27;express-session&#x27;</span>)</span><br><span class="line"><span class="comment">//注册session中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(</span><br><span class="line">    <span class="title function_">session</span>(&#123;</span><br><span class="line">        <span class="attr">secret</span>: <span class="string">&#x27;itheima&#x27;</span>,</span><br><span class="line">        <span class="attr">resave</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">saveUninitialized</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/user/login&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    req.<span class="property">session</span>.<span class="property">user</span> = userInfo</span><br><span class="line">    req.<span class="property">session</span>.<span class="property">isLogin</span> = <span class="literal">true</span></span><br><span class="line">    res.<span class="title function_">send</span>(&#123; <span class="string">&#x27;status&#x27;</span>: <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;登录成功&#x27;</span> &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>清除session：<code>req.session.destroy()</code></p>

        <h3 id="9-2-JWT认证机制-JSON-WEB-TOKEN">
          <a href="#9-2-JWT认证机制-JSON-WEB-TOKEN" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-2-JWT认证机制-JSON-WEB-TOKEN" class="headerlink" title="9.2 JWT认证机制(JSON WEB TOKEN)"></a>9.2 JWT认证机制(JSON WEB TOKEN)</h3>
      <p>Session认证机制需要配合Cookie才能实现，由于Cookie默认不支持跨域访问，所以当涉及到前端跨域请求后端接口时，需要做很多额外的配置，才能实现Session跨域认证</p>
<p><strong>1. 注意：</strong></p>
<ul>
<li><p>当前端请求后端接口不存在跨域问题的时候，推荐使用Session身份认证机制</p>
</li>
<li><p>当前端需要跨域请求后端接口的时候，不推荐使用Session身份认证机制，推荐使用JWT认证机制</p>
</li>
</ul>
<p>JWT通常由三部分组成，Header(头部)，Payload(有效负荷)，Signature(签名)</p>
<p>三者之间用英文的’.’分隔</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Header</span>.<span class="property">Payload</span>.<span class="property">Signature</span></span><br></pre></td></tr></table></div></figure>

<p><strong>其中，Payload部分才是真正的用户信息，它是用户信息经过加密之后生成的字符串</strong></p>
<p><strong>Header和Signature是安全性相关的，只是为了保证Token的安全性</strong></p>
<p>客户端收到服务器返回的JWT后，通常会将它存储在localStorage或sessionStorage中，此后客户端每次与服务器通信，都要带上这个JWT的字符串，从而进行身份认证，推荐的做法是把JWT放在HTTP请求头的Authorazation字段中</p>
<p><strong>2. 在Express中使用JWT</strong></p>
<p>(1). 安装JWT相关的包</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install jsonwebtoken express-jwt</span><br></pre></td></tr></table></div></figure>

<p>其中，jsonwebtoken用于生成JWT字符串</p>
<p>express-jwt用于将JWT字符串解析还原成JSON对象</p>
<p>(2) 用户登录成功后生成JWT字符串</p>
<p>jsonwebtoken包中提供的sign()方法，接收三个参数</p>
<ul>
<li>参数一：对象&#x2F;负载，里面是用户的信息</li>
</ul>
<p><code>&#123;username：user info.username&#125;</code></p>
<ul>
<li>参数二：加密密钥(字符串)</li>
</ul>
<p><code>const secretKey = &#39;onesecret&#39;</code></p>
<ul>
<li>参数三：配置对象（指定有效期）</li>
</ul>
<p><code>expiresIn:&#39;30s&#39;</code></p>
<p>例如：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> jwt_sign = jwt.<span class="title function_">sign</span>(&#123; <span class="attr">username</span>: userObj.<span class="property">username</span>, <span class="attr">userpwd</span>: userObj.<span class="property">pwd</span> &#125;, <span class="string">&#x27;oneSecretKeyELDENRING&#x27;</span>, &#123; <span class="attr">expiresIn</span>: <span class="string">&#x27;30s&#x27;</span> &#125;)</span><br></pre></td></tr></table></div></figure>

<p>(3)服务器将token字符串发送给客户端</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="title function_">send</span>(&#123;</span><br><span class="line">	<span class="attr">status</span>:<span class="number">200</span>,</span><br><span class="line">	<span class="attr">message</span>:<span class="string">&#x27;登录成功&#x27;</span>,</span><br><span class="line">	<span class="attr">token</span>:jwt_sign</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>3. 将JWT字符串还原为JSON对象</strong></p>
<p>客户端每次在访问哪些有权限接口的时候，都需要主动通过请求头中的Authorization字段，将Tiken字符串发送到服务器进行身份认证。</p>
<p>此时，服务器可以通过Express-jwt这个中间件，自动将客户端发送过来的Token解析还原成JSON对象</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="title function_">expressJWT</span>(&#123;<span class="attr">secret</span>:secretKey&#125;).<span class="title function_">unless</span>(&#123;<span class="attr">path</span>:[<span class="regexp">/^\/api\//</span>]&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">//unless用来指定哪些接口没有访问权限，比如访问api的接口不会获取到token信息</span></span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注意：如果配置了express_jwt后，路径未通过token验证的话不会请求响应</font></strong></p>
<p>注意：只要配置成功了<code>express-jwt</code>中间件，就可以把解析出来的用户信息，挂载到req.user属性上</p>
<p>例如：</p>
<p>前端代码：</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">   $(&#x27;#btn2&#x27;).on(&#x27;click&#x27;, function(e) &#123;</span><br><span class="line">       e.preventDefault()</span><br><span class="line">       $.ajax(&#123;</span><br><span class="line">           type: &#x27;post&#x27;,</span><br><span class="line">           url: &#x27;/apis/userinfo&#x27;,</span><br><span class="line">           data: &#123;</span><br><span class="line">               a: &#x27;b&#x27;</span><br><span class="line">           &#125;,</span><br><span class="line">           headers: &#123;</span><br><span class="line">//注意在此之前要有Bearer前缀</span><br><span class="line">               Authorization: &#x27;Bearer &#x27; + auth</span><br><span class="line">           &#125;,</span><br><span class="line">           success: function(data) &#123;</span><br><span class="line">               console.log(&#x27;req.user:&#x27; + data)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></div></figure>
<p>后端代码</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="title function_">e_jwt</span>(&#123; <span class="attr">secret</span>: <span class="string">&#x27;oneSecretKeyELDENRING&#x27;</span>, <span class="attr">algorithms</span>: [<span class="string">&#x27;HS256&#x27;</span>] &#125;).<span class="title function_">unless</span>(&#123; <span class="attr">path</span>: [<span class="regexp">/^\/api\//</span>] &#125;))</span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/apis/userinfo&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;req.user:&#x27;</span>, req.<span class="property">user</span>)</span><br><span class="line">    res.<span class="title function_">send</span>(req.<span class="property">user</span>)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>4. 使用错误中间件捕获解析JWT失败后产生的错误</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err,req,res,next</span>)=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(err.<span class="property">name</span> === <span class="string">&#x27;UnauthorizedError&#x27;</span>)&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> res.<span class="title function_">send</span>(&#123;<span class="attr">status</span>:<span class="number">401</span>,<span class="attr">message</span>:<span class="string">&#x27;无效的token&#x27;</span>&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h1 id="其他-配置相关">
          <a href="#其他-配置相关" class="heading-link"><i class="fas fa-link"></i></a><a href="#其他-配置相关" class="headerlink" title="其他(配置相关)"></a><font color="green">其他(配置相关)</font></h1>
      <p><strong>设置npm全局安装路径与缓存路径:</strong></p>
<p>方法1. 指令操作</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm config set prefix <span class="string">&quot;D:\Program Files\nodejs\node_global&quot;</span></span><br><span class="line"></span><br><span class="line">npm config set cache <span class="string">&quot;D:\Program Files\nodejs\node_cache&quot;</span></span><br></pre></td></tr></table></div></figure>

<p>方法2. 修改相关文件(NodeJS\node_modules\npm\npmrc)</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">prefix=<span class="attr">D</span>:\<span class="title class_">OfficeSoftWareDownload</span>\<span class="title class_">NodeJS</span>\node_global</span><br><span class="line">cache=<span class="attr">D</span>:\<span class="title class_">OfficeSoftWareDownload</span>\<span class="title class_">NodeJS</span>\node_cache</span><br></pre></td></tr></table></div></figure></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/02/09/web-ecmascript01/">web-ecmascript01</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-02-09</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-28</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>ES6兼容性浏览器一览：</p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://kangax.github.io/compat-table/es6/">http://kangax.github.io/compat-table/es6/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h1 id="ES6">
          <a href="#ES6" class="heading-link"><i class="fas fa-link"></i></a><a href="#ES6" class="headerlink" title="ES6"></a><font color="#3c40c6">ES6</font></h1>
      
        <h2 id="let声明变量">
          <a href="#let声明变量" class="heading-link"><i class="fas fa-link"></i></a><a href="#let声明变量" class="headerlink" title="let声明变量"></a><font color="#20bf6b">let声明变量</font></h2>
      <p>特性：</p>
<ul>
<li><p>变量不能重复声明，如果重复会报错 </p>
</li>
<li><p>块级作用域,只在代码块中有效<code>&#123;let a = b&#125;</code></p>
</li>
<li><p>不存在变量提升</p>
<p>  变量提升：用var声明赋值的变量即使在之前调用此变量，也会返回结果undefined</p>
</li>
<li><p>不影响作用域链</p>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="keyword">let</span> school = <span class="string">&#x27;ggg&#x27;</span>;</span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(shcool);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="title function_">fn</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


<p><strong>实例运用：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> dvs = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;dv&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> a, b, c;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dvs.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    dvs[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        dvs[i].<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;red&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>此时点击不会生效，因为点击时循环已完成，全局变量(var)i是3</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> dvs = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;dv&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> a, b, c;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; dvs.<span class="property">length</span>; i++) &#123;</span><br><span class="line"></span><br><span class="line">    dvs[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">        dvs[i].<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;yellow&#x27;</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>此时点击生效，因为let是块级作用域，每个块内都有对应的值，不会被循环覆盖掉</p>

        <h2 id="const关键字">
          <a href="#const关键字" class="heading-link"><i class="fas fa-link"></i></a><a href="#const关键字" class="headerlink" title="const关键字"></a><font color="#20bf6b">const关键字</font></h2>
      <p>使用此关键字，值就不可以被更改</p>
<ul>
<li><p>一定要赋初始值</p>
</li>
<li><p>一般常量使用大写</p>
</li>
<li><p>常量的值不能修改</p>
</li>
<li><p>块级作用域</p>
</li>
<li><p>对于数组和对象的元素修改。不算做对常量的修改</p>
<p>  可以声明const的数组添加值，因为指向的地址没有改变。不可以对数组已有的值进行修改。对象同理</p>
</li>
</ul>

        <h2 id="解构赋值">
          <a href="#解构赋值" class="heading-link"><i class="fas fa-link"></i></a><a href="#解构赋值" class="headerlink" title="解构赋值"></a><font color="#20bf6b">解构赋值</font></h2>
      <p>ES6允许按照一定模式从数组和对象中提取值，对变量进行赋值</p>
<ol>
<li>数组的解构</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> f4 = [<span class="string">&#x27;xsy&#x27;</span>,<span class="string">&#x27;ln&#x27;</span>,<span class="string">&#x27;zs&#x27;</span>,<span class="string">&#x27;sxb&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> [x,l,z,s] = <span class="variable constant_">F4</span>;</span><br></pre></td></tr></table></div></figure>

<p>相当于声明了四个变量，每个值对应数组里的值。多出来的变量为undefined</p>
<ol start="2">
<li>对象的解构</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> zhao = &#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="string">&#x27;zbs&#x27;</span>,</span><br><span class="line">	<span class="attr">age</span>:<span class="string">&#x27;40&#x27;</span>,</span><br><span class="line">	<span class="attr">xiaopin</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;我可以演小品&#x27;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;name,age,xiaopin&#125; = zhao</span><br></pre></td></tr></table></div></figure>
<p><strong><font color="red">注意：对象的解构名称需要对应</font></strong></p>

        <h2 id="新的声明字符串的方式">
          <a href="#新的声明字符串的方式" class="heading-link"><i class="fas fa-link"></i></a><a href="#新的声明字符串的方式" class="headerlink" title="新的声明字符串的方式"></a><font color="#20bf6b">新的声明字符串的方式</font></h2>
      <ol>
<li>声明：</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">`zifuchuan`</span>;</span><br></pre></td></tr></table></div></figure>

<p>特性：</p>
<ul>
<li>内容中可以直接出现换行符</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">`&lt;ul&gt;</span></span><br><span class="line"><span class="string">			&lt;li&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">		   &lt;/ul&gt;`</span></span><br></pre></td></tr></table></div></figure>

<ul>
<li>变量拼接</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> l = <span class="string">&#x27;wx&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> str = <span class="string">`<span class="subst">$&#123;l&#125;</span>是我心中最优秀的演员`</span></span><br></pre></td></tr></table></div></figure>

        <h2 id="对象的简化写法">
          <a href="#对象的简化写法" class="heading-link"><i class="fas fa-link"></i></a><a href="#对象的简化写法" class="headerlink" title="对象的简化写法"></a><font color="#20bf6b">对象的简化写法</font></h2>
      <p> ES6允许在大括号里面，直接写入变量和函数，作为对象的属性和方法</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;sgg&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> change = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;dddd&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> school = &#123;</span><br><span class="line"></span><br><span class="line">	name,</span><br><span class="line">	change,</span><br><span class="line">	<span class="title function_">improve</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;简写方法&#x27;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="箭头函数">
          <a href="#箭头函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#箭头函数" class="headerlink" title="箭头函数"></a><font color="#20bf6b">箭头函数</font></h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="attr">names</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">    <span class="attr">sayHello</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="variable language_">this</span>==<span class="variable language_">window</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>与之前的声明函数的区别：</p>
<ol>
<li><p>this是静态的，this始终指向函数声明时所在作用域下的this的值(用call或者apply都不会改变)</p>
<p> <strong>箭头函数体内的this对象，就是定义该函数时所在的作用域指向的对象，而不是使用时所在的作用域指向的对象。</strong></p>
<blockquote>
<p>作用域是指函数内部，这里的箭头函数，也就是sayHello，所在的作用域其实是最外层的js环境，因为没有其他函数包裹(如果有其他函数包裹也需要是普通非箭头函数，这样该普通函数的this是调用时的对象，否则就继续往上层找)；然后最外层的js环境指向的对象是winodw对象，所以这里的this指向的是window对象。</p>
</blockquote>
<p> 如：</p>
 <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">getNam</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">name</span> = <span class="string">&#x27;aaa&#x27;</span></span><br></pre></td></tr></table></div></figure>

<p> 那么此时this就是window，不会改变</p>
</li>
<li><p>不能作为构造函数</p>
</li>
<li><p>不能使用arguments变量</p>
</li>
<li><p>箭头函数䣌简写</p>
<p> (1) 省略小括号（当形参有且只有一个）</p>
 <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">add</span> = n =&gt; &#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p> (2)省略花括号，当代码体只有一条语句的时候，此时return必须省略。而且语句的执行结果就是函数的返回值</p>
 <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">pow</span> = (<span class="params">n</span>) =&gt; n*n</span><br></pre></td></tr></table></div></figure>
<p> (3)两个都省略</p>
 <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">pow</span> = n =&gt; n * n</span><br></pre></td></tr></table></div></figure></li>
</ol>

        <h2 id="函数参数的默认值">
          <a href="#函数参数的默认值" class="heading-link"><i class="fas fa-link"></i></a><a href="#函数参数的默认值" class="headerlink" title="函数参数的默认值"></a><font color="#20bf6b">函数参数的默认值</font></h2>
      <ol>
<li>形参初始值</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b, c = <span class="number">10</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>具有默认值的参数，一般位置要靠后（潜规则）</p>
<ol start="2">
<li>与解构赋值结合</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">connect</span>(<span class="params">&#123; host = <span class="string">&#x27;127.0.0.1&#x27;</span>, username, password, port &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(host)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(username)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(password)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(port)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">connect</span>(&#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;password&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="string">&#x27;3306&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h2 id="REST">
          <a href="#REST" class="heading-link"><i class="fas fa-link"></i></a><a href="#REST" class="headerlink" title="REST"></a><font color="#20bf6b">REST</font></h2>
      <p>ES6引入rest参数，用于获取函数的实参。用来代替arguments</p>
<p>获取参数的方式</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//rest参数必须加此变量</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">data</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">	<span class="comment">//是个数组</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(args)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">data</span>(<span class="string">&#x27;aj&#x27;</span>, <span class="string">&#x27;bz&#x27;</span>, <span class="string">&#x27;sh&#x27;</span>)</span><br></pre></td></tr></table></div></figure>

<p><strong>rest参数必须要放到参数的最后</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a,b,...args</span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>放前面会报错</p>

        <h2 id="扩展运算符">
          <a href="#扩展运算符" class="heading-link"><i class="fas fa-link"></i></a><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a><font color="#20bf6b">扩展运算符</font></h2>
      <p>[…]扩展运算符能将数组转换为逗号分隔的参数序列</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">&#x27;zs&#x27;</span>, <span class="string">&#x27;ls&#x27;</span>, <span class="string">&#x27;ww&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">method</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">method</span>(arr)</span><br><span class="line">    <span class="comment">//形参是个一个参数(数组)</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">method</span>(...arr)</span><br><span class="line">    <span class="comment">//形参是三个参数</span></span><br></pre></td></tr></table></div></figure>


        <h2 id="Symbol">
          <a href="#Symbol" class="heading-link"><i class="fas fa-link"></i></a><a href="#Symbol" class="headerlink" title="Symbol"></a><font color="#20bf6b">Symbol</font></h2>
      <p>ES6引入了一种新的原始数据类型Symbol。表示独一无二的值。</p>
<ol>
<li><p>Symbol的值是唯一的，用来解决命名冲突的问题</p>
</li>
<li><p>Symbol值不能与其他数据进行运算</p>
</li>
<li><p>Symbol定义的对象属性不能使用for…in循环遍历，但是可以使用Reflect.ownKeys来获取对象的所有键名</p>
</li>
</ol>
<p>JS的数据类型</p>
<p>USONB：</p>
<pre><code>Undefined

String Symbol

Object

Null

Number

Blloean
</code></pre>
<p><strong>使用场景：</strong></p>
<ul>
<li>Symbol作为属性名</li>
</ul>
<p>第一种写法：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mySymbol = <span class="title class_">Symbol</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line">a[mySymbol] = <span class="string">&#x27;Hello!&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>因为Symbol的唯一性，所以不会和game中原有的属性冲突。安全的添加了属性和方法</p>
<ul>
<li>第二种写法</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> mySymbol = <span class="title class_">Symbol</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  [mySymbol]: <span class="string">&#x27;Hello!&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>由于Symbol()是一个表达式(动态的)，此种场景需要加个[]</p>
<p><strong>注意，Symbol值作为对象属性名时，不能用点运算符。因为点后面的不可以是声明的变量，而是一个字符串：[‘Symbol’],所以也就不是一个Symbol值</strong></p>

        <h2 id="迭代器">
          <a href="#迭代器" class="heading-link"><i class="fas fa-link"></i></a><a href="#迭代器" class="headerlink" title="迭代器"></a><font color="#20bf6b">迭代器</font></h2>
      <p>任何数据结构只要部署了Iterator接口，就可以完成遍历操作。</p>
<p>原生具备iterator接口的数据：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Arguments</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Set</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Map</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">String</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">TypedArray</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">NodeList</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>工作原理:</strong></p>
<p>a：创建一个指针对象，指向当前数据结果的起始位置</p>
<p>b：第一次调用对象的next方法，指针自动指向数据解构的第一个成员</p>
<p>c：接下来不断调用next方法，指针一直向后移动，直到指向最后一个成员</p>
<p>d：每调用next方法返回一个包含value和done属性的对象</p>
<p><strong>自定义遍历对象</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> oclass = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;终极一班&quot;</span>,</span><br><span class="line">    <span class="attr">stus</span>: [<span class="string">&#x27;xiaoming&#x27;</span>, <span class="string">&#x27;xiaoning&#x27;</span>, <span class="string">&#x27;xiaotian&#x27;</span>, <span class="string">&#x27;knight&#x27;</span>],</span><br><span class="line">	<span class="comment">//方法简写</span></span><br><span class="line">    [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123;</span><br><span class="line">        <span class="comment">//声明一个索引变量</span></span><br><span class="line">        <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * a:</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@returns</span> 创建并返回一个指针对象 </span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="attr">next</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &lt; <span class="variable language_">this</span>.<span class="property">stus</span>.<span class="property">length</span>) &#123;</span><br><span class="line">                    <span class="keyword">const</span> result = &#123;</span><br><span class="line">                        <span class="comment">/**</span></span><br><span class="line"><span class="comment">                         * b&amp;c:</span></span><br><span class="line"><span class="comment">                         * 第一次调用next方法，指针自动指向第一个成员</span></span><br><span class="line"><span class="comment">                         * 不断调用next方法，指针一直向后移动</span></span><br><span class="line"><span class="comment">                         * <span class="doctag">@value</span> :返回的值</span></span><br><span class="line"><span class="comment">                         * <span class="doctag">@done</span> ：false代表继续循环</span></span><br><span class="line"><span class="comment">                         * </span></span><br><span class="line"><span class="comment">                         */</span></span><br><span class="line">                        <span class="attr">value</span>: <span class="variable language_">this</span>.<span class="property">stus</span>[index],</span><br><span class="line">                        <span class="attr">done</span>: <span class="literal">false</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    index++;</span><br><span class="line">                    <span class="keyword">return</span> result;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> &#123;</span><br><span class="line">                        <span class="comment">/**</span></span><br><span class="line"><span class="comment">                         * 下标到达最后一个时true停止循环</span></span><br><span class="line"><span class="comment">                         */</span></span><br><span class="line">                        <span class="attr">value</span>: <span class="literal">undefined</span>,</span><br><span class="line">                        <span class="attr">done</span>: <span class="literal">true</span></span><br><span class="line">                    &#125;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> oclass) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="生成器">
          <a href="#生成器" class="heading-link"><i class="fas fa-link"></i></a><a href="#生成器" class="headerlink" title="生成器"></a><font color="#20bf6b">生成器</font></h2>
      <p>生成器函数是ES6提供的一种异步变成解决方案，语法行为与传统函数完全不同</p>
<p>生成器就是一种函数</p>
<p><strong>声明:</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> * <span class="title function_">gen</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>不能直接调用，需要用到next方法</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">gen</span>().<span class="title function_">next</span>()</span><br></pre></td></tr></table></div></figure>

<p><code>yield</code>：函数代码的分隔符</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;111111&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;第一段代码&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;222222&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;第二段代码&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;333333&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;第三段代码&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;444444&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;第四段代码&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;555555&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> objGen = <span class="title function_">gen</span>();</span><br><span class="line">objGen.<span class="title function_">next</span>()</span><br><span class="line">objGen.<span class="title function_">next</span>()</span><br><span class="line">objGen.<span class="title function_">next</span>()</span><br><span class="line">objGen.<span class="title function_">next</span>()</span><br><span class="line">objGen.<span class="title function_">next</span>()</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>第一个next执行第一条输出语句，第二个next执行第二条输出语句，以此类推</p>
</blockquote>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">info</span>(objGen.<span class="title function_">next</span>())</span><br></pre></td></tr></table></div></figure>

<p><strong>如果直接打印返回的值，打印的是包含value和done属性的对象，value的值是yield后面的值</strong></p>
<p><code>objGen.next()</code>相当于调用函数，<code>console.info(objGen.next())</code>相当于打印函数返回的值~</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//for...of遍历数据</span></span><br><span class="line"><span class="keyword">let</span> objGen = <span class="title function_">gen</span>()</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> objGen) &#123;</span><br><span class="line">    <span class="comment">//在每次执行函数的时候，此处打印了返回的对象中value的值</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>生成器函数可以直接传递参数，且next方法也可以传入实参。</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params"></span>) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;第一段代码&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> one = <span class="keyword">yield</span> <span class="string">&#x27;第二段代码&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(one)</span><br><span class="line">    <span class="keyword">let</span> two = <span class="keyword">yield</span> <span class="string">&#x27;第三段代码&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(two)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;第四段代码&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> objGen = <span class="title function_">gen</span>();</span><br><span class="line"><span class="comment">//第二个next的参数在函数中作为第一个yield语句的整体返回结果，one的值为AAA</span></span><br><span class="line">objGen.<span class="title function_">next</span>(‘<span class="variable constant_">AAA</span>’)</span><br><span class="line"><span class="comment">//第三个next的参数在函数中作为第二个yield语句的整体返回结果，one的值为AAA</span></span><br><span class="line">objGen.<span class="title function_">next</span>(‘<span class="variable constant_">BBB</span>’)</span><br><span class="line"><span class="comment">//以此类推</span></span><br></pre></td></tr></table></div></figure>

<p><strong>第二个next的参数在函数中作为第一个yield语句的整体返回结果</strong></p>
<p><strong>第三个next的参数在函数中作为第二个yield语句的整体返回结果，one的值为AAA</strong></p>
<p><font color="blue">因为每次yield后的就没有执行了</font></p>
<p><strong><font color="green">实例1：1S后执行one，再2s后执行two，再3s后执行three</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">one</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;1111&#x27;</span>);</span><br><span class="line">        iterator.<span class="title function_">next</span>();</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">two</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;22222&#x27;</span>)</span><br><span class="line">        iterator.<span class="title function_">next</span>();</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">three</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3333&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">one</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">two</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">three</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> iterator = <span class="title function_">gen</span>();</span><br><span class="line">iterator.<span class="title function_">next</span>();</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="green">实例2：模拟1S后执行获取用户数据，再1s后获取订单数据，再1s后获取商品数据</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="string">&#x27;用户数据&#x27;</span>;</span><br><span class="line">        iterator.<span class="title function_">next</span>(data)</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getOrders</span>(<span class="params">da</span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="string">&#x27;订单数据&#x27;</span>;</span><br><span class="line">        iterator.<span class="title function_">next</span>(data);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getGoods</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="string">&#x27;商品数据&#x27;</span>;</span><br><span class="line">        iterator.<span class="title function_">next</span>(data)</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> userData = <span class="keyword">yield</span> <span class="title function_">getUser</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(userData)</span><br><span class="line">    <span class="keyword">let</span> orderData = <span class="keyword">yield</span> <span class="title function_">getOrders</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(orderData)</span><br><span class="line">    <span class="keyword">let</span> goodData = <span class="keyword">yield</span> <span class="title function_">getGoods</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(goodData)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> iterator = <span class="title function_">gen</span>();</span><br><span class="line">iterator.<span class="title function_">next</span>();</span><br></pre></td></tr></table></div></figure>


        <h2 id="promise">
          <a href="#promise" class="heading-link"><i class="fas fa-link"></i></a><a href="#promise" class="headerlink" title="promise"></a><font color="#20bf6b">promise</font></h2>
      <p><strong>1. 基本使用</strong></p>
<p>实例化</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line">	<span class="comment">//内部代码同步执行</span></span><br><span class="line">	<span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="comment">//setTimeou异步任务</span></span><br><span class="line">		<span class="keyword">let</span> data = <span class="string">&#x27;用户数据&#x27;</span>;</span><br><span class="line">		<span class="comment">//数据获取成功，可执行方法resolve改变对象状态为成功</span></span><br><span class="line">		<span class="title function_">resolve</span>(data);</span><br><span class="line">		<span class="comment">//数据获取失败，可执行方法reject改变对象状态为失败</span></span><br><span class="line">		<span class="keyword">let</span> err = <span class="string">&#x27;数据获取失败&#x27;</span>;</span><br><span class="line">		<span class="title function_">reject</span>(err);</span><br><span class="line">	&#125;,<span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//调用promise对象的then方法</span></span><br><span class="line">p.<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">value</span>)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//成功状态时执行的方法</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line"></span><br><span class="line">&#125;,<span class="keyword">function</span>(<span class="params">reason</span>)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//失败状态时执行的方法</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(reason);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//catch方法:指定失败的回调</span></span><br><span class="line">p.<span class="title function_">catch</span>(<span class="function"><span class="params">reason</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(reason)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>注：在executor函数中调用resolve函数后,会触发promise.then设置的回调函数,而调用reject函数后,会触发promise.catch设置的回调函数.</p>
<p>promise对象状态：初始化、成功、失败</p>
<p><strong>2.Promise封装读取文件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 引入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.调用方法读取文件</span></span><br><span class="line"><span class="comment">// fs.readFile(&#x27;../resources/web-ecmascript01.md&#x27;, (err, data) =&gt; &#123;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//     //如果失败，抛出错误</span></span><br><span class="line"><span class="comment">//     if (err) throw err;</span></span><br><span class="line"><span class="comment">//     //如果成功,输出内容</span></span><br><span class="line"><span class="comment">//     console.log(data.toString())</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.使用Promise封装</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line"></span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;../resources/web-ecmascript01.md&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//判断是否读取失败</span></span><br><span class="line">        <span class="keyword">if</span> (err) <span class="title function_">reject</span>(err);</span><br><span class="line">        <span class="comment">//如果成功</span></span><br><span class="line">        <span class="title function_">resolve</span>(data)</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value.<span class="title function_">toString</span>())</span><br><span class="line">&#125;, <span class="keyword">function</span>(<span class="params">reason</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取失败！！&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>3.Promise封装ajax</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">    xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;https://api.apiopen.top/getJoke&#x27;</span>);</span><br><span class="line">    xhr.<span class="title function_">send</span>();</span><br><span class="line">    xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (xhr.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; xhr.<span class="property">status</span> &lt; <span class="number">300</span>) &#123;</span><br><span class="line">                <span class="title function_">resolve</span>(xhr.<span class="property">response</span>)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">reject</span>(xhr.<span class="property">status</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">p.<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span><br><span class="line">&#125;, <span class="keyword">function</span>(<span class="params">reason</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reason)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>4.then的返回结果</strong></p>
<p>then的返回结果也是一个Promise类型，且返回结果由回调函数(即该方法的参数)的执行结果来决定。</p>
<p>如果<strong>回调函数</strong>中返回的结果是一个非Promise类型的数据，且是执行的第一个回调函数，则then的返回的对象状态是的成功状态，返回的对象的值是回调中返回的值</p>
<p>如果<strong>回调函数</strong>中返回的结果是一个Promise类型的数据，那么返回的这个Promise对象的状态就是then的返回的对象的状态(成功or失败)，then返回的对象的值是Promise(成功or失败)的值-value</p>
<p>如果<strong>回调函数</strong>中是抛出了一个错误<code>throw &#39;出错了&#39;</code>。那么then的返回的对象的状态是失败的状态，返回的对象的值是抛出的错误的值</p>
<blockquote>
<p>因为then返回Promise对象，所以可以链式调用</p>
</blockquote>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">	</span><br><span class="line">	&#125;,<span class="function"><span class="params">reason</span>=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;,<span class="function"><span class="params">reason</span>=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>5.异步任务串联(多个文件内容读取)</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; response &#125; = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line"></span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;../resources/txt1.md&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(data)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fs.<span class="title function_">readFile</span>(<span class="string">&#x27;../resources/txt2.md&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>([value, data])</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;, <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reason)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fs.<span class="title function_">readFile</span>(<span class="string">&#x27;../resources/txt3.md&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">            value.<span class="title function_">push</span>(data)</span><br><span class="line">            <span class="title function_">resolve</span>(value)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;, <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reason)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value.<span class="title function_">join</span>(<span class="string">&#x27;\r\n&#x27;</span>))</span><br><span class="line">&#125;, <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


<p><strong>6. Promise中的方法</strong></p>
<ol>
<li>Promise.resolve方法:返回一个成功&#x2F;失败的promise对象</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">521</span>)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="title function_">resolve</span>(<span class="string">&quot;ok&quot;</span>)</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></div></figure>

<ul>
<li><p>如果传入的参数为非Promise类型的对象，则返回的结果为成功promise对象</p>
</li>
<li><p>如果传入的参数为Promise对象，则参数的结果决定了resolve的结果</p>
</li>
</ul>
<p>value:成功的数据或promise对象</p>
<ol start="2">
<li><p>Promise.reject方法：返回一个失败的promise对象</p>
</li>
<li><p>Promise.all方法：(promises)&#x3D;&gt;{}</p>
</li>
</ol>
<ul>
<li>promises:包含n个promise的数组</li>
</ul>
<p>说明：返回一个新的promise，只有所有的promise都成功才成功，只要有一个失败了就直接失败。如果成功，成功的结果是那些promise成功的结果的数组。如果失败，结果值按照最先传入的失败的promise的值</p>
<ol start="4">
<li>Promise.race方法：(promises)&#x3D;&gt;{}</li>
</ol>
<ul>
<li>promises:包含n个promise的数组</li>
</ul>
<p>说明：返回一个新的promise，第一个完成的promise的结果状态就是最终的结果状态</p>
<p><strong>7.改变状态</strong></p>
<ul>
<li>成功状态</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="title function_">resolve</span>(<span class="string">&#x27;success&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<ul>
<li>失败状态<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="title function_">reject</span>(<span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">throw</span> <span class="string">&quot;error&quot;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure></li>
</ul>
<p>如果是初始pending状态，那么then方法的回调函数不会被调用</p>
<p><strong>其他</strong></p>
<ul>
<li>then方法是异步的。如代码：</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="string">&#x27;111&#x27;</span>)</span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="string">&#x27;222&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;aa:&#x27;</span> + value)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>打印undefined</p>
</blockquote>
<ul>
<li>Promise可以执行多个回调：也就是如果一个promise成功了，如果有多个then，那么这些then的回调函数都会执行</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">let</span> p4 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&quot;success&quot;</span>)</span><br><span class="line">p4.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;1&quot;</span>,value)</span><br><span class="line">&#125;)</span><br><span class="line">p4.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;2&quot;</span>,value)</span><br><span class="line">&#125;)</span><br><span class="line">p4.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;3&quot;</span>,value)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<ul>
<li>改变promise状态和指定回调函数谁先谁后</li>
</ul>
<p>1） 都有可能，正常情况下是先指定回调再改变状态，但也可以先改状态再指定回调。以resolve为例</p>
<pre><code>`Promise回调函数中是同步任务(如直接调用resolve)，那么先改变promise对象的状态，然后再去then中指定回调`

`Promise回调函数中是异步任务(需要等待一段时间)，那么then方法(注意是then方法非then方法中的回调)先执行并指定回调，后改变状态`
</code></pre>
<ol start="2">
<li><p>什么时候得到数据(什么时候执行then的回调)：</p>
<ul>
<li><p>如果先指定的回调，那当状态发生变化时，回调函数就会调用，得到数据</p>
</li>
<li><p>如果先改变的状态，那当指定回调时，回调函数就会调用，得到数据</p>
</li>
</ul>
</li>
</ol>
<ul>
<li><p>then方法返回结果由什么来决定</p>
<p>  1）由then()指定的回调函数执行的结果决定</p>
<p>  2）a：如果抛出异常，新promise变为rejected，reason为抛出的异常；b：如果返回的是非promise的任意值，新promise变为resolved，value为返回的值；c:如果返回的是另一个新的proimise，此promise的结果就会成为新promise的结果</p>
</li>
</ul>
<p><strong>自定義promise</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Promise</span>(<span class="params">executor</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">PromiseState</span> = <span class="string">&#x27;pending&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">PromiseResult</span> = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//声明一个属性</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">callbacks</span> = []</span><br><span class="line"></span><br><span class="line">    <span class="comment">//保存实例对象的this的值，避免箭头函数时this指向window</span></span><br><span class="line">    <span class="keyword">const</span> self = <span class="variable language_">this</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//resolve函数</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">resolve</span>(<span class="params">data</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (self.<span class="property">PromiseState</span> !== <span class="string">&quot;pending&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line">        self.<span class="property">PromiseState</span> = <span class="string">&#x27;fulfilled&#x27;</span></span><br><span class="line">        self.<span class="property">PromiseResult</span> = data</span><br><span class="line"></span><br><span class="line">        self.<span class="property">callbacks</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            item.<span class="title function_">onResolved</span>(data)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//reject函数</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">reject</span>(<span class="params">data</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (self.<span class="property">PromiseState</span> !== <span class="string">&quot;pending&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line">        self.<span class="property">PromiseState</span> = <span class="string">&#x27;rejected&#x27;</span></span><br><span class="line">        self.<span class="property">PromiseResult</span> = data</span><br><span class="line">        self.<span class="property">callbacks</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            item.<span class="title function_">onRejected</span>(data)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//同步调用执行器函数</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="title function_">executor</span>(resolve, reject)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="title function_">reject</span>(error)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Promise</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">then</span> = <span class="keyword">function</span>(<span class="params">onResolved, onRejected</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> self = <span class="variable language_">this</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//判斷回調函數參數，如果没传onRejected(异常穿透)</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> onRejected !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">        onRejected = <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> reason</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//如果没传onResolved（值传递）</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> onResolved !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">        onResolved = <span class="function"><span class="params">value</span> =&gt;</span> value</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">PromiseState</span> === <span class="string">&quot;fulfilled&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> result = <span class="title function_">onResolved</span>(<span class="variable language_">this</span>.<span class="property">PromiseResult</span>)</span><br><span class="line">            <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(v)</span><br><span class="line">                &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(r)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//结果的对象状态为成功</span></span><br><span class="line">                <span class="title function_">resolve</span>(result)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">PromiseState</span> === <span class="string">&quot;rejected&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> result = <span class="title function_">onRejected</span>(<span class="variable language_">this</span>.<span class="property">PromiseResult</span>)</span><br><span class="line">            <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(v)</span><br><span class="line">                &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(r)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">resolve</span>(result)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//判断pending状态(先执行的then方法，未改变状态)</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">PromiseState</span> === <span class="string">&quot;pending&quot;</span>) &#123;</span><br><span class="line">            <span class="comment">//保存回调函数</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">callbacks</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">                <span class="attr">onResolved</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">let</span> result = <span class="title function_">onResolved</span>(self.<span class="property">PromiseResult</span>)</span><br><span class="line">                        <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                            result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                                <span class="title function_">resolve</span>(v)</span><br><span class="line">                            &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                                <span class="title function_">reject</span>(r)</span><br><span class="line">                            &#125;)</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="title function_">resolve</span>(result)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                        <span class="title function_">reject</span>(error)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">onRejected</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">let</span> result = <span class="title function_">onRejected</span>(self.<span class="property">PromiseResult</span>)</span><br><span class="line">                        <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                            result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                                <span class="title function_">resolve</span>(v)</span><br><span class="line">                            &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                                <span class="title function_">reject</span>(r)</span><br><span class="line">                            &#125;)</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="title function_">resolve</span>(result)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                        <span class="title function_">reject</span>(error)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加catch方法</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">catch</span> = <span class="keyword">function</span>(<span class="params">onRejected</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">then</span>(<span class="literal">undefined</span>, onRejected)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加resolve方法</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">resolve</span> = <span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (value <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">            value.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123; <span class="title function_">resolve</span>(v) &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">reject</span>(r)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加reject方法</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">reject</span> = <span class="keyword">function</span>(<span class="params">reason</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">reject</span>(reason)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加all方法</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">all</span> = <span class="keyword">function</span>(<span class="params">promises</span>) &#123;</span><br><span class="line">    <span class="comment">//返回结果为promise对象</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">let</span> arr = []</span><br><span class="line">            <span class="comment">//变量</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; promises.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//then的回调：状态改变后才执行回调</span></span><br><span class="line">            <span class="comment">//另外let定义的i是局部变量，不会被覆盖</span></span><br><span class="line">            promises[i].<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">//得知对象状态是成功的</span></span><br><span class="line">                <span class="comment">//每个promise对象都需要成功</span></span><br><span class="line">                count++</span><br><span class="line">                <span class="comment">/**</span></span><br><span class="line"><span class="comment">                 * 此处不用arr.push；原因是如果数组中第二个promise先改变状态，那么</span></span><br><span class="line"><span class="comment">                 * 使用push的话就会先push第二个promise，存储顺序会和传入的数组不一致</span></span><br><span class="line"><span class="comment">                 * 使用arr[i]的方式，那么即使是第二个promise先改变状态，当前i也是2，不会</span></span><br><span class="line"><span class="comment">                 * 有顺序不一致的问题</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">                arr[i] = v</span><br><span class="line">                <span class="keyword">if</span> (count === promises.<span class="property">length</span>) &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(arr)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">//得知对象状态是失败的</span></span><br><span class="line">                <span class="title function_">reject</span>(r)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加race方法</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">race</span> = <span class="keyword">function</span>(<span class="params">promises</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; promises.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            promises[i].<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">resolve</span>(v)</span><br><span class="line">            &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">reject</span>(r)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>class版本Promise</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Promise</span> &#123;</span><br><span class="line">    <span class="title class_">PromiseState</span> = <span class="string">&quot;pending&quot;</span></span><br><span class="line">    <span class="title class_">PromiseResult</span> = <span class="literal">null</span></span><br><span class="line">    callbacks = []</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">executor</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> self = <span class="variable language_">this</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">resolve</span>(<span class="params">value</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (self.<span class="property">PromiseState</span> !== <span class="string">&quot;pending&quot;</span>) <span class="keyword">return</span></span><br><span class="line">            self.<span class="property">PromiseState</span> = <span class="string">&quot;fulfilled&quot;</span></span><br><span class="line">            self.<span class="property">PromiseResult</span> = value</span><br><span class="line">            self.<span class="property">callbacks</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                item.<span class="title function_">onResolved</span>(self.<span class="property">PromiseResult</span>)</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">reject</span>(<span class="params">value</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (self.<span class="property">PromiseState</span> !== <span class="string">&quot;pending&quot;</span>) <span class="keyword">return</span></span><br><span class="line">            self.<span class="property">PromiseState</span> = <span class="string">&quot;rejected&quot;</span></span><br><span class="line">            self.<span class="property">PromiseResult</span> = value</span><br><span class="line">            self.<span class="property">callbacks</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                item.<span class="title function_">onRejected</span>(self.<span class="property">PromiseResult</span>)</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="title function_">executor</span>(resolve, reject)</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="title function_">reject</span>(error)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//then方法</span></span><br><span class="line">    <span class="title function_">then</span>(<span class="params">onResolved, onRejected</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> self = <span class="variable language_">this</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> onRejected !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">            onRejected = <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">//注：此处在调用onRejected时是在new Primise实例时的回调函数中执行的</span></span><br><span class="line">                <span class="comment">//所以不需要额外trycatch</span></span><br><span class="line">                <span class="keyword">throw</span> r</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> onResolved !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">            onResolved = <span class="function"><span class="params">v</span> =&gt;</span> v</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">//如果是成功状态，执行第一个</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">PromiseState</span> === <span class="string">&quot;fulfilled&quot;</span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> result = <span class="title function_">onResolved</span>(<span class="variable language_">this</span>.<span class="property">PromiseResult</span>)</span><br><span class="line">                <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                    result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">resolve</span>(v)</span><br><span class="line">                    &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">reject</span>(r)</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(result)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//如果是失败，执行第二个回调</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">PromiseState</span> === <span class="string">&quot;rejected&quot;</span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> result = <span class="title function_">onRejected</span>(<span class="variable language_">this</span>.<span class="property">PromiseResult</span>)</span><br><span class="line">                <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                    result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">resolve</span>(v)</span><br><span class="line">                    &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">reject</span>(r)</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(result)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//先指定回调，再改变状态</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">PromiseState</span> === <span class="string">&quot;pending&quot;</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">callbacks</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">                    <span class="attr">onResolved</span>: <span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            <span class="keyword">let</span> result = <span class="title function_">onResolved</span>(data)</span><br><span class="line">                            <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                                result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                                    <span class="title function_">resolve</span>(v)</span><br><span class="line">                                &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                                    <span class="title function_">reject</span>(r)</span><br><span class="line">                                &#125;)</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                <span class="title function_">resolve</span>(result)</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                            <span class="title function_">reject</span>(error)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">onRejected</span>: <span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            <span class="keyword">let</span> result = <span class="title function_">onRejected</span>(data)</span><br><span class="line">                            <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                                result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                                    <span class="title function_">resolve</span>(v)</span><br><span class="line">                                &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                                    <span class="title function_">reject</span>(r)</span><br><span class="line">                                &#125;)</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                <span class="title function_">resolve</span>(result)</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                            <span class="title function_">reject</span>(error)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//封装catch方法</span></span><br><span class="line">    <span class="keyword">catch</span> (onRejected) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">then</span>(<span class="literal">undefined</span>, onRejected)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//封装resolve方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">resolve</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (value <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                value.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123; <span class="title function_">resolve</span>(v) &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(r)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">resolve</span>(value)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//封装reject方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">reject</span>(<span class="params">reason</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">reject</span>(reason)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//封装all方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">all</span>(<span class="params">promises</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line">            <span class="keyword">let</span> arr = []</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; promises.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                promises[i].<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                    count++</span><br><span class="line">                    arr[i] = v</span><br><span class="line">                    <span class="keyword">if</span> (count === promises.<span class="property">length</span>) &#123;</span><br><span class="line">                        <span class="title function_">resolve</span>(arr)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(r)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//封装race方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">race</span>(<span class="params">promises</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; promises.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                promises[i].<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(v)</span><br><span class="line">                &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(r)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="集合">
          <a href="#集合" class="heading-link"><i class="fas fa-link"></i></a><a href="#集合" class="headerlink" title="集合"></a><font color="#20bf6b">集合</font></h2>
      <p>声明一个集合</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> <span class="title class_">Set</span>()</span><br></pre></td></tr></table></div></figure>

<p><strong>1. 参数：可传入一个可迭代数据，一般是数组</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;a&#x27;</span>])</span><br></pre></td></tr></table></div></figure>

<p><strong>会自动去重</strong></p>
<p><strong>2. 添加新的元素：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.<span class="title function_">add</span>(<span class="string">&#x27;d&#x27;</span>)</span><br></pre></td></tr></table></div></figure>

<p><strong>3. 删除元素</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.<span class="title function_">delete</span>(<span class="string">&#x27;a&#x27;</span>)</span><br></pre></td></tr></table></div></figure>

<p><strong>4. 检测：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s.<span class="title function_">has</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//存在返回true，，不存在返回false</span></span><br></pre></td></tr></table></div></figure>

<p><strong>5. 清空：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.<span class="title function_">clear</span>()</span><br></pre></td></tr></table></div></figure>

<p><strong>6. 循环</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> s)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>7. 利用Set为数组去重</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;g&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> filterRes = [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr)];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(filterRes)</span><br></pre></td></tr></table></div></figure>

<p><strong>8. 交集</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;g&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;f&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr)].<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Set</span>(arr2).<span class="title function_">has</span>(item)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>9. 并集</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;g&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;f&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = [...<span class="keyword">new</span> <span class="title class_">Set</span>([...arr, ...arr2])]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br></pre></td></tr></table></div></figure>

<p><strong>10. 差集(1有2无  2有1无)</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1有2无</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;g&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;f&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> res = [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr)].<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> (!<span class="keyword">new</span> <span class="title class_">Set</span>(arr2).<span class="title function_">has</span>(item)))</span><br></pre></td></tr></table></div></figure>


        <h2 id="Map">
          <a href="#Map" class="heading-link"><i class="fas fa-link"></i></a><a href="#Map" class="headerlink" title="Map "></a><font color="#20bf6b">Map </font></h2>
      <p><strong>声明Map</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> m = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"><span class="comment">//添加元素 键-值</span></span><br><span class="line">m.<span class="title function_">set</span>(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;zs&#x27;</span>)；</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h2 id="CLASS">
          <a href="#CLASS" class="heading-link"><i class="fas fa-link"></i></a><a href="#CLASS" class="headerlink" title="CLASS"></a><font color="#20bf6b">CLASS</font></h2>
      <p>声明类</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span> &#123;</span><br><span class="line">    <span class="comment">//构造方法，名字是固定的，且在new时会自动执行</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">brand, price</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">brand</span> = brand;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">price</span> = price;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;构造方法执行&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//方法必须使用该语法，不能使用ES5的对象完整形式</span></span><br><span class="line">    <span class="title function_">meth</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我用的是&#x27;</span> + <span class="variable language_">this</span>.<span class="property">brand</span> + <span class="string">&#x27;的手机&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> huawei = <span class="keyword">new</span> <span class="title class_">Phone</span>(<span class="string">&#x27;HUAWEI&#x27;</span>, <span class="number">2222</span>)</span><br><span class="line">huawei.<span class="title function_">meth</span>()</span><br></pre></td></tr></table></div></figure>



        <h3 id="1-静态方法">
          <a href="#1-静态方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-静态方法" class="headerlink" title="1. 静态方法"></a>1. 静态方法</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> name = <span class="string">&#x27;手机&#x27;</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">change</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;换手机&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    price = <span class="number">19998</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> huawei = <span class="keyword">new</span> <span class="title class_">Phone</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(huawei.<span class="property">price</span>)</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>静态方法是属于类的方法，相当于ES5中为函数对象添加的方法，其实例化的对象是不可以访问到的。class中的非静态name是用实例来访问的</p>
</blockquote>

        <h3 id="2-类的继承">
          <a href="#2-类的继承" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-类的继承" class="headerlink" title="2. 类的继承"></a>2. 类的继承</h3>
      <p><strong>ES5:</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Phone</span>(<span class="params">brand, price</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">brand</span> = brand;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">price</span> = price;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Phone</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">meth1</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我可以打电话&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">smartPhone</span>(<span class="params">brand, price, size, color, version</span>) &#123;</span><br><span class="line">    <span class="comment">//调用Phone方法，改变this指向</span></span><br><span class="line">    <span class="title class_">Phone</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, brand, price);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">size</span> = size;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">color</span> = color;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">version</span> = version;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">smartPhone.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Phone</span>();</span><br><span class="line">smartPhone.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = smartPhone;</span><br><span class="line">smartPhone.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">meth2</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我是黑色的手机&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> op = <span class="keyword">new</span> <span class="title function_">smartPhone</span>(<span class="string">&#x27;OPPO&#x27;</span>, <span class="string">&#x27;2699&#x27;</span>, <span class="string">&#x27;16*14&#x27;</span>, <span class="string">&#x27;黑色&#x27;</span>, <span class="string">&#x27;ColorOS12&#x27;</span>);</span><br><span class="line"><span class="comment">//子类的方法</span></span><br><span class="line">op.<span class="title function_">meth2</span>()</span><br><span class="line"><span class="comment">//父类的方法</span></span><br><span class="line">op.<span class="property">__proto__</span>.<span class="title function_">meth1</span>()</span><br></pre></td></tr></table></div></figure>

<p><font color="#5f27cd">注:此处调用父类的方法可以直接写<code>op.meth1();</code>，因为方法和属性都是逐层往下(prototype里)去找的。</font></p>
<p><strong>ES6:</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">brand, price</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">brand</span> = brand;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">price</span> = price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">meth</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;打电话&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//子类继承</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">smartPhone</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Phone</span> &#123;</span><br><span class="line">    <span class="comment">//继承父类的构造方法</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">brand, price, colorm, size</span>) &#123;</span><br><span class="line">        <span class="comment">//super就相当于是父类的constructor</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 等于Phone.call(this,brand,price)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="variable language_">super</span>(brand, price);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">photo</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;拍照&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">playGame</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;玩游戏&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> xiaomi = <span class="keyword">new</span> <span class="title function_">smartPhone</span>(<span class="string">&#x27;小咪&#x27;</span>, <span class="string">&#x27;799&#x27;</span>, <span class="string">&#x27;黑色&#x27;</span>, <span class="string">&#x27;4.7inch&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用子类的方法</span></span><br><span class="line">xiaomi.<span class="title function_">photo</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用父类的方法</span></span><br><span class="line">xiaomi.<span class="title function_">meth</span>()</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-重写">
          <a href="#3-重写" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-重写" class="headerlink" title="3. 重写"></a>3. 重写</h3>
      <p><strong>通过在子类写一个与父类相同名称(可以不同参数)的方法来达到重写父类的方法</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//父类：</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">brand, price</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">brand</span> = brand;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">price</span> = price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">meth</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;打电话&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//子类：</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">smartPhone</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Phone</span> &#123;</span><br><span class="line">    <span class="comment">//继承父类的构造方法</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">brand, price, colorm, size</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(brand, price);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">meth</span>(<span class="params">a, b, c</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;子类重写方法&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> xiaomi = <span class="keyword">new</span> <span class="title function_">smartPhone</span>(<span class="string">&#x27;小咪&#x27;</span>, <span class="string">&#x27;799&#x27;</span>, <span class="string">&#x27;黑色&#x27;</span>, <span class="string">&#x27;4.7inch&#x27;</span>);</span><br><span class="line"></span><br><span class="line">xiaomi.<span class="title function_">meth</span>()<span class="comment">//输出子类重写方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//可以通过__proto__.__proto__来调用父类的原方法</span></span><br><span class="line"></span><br><span class="line">xiaomi.<span class="property">__proto__</span>.<span class="property">__proto__</span>.<span class="title function_">meth</span>()<span class="comment">//输出打电话</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="4-get-x2F-set">
          <a href="#4-get-x2F-set" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-get-x2F-set" class="headerlink" title="4. get&#x2F;set"></a>4. get&#x2F;set</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">price</span>() &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;执行了get方法&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;price&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">price</span>(<span class="params">a</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Phone</span>()</span><br><span class="line"><span class="comment">//使用get.此时会执行get里的方法，并将返回值</span></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Phone</span>()</span><br><span class="line"><span class="keyword">let</span> res = p.<span class="property">price</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用set,set必须要有参数；此时会调用set方法，并传入=后面的值</span></span><br><span class="line">p.<span class="property">price</span> = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>




        <h2 id="数值扩展">
          <a href="#数值扩展" class="heading-link"><i class="fas fa-link"></i></a><a href="#数值扩展" class="headerlink" title="数值扩展"></a><font color="#20bf6b">数值扩展</font></h2>
      <p><strong>1. EPSILON（是JavaScript表示的最小精度</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Number.EPSILON</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>接近于2.220446049250313e-16，也就是2.22..*10<sup>-16</sup></p>
<p><strong>2. 进制</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//二进制</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">0b1010</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//八进制</span></span><br><span class="line"><span class="keyword">let</span> o = <span class="number">0o777</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//十进制</span></span><br><span class="line"><span class="keyword">let</span> d = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//十六进制</span></span><br><span class="line"><span class="keyword">let</span> h = <span class="number">0xff</span>;</span><br></pre></td></tr></table></div></figure>

<p><strong>3. Number.isFinite，检测一个数值是否为有限数</strong></p>
<p><strong>4. Number.isNaN(123),检测一个数值是否为NaN</strong></p>
<p><strong>5. Number.parseInt  Number.parseFloat,字符串转换为数字</strong></p>
<p><strong>6. Number.isInteger,判断一个数是否为整数</strong></p>
<p><strong>7. Math.trunc,将数字的小数部分抹掉</strong></p>
<p><strong>8. Math.sign,判断一个数到底是正数，负数，还是0</strong></p>

        <h2 id="对象方法扩展">
          <a href="#对象方法扩展" class="heading-link"><i class="fas fa-link"></i></a><a href="#对象方法扩展" class="headerlink" title="对象方法扩展"></a><font color="#20bf6b">对象方法扩展</font></h2>
      <p><strong>1. Object.is，判断两个值是否完全相等</strong></p>
<p><code>Object.is(120,120);Object.is(NaN,NaN)</code></p>
<p>与<code>===</code>作用大致相同，但是对比两个NaN时，is方法为true，<code>===</code>为false</p>
<p><strong>2. 对象的合并</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    <span class="attr">phone</span>: <span class="string">&#x27;18546213241&#x27;</span>,</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">    <span class="attr">hobby</span>: <span class="string">&#x27;打球&#x27;</span>,</span><br><span class="line">    <span class="attr">address</span>: <span class="string">&#x27;中国上海&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;里斯&#x27;</span>,</span><br><span class="line">    <span class="attr">hobby</span>: <span class="string">&#x27;睡觉&#x27;</span>,</span><br><span class="line">    <span class="attr">school</span>: <span class="string">&#x27;qinghua&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c = <span class="title class_">Object</span>.<span class="title function_">assign</span>(a, b)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>assgin,两个参数都是对象，第一个对象是原始的，第二个是要合并的，返回值中第二个对象里：同名的属性第一个会会覆盖第一个的，不同名的第一个有的保留，第一个没有的第二个有的会添加</p>
</blockquote>
<p>**3. 设置原型对象：Object.setPrototypeOf(obj1,obj2):**将第二个参数的对象设置为第一个参数的原型对象</p>
<p><strong>获取原型对象：Object.getPrototypeOf(obj1)</strong></p>

        <h2 id="模块化">
          <a href="#模块化" class="heading-link"><i class="fas fa-link"></i></a><a href="#模块化" class="headerlink" title="模块化"></a><font color="#20bf6b">模块化</font></h2>
      <p>模块化是指将一个大的程序文件，拆分成许多小的文件，然后将小文件组合起来。</p>
<p>优势：</p>
<p>1)防止命名冲突</p>
<p>2)代码复用</p>
<p>3)高维护性</p>
<p>模块功能主要由两个命令构成：export和import</p>
<ul>
<li><p>export 命令用于规定模块的对外接口</p>
</li>
<li><p>import命令用于输入其他模块提供的功能</p>
</li>
</ul>
<p><strong>1. 引入模块</strong></p>
<p>mk2.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> variable = <span class="string">&#x27;abcd&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">fun1</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;两个参数的值：&#x27;</span> + a + <span class="string">&#x27;和&#x27;</span> + b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>mk1.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> m1 <span class="keyword">from</span> <span class="string">&#x27;./mk2.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m1.<span class="property">variable</span>)</span><br><span class="line">m1.<span class="title function_">fun1</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></div></figure>

<p>HTML文件</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&#x27;../JS/mk1.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>type需要是module</p>
</blockquote>
<p><strong>2. 暴露模块数据语法汇总</strong></p>
<ol>
<li>分别暴露</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> variable = <span class="string">&#x27;abcd&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">fun1</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;两个参数的值：&#x27;</span> + a + <span class="string">&#x27;和&#x27;</span> + b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


<ol start="2">
<li>统一暴露</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> shcool = <span class="string">&#x27;sss&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">findJob</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;aa&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//统一暴露</span></span><br><span class="line"><span class="keyword">export</span> &#123;school,findJob&#125;;</span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>默认暴露</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="attr">school</span>:<span class="string">&#x27;ATGUIGU&#x27;</span>,</span><br><span class="line"></span><br><span class="line">	<span class="attr">change</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ddd&#x27;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>引入：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> m1 <span class="keyword">from</span> <span class="string">&#x27;./mk2.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m1.<span class="property">default</span>.<span class="property">school</span>)</span><br></pre></td></tr></table></div></figure>

<p><strong>3. 引入模块数据语法汇总</strong></p>
<ol>
<li>通用导入方式</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> m1 <span class="keyword">from</span> <span class="string">&#x27;./src/js/m1.js&#x27;</span></span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>解构赋值形式</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; school, meth &#125; <span class="keyword">from</span> <span class="string">&quot;./mk2.js&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(school)</span><br></pre></td></tr></table></div></figure>

<p>注：如果引入多个，可能会有重名的问题，设置别名即可</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分别暴露和统一暴露</span></span><br><span class="line"><span class="keyword">import</span> &#123; school, meth &#125; <span class="keyword">from</span> <span class="string">&quot;./mk2.js&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; school <span class="keyword">as</span> school1, meth <span class="keyword">as</span> meth1 &#125; <span class="keyword">from</span> <span class="string">&quot;./mk3.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//默认暴露:需要设置别名，不然报错</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> m3&#125; <span class="keyword">from</span> <span class="string">&#x27;./mk4.js&#x27;</span></span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>简便形式（针对默认暴露<br>） <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> m3 <span class="keyword">from</span> <span class="string">&#x27;./mk4.js&#x27;</span></span><br></pre></td></tr></table></div></figure></li>
</ol>

        <h1 id="ES7">
          <a href="#ES7" class="heading-link"><i class="fas fa-link"></i></a><a href="#ES7" class="headerlink" title="ES7"></a><font color="#3c40c6">ES7</font></h1>
      
        <h2 id="方法">
          <a href="#方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#方法" class="headerlink" title="方法"></a><font color="#20bf6b">方法</font></h2>
      <ol>
<li><p>includes</p>
<p> includes方法用来检测数组中是否包含某个元素，返回布尔类型值</p>
</li>
<li><p>指数操作夫</p>
<p> [**]实现幂运算</p>
<p> <code>console.log(2 ** 10)</code> &gt; &gt; 1024</p>
</li>
</ol>

        <h1 id="ES8">
          <a href="#ES8" class="heading-link"><i class="fas fa-link"></i></a><a href="#ES8" class="headerlink" title="ES8"></a><font color="#3c40c6">ES8</font></h1>
      
        <h2 id="async函数">
          <a href="#async函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#async函数" class="headerlink" title="async函数"></a>async函数</h2>
      <p>声明</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>函数固定返回的是promise对象，对象的状态由函数内的return决定：</p>
<blockquote>
<p>如果在函数中return了非Promise对象，或者没有return，或者只有return。那么返回的promise对象的状态是成功的，对象的值就是return的值，undefined，undefined。</p>
</blockquote>
<blockquote>
<p>如果是抛出错误，那么async函数的返回是一个失败的Promise</p>
</blockquote>
<blockquote>
<p><strong>如果返回的结果如果是一个Promise对象，该promise对象是成功的，那么最终async函数返回的Promise对象就是成功的，且成功的值就是该promise对象的值；如果该promise对象是失败的，那么最终async函数返回的promise对象就是失败的，且失败的值就是该promise对象的值</strong></p>
</blockquote>

        <h2 id="await表达式">
          <a href="#await表达式" class="heading-link"><i class="fas fa-link"></i></a><a href="#await表达式" class="headerlink" title="await表达式"></a>await表达式</h2>
      <p>async 函数中可能会有 await 表达式，async 函数执行时，如果遇到 await 就会先暂停执行 ，等到触发的异步操作完成后，恢复 async 函数的执行并返回解析值。</p>
<ol>
<li><p>await必须写在async函数中</p>
</li>
<li><p>await右侧的表达式一般为promise对象</p>
</li>
<li><p>await的返回值是promise成功的值</p>
</li>
<li><p>await的promise失败了，就会抛出异常，使用try…catch捕获处理（即返回的promise要么成功，要么抛出异常，后续不再执行）</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//resolve(&#x27;用户数据&#x27;)</span></span><br><span class="line">    <span class="title function_">reject</span>(<span class="string">&#x27;失败了&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//await 表达式返回的值是promise对象成功的值</span></span><br><span class="line">	</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">		<span class="comment">//返回的值是promise对象p成功的值</span></span><br><span class="line">        <span class="keyword">let</span> result = <span class="keyword">await</span> p;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">		<span class="comment">//返回的promise是失败的，需要通过try...catch来捕获异常信息</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;error信息：&#x27;</span> + error)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fn</span>()</span><br></pre></td></tr></table></div></figure>

<p>使用async与await结合改变setTimeout读取顺序</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">oneS</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="string">&#x27;第一个执行&#x27;</span>)</span><br><span class="line">        &#125;, <span class="number">3000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">twoS</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="string">&#x27;第二个执行&#x27;</span>)</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">threeS</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="string">&#x27;第三个执行&#x27;</span>)</span><br><span class="line">        &#125;, <span class="number">2000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">exeSort</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> a1 = <span class="keyword">await</span> <span class="title function_">oneS</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a1)</span><br><span class="line">    <span class="keyword">let</span> a2 = <span class="keyword">await</span> <span class="title function_">twoS</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a2)</span><br><span class="line">    <span class="keyword">let</span> a3 = <span class="keyword">await</span> <span class="title function_">threeS</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a3)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">exeSort</span>()</span><br></pre></td></tr></table></div></figure>


        <h2 id="对象方法扩展-1">
          <a href="#对象方法扩展-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#对象方法扩展-1" class="headerlink" title="对象方法扩展"></a>对象方法扩展</h2>
      <p><strong>1. Object.keys(obj1)：获取对象所有的键(将对象所有的属性和方法的名称以数组的形式存入)</strong></p>
<p><strong>2. Object.values(obj1)：获取对象所有的值(将对象所有的属性和方法的值以数组的形式存入)</strong></p>
<p><strong>3. Object.entries(obj1)：返回一个数组，数组中存入许多数组，每个数组的值是成对的，分别是属性和对应的值。可以用来创建Map</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> m = <span class="keyword">new</span> <span class="title class_">Map</span>(<span class="title class_">Object</span>.<span class="title function_">entries</span>(obj1));</span><br></pre></td></tr></table></div></figure>

        <h1 id="ES9">
          <a href="#ES9" class="heading-link"><i class="fas fa-link"></i></a><a href="#ES9" class="headerlink" title="ES9"></a><font color="#3c40c6">ES9</font></h1>
      
        <h2 id="ES9扩展运算符与REST参数">
          <a href="#ES9扩展运算符与REST参数" class="heading-link"><i class="fas fa-link"></i></a><a href="#ES9扩展运算符与REST参数" class="headerlink" title="ES9扩展运算符与REST参数"></a>ES9扩展运算符与REST参数</h2>
      <p>ES6中的Rest参数与spread扩展运算符只针对数组。在ES9中为对象提供了像数组一样的rest参数和扩展运算符 </p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">meth</span>(<span class="params">&#123; host, post, username, ...args &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(host)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(post)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(username)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;对象：&#x27;</span> + args.<span class="property">password</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">meth</span>(&#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    <span class="attr">post</span>: <span class="string">&#x27;8089&#x27;</span>,</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">address</span>: <span class="string">&#x27;chn&#x27;</span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//调用时对象的名字要对应，多出的部分会封装成对象传入给args对象中</span></span><br></pre></td></tr></table></div></figure>

<p><strong>对对象的扩展</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> skillone = &#123;</span><br><span class="line">	<span class="attr">q</span>:<span class="string">&#x27;天音波&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> skilltwo = &#123;</span><br><span class="line">	<span class="attr">w</span>:<span class="string">&#x27;金钟罩&#x27;</span>,</span><br><span class="line">	<span class="attr">e</span>:<span class="string">&#x27;天雷破&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  ...skillone=&gt;q:&#x27;天音波&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//将对象合并</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mergeObj = &#123;...skillone,...skilltwo&#125;</span><br></pre></td></tr></table></div></figure>

        <h2 id="trimStart和trimEnd">
          <a href="#trimStart和trimEnd" class="heading-link"><i class="fas fa-link"></i></a><a href="#trimStart和trimEnd" class="headerlink" title="trimStart和trimEnd"></a>trimStart和trimEnd</h2>
      <p>trimStart用来清除字符串左侧空白。</p>
<p>trimEnd用来清除字符串右侧空白</p>

        <h2 id="flat和flatMap">
          <a href="#flat和flatMap" class="heading-link"><i class="fas fa-link"></i></a><a href="#flat和flatMap" class="headerlink" title="flat和flatMap"></a>flat和flatMap</h2>
      <p>将多维数组转化为低维数组</p>
<p><strong>flat：将多维数组降低一维</strong></p>
<p>参数为深度，是一个数字。</p>
<p>如：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">flat</span>(<span class="number">2</span>);<span class="comment">//数组降低二维</span></span><br><span class="line"><span class="title function_">flat</span>(<span class="number">3</span>);<span class="comment">//数组降低三维</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">flat</span>(<span class="number">1</span>);<span class="comment">//默认为1，数组降低一维 </span></span><br></pre></td></tr></table></div></figure>


        <h2 id="私有属性">
          <a href="#私有属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#私有属性" class="headerlink" title="私有属性"></a>私有属性</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    name;</span><br><span class="line">    <span class="comment">//私有属性</span></span><br><span class="line">    #age;</span><br><span class="line">	#weight;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name, age, weight</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.#age = age;</span><br><span class="line">        <span class="variable language_">this</span>.#weight = weight;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">introl</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.#age)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.#weight)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;z&#x27;</span>, <span class="string">&#x27;18&#x27;</span>, <span class="string">&#x27;180&#x27;</span>);</span><br><span class="line">p.<span class="title function_">introl</span>()</span><br></pre></td></tr></table></div></figure>



        <h1 id="ES11">
          <a href="#ES11" class="heading-link"><i class="fas fa-link"></i></a><a href="#ES11" class="headerlink" title="ES11"></a><font color="#3c40c6">ES11</font></h1>
      
        <h2 id="动态import">
          <a href="#动态import" class="heading-link"><i class="fas fa-link"></i></a><a href="#动态import" class="headerlink" title="动态import"></a>动态import</h2>
      <p>当需要执行时才import</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fun1</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//返回一个Promise对象。回调函数</span></span><br><span class="line">    <span class="keyword">import</span> (<span class="string">&#x27;./mk2.js&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">module</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">module</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fun1</span>();</span><br></pre></td></tr></table></div></figure>


        <h2 id="大整数：BigInt">
          <a href="#大整数：BigInt" class="heading-link"><i class="fas fa-link"></i></a><a href="#大整数：BigInt" class="headerlink" title="大整数：BigInt"></a>大整数：BigInt</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//后面加一个n</span></span><br><span class="line"><span class="keyword">let</span> n = <span class="number">521n</span>;		</span><br></pre></td></tr></table></div></figure>


        <h2 id="globalThis：指向全局对象">
          <a href="#globalThis：指向全局对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#globalThis：指向全局对象" class="headerlink" title="globalThis：指向全局对象"></a>globalThis：指向全局对象</h2>
      
        <h2 id="bind-函数">
          <a href="#bind-函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#bind-函数" class="headerlink" title="bind()函数"></a>bind()函数</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;wangcai&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">fn</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> res = obj.<span class="property">fn</span>.<span class="title function_">bind</span>(person);</span><br><span class="line"></span><br><span class="line"><span class="title function_">res</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//此处res就是obj中的fn函数对象，只不过函数中的this指向person</span></span><br></pre></td></tr></table></div></figure>

<p><strong>bind方法用于将函数体内的this绑定到某个对象，然后返回一个新函数</strong></p>
<p>[关于JS执行参考：]</p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.jianshu.com/p/9dd4427f540e">https://www.jianshu.com/p/9dd4427f540e</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/355143116">https://zhuanlan.zhihu.com/p/355143116</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/02/07/web-ajax01/">web-ajax01</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-02-07</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-21</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h2 id="HTTP">
          <a href="#HTTP" class="heading-link"><i class="fas fa-link"></i></a><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2>
      <p><strong>HTTP（hypertext transport protocol）协议【超文本传输协议】，协议详细规定了浏览器和万维网服务器之间互相通信的规则</strong></p>

        <h3 id="1-请求报文">
          <a href="#1-请求报文" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-请求报文" class="headerlink" title="1.请求报文"></a>1.请求报文</h3>
      <p><strong>重点是格式与参数</strong></p>
<ul>
<li><p><strong>行</strong></p>
<p>  [GET]：请求类型</p>
<p>  [&#x2F;s?ie&#x3D;utf-8]：url地址（参数）</p>
<p>  [HTTP&#x2F;1.1]：HTTP协议的版本</p>
</li>
<li><p><strong>头</strong></p>
<p>  [Host:atguigu.com] [Cookie:name&#x3D;guigu] [Content-type:application&#x2F;x-www-form-urlencoded] [User-Agent:chrome 83]等等…</p>
</li>
<li><p><strong>空行</strong></p>
</li>
<li><p><strong>体</strong></p>
<p>  [username&#x3D;admin&amp;password&#x3D;admin]</p>
</li>
</ul>

        <h3 id="2-响应报文">
          <a href="#2-响应报文" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-响应报文" class="headerlink" title="2.响应报文"></a>2.响应报文</h3>
      <ul>
<li><p><strong>行</strong></p>
<p>  [HTTP&#x2F;1.1]</p>
<p>  [200]：响应状态码（200表示OK，404表示找不到，500表示内部错误等）</p>
<p>  [OK]：响应状态字符串（和状态码对应）</p>
</li>
<li><p><strong>头</strong></p>
</li>
<li><p><strong>空行</strong></p>
</li>
<li><p><strong>体</strong></p>
<p>  主要返回的结果</p>
</li>
</ul>

        <h2 id="Express使用与介绍">
          <a href="#Express使用与介绍" class="heading-link"><i class="fas fa-link"></i></a><a href="#Express使用与介绍" class="headerlink" title="Express使用与介绍"></a>Express使用与介绍</h2>
      <p><strong>Express是基于Node.js平台，快速、开放，极简的Web开发框架</strong></p>
<p><strong>1. 安装Node.JS</strong></p>
<p><strong>2. VSCode根目录点击在集成终端中打开</strong></p>
<p><strong>3. 使用指令安装Express：</strong></p>
<p><code>npm i express</code></p>
<p>执行后根目录会生成文件</p>
<p><strong>4. 在JS文件中使用express框架</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 引入express</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 创建应用对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 创建路由规则。request：请求报文的封装  reponse：响应报文的封装</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置允许跨域 设置响应头</span></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">	response.<span class="title function_">send</span>(<span class="string">&quot;&lt;h1&gt;Hellp,express!!!&lt;/h1&gt;&quot;</span>)</span><br><span class="line">	<span class="comment">//返回页面</span></span><br><span class="line">	response.<span class="title function_">sendFile</span>(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line">	</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置允许跨域 设置响应头</span></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">	response.<span class="title function_">send</span>(<span class="string">&quot;&lt;h1&gt;Hellp,express!!!&lt;/h1&gt;&quot;</span>)</span><br><span class="line">	</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. 监听端口启动服务</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;服务已经启动，8000端口i监听中&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>5. 执行此JS文件：</strong></p>
<p><code>node node01.js</code></p>
<p>注：node01.js是启动express的文件，如果不是在该文件的父级目录执行的，那么需要写出完整的js路径，如：</p>
<p><code>node D:\Projects\03_web\01_html\04_ajax\JS\node01.js</code></p>

        <h2 id="ajax请求">
          <a href="#ajax请求" class="heading-link"><i class="fas fa-link"></i></a><a href="#ajax请求" class="headerlink" title="ajax请求"></a>ajax请求</h2>
      
        <h3 id="1-基本操作">
          <a href="#1-基本操作" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-基本操作" class="headerlink" title="1. 基本操作"></a>1. 基本操作</h3>
      <p><strong>1-1.get请求</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;button&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">const</span> divtext = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;textd&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">    btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//1. 创建对象</span></span><br><span class="line">        <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 初始化，设置请求方法和url</span></span><br><span class="line">        xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://127.0.0.1:8000/server&#x27;</span>)</span><br><span class="line">            <span class="comment">//3. 发送</span></span><br><span class="line">        xhr.<span class="title function_">send</span>()</span><br><span class="line">            <span class="comment">//4. 事件绑定。处理服务器端返回的结果</span></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * on:当...的时候</span></span><br><span class="line"><span class="comment">             * readystate：是xhr对象中的属性，表示状态(0：表示未初始化，默认状态  1：open方法调用完毕  2：send方法调用完毕  3：返回部分结果  4：返回所有结果)</span></span><br><span class="line"><span class="comment">             **/</span></span><br><span class="line">        xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span><br><span class="line">                <span class="comment">//判断响应状态码是否成功(2开头的)</span></span><br><span class="line">                <span class="keyword">if</span> (xhr.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; xhr.<span class="property">status</span> &lt; <span class="number">300</span>) &#123;</span><br><span class="line">                    <span class="comment">//处理结果：行 头 空行 体</span></span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">status</span>) <span class="comment">//状态码</span></span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">statusText</span>) <span class="comment">//状态字符串</span></span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="title function_">getAllResponseHeaders</span>()) <span class="comment">//所有响应头</span></span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">response</span>) <span class="comment">//响应体</span></span><br><span class="line">                    divtext.<span class="property">innerHTML</span> = xhr.<span class="property">response</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>1-2.设置请求参数</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://127.0.0.1:8000/server?a=100&amp;b=200&amp;c=300&#x27;</span>)</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注：GET请求无法发送请求体内容，只能发送行和头。POST可以发送请求体的内容(也就是send方法里可以有数据传入服务端)</font></strong></p>
<p><strong>1-3.post请求</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;button&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">const</span> divtext = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;textd&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">    btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">	        <span class="comment">//1. 创建对象</span></span><br><span class="line">	        <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line">	</span><br><span class="line">	        <span class="comment">//2. 初始化，设置请求方法和url</span></span><br><span class="line">	        xhr.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;http://127.0.0.1:8000/server&#x27;</span>)</span><br><span class="line">            <span class="comment">//3. 发送（post请求可以在此传递参数）</span></span><br><span class="line">       		 xhr.<span class="title function_">send</span>(<span class="string">&#x27;a=100&amp;b=200&amp;c=300&#x27;</span>)</span><br><span class="line">			<span class="comment">//xhr.send(&#x27;a:100&amp;b:200&amp;c:300&#x27;)</span></span><br><span class="line">            <span class="comment">//4. 事件绑定。处理服务器端返回的结果</span></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * on:当...的时候</span></span><br><span class="line"><span class="comment">             * readystate：是xhr对象中的属性，表示状态(0：表示未初始化，默认状态  1：open方法调用完毕  2：send方法调用完毕  3：返回部分结果  4：返回所有结果)</span></span><br><span class="line"><span class="comment">             **/</span></span><br><span class="line">	        xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">	            <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span><br><span class="line">	                <span class="comment">//判断响应状态码是否成功(2开头的)</span></span><br><span class="line">	                <span class="keyword">if</span> (xhr.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; xhr.<span class="property">status</span> &lt; <span class="number">300</span>) &#123;</span><br><span class="line">	                    divtext.<span class="property">innerHTML</span> = xhr.<span class="property">response</span></span><br><span class="line">	                &#125;</span><br><span class="line">	            &#125;</span><br><span class="line">	        &#125;</span><br><span class="line">	</span><br><span class="line">	    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>1-4.设置请求头信息</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>,<span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>)</span><br><span class="line"><span class="comment">//发送的信息的类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//自定义的请求头</span></span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;atguigu&#x27;</span>)</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-服务端响应JSON数据">
          <a href="#2-服务端响应JSON数据" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-服务端响应JSON数据" class="headerlink" title="2. 服务端响应JSON数据"></a>2. 服务端响应JSON数据</h3>
      <p><strong>服务端：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&#x27;18&#x27;</span>,</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//发送数据前要先把数据转换为字符串格式</span></span><br><span class="line"><span class="keyword">var</span> obh = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj)</span><br><span class="line">response.<span class="title function_">send</span>(obh)</span><br></pre></td></tr></table></div></figure>

<p><strong>页面接收时，可以手动将字符串转换为json格式</strong></p>
<p><code>var jsondata = JSON.parse(xhr.response)</code></p>
<p><strong>也可以设置响应体数据的类型，在接收数据时自动转换</strong></p>
<p><code>xhr.responseType = &#39;json&#39;</code></p>

        <h2 id="nodemon">
          <a href="#nodemon" class="heading-link"><i class="fas fa-link"></i></a><a href="#nodemon" class="headerlink" title="nodemon"></a>nodemon</h2>
      <p><strong>自动重启服务的工具</strong></p>
<p>安装：</p>
<p><code>npm install -g nodemon</code></p>
<p>启动服务：</p>
<p><code>nodemon node.js</code></p>

        <h2 id="IE缓存问题解决">
          <a href="#IE缓存问题解决" class="heading-link"><i class="fas fa-link"></i></a><a href="#IE缓存问题解决" class="headerlink" title="IE缓存问题解决"></a>IE缓存问题解决</h2>
      <p>IE浏览器如果缓存有数据得到话会直接读取缓存的数据而不是从服务器上重新获取。</p>
<p><strong>解决：</strong></p>
<p><code>xhr.open(&#39;GET&#39;,&#39;http://127.0.0.1:8000/ie?t=&#39;+Date.now())</code></p>
<p>Date.now()获取当前时间戳。这样的话每次url都是不一样的，这样就会重新发送新得请求，而不是走本地缓存</p>

        <h2 id="请求超时以及网络异常处理">
          <a href="#请求超时以及网络异常处理" class="heading-link"><i class="fas fa-link"></i></a><a href="#请求超时以及网络异常处理" class="headerlink" title="请求超时以及网络异常处理"></a>请求超时以及网络异常处理</h2>
      <p>前端页面：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//代表2S内没有接收响应，就取消</span></span><br><span class="line">xhr.<span class="property">timeout</span> = <span class="number">2000</span>;</span><br><span class="line"><span class="comment">//超时的回调</span></span><br><span class="line"></span><br><span class="line">xhr.<span class="property">ontimeout</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;网络异常&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//网络异常回调</span></span><br><span class="line"></span><br><span class="line">xhr.<span class="property">onerror</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&#x27;网络错误&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="ajax请求的手动取消">
          <a href="#ajax请求的手动取消" class="heading-link"><i class="fas fa-link"></i></a><a href="#ajax请求的手动取消" class="headerlink" title="ajax请求的手动取消"></a>ajax请求的手动取消</h2>
      <p><code>xhr.abort()</code></p>

        <h2 id="请求重复发送问题">
          <a href="#请求重复发送问题" class="heading-link"><i class="fas fa-link"></i></a><a href="#请求重复发送问题" class="headerlink" title="请求重复发送问题"></a>请求重复发送问题</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//默认是未发送状态</span></span><br><span class="line"><span class="keyword">let</span> x = <span class="literal">null</span></span><br><span class="line"><span class="keyword">let</span> isSending = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(isSending)&#123;</span><br><span class="line">	<span class="comment">//请求前判断是否正在请求</span></span><br><span class="line">	x.<span class="title function_">abort</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建请求</span></span><br><span class="line">x = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"><span class="comment">//创建了新得发送请求，修改标识变量的值</span></span><br><span class="line">isSending = <span class="literal">true</span></span><br><span class="line">x.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>,<span class="string">&#x27;http://127.0.0.1:8000/server&#x27;</span>)</span><br><span class="line">x.<span class="title function_">send</span>()</span><br><span class="line">x.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">if</span>(x.<span class="property">readyState</span> === <span class="number">4</span>)&#123;</span><br><span class="line">		<span class="comment">//代表响应了所有的数据</span></span><br><span class="line">		<span class="comment">//修改表示变量</span></span><br><span class="line">		isSending = <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h2 id="jQuery发送ajax请求">
          <a href="#jQuery发送ajax请求" class="heading-link"><i class="fas fa-link"></i></a><a href="#jQuery发送ajax请求" class="headerlink" title="jQuery发送ajax请求"></a>jQuery发送ajax请求</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//get请求</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 第一个参数：请求地址</span></span><br><span class="line"><span class="comment"> * 第二个参数：请求参数</span></span><br><span class="line"><span class="comment"> * 第三个参数：回调函数，data为响应体</span></span><br><span class="line"><span class="comment"> * 第四个参数：响应体的数据格式</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line">$.<span class="title function_">get</span>(<span class="string">&#x27;http://127.0.0.1:8000/server&#x27;</span>,&#123;<span class="attr">a</span>:<span class="number">100</span>,<span class="attr">b</span>:<span class="number">200</span>&#125;,<span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line">	<span class="comment">//回调函数，data是响应体</span></span><br><span class="line">&#125;,<span class="string">&#x27;json&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//post请求</span></span><br><span class="line">$.<span class="title function_">post</span>(<span class="string">&#x27;http://127.0.0.1:8000/server&#x27;</span>,&#123;<span class="attr">a</span>:<span class="number">100</span>,<span class="attr">b</span>:<span class="number">200</span>&#125;,<span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//通用ajax请求</span></span><br><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">	<span class="comment">//url</span></span><br><span class="line">	<span class="attr">url</span>:<span class="string">&#x27;http://127.0.0.1:8000/server&#x27;</span>,</span><br><span class="line">	<span class="comment">//参数</span></span><br><span class="line">	<span class="attr">data</span>:&#123;<span class="attr">a</span>:<span class="number">100</span>,<span class="attr">b</span>:<span class="number">200</span>&#125;,</span><br><span class="line">	<span class="comment">//请求类型</span></span><br><span class="line">	<span class="attr">type</span>:<span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">	<span class="comment">//设置响应体类型</span></span><br><span class="line">	<span class="attr">dataType</span>:<span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">	<span class="comment">//成功的回调</span></span><br><span class="line">	<span class="attr">success</span>:<span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//超时时间</span></span><br><span class="line">	<span class="attr">timeout</span>:<span class="number">2000</span>,</span><br><span class="line">	<span class="comment">//失败的回调（超时或者网络异常）</span></span><br><span class="line">	<span class="attr">error</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//头信息</span></span><br><span class="line">	<span class="attr">headers</span>:&#123;</span><br><span class="line">	<span class="attr">c</span>:<span class="number">300</span>,</span><br><span class="line">	<span class="attr">d</span>:<span class="number">400</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>因为通用ajax请求是自定义的头信息,需要作此设置</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//方法需要是all</span></span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&#x27;/delay&#x27;</span>,<span class="function">(<span class="params">request,response</span>)=&gt;</span>&#123;</span><br><span class="line">	response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Header&#x27;</span>,<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>



        <h2 id="Axios发送Ajax请求（较多使用）">
          <a href="#Axios发送Ajax请求（较多使用）" class="heading-link"><i class="fas fa-link"></i></a><a href="#Axios发送Ajax请求（较多使用）" class="headerlink" title="Axios发送Ajax请求（较多使用）"></a>Axios发送Ajax请求（较多使用）</h2>
      <p><strong>安装(npm安装或者引入)</strong></p>
<ul>
<li>npm安装：</li>
</ul>
<p><code>npm install axios</code></p>
<ul>
<li>引入：</li>
</ul>
<p><code>&lt;script crossorigin=&quot;anonymous&quot; src=&quot;https://cdn.bootcdn.net/ajax/libs/axios/0.25.0/axios.js&quot;&gt;&lt;/script&gt;</code></p>
<p><strong>GET请求</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;http://127.0.0.1:8000/axios-server&#x27;</span>,&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//url参数</span></span><br><span class="line">	<span class="attr">params</span>:&#123;</span><br><span class="line">		<span class="attr">id</span>:<span class="number">100</span>,</span><br><span class="line">		<span class="attr">vip</span>:<span class="number">7</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//请求头信息</span></span><br><span class="line">	<span class="attr">headers</span>:&#123;</span><br><span class="line">		<span class="attr">name</span>:<span class="string">&#x27;atguigu&#x27;</span>,</span><br><span class="line">		<span class="attr">age</span>:<span class="number">20</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="comment">//回调</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">info</span>(value)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>POST请求</strong></p>
<p>第一个参数：请求地址</p>
<p>第二个参数：请求体</p>
<p>第三个参数：其他的请求信息</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">post</span>(<span class="string">&#x27;http://127.0.0.1:8000/axios-server&#x27;</span>,</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="attr">username</span>:<span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">		<span class="attr">password</span>:<span class="string">&#x27;admin&#x27;</span></span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//url参数</span></span><br><span class="line">	<span class="attr">params</span>:&#123;</span><br><span class="line">		<span class="attr">id</span>:<span class="number">100</span>,</span><br><span class="line">		<span class="attr">vip</span>:<span class="number">7</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//请求头信息</span></span><br><span class="line">	<span class="attr">headers</span>:&#123;</span><br><span class="line">		<span class="attr">name</span>:<span class="string">&#x27;atguigu&#x27;</span>,</span><br><span class="line">		<span class="attr">age</span>:<span class="number">20</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="comment">//回调</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">info</span>(value)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


<p><strong>通用请求</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">	<span class="comment">//请求方法</span></span><br><span class="line">	<span class="attr">method</span>:<span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">	<span class="comment">//url</span></span><br><span class="line">	<span class="attr">url</span>:<span class="string">&#x27;http://127.0.0.1:8000/axios-server&#x27;</span>,</span><br><span class="line">	<span class="comment">//url参数</span></span><br><span class="line">	<span class="attr">params</span>:&#123;</span><br><span class="line">		<span class="attr">vip</span>:<span class="number">10</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//头信息</span></span><br><span class="line">	<span class="attr">headers</span>:&#123;</span><br><span class="line">		<span class="attr">a</span>:<span class="number">100</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//请求体信息</span></span><br><span class="line">	<span class="attr">data</span>:&#123;</span><br><span class="line">		<span class="attr">username</span>:<span class="string">&#x27;admin&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span>=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(response)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h2 id="使用fetch函数发送ajax请求（较少使用）">
          <a href="#使用fetch函数发送ajax请求（较少使用）" class="heading-link"><i class="fas fa-link"></i></a><a href="#使用fetch函数发送ajax请求（较少使用）" class="headerlink" title="使用fetch函数发送ajax请求（较少使用）"></a>使用fetch函数发送ajax请求（较少使用）</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;http://127.0.0.1:8000/server&#x27;</span>,&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//请求方法</span></span><br><span class="line">	<span class="attr">method</span>:<span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">	<span class="comment">//请求头</span></span><br><span class="line">	<span class="attr">headers</span>:&#123;</span><br><span class="line">		<span class="attr">name</span>:<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//请求体</span></span><br><span class="line">	<span class="attr">body</span>:<span class="string">&#x27;uname=admin&amp;pwd=admin&#x27;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="comment">//return response.json()</span></span><br><span class="line">	<span class="keyword">return</span> response.<span class="title function_">text</span>()</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">info</span>(response)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h2 id="同源策略">
          <a href="#同源策略" class="heading-link"><i class="fas fa-link"></i></a><a href="#同源策略" class="headerlink" title="同源策略"></a>同源策略</h2>
      <p>服务：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 引入express</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; json &#125; = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 创建应用对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 创建路由规则。request：请求报文的封装  reponse：响应报文的封装</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&#x27;/server&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置响应</span></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    response.<span class="title function_">sendFile</span>(<span class="string">&#x27;html/test.html&#x27;</span>, &#123; <span class="attr">root</span>: <span class="string">&#x27;../&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&#x27;/data&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置响应</span></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    response.<span class="title function_">send</span>(<span class="string">&#x27;data&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. 监听端口启动服务</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;服务已经启动，8000端口i监听中&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>访问<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost:8000/server,%E4%BC%9A%E8%B7%B3%E8%BD%AC%E5%88%B0test.html%E9%A1%B5%E9%9D%A2">http://localhost:8000/server,会跳转到test.html页面</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>test.html：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//1. 创建对象</span></span><br><span class="line">    <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. 初始化，设置请求方法和url</span></span><br><span class="line">    xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;data&#x27;</span>)</span><br><span class="line">        <span class="comment">//3. 发送</span></span><br><span class="line">    xhr.<span class="title function_">send</span>()</span><br><span class="line">    xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="comment">//判断响应状态码是否成功(2开头的)</span></span><br><span class="line">            <span class="keyword">if</span> (xhr.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; xhr.<span class="property">status</span> &lt; <span class="number">300</span>) &#123;</span><br><span class="line">                <span class="comment">//处理结果：行 头 空行 体</span></span><br><span class="line">                <span class="comment">// divtext.innerHTML = xhr.response</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>因为是同源，所以可以在open中地址参数直接写data，前面的http:127.0.0.1:8000会自动填充</strong></p>

        <h2 id="解决跨域">
          <a href="#解决跨域" class="heading-link"><i class="fas fa-link"></i></a><a href="#解决跨域" class="headerlink" title="解决跨域"></a>解决跨域</h2>
      <p><strong>JSONP</strong> </p>
<p>只支持get请求 </p>

        <h2 id="设置CORS响应头实现跨域请求">
          <a href="#设置CORS响应头实现跨域请求" class="heading-link"><i class="fas fa-link"></i></a><a href="#设置CORS响应头实现跨域请求" class="headerlink" title="设置CORS响应头实现跨域请求"></a>设置CORS响应头实现跨域请求</h2>
      <p>服务端：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//设置响应头，允许跨域。*号代表通配所有网页</span></span><br><span class="line">response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//只有http:127.0.0.1:5500才可以向服务发送请求</span></span><br><span class="line"><span class="comment">//response.setHeader(&#x27;Access-Control-Allow-Origin&#x27;,&#x27;http:127.0.0.1:5500&#x27;)</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ul>
<li><p><strong>(‘Access-Control-Allow-Origin’,’*’)：允许跨域</strong></p>
</li>
<li><p><strong>(‘Access-Control-Allow-Headers’,’*’):允许自定义头信息</strong></p>
</li>
<li><p><strong>(‘Access-Control-Allow-Method’,’*’):允许请求的方法(post,get等)</strong></p>
</li>
</ul>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/01/31/web-bootstrap01/">web-bootstrap01</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-01-31</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-21</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h2 id="容器">
          <a href="#容器" class="heading-link"><i class="fas fa-link"></i></a><a href="#容器" class="headerlink" title="容器"></a>容器</h2>
      <p><strong>1. 流体容器</strong></p>
<p>宽度为100%，会随着浏览器的大小改变</p>
<p><strong>2. 固定容器</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">阈值			width</span><br><span class="line"></span><br><span class="line">大于小于1200		1170</span><br><span class="line"></span><br><span class="line">----------</span><br><span class="line"></span><br><span class="line">大于等于992小于1200	970  </span><br><span class="line"></span><br><span class="line">----------</span><br><span class="line"></span><br><span class="line">大于等于768小于992	750</span><br><span class="line"></span><br><span class="line">----------</span><br><span class="line"></span><br><span class="line">小于768		auto	</span><br></pre></td></tr></table></div></figure>

<p><strong>3. 栅格系统</strong></p>
<p><code>class = &quot;col-lg-12&quot;</code></p>
<p>col : 代表列</p>
<p>lg ： 代表阈值</p>
<p>12 ： 一共12列</p>

        <h2 id="栅格">
          <a href="#栅格" class="heading-link"><i class="fas fa-link"></i></a><a href="#栅格" class="headerlink" title="栅格"></a>栅格</h2>
      <p>关于栅格的槽宽：<code>padding-left:15px;padding-right:15px;</code></p>
<p>例如：</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-top</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.row</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span><span class="selector-attr">[class|=col]</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">1px</span> solid blue;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-5&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-6&quot;</span>&gt;</span>5-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-6&quot;</span>&gt;</span>5-2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-4&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p><img src="/2022/01/31/web-bootstrap01/capture_20220204221812242.bmp"></p>
<p>样式如上，可以看到嵌套的row并没有槽宽，原因是为row设置了<code>margin-left:-15px;margin-right:-15px;</code>从而抵消了第一列的槽宽(row的宽度是auto。)，由于此设置会导致外层的row的宽度会溢出容器，所以容器也一样设置了槽宽<code>padding-left:15px;padding-right:15px;</code></p>

        <h2 id="bootstrap定制化">
          <a href="#bootstrap定制化" class="heading-link"><i class="fas fa-link"></i></a><a href="#bootstrap定制化" class="headerlink" title="bootstrap定制化"></a>bootstrap定制化</h2>
      <p><strong>1.改源码</strong></p>
<p>缺点，会破坏原有结构</p>
<p><strong>2.重新创建一个less文件，通过混合的形式将bootstrap.less文件引入到创建的less文件，再在此文件下修改一些样式变量(less变量的就近原则，即使变量赋值在使用的下面，也会生效。)</strong></p>
<figure class="highlight css"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;../less/bootstrap.less&quot;</span></span><br><span class="line"></span><br><span class="line">@<span class="attribute">grid-gutter-width</span>:<span class="number">200px</span>;</span><br><span class="line"></span><br><span class="line">//改变槽宽</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>此文件会先加载import，所以变量写上面下面都一样。</strong></p>
</div></div></article></section><nav class="paginator"><div class="paginator-inner"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fas fa-angle-right"></i></a></div></nav></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><section class="sidebar-toc hide"></section><!-- ov = overview--><section class="sidebar-ov"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/stun-logo.svg" alt="avatar"></div><p class="sidebar-ov-author__text">hello world</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">42</div><div class="sidebar-ov-state-item__name">Archives</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">0</div><div class="sidebar-ov-state-item__name">Categories</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">60</div><div class="sidebar-ov-state-item__name">Tags</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2022</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>ashen</span></div><div><span>Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a></span><span> v6.1.0</span><span class="footer__devider">|</span><span>Theme - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.6.2</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.6.2"></script><script src="/js/stun-boot.js?v=2.6.2"></script><script src="/js/scroll.js?v=2.6.2"></script><script src="/js/header.js?v=2.6.2"></script><script src="/js/sidebar.js?v=2.6.2"></script></body></html>