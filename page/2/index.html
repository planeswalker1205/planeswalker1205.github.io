<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.6.2" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.6.2" type="image/png" sizes="32x32"><meta property="og:type" content="website">
<meta property="og:title" content="MIRACLE">
<meta property="og:url" content="https://planeswalker1205.github.io/page/2/index.html">
<meta property="og:site_name" content="MIRACLE">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="ashen">
<meta name="twitter:card" content="summary"><title>MIRACLE</title><link ref="canonical" href="https://planeswalker1205.github.io/page/2/index.html"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.6.2"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"Copy","copySuccess":"Copy Success","copyError":"Copy Error"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 6.1.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">Home</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">Archives</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">Categories</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">Tags</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">MIRACLE</div><div class="header-banner-info__subtitle"></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content content-home" id="content"><section class="postlist"><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/02/25/web-nodeJS01/">web-nodeJS</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-02-25</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-30</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h2 id="fs文件系统模块">
          <a href="#fs文件系统模块" class="heading-link"><i class="fas fa-link"></i></a><a href="#fs文件系统模块" class="headerlink" title="fs文件系统模块"></a><font color="#44bd32">fs文件系统模块</font></h2>
      <p>fs模块是Node.js官方提供的，用来操作文件的模块。它提供了一系列的属性和方法，用来满足用户对文件的操作需求。</p>
<ul>
<li><p><code>fs.readFile()</code>方法，用来读取指定文件中的内容</p>
</li>
<li><p><code>fs.writeFile()</code>方法，用来向指定的文件中写入内容</p>
</li>
</ul>
<p><strong>需要先导入fs模块</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="01-fs-readFile-方法，可以读取指定文件中的内容。">
          <a href="#01-fs-readFile-方法，可以读取指定文件中的内容。" class="heading-link"><i class="fas fa-link"></i></a><a href="#01-fs-readFile-方法，可以读取指定文件中的内容。" class="headerlink" title="01. fs.readFile()方法，可以读取指定文件中的内容。"></a>01. fs.readFile()方法，可以读取指定文件中的内容。</h3>
      <p><code>fs.readFile(path,[option],callback)</code></p>
<ul>
<li><p>参数1：必选参数，字符串，表示文件的路径</p>
</li>
<li><p>参数2：可选参数，表示以什么编码格式来读取文件</p>
</li>
<li><p>参数3：必选参数，文件读取完成后，通过回调函数拿到读取的结果</p>
</li>
</ul>

        <h3 id="02-fs-writeFile-方法，向指定的文件中写入内容。">
          <a href="#02-fs-writeFile-方法，向指定的文件中写入内容。" class="heading-link"><i class="fas fa-link"></i></a><a href="#02-fs-writeFile-方法，向指定的文件中写入内容。" class="headerlink" title="02. fs.writeFile()方法，向指定的文件中写入内容。"></a>02. fs.writeFile()方法，向指定的文件中写入内容。</h3>
      <p><code>fs.writeFile(file,data,[options],callback)</code></p>
<ul>
<li><p>参数1：必选参数，需要指定一个文件路径的字符串。表示文件的存放路径</p>
</li>
<li><p>参数2：必选参数，表示要写入文件的内容</p>
</li>
<li><p>参数3：可选参数，表示以什么格式写入文件内容，默认值是utf8</p>
</li>
<li><p>参数4：必选参数，文件写入完成后的回调函数</p>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">writeFile</span>(<span class="string">&#x27;../resources/txt4.md&#x27;</span>, <span class="string">&#x27;hesssllo world&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;打印：&#x27;</span> + err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>如果文件写入成功，err打印null</p>
</blockquote>

        <h3 id="03-fs模块，路径动态拼接问题">
          <a href="#03-fs模块，路径动态拼接问题" class="heading-link"><i class="fas fa-link"></i></a><a href="#03-fs模块，路径动态拼接问题" class="headerlink" title="03. fs模块，路径动态拼接问题"></a>03. fs模块，路径动态拼接问题</h3>
      <blockquote>
<p>在使用fs模块操作文件时，如果提供的操作路径是以.&#x2F;或者..&#x2F;开头的相对路径时，很容易出现路径动态拼接错误的问题。原因是代码在运行的时候，会以执行node命令时所在的目录，动态拼接出被操作文件的完整路径</p>
</blockquote>
<p>可使用绝对路径解决，但是维护性、移植性较差</p>
<p><strong>__dirname表示当前运行的js文件所在的<font color="red">目录</font></strong></p>

        <h2 id="path路径模块">
          <a href="#path路径模块" class="heading-link"><i class="fas fa-link"></i></a><a href="#path路径模块" class="headerlink" title="path路径模块"></a><font color="#44bd32">path路径模块</font></h2>
      <p><strong>导入</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br></pre></td></tr></table></div></figure>
<p><strong>语法：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.<span class="title function_">join</span>([option])</span><br></pre></td></tr></table></div></figure>

<p>参数不限，可以将多个字符串拼接成一个字符串返回</p>
<p><strong>注意：如果参数为<code>../</code>的字符串，那么它会抵消掉紧挨着前面的字符串的一层路径</strong></p>
<p>涉及到路径拼接的操作，使用path.join操作</p>
<p><strong>path.basename()</strong></p>
<p>语法：</p>
<p><code>path.basename(path,[ext])</code></p>
<ul>
<li><p>第一个参数：必选参数，表示一个路径的字符串</p>
</li>
<li><p>第二个参数：可选参数，表示文件扩展名。去除掉文件路径最后一个部分的此参数后缀名</p>
</li>
<li><p>返回，<string>表示路径中的最后一个部分</string></p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> fpath = <span class="string">&#x27;a/b/c/d/text.html&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fullbane = path.<span class="title function_">basename</span>(fpath, <span class="string">&#x27;.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullbane)</span><br><span class="line"><span class="comment">//输出text</span></span><br></pre></td></tr></table></div></figure>

<p><strong>path.extname()</strong></p>
<p>获取路径中的扩展名部分</p>
<p>语法：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.<span class="title function_">extname</span>(path)</span><br></pre></td></tr></table></div></figure>


        <h2 id="http模块">
          <a href="#http模块" class="heading-link"><i class="fas fa-link"></i></a><a href="#http模块" class="headerlink" title="http模块"></a><font color="#44bd32">http模块</font></h2>
      <p><strong>http模块是Node.js官方提供的，用来创建web服务器模块，通过http提供的htto.creatServer()方法，就能方便的把一台普通的电脑，变成一台Web服务器，从而对外提供Web资源服务</strong></p>
<blockquote>
<p>服务器与普通电脑的区别：服务器上安装了web服务器软件，丽日：IIS,Apache等。通过这些服务器软件，就能把一台普通的电脑变成一台web服务器</p>
</blockquote>

        <h3 id="01-创建web服务器的基本步骤">
          <a href="#01-创建web服务器的基本步骤" class="heading-link"><i class="fas fa-link"></i></a><a href="#01-创建web服务器的基本步骤" class="headerlink" title="01. 创建web服务器的基本步骤"></a>01. 创建web服务器的基本步骤</h3>
      <ul>
<li><p>导入http模块</p>
</li>
<li><p>创建web服务器实例</p>
</li>
<li><p>为服务器实例绑定request事件，监听客户端的请求</p>
<p>  req参数：req是请求对象，它包含了与客户端相关的数据和属性。例如：</p>
<p>  <strong><font color="green">req.url：是客户端请求的url地址</font></strong></p>
<p>  <strong><font color="green">req.method：是客户端的method请求类型</font></strong></p>
<p>  res参数：res是响应对象，它包含了与服务器相关的数据和属性。例如：</p>
<p>  <code>res.setHeader(&#39;Content-Type&#39;,&#39;text/html;charset=utf-8&#39;)</code><strong>或者</strong></p>
<p>  <code>res.writeHead(200,&#123;&#39;Content-Type&#39;:&#39;text/plain;charset=utf-8&#39;&#125;) //解决响应的值乱码</code></p>
<p>  <strong><font color="green">req.end():向客户端发送指定的内容，并结束这次请求的处理过程</font></strong></p>
</li>
<li><p>启动服务器</p>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>()</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">on</span>(<span class="string">&#x27;request&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有客户端发送请求&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="string">&#x27;5134&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已启动&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h2 id="模块化">
          <a href="#模块化" class="heading-link"><i class="fas fa-link"></i></a><a href="#模块化" class="headerlink" title="模块化"></a><font color="#44bd32">模块化</font></h2>
      
        <h3 id="01-Node-js中模块的分类">
          <a href="#01-Node-js中模块的分类" class="heading-link"><i class="fas fa-link"></i></a><a href="#01-Node-js中模块的分类" class="headerlink" title="01. Node.js中模块的分类"></a>01. Node.js中模块的分类</h3>
      <ul>
<li><p>内置模块(有Node.js官方提供，例如fs，http，path等)</p>
</li>
<li><p>自定义模块(用户创建的每个.js文件，都是自定义模块)</p>
</li>
<li><p>第三方模块(由第三方开发出来的模块，并非官方提供的内置模块，也不是用户创建的自定义模块，使用前需要先下载)</p>
</li>
</ul>

        <h3 id="02-加载模块">
          <a href="#02-加载模块" class="heading-link"><i class="fas fa-link"></i></a><a href="#02-加载模块" class="headerlink" title="02. 加载模块"></a>02. 加载模块</h3>
      <ul>
<li>使用强大的require()方法，可以加载需要的内置模块，自定义模块，第三方模块进行使用</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 加载内置模块</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 加载用户自定义模块,可以省略.js后缀名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> custom = <span class="built_in">require</span>(<span class="string">&#x27;./custom.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 加载第三方模块</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> moment = <span class="built_in">require</span>(<span class="string">&#x27;moment&#x27;</span>)</span><br></pre></td></tr></table></div></figure>


        <h3 id="03-模块作用域">
          <a href="#03-模块作用域" class="heading-link"><i class="fas fa-link"></i></a><a href="#03-模块作用域" class="headerlink" title="03. 模块作用域"></a>03. 模块作用域</h3>
      <p>和函数作用域类似，在自定义模块中定义的变量，方法等成员，只能在当前模块内被访问，这种模块级别的访问限制，叫做模块作用域</p>
<p>即使require了自定义模块，也不能直接访问其变量</p>

        <h3 id="04-module对象">
          <a href="#04-module对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#04-module对象" class="headerlink" title="04. module对象"></a>04. module对象</h3>
      <p>在每个.js自定义模块中都有一个module对象，它里面存储了和当前模块有关的信息。</p>
<p><strong>在自定义模块中，可以使用module.exports对象，将模块内的成员共享出去，供外界使用，外界用require()方法导入自定义模块时，返回得到的就是module.exports所指向的对象</strong></p>
<p>在一个自定义模块中，默认情况下，module.exports &#x3D; {}。可以向module.exports对象上挂在属性或者方法</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>.<span class="property">username</span> = <span class="string">&#x27;zs&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>.<span class="property">fn1</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>调用：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> m = <span class="built_in">require</span>(<span class="string">&#x27;./m1.js&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m.<span class="property">username</span>)</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">使用require()方法导入模块时，导入的结果，永远以module.exports指向的对象为准，比如在模块中重写了module.exports对象，那么就以这个重写的对象为准</font></strong></p>

        <h3 id="05-exports对象">
          <a href="#05-exports对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#05-exports对象" class="headerlink" title="05. exports对象"></a>05. exports对象</h3>
      <p>由于module.exports单词写起来比较复杂，为了简化向外共享成员的代码，Node提供了exports对象，默认下，exports和module.exports指向同一个对象。最终共享的结果，以module.exports指向的对象为准。比如为exports设置属性name,module.exports也设置了属性name，那么以module.exports.name为准</p>
<p><strong><font color="red">注意：exports和module.exports默认指向同一个对象，但是如果另外为exports或module.exports赋值一个对象的话，那么被赋值的那个就指向了新的对象，最终共享的结果，则是以module。exports指向的对象为准</font></strong></p>
<p>比如：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span> = &#123;</span><br><span class="line">	<span class="string">&#x27;uname&#x27;</span>:<span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">	<span class="string">&#x27;uage&#x27;</span>:<span class="string">&#x27;18&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//exports指向了新得对象，module.exports还是指向默认的对象</span></span><br></pre></td></tr></table></div></figure>

<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> c = <span class="built_in">require</span>(<span class="string">&#x27;./n1.js&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c.<span class="property">uname</span>)</span><br></pre></td></tr></table></div></figure>

<p>&#x3D;&gt;打印undefined</p>

        <h3 id="05-npm与包">
          <a href="#05-npm与包" class="heading-link"><i class="fas fa-link"></i></a><a href="#05-npm与包" class="headerlink" title="05.npm与包"></a>05.npm与包</h3>
      <p>node_modules文件夹用来存放所有已安装到项目中的包，require()导入第三方包时，就是从这个目录中查找并加载包</p>
<p>package-lock.json配置文件用来记录node_modules目录下的每一个包的下载信息，例如包的名字，版本号，下载地址等</p>
<p><strong>(1) 安装包</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install moment</span><br></pre></td></tr></table></div></figure>

<p><strong>安装指定版本的包</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i moment@<span class="number">2.24</span><span class="number">.0</span></span><br></pre></td></tr></table></div></figure>

<p><strong>包的版本号是以“点分十进制”进行定义的。总共有三位数字。丽日2.24.0</strong></p>
<p>第一位数字：大版本(底层重构)</p>
<p>第二位数字：功能版本(更新了功能)</p>
<p>第三位数字：Bug修复版本(修复了bug)</p>
<p>版本号提升规则：只要前面的版本号增长了，则后面的版本号归零</p>
<p><strong>(2)包管理配置文件</strong></p>
<p>下载的第三方包过大，不方便共享到github上，所以一般不上传第三方包，但是要在项目上标记下用了哪些包方便其他人下载后部署。</p>
<p>在项目根目录中，创建一个叫做package.json的配置文件，即用来记录项目中安装了哪些包，从而方便提出node_modules目录之后，在团队成员之间共享项目的源代码</p>
<p>注意：今后项目开发中，一定要吧node_modules文件夹，添加到.gitgore忽略文件中</p>
<p>package.json创建指令：</p>
<p><code>npm init -y</code></p>
<blockquote>
<p>指令只能在英文的目录下运行，当运行npm install命令安装包的时候，npm包管理工具自动把包的名称和版本号，记录到package.json中</p>
</blockquote>
<p><strong>(3)一次性安装所有包</strong></p>
<p>当拿到一个剔除‘node_modules’的项目之后，需要先把所有的包下载到项目中，才能将项目运行起来</p>
<p>运行    <code>npm install</code>&#x2F;<code>npm i</code>,一次性安装所有的依赖包</p>
<blockquote>
<p>执行npm install指令时，npm包管理工具会先读取package.json中的dependencies节点，读取到记录的所有依赖包名称和版本号之后，npm包管理工具会把这些包一次性下载到项目中</p>
</blockquote>
<p><strong>(3)移除包（需要指定包名）</strong></p>
<p><code>npm uninstall moment</code></p>
<p>执行成功后，会把卸载的包，自动从package.json的dependencies中移除掉</p>
<p>如果某些包只在项目开发阶段用到，上线用不到，则可以把这些包记录到devDependencies节点中。</p>
<p><code>npm i 包名 D</code>(简写)</p>
<p>&#x3D;&#x3D;</p>
<p><code>npm install 包名 --save-dev</code></p>
<p><strong>(4)解决下包速度慢</strong></p>
<p>淘宝在国内搭建了一个服务器，专门把国外官方服务器上的包同步到国内的服务器，然后在国内提供下包的服务，从而极大的提高了下包的速度</p>
<ul>
<li>切换npm的下包镜像源头：</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 查看当前的下包镜像源（<span class="attr">https</span>:<span class="comment">//registry.npmjs.org/）</span></span><br><span class="line"></span><br><span class="line">npm config get registry</span><br><span class="line"></span><br><span class="line"># 将下包的镜像源切换为淘宝镜像源</span><br><span class="line"></span><br><span class="line">npm config set registry = <span class="attr">https</span>:<span class="comment">//registry.npm.taobao.org/</span></span><br></pre></td></tr></table></div></figure>

<ul>
<li>nrm</li>
</ul>
<p>nrm工具，可以快速查看和切换下包的镜像源</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#通过npm，将nrm安装为全局可用的工具</span><br><span class="line"></span><br><span class="line">npm i nrm -g</span><br><span class="line"></span><br><span class="line">#查看所有可用的镜像源</span><br><span class="line"></span><br><span class="line">nrm ls</span><br><span class="line"></span><br><span class="line">#切换</span><br><span class="line"></span><br><span class="line">nrm use taobao</span><br></pre></td></tr></table></div></figure>

<p><strong>(5)包的分类</strong></p>
<p>项目包&#x2F;全局包</p>
<ul>
<li><p>项目包：{开发依赖包,核心依赖包} &#x3D; {devDependencies,dependencies}</p>
</li>
<li><p>全局包：在执行安装指令时，提供了-g参数。(默认在C:\Users\planeswalker\AppData\Roaming\npm\node_modules)</p>
</li>
</ul>
<p>安装全局包&#x2F;卸载全局包</p>
<p><code>npm i [packagename] -g</code>&#x2F;<code>npm uninstall [packagename] -g</code></p>
<blockquote>
<p>注意：只有工具性质的包，才有全局安装的必要性。判断某个包是否需要全局安装后才使用，参考官方提供的使用说明即可</p>
</blockquote>
<p><strong>(6)自定义模块加载机制</strong></p>
<p><strong><font color="red">注意：使用require()加载自定义模块时，必须指定以.&#x2F;或..&#x2F;开头的路径标识符。如果没有指定，则node会把它当作内置模块或者第三方模块来加载</font></strong></p>
<blockquote>
<p>同时，在使用require()导入自定义模块时，如果省略了文件的扩展名，则Node.js会按顺序分别尝试加载以下的文件：(1)按照确切的文件名进行加载 (2)补全.js扩展名进行加载  (3)补全.json扩展名进行加载 (4)补全.node扩展名进行加载 (5)报错</p>
</blockquote>
<p><strong>(7)第三方模块加载机制</strong></p>
<p>如果没有找到对应的第三方模块，则移动到再上一层父目录中，进行加载，直到文件系统的跟目录</p>
<p><strong>(8)目录作为模块加载机制</strong></p>
<p>把目录作为模块标识符，传递给require()进行加载的时候，有三种加载方式。</p>
<ul>
<li><p>在被加载的目录下查找一个叫做package.json的文件，寻找main属性作为加载入口</p>
</li>
<li><p>如果没有package.json文件，或者main入口不存在或无法解析，则Node.js将会试图加载目录下的index.js文件</p>
</li>
<li><p>如果都失败，打印错误</p>
</li>
</ul>

        <h2 id="Express">
          <a href="#Express" class="heading-link"><i class="fas fa-link"></i></a><a href="#Express" class="headerlink" title="Express"></a><font color="#44bd32">Express</font></h2>
      
        <h2 id="1-创建服务器">
          <a href="#1-创建服务器" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-创建服务器" class="headerlink" title="1. 创建服务器"></a>1. 创建服务器</h2>
      <p>Express是基于Node.js平台，快速 开放 极简的Web开发框架</p>
<p><strong>1.1. 创建一个基本的web服务器</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 导入express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 创建web服务器</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.调用app.listen(端口号,启用成功的回调函数)，启动服务器</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">8199</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;express server running at http://127.0.0.1:8199&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>1.2. 监听GET&#x2F;POST请求</strong></p>
<p>通过app.get()方法，可以监听客户端的GET请求，</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 参数1：/user 客户端请求的url地址</span></span><br><span class="line"><span class="comment"> * 参数2：请求对应的处理函数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@req</span> 请求对象(包含了与请求相关的属性和方法)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@res</span> 响应对象(包含了与响应相关的属性和方法)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//向客户端发送json对象</span></span><br><span class="line">    res.<span class="title function_">send</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="string">&#x27;20&#x27;</span>, <span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span> &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>1.3. 获取URL中携带的查询参数</strong></p>
<p>通过<code>req.query</code>对象，可以访问到客户端通过查询字符串的形式，发送到服务器的参数</p>
<p><code>req.query.name</code></p>
<p>默认req.query是空对象</p>
<p><strong>1.4.获取URL中的动态参数</strong></p>
<p>通过<code>req.params</code>对象，可以访问到URL中，通过:匹配到的动态参数</p>
<p>URL地址中，可以通过<code>:参数名</code>的形式，匹配动态参数值</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/users:id&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">params</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/users/:id&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">params</span>)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></div></figure>
<p>访问 <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost:8494/users3%E6%88%96%E8%80%85http://localhost:8494/users/3%E3%80%82req.params%E4%B8%AD%E7%9A%84id%E5%B1%9E%E6%80%A7%E5%80%BC%E4%B8%BA3">http://localhost:8494/users3或者http://localhost:8494/users/3。req.params中的id属性值为3</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><strong><font color="red">如果有多个参数，:id和:name之间要有斜杠区分，不然报错</font></strong></p>

        <h2 id="2-托管静态资源">
          <a href="#2-托管静态资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-托管静态资源" class="headerlink" title="2. 托管静态资源"></a>2. 托管静态资源</h2>
      <p>express提供了一个非常好用的函数，叫做express.static()，通过它，我们可以非常方便地创建一个静态资源服务器，比如，将public目录下的图片，CSS文件，Javascript文件对外开放访问</p>
<p><code>app.use(express.static(&#39;public&#39;))</code></p>
<p><strong><font color="red">Express在指定的静态目录中查找文件，并对外提供资源的访问路径，因此，存放静态文件的目录名不会出现在URL中</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//快速对外提供静态资源</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(<span class="string">&#x27;../HTML&#x27;</span>))</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;http://localhost:80&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>访问HTML路径下的weather.html资源</p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost/weather.html">http://localhost:80/weather.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>注：如果要托管多个静态资源目录，可以多次调用express.static()，访问静态资源时，express.static()函数会根据目录的添加顺序查找所需的文件。如果第一个目录有此文件，就用第一个的，不会继续往后面找了</p>
<p><strong>如果希望在托管的静态资源访问路径之前，挂在路径前缀，则可以使用如下方式</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/public&#x27;</span>, express.<span class="title function_">static</span>(<span class="string">&#x27;../HTML&#x27;</span>))</span><br></pre></td></tr></table></div></figure>

<p>只从有public的路径去查找。</p>
<p><strong><font color="red">注意：如果托管了比如PAGE文件夹，里面都是HTML文件，那么要注意该文件引入的JS,CSS等也会是ip，端口下的访问路径，如：</font></strong></p>
<p><code>&lt;script type=&quot;text/javascript&quot; src=&quot;../JS/jquery-3.5.1.js&quot;&gt;&lt;/script&gt;</code></p>
<p>变成</p>
<p><code>&lt;script type=&quot;text/javascript&quot; src=&quot;http://localhost:5141/JS/jquery-3.5.1.js&quot;&gt;&lt;/script&gt;</code></p>
<p>可以将这些文件也托管为静态资源解决</p>

        <h2 id="3-Express路由">
          <a href="#3-Express路由" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-Express路由" class="headerlink" title="3. Express路由"></a>3. Express路由</h2>
      <p>比如打电话10086的人工客服，1-&gt;业务查询；2-&gt;手机充值；3-&gt;业务办理</p>
<p><strong>在这里，路由是案件与服务之间的映射关系</strong></p>
<p><strong>Express中，路由指的是客户端的请求与服务器处理函数之间的映射关系</strong></p>
<p>Express中的路由分3部分组成，分别是请求的类型，请求的URL地址，处理函数</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.请求类型(URL,处理函数)</span></span><br><span class="line">app.<span class="title function_">METHOD</span>(<span class="variable constant_">PATH</span>,<span class="variable constant_">HANDLER</span>)</span><br></pre></td></tr></table></div></figure>

<p>Express中路由的例子</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//匹配get请求，且请求URL为/</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">	res.<span class="title function_">send</span>(<span class="string">&#x27;hw&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//匹配post请求，且请求URL为/</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">	res.<span class="title function_">send</span>(<span class="string">&#x27;hw&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>路由匹配：1. 按照定义的先后顺序进行匹配 ；2.请求类型和请求的URL同时匹配成功，才会调用对应的处理函数 </p>
</blockquote>

        <h2 id="4-模块化路由">
          <a href="#4-模块化路由" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-模块化路由" class="headerlink" title="4. 模块化路由"></a>4. 模块化路由</h2>
      <p>(1) 创建路由模块对应的.js文件</p>
<p>(2) 调用express.Router()函数创建路由对象</p>
<p>(3) 向路由对象上挂在具体的路由</p>
<p>(4) 使用module.exports向外共享路由对象</p>
<p>(5) 使用app.use()函数注册路由模块</p>
<p><strong>路由模块</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>) <span class="comment">//导入express</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> router = express.<span class="title class_">Router</span>() <span class="comment">//创建路由对象</span></span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/user/list&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123; <span class="comment">//挂载获取用户列表的路由</span></span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Get user list&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/user/add&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123; <span class="comment">//挂载添加用户的路由</span></span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Add new user&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router <span class="comment">//向外导出路由对象</span></span><br></pre></td></tr></table></div></figure>

<p><strong>注册路由模块</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line">    <span class="comment">//1. 导入路由模块</span></span><br><span class="line"><span class="keyword">const</span> userRouter = <span class="built_in">require</span>(<span class="string">&#x27;./tNode01.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.使用app.user注册路由模块</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="string">&#x27;80&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已启动：http://localhost:80&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">use</span>(userRouter)</span><br></pre></td></tr></table></div></figure>

<p>接着就可以发起请求了</p>
<p><strong>app.use()函数的作用，就是来注册全局中间件</strong></p>
<p><strong><font color="green">为路由模块添加前缀</font></strong></p>
<p><code>app.use(&#39;/api&#39;，userRouter)</code></p>

        <h2 id="5-Express中间件">
          <a href="#5-Express中间件" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-Express中间件" class="headerlink" title="5. Express中间件"></a>5. Express中间件</h2>
      <p><strong>1. Express的中间件，本质上就是一个function处理函数，Express中间件的格式如下：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,<span class="keyword">function</span>(<span class="params">req,res,next</span>)&#123;</span><br><span class="line">	<span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注意：中间件函数的形参列表中，必须包含next参数，而路由处理函数中只包含req和res</font></strong></p>
<p><strong>2. next函数的作用</strong></p>
<p>next函数是实现多个中间件连续调用的关键，它表示把流转关系转交给下一个中间件或路由</p>
<p>定义中间件函数：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> mw = <span class="keyword">function</span>(<span class="params">req, res, next</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;这是一个简单的中间件函数&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//注意，在当前中间件的业务处理完毕后，必须调用next()函数</span></span><br><span class="line">    <span class="comment">//表示把流转关系转交给下一个中间件或路由</span></span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>客户端发起的任何请求，到达服务器之后，都会触发的中间件，叫做全局生效的中间件</strong></p>
<p>通过调用app.use(中间件函数)，即可定义一个全局生效的中间件</p>
<p><strong>3. 全局中间件的简写</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req,res,next</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;简单的中间件函数&#x27;</span>)</span><br><span class="line">	<span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>多个中间件之间，共享同一份req和res。基于这样的特性，可以在上游的中间件中，统一为req或res对象添加自定义的属性和方法，供下游的中间件或路由进行使用</strong></p>
<p><strong>4.定义多个全局中间件</strong></p>
<p>可以使用app.use()连续定义多个全局中间件。客户端请求到达服务器之后，会按照中间件定义的先后顺序依次进行调用</p>
<p><strong>5. 全局中间件的执行顺序</strong></p>
<p><font color="blue">以JS中的执行顺序为准，从上往下执行，如果没有全局中间件中没有执行next()，那么就不会继续往下执行了。</font></p>
<p>如：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;get方法&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第一个全局中间件&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第二个全局中间件&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第三个全局中间件&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>访问<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost/user%E5%9C%B0%E5%9D%80%E5%90%8E%E4%B8%8D%E4%BC%9A%E7%BB%A7%E7%BB%AD%E5%BE%80%E4%B8%8B%E6%89%A7%E8%A1%8C%E5%85%A8%E5%B1%80%E4%B8%AD%E9%97%B4%E4%BB%B6">http://localhost:80/user地址后不会继续往下执行全局中间件</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>如：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res,next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;get方法&#x27;</span>)</span><br><span class="line">	<span class="title function_">next</span>()</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第一个全局中间件&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第二个全局中间件&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第三个全局中间件&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>访问<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost/user%E5%90%8E%E4%BC%9A%E7%BB%A7%E7%BB%AD%E5%BE%80%E4%B8%8B%E6%89%A7%E8%A1%8C%E3%80%82%E4%BB%A5%E4%B8%8A%E6%B3%A8%E5%86%8C%E7%9A%84%E8%B7%AF%E7%94%B1%E5%90%8C%E7%90%86">http://localhost/user后会继续往下执行。以上注册的路由同理</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>注意：如果全局中间件中只有一个中间件函数</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第一个全局中间件&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>那么此中间件拦截的路径包含所有:<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost/">http://localhost:80/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>…</p>
<p>如果全局中间件中第一个参数加了路径</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/get&#x27;</span>,<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第一个全局中间件&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>那么此全局中间件就只拦截该路径下的地址:<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost/user/">http://localhost:80/user/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>…</p>
<p><strong>6. 局部中间件</strong></p>
<p>不受用app.use()定义的中间件，叫做局部生效的中间件</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">mw1</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;局部生效的中间件&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/getUser&#x27;</span>, mw1, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;局部生效&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>访问getUser地址会生效，访问&#x2F;地址不会生效此中间件</p>
<p><strong>7. 定义多个局部中间件</strong></p>
<p>可以在路由中，通过如下两种等价的方式，使用多个局部中间件</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">mw1</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;局部生效的中间件1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mw2</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;局部生效的中间件2&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mw3</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;局部生效的中间件3&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/getUser&#x27;</span>, [mw1, mw2, mw3], <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;dddd&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>
<p>或者</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/getUser&#x27;</span>, mw1, mw2, mw3, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;dddd&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">使用中间件的注意事项</font></strong></p>
<ul>
<li><p>当一个请求到服务器上时，都是从上往下进行匹配的，匹配成功了则直接响应，不会继续向下匹配了。所以无论时全局生效的中间件，还是局部定义的中间件，都需要在请求的上面</p>
</li>
<li><p>执行完中间件的业务代码之后，不要忘记调用next()函数</p>
</li>
<li><p>客户端发送过来的请求，可以连续调用多个中间件进行处理</p>
</li>
<li><p>为了防止代码逻辑混乱，调用next()函数后不要再写额外的代码</p>
</li>
<li><p>连续调用多个中间件时，多个中间件之间，共享req和res</p>
</li>
</ul>

        <h2 id="6-中间件的分类">
          <a href="#6-中间件的分类" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-中间件的分类" class="headerlink" title="6. 中间件的分类"></a>6. 中间件的分类</h2>
      <ul>
<li><p><strong>应用级别的中间件</strong></p>
<p>  <font color="green">通过app.use(),app.get(),app.post()等绑定到app实例尚的中间件，叫做应用级别的中间件</font></p>
</li>
<li><p><strong>路由级别的中间件</strong></p>
<p>  <font color="green">绑定到express.Router()实例上的中间件，叫做路由级别的中间件，它的用法和应用级别中间件没有任何区别，只是应用级别中间件时绑定到app实例上，路由级别的中间件绑定到router实例上</font></p>
  <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;路由级别的中间件&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>
</li>
<li><p><strong>错误级别的中间件</strong></p>
<p>  <font color="green">作用：专门用来捕获整个项目中发生的异常错误，从而防止项目异常崩溃问题</font></p>
<p>  错误级别中间件的function处理函数中，必须有四个形参，形参顺序从前到后，分别是(err,req,res,next)。</p>
  <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">use</span>(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;发生了错误:&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;ERROR!&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line"><span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>
<p>  <strong><font color="red">注意：错误级别的中间件，必须注册在所有路由之后</font></strong></p>
<p>  因为抛出错误后，该服务后面的代码不会继续执行，会找后面有没有错误级别的中间件，如果没有服务崩溃。如果有捕获错误</p>
</li>
<li><p><strong>Express的内置中间件</strong></p>
<p>  自Express 4.16.0 版本开始，Express内置了3个常用的中间件，极大提高了Express项目的开发效率和体验</p>
<ol>
<li>express.static快速托管静态资源的内置中间件，例如HTML文件、图片、CSS样式等(无兼容性)</li>
<li>express.json解析JSON格式的请求体数据(有兼容性，仅在4.16.0+版本可用)</li>
</ol>
  <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">use</span>(express.<span class="title function_">json</span>())</span><br></pre></td></tr></table></div></figure>
<p>  在服务器中，可以使用req.body来接收客户端发送的POST请求体数据。默认情况下，如果客户端发送的是JSON格式的请求体，服务端不配置解析表单数据的中间件，则req.body默认为undefined。只有配置了此内置中间件，才会正常解析json数据</p>
<ol start="3">
<li>express.urlencoded解析URL-encoded格式的请求体数据(有兼容性，仅在4.16.0+版本可用)</li>
</ol>
<p>  <code>router.use(express.urlencoded(&#123; extended: false &#125;))</code></p>
<p>  <font color="red">注意：req.body是对象，console.log(‘’+req.body)写法会报错<code>Cannot convert object to primitive value</code>，需要写成console.log(‘’,req.body)</font></p>
</li>
<li><p><strong>第三方的中间件</strong></p>
<p>  非Express官方内置的，而是由第三方开发出来的中间件，叫做第三方中间件</p>
<p>  例如：body-parse这个第三方中间件来解析请求体数据</p>
<ol>
<li><p>运行<code>npm install body-parse</code>安装中间件</p>
</li>
<li><p>使用require导入中间件</p>
</li>
<li><p>调用app.use()注册并使用中间件</p>
</li>
</ol>
<p>  <strong>如果没有配置任何解析表单数据的中间件，则req.body默认等于undefined</strong></p>
  <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> parser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>)</span><br><span class="line">router.<span class="title function_">use</span>(parser.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/user/list&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123; </span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">body</span>) <span class="comment">//此处如果用+符号加上字符串会报错</span></span><br><span class="line">   res.<span class="title function_">send</span>(<span class="string">&#x27;Get user list&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>  Express内置的express.urlencoded中间件，就是基于body-parse这个第三方中间件进一步封装出来的</p>
</li>
</ul>

        <h2 id="7-CORS跨域资源共享">
          <a href="#7-CORS跨域资源共享" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-CORS跨域资源共享" class="headerlink" title="7. CORS跨域资源共享"></a>7. CORS跨域资源共享</h2>
      <p><strong>解决接口跨域问题的方案主要有两种：</strong></p>
<ol>
<li><p>CORS(主流解决方案，推荐使用)</p>
</li>
<li><p>JSONP(只支持get请求)</p>
</li>
</ol>
<p><strong>CORS是Express的一个第三方中间件，通过安装和配置cors中间件，可以比较方便解决跨域问题</strong></p>
<ol>
<li><p>运行<code>npm i cors</code></p>
</li>
<li><p>导入<code>const cors = require(&#39;cors&#39;)</code></p>
</li>
<li><p>在路由之前调用<code>app.use(cors())</code></p>
</li>
</ol>

        <h2 id="8-项目中操作mysql">
          <a href="#8-项目中操作mysql" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-项目中操作mysql" class="headerlink" title="8. 项目中操作mysql"></a>8. 项目中操作mysql</h2>
      <ol>
<li><p>安装Mysql数据库的第三方模块</p>
</li>
<li><p>通过mysql模块链接到MySQL数据库</p>
</li>
<li><p>通过mysql模块执行SQL语句</p>
</li>
</ol>
<p><strong>1. 安装mysql模块</strong></p>
<p>mysql模块是托管于npm尚的第三方模块，它提供了在Node.js项目中连接和操作MtSQL数据库的能力</p>
<p><code>npm install mysql</code></p>
<p><strong>2. 配置mysql模块</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 导入mysql</span></span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.建立与MySQL数据库的连接</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> db = mysql.<span class="title function_">createPool</span>(&#123;</span><br><span class="line">    <span class="comment">//默认端口3306</span></span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="comment">//数据库的IP地址</span></span><br><span class="line">    <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>, <span class="comment">//登录数据库的账号</span></span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span>, <span class="comment">//登录数据库的密码</span></span><br><span class="line">    <span class="attr">database</span>: <span class="string">&#x27;testsgg&#x27;</span> <span class="comment">//要操作的数据库的名称</span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">db.<span class="title function_">query</span>(<span class="string">&#x27;select * from userInfo&#x27;</span>, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(results)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><code>query</code>方法，第一个参数为要执行的语句</p>
<p><strong>3. 使用占位符向数据表中插入数据</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> insertUser = &#123; <span class="attr">uid</span>: <span class="string">&#x27;3&#x27;</span>, <span class="attr">uname</span>: <span class="string">&#x27;lte&#x27;</span>, <span class="attr">uage</span>: <span class="string">&#x27;34&#x27;</span>, <span class="attr">uaddress</span>: <span class="string">&#x27;hszc&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&quot;insert into userInfo values (?,?,?,?)&quot;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, [insertUser.<span class="property">uid</span>, insertUser.<span class="property">uname</span>, insertUser.<span class="property">uage</span>, insertUser.<span class="property">uaddress</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;错误信息：&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(results.<span class="property">affectedRows</span>)</span><br><span class="line">	<span class="comment">//affectedRows代表受影响的行，为1时代表插入数据成功</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>更新数据同理</p>
<p><code>const sqlStr = &quot;update userinfo set Name=? where ID=?&quot;</code></p>
<p><strong>4.插入数据的快捷方式</strong></p>
<p><strong>需要数据对象的每个属性和数据表的字段一一对应</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该对象的属性名称需要与数据库的列名对应，不区分大小写，如果一个不对应，执行报错</span></span><br><span class="line"><span class="keyword">const</span> insertUser = &#123; <span class="attr">id</span>: <span class="string">&#x27;5&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;vvv&#x27;</span>, <span class="attr">age</span>: <span class="string">&#x27;27&#x27;</span>, <span class="attr">address</span>: <span class="string">&#x27;wszx&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&quot;insert into userInfo set ?&quot;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, insertUser, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;错误信息：&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(results.<span class="property">affectedRows</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>更新数据同理</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> insertUser = &#123; <span class="attr">id</span>: <span class="string">&#x27;2&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;xiaosb&#x27;</span>, <span class="attr">age</span>: <span class="string">&#x27;15&#x27;</span>, <span class="attr">address</span>: <span class="string">&#x27;jiaojiedi&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&quot;update userinfo set ? where id=?&quot;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, [insertUser, insertUser.<span class="property">id</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;错误信息：&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(results.<span class="property">affectedRows</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


<p><strong><font color="red">注：如果sql语句有多个占位符时，必须使用数组为每个占位符指定具体的值。如果sql语句中只有一个占位符，可以省略数组</font></strong></p>

        <h2 id="9-前后端的身份认证">
          <a href="#9-前后端的身份认证" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-前后端的身份认证" class="headerlink" title="9. 前后端的身份认证"></a>9. 前后端的身份认证</h2>
      <p>Web开发模式</p>
<p><strong>①基于服务端渲染的传统Web开发模式</strong></p>
<p>  服务器发送给客户端的HTML页面，是在服务器通过字符串的拼接，动态生成的。因此，客户端不需要使用Ajax这样的技术额外请求页面的数据</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> html = <span class="string">`&lt;h1&gt;姓名:<span class="subst">$&#123;user.name&#125;</span>&lt;/h1&gt;`</span></span><br><span class="line"></span><br><span class="line">res.<span class="title function_">send</span>(html)</span><br></pre></td></tr></table></div></figure>

<p>优点：前端耗时少；7有利于SEO</p>
<p>缺点：占用服务器资源；不利于前后端分离，开发效率低</p>
<p><strong>②基于前后端分离的新型Web开发模式</strong></p>
<p>前后端分离的开发模式，依赖于Ajax技术的广泛应用。简单来说，前后端分离的Web开发模式，就是后端只负责提供API接口，前端使用Ajax调用接口的开发模式</p>
<p>优点：开发体验好，前端专注于UI页面的开发，后端专注于api的开发，前端有更多选择性；用户体验号，轻松实现局部刷新；减轻服务器端的渲染压力</p>

        <h3 id="9-1-身份认证">
          <a href="#9-1-身份认证" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-1-身份认证" class="headerlink" title="9.1 身份认证"></a>9.1 身份认证</h3>
      <p><strong>1. 服务端渲染推荐使用Session认证机制</strong></p>
<p><strong>2.前后端分离推荐使用JWT认证机制</strong></p>

        <h3 id="9-2-Session认证机制">
          <a href="#9-2-Session认证机制" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-2-Session认证机制" class="headerlink" title="9.2 Session认证机制"></a>9.2 Session认证机制</h3>
      <p><strong>Cookie的几大特性</strong></p>
<ul>
<li><p>自动发送</p>
</li>
<li><p>域名独立</p>
</li>
<li><p>过期时限</p>
</li>
<li><p>4kb限制</p>
</li>
</ul>
<p>当express-session中间件配置成功后，即可通过req.session来访问和使用session对象，从而存储用户的关键信息</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入</span></span><br><span class="line"><span class="keyword">const</span> session = <span class="built_in">require</span>(<span class="string">&#x27;express-session&#x27;</span>)</span><br><span class="line"><span class="comment">//注册session中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(</span><br><span class="line">    <span class="title function_">session</span>(&#123;</span><br><span class="line">        <span class="attr">secret</span>: <span class="string">&#x27;itheima&#x27;</span>,</span><br><span class="line">        <span class="attr">resave</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">saveUninitialized</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/user/login&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    req.<span class="property">session</span>.<span class="property">user</span> = userInfo</span><br><span class="line">    req.<span class="property">session</span>.<span class="property">isLogin</span> = <span class="literal">true</span></span><br><span class="line">    res.<span class="title function_">send</span>(&#123; <span class="string">&#x27;status&#x27;</span>: <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;登录成功&#x27;</span> &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>清除session：<code>req.session.destroy()</code></p>

        <h3 id="9-2-JWT认证机制-JSON-WEB-TOKEN">
          <a href="#9-2-JWT认证机制-JSON-WEB-TOKEN" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-2-JWT认证机制-JSON-WEB-TOKEN" class="headerlink" title="9.2 JWT认证机制(JSON WEB TOKEN)"></a>9.2 JWT认证机制(JSON WEB TOKEN)</h3>
      <p>Session认证机制需要配合Cookie才能实现，由于Cookie默认不支持跨域访问，所以当涉及到前端跨域请求后端接口时，需要做很多额外的配置，才能实现Session跨域认证</p>
<p><strong>1. 注意：</strong></p>
<ul>
<li><p>当前端请求后端接口不存在跨域问题的时候，推荐使用Session身份认证机制</p>
</li>
<li><p>当前端需要跨域请求后端接口的时候，不推荐使用Session身份认证机制，推荐使用JWT认证机制</p>
</li>
</ul>
<p>JWT通常由三部分组成，Header(头部)，Payload(有效负荷)，Signature(签名)</p>
<p>三者之间用英文的’.’分隔</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Header</span>.<span class="property">Payload</span>.<span class="property">Signature</span></span><br></pre></td></tr></table></div></figure>

<p><strong>其中，Payload部分才是真正的用户信息，它是用户信息经过加密之后生成的字符串</strong></p>
<p><strong>Header和Signature是安全性相关的，只是为了保证Token的安全性</strong></p>
<p>客户端收到服务器返回的JWT后，通常会将它存储在localStorage或sessionStorage中，此后客户端每次与服务器通信，都要带上这个JWT的字符串，从而进行身份认证，推荐的做法是把JWT放在HTTP请求头的Authorazation字段中</p>
<p><strong>2. 在Express中使用JWT</strong></p>
<p>(1). 安装JWT相关的包</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install jsonwebtoken express-jwt</span><br></pre></td></tr></table></div></figure>

<p>其中，jsonwebtoken用于生成JWT字符串</p>
<p>express-jwt用于将JWT字符串解析还原成JSON对象</p>
<p>(2) 用户登录成功后生成JWT字符串</p>
<p>jsonwebtoken包中提供的sign()方法，接收三个参数</p>
<ul>
<li>参数一：对象&#x2F;负载，里面是用户的信息</li>
</ul>
<p><code>&#123;username：user info.username&#125;</code></p>
<ul>
<li>参数二：加密密钥(字符串)</li>
</ul>
<p><code>const secretKey = &#39;onesecret&#39;</code></p>
<ul>
<li>参数三：配置对象（指定有效期）</li>
</ul>
<p><code>expiresIn:&#39;30s&#39;</code></p>
<p>例如：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> jwt_sign = jwt.<span class="title function_">sign</span>(&#123; <span class="attr">username</span>: userObj.<span class="property">username</span>, <span class="attr">userpwd</span>: userObj.<span class="property">pwd</span> &#125;, <span class="string">&#x27;oneSecretKeyELDENRING&#x27;</span>, &#123; <span class="attr">expiresIn</span>: <span class="string">&#x27;30s&#x27;</span> &#125;)</span><br></pre></td></tr></table></div></figure>

<p>(3)服务器将token字符串发送给客户端</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="title function_">send</span>(&#123;</span><br><span class="line">	<span class="attr">status</span>:<span class="number">200</span>,</span><br><span class="line">	<span class="attr">message</span>:<span class="string">&#x27;登录成功&#x27;</span>,</span><br><span class="line">	<span class="attr">token</span>:jwt_sign</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>3. 将JWT字符串还原为JSON对象</strong></p>
<p>客户端每次在访问哪些有权限接口的时候，都需要主动通过请求头中的Authorization字段，将Tiken字符串发送到服务器进行身份认证。</p>
<p>此时，服务器可以通过Express-jwt这个中间件，自动将客户端发送过来的Token解析还原成JSON对象</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="title function_">expressJWT</span>(&#123;<span class="attr">secret</span>:secretKey&#125;).<span class="title function_">unless</span>(&#123;<span class="attr">path</span>:[<span class="regexp">/^\/api\//</span>]&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">//unless用来指定哪些接口没有访问权限，比如访问api的接口不会获取到token信息</span></span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注意：如果配置了express_jwt后，路径未通过token验证的话不会请求响应</font></strong></p>
<p>注意：只要配置成功了<code>express-jwt</code>中间件，就可以把解析出来的用户信息，挂载到req.user属性上</p>
<p>例如：</p>
<p>前端代码：</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">   $(&#x27;#btn2&#x27;).on(&#x27;click&#x27;, function(e) &#123;</span><br><span class="line">       e.preventDefault()</span><br><span class="line">       $.ajax(&#123;</span><br><span class="line">           type: &#x27;post&#x27;,</span><br><span class="line">           url: &#x27;/apis/userinfo&#x27;,</span><br><span class="line">           data: &#123;</span><br><span class="line">               a: &#x27;b&#x27;</span><br><span class="line">           &#125;,</span><br><span class="line">           headers: &#123;</span><br><span class="line">//注意在此之前要有Bearer前缀</span><br><span class="line">               Authorization: &#x27;Bearer &#x27; + auth</span><br><span class="line">           &#125;,</span><br><span class="line">           success: function(data) &#123;</span><br><span class="line">               console.log(&#x27;req.user:&#x27; + data)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></div></figure>
<p>后端代码</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="title function_">e_jwt</span>(&#123; <span class="attr">secret</span>: <span class="string">&#x27;oneSecretKeyELDENRING&#x27;</span>, <span class="attr">algorithms</span>: [<span class="string">&#x27;HS256&#x27;</span>] &#125;).<span class="title function_">unless</span>(&#123; <span class="attr">path</span>: [<span class="regexp">/^\/api\//</span>] &#125;))</span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/apis/userinfo&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;req.user:&#x27;</span>, req.<span class="property">user</span>)</span><br><span class="line">    res.<span class="title function_">send</span>(req.<span class="property">user</span>)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>4. 使用错误中间件捕获解析JWT失败后产生的错误</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err,req,res,next</span>)=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(err.<span class="property">name</span> === <span class="string">&#x27;UnauthorizedError&#x27;</span>)&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> res.<span class="title function_">send</span>(&#123;<span class="attr">status</span>:<span class="number">401</span>,<span class="attr">message</span>:<span class="string">&#x27;无效的token&#x27;</span>&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h1 id="其他-配置相关">
          <a href="#其他-配置相关" class="heading-link"><i class="fas fa-link"></i></a><a href="#其他-配置相关" class="headerlink" title="其他(配置相关)"></a><font color="green">其他(配置相关)</font></h1>
      <p><strong>设置npm全局安装路径与缓存路径:</strong></p>
<p>方法1. 指令操作</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm config set prefix <span class="string">&quot;D:\Program Files\nodejs\node_global&quot;</span></span><br><span class="line"></span><br><span class="line">npm config set cache <span class="string">&quot;D:\Program Files\nodejs\node_cache&quot;</span></span><br></pre></td></tr></table></div></figure>

<p>方法2. 修改相关文件(NodeJS\node_modules\npm\npmrc)</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">prefix=<span class="attr">D</span>:\<span class="title class_">OfficeSoftWareDownload</span>\<span class="title class_">NodeJS</span>\node_global</span><br><span class="line">cache=<span class="attr">D</span>:\<span class="title class_">OfficeSoftWareDownload</span>\<span class="title class_">NodeJS</span>\node_cache</span><br></pre></td></tr></table></div></figure></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/02/09/web-ecmascript01/">web-ecmascript01</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-02-09</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-28</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>ES6兼容性浏览器一览：</p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://kangax.github.io/compat-table/es6/">http://kangax.github.io/compat-table/es6/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h1 id="ES6">
          <a href="#ES6" class="heading-link"><i class="fas fa-link"></i></a><a href="#ES6" class="headerlink" title="ES6"></a><font color="#3c40c6">ES6</font></h1>
      
        <h2 id="let声明变量">
          <a href="#let声明变量" class="heading-link"><i class="fas fa-link"></i></a><a href="#let声明变量" class="headerlink" title="let声明变量"></a><font color="#20bf6b">let声明变量</font></h2>
      <p>特性：</p>
<ul>
<li><p>变量不能重复声明，如果重复会报错 </p>
</li>
<li><p>块级作用域,只在代码块中有效<code>&#123;let a = b&#125;</code></p>
</li>
<li><p>不存在变量提升</p>
<p>  变量提升：用var声明赋值的变量即使在之前调用此变量，也会返回结果undefined</p>
</li>
<li><p>不影响作用域链</p>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="keyword">let</span> school = <span class="string">&#x27;ggg&#x27;</span>;</span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(shcool);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="title function_">fn</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


<p><strong>实例运用：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> dvs = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;dv&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> a, b, c;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dvs.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    dvs[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        dvs[i].<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;red&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>此时点击不会生效，因为点击时循环已完成，全局变量(var)i是3</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> dvs = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;dv&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> a, b, c;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; dvs.<span class="property">length</span>; i++) &#123;</span><br><span class="line"></span><br><span class="line">    dvs[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">        dvs[i].<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;yellow&#x27;</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>此时点击生效，因为let是块级作用域，每个块内都有对应的值，不会被循环覆盖掉</p>

        <h2 id="const关键字">
          <a href="#const关键字" class="heading-link"><i class="fas fa-link"></i></a><a href="#const关键字" class="headerlink" title="const关键字"></a><font color="#20bf6b">const关键字</font></h2>
      <p>使用此关键字，值就不可以被更改</p>
<ul>
<li><p>一定要赋初始值</p>
</li>
<li><p>一般常量使用大写</p>
</li>
<li><p>常量的值不能修改</p>
</li>
<li><p>块级作用域</p>
</li>
<li><p>对于数组和对象的元素修改。不算做对常量的修改</p>
<p>  可以声明const的数组添加值，因为指向的地址没有改变。不可以对数组已有的值进行修改。对象同理</p>
</li>
</ul>

        <h2 id="解构赋值">
          <a href="#解构赋值" class="heading-link"><i class="fas fa-link"></i></a><a href="#解构赋值" class="headerlink" title="解构赋值"></a><font color="#20bf6b">解构赋值</font></h2>
      <p>ES6允许按照一定模式从数组和对象中提取值，对变量进行赋值</p>
<ol>
<li>数组的解构</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> f4 = [<span class="string">&#x27;xsy&#x27;</span>,<span class="string">&#x27;ln&#x27;</span>,<span class="string">&#x27;zs&#x27;</span>,<span class="string">&#x27;sxb&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> [x,l,z,s] = <span class="variable constant_">F4</span>;</span><br></pre></td></tr></table></div></figure>

<p>相当于声明了四个变量，每个值对应数组里的值。多出来的变量为undefined</p>
<ol start="2">
<li>对象的解构</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> zhao = &#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="string">&#x27;zbs&#x27;</span>,</span><br><span class="line">	<span class="attr">age</span>:<span class="string">&#x27;40&#x27;</span>,</span><br><span class="line">	<span class="attr">xiaopin</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;我可以演小品&#x27;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;name,age,xiaopin&#125; = zhao</span><br></pre></td></tr></table></div></figure>
<p><strong><font color="red">注意：对象的解构名称需要对应</font></strong></p>

        <h2 id="新的声明字符串的方式">
          <a href="#新的声明字符串的方式" class="heading-link"><i class="fas fa-link"></i></a><a href="#新的声明字符串的方式" class="headerlink" title="新的声明字符串的方式"></a><font color="#20bf6b">新的声明字符串的方式</font></h2>
      <ol>
<li>声明：</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">`zifuchuan`</span>;</span><br></pre></td></tr></table></div></figure>

<p>特性：</p>
<ul>
<li>内容中可以直接出现换行符</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">`&lt;ul&gt;</span></span><br><span class="line"><span class="string">			&lt;li&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">		   &lt;/ul&gt;`</span></span><br></pre></td></tr></table></div></figure>

<ul>
<li>变量拼接</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> l = <span class="string">&#x27;wx&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> str = <span class="string">`<span class="subst">$&#123;l&#125;</span>是我心中最优秀的演员`</span></span><br></pre></td></tr></table></div></figure>

        <h2 id="对象的简化写法">
          <a href="#对象的简化写法" class="heading-link"><i class="fas fa-link"></i></a><a href="#对象的简化写法" class="headerlink" title="对象的简化写法"></a><font color="#20bf6b">对象的简化写法</font></h2>
      <p> ES6允许在大括号里面，直接写入变量和函数，作为对象的属性和方法</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;sgg&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> change = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;dddd&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> school = &#123;</span><br><span class="line"></span><br><span class="line">	name,</span><br><span class="line">	change,</span><br><span class="line">	<span class="title function_">improve</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;简写方法&#x27;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="箭头函数">
          <a href="#箭头函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#箭头函数" class="headerlink" title="箭头函数"></a><font color="#20bf6b">箭头函数</font></h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="attr">names</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">    <span class="attr">sayHello</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="variable language_">this</span>==<span class="variable language_">window</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>与之前的声明函数的区别：</p>
<ol>
<li><p>this是静态的，this始终指向函数声明时所在作用域下的this的值(用call或者apply都不会改变)</p>
<p> <strong>箭头函数体内的this对象，就是定义该函数时所在的作用域指向的对象，而不是使用时所在的作用域指向的对象。</strong></p>
<blockquote>
<p>作用域是指函数内部，这里的箭头函数，也就是sayHello，所在的作用域其实是最外层的js环境，因为没有其他函数包裹(如果有其他函数包裹也需要是普通非箭头函数，这样该普通函数的this是调用时的对象，否则就继续往上层找)；然后最外层的js环境指向的对象是winodw对象，所以这里的this指向的是window对象。</p>
</blockquote>
<p> 如：</p>
 <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">getNam</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">name</span> = <span class="string">&#x27;aaa&#x27;</span></span><br></pre></td></tr></table></div></figure>

<p> 那么此时this就是window，不会改变</p>
</li>
<li><p>不能作为构造函数</p>
</li>
<li><p>不能使用arguments变量</p>
</li>
<li><p>箭头函数䣌简写</p>
<p> (1) 省略小括号（当形参有且只有一个）</p>
 <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">add</span> = n =&gt; &#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p> (2)省略花括号，当代码体只有一条语句的时候，此时return必须省略。而且语句的执行结果就是函数的返回值</p>
 <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">pow</span> = (<span class="params">n</span>) =&gt; n*n</span><br></pre></td></tr></table></div></figure>
<p> (3)两个都省略</p>
 <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">pow</span> = n =&gt; n * n</span><br></pre></td></tr></table></div></figure></li>
</ol>

        <h2 id="函数参数的默认值">
          <a href="#函数参数的默认值" class="heading-link"><i class="fas fa-link"></i></a><a href="#函数参数的默认值" class="headerlink" title="函数参数的默认值"></a><font color="#20bf6b">函数参数的默认值</font></h2>
      <ol>
<li>形参初始值</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b, c = <span class="number">10</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>具有默认值的参数，一般位置要靠后（潜规则）</p>
<ol start="2">
<li>与解构赋值结合</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">connect</span>(<span class="params">&#123; host = <span class="string">&#x27;127.0.0.1&#x27;</span>, username, password, port &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(host)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(username)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(password)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(port)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">connect</span>(&#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;password&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="string">&#x27;3306&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h2 id="REST">
          <a href="#REST" class="heading-link"><i class="fas fa-link"></i></a><a href="#REST" class="headerlink" title="REST"></a><font color="#20bf6b">REST</font></h2>
      <p>ES6引入rest参数，用于获取函数的实参。用来代替arguments</p>
<p>获取参数的方式</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//rest参数必须加此变量</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">data</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">	<span class="comment">//是个数组</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(args)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">data</span>(<span class="string">&#x27;aj&#x27;</span>, <span class="string">&#x27;bz&#x27;</span>, <span class="string">&#x27;sh&#x27;</span>)</span><br></pre></td></tr></table></div></figure>

<p><strong>rest参数必须要放到参数的最后</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a,b,...args</span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>放前面会报错</p>

        <h2 id="扩展运算符">
          <a href="#扩展运算符" class="heading-link"><i class="fas fa-link"></i></a><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a><font color="#20bf6b">扩展运算符</font></h2>
      <p>[…]扩展运算符能将数组转换为逗号分隔的参数序列</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">&#x27;zs&#x27;</span>, <span class="string">&#x27;ls&#x27;</span>, <span class="string">&#x27;ww&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">method</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">method</span>(arr)</span><br><span class="line">    <span class="comment">//形参是个一个参数(数组)</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">method</span>(...arr)</span><br><span class="line">    <span class="comment">//形参是三个参数</span></span><br></pre></td></tr></table></div></figure>


        <h2 id="Symbol">
          <a href="#Symbol" class="heading-link"><i class="fas fa-link"></i></a><a href="#Symbol" class="headerlink" title="Symbol"></a><font color="#20bf6b">Symbol</font></h2>
      <p>ES6引入了一种新的原始数据类型Symbol。表示独一无二的值。</p>
<ol>
<li><p>Symbol的值是唯一的，用来解决命名冲突的问题</p>
</li>
<li><p>Symbol值不能与其他数据进行运算</p>
</li>
<li><p>Symbol定义的对象属性不能使用for…in循环遍历，但是可以使用Reflect.ownKeys来获取对象的所有键名</p>
</li>
</ol>
<p>JS的数据类型</p>
<p>USONB：</p>
<pre><code>Undefined

String Symbol

Object

Null

Number

Blloean
</code></pre>
<p><strong>使用场景：</strong></p>
<ul>
<li>Symbol作为属性名</li>
</ul>
<p>第一种写法：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mySymbol = <span class="title class_">Symbol</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line">a[mySymbol] = <span class="string">&#x27;Hello!&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>因为Symbol的唯一性，所以不会和game中原有的属性冲突。安全的添加了属性和方法</p>
<ul>
<li>第二种写法</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> mySymbol = <span class="title class_">Symbol</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  [mySymbol]: <span class="string">&#x27;Hello!&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>由于Symbol()是一个表达式(动态的)，此种场景需要加个[]</p>
<p><strong>注意，Symbol值作为对象属性名时，不能用点运算符。因为点后面的不可以是声明的变量，而是一个字符串：[‘Symbol’],所以也就不是一个Symbol值</strong></p>

        <h2 id="迭代器">
          <a href="#迭代器" class="heading-link"><i class="fas fa-link"></i></a><a href="#迭代器" class="headerlink" title="迭代器"></a><font color="#20bf6b">迭代器</font></h2>
      <p>任何数据结构只要部署了Iterator接口，就可以完成遍历操作。</p>
<p>原生具备iterator接口的数据：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Arguments</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Set</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Map</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">String</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">TypedArray</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">NodeList</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>工作原理:</strong></p>
<p>a：创建一个指针对象，指向当前数据结果的起始位置</p>
<p>b：第一次调用对象的next方法，指针自动指向数据解构的第一个成员</p>
<p>c：接下来不断调用next方法，指针一直向后移动，直到指向最后一个成员</p>
<p>d：每调用next方法返回一个包含value和done属性的对象</p>
<p><strong>自定义遍历对象</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> oclass = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;终极一班&quot;</span>,</span><br><span class="line">    <span class="attr">stus</span>: [<span class="string">&#x27;xiaoming&#x27;</span>, <span class="string">&#x27;xiaoning&#x27;</span>, <span class="string">&#x27;xiaotian&#x27;</span>, <span class="string">&#x27;knight&#x27;</span>],</span><br><span class="line">	<span class="comment">//方法简写</span></span><br><span class="line">    [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123;</span><br><span class="line">        <span class="comment">//声明一个索引变量</span></span><br><span class="line">        <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * a:</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@returns</span> 创建并返回一个指针对象 </span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="attr">next</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &lt; <span class="variable language_">this</span>.<span class="property">stus</span>.<span class="property">length</span>) &#123;</span><br><span class="line">                    <span class="keyword">const</span> result = &#123;</span><br><span class="line">                        <span class="comment">/**</span></span><br><span class="line"><span class="comment">                         * b&amp;c:</span></span><br><span class="line"><span class="comment">                         * 第一次调用next方法，指针自动指向第一个成员</span></span><br><span class="line"><span class="comment">                         * 不断调用next方法，指针一直向后移动</span></span><br><span class="line"><span class="comment">                         * <span class="doctag">@value</span> :返回的值</span></span><br><span class="line"><span class="comment">                         * <span class="doctag">@done</span> ：false代表继续循环</span></span><br><span class="line"><span class="comment">                         * </span></span><br><span class="line"><span class="comment">                         */</span></span><br><span class="line">                        <span class="attr">value</span>: <span class="variable language_">this</span>.<span class="property">stus</span>[index],</span><br><span class="line">                        <span class="attr">done</span>: <span class="literal">false</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    index++;</span><br><span class="line">                    <span class="keyword">return</span> result;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> &#123;</span><br><span class="line">                        <span class="comment">/**</span></span><br><span class="line"><span class="comment">                         * 下标到达最后一个时true停止循环</span></span><br><span class="line"><span class="comment">                         */</span></span><br><span class="line">                        <span class="attr">value</span>: <span class="literal">undefined</span>,</span><br><span class="line">                        <span class="attr">done</span>: <span class="literal">true</span></span><br><span class="line">                    &#125;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> oclass) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="生成器">
          <a href="#生成器" class="heading-link"><i class="fas fa-link"></i></a><a href="#生成器" class="headerlink" title="生成器"></a><font color="#20bf6b">生成器</font></h2>
      <p>生成器函数是ES6提供的一种异步变成解决方案，语法行为与传统函数完全不同</p>
<p>生成器就是一种函数</p>
<p><strong>声明:</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> * <span class="title function_">gen</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>不能直接调用，需要用到next方法</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">gen</span>().<span class="title function_">next</span>()</span><br></pre></td></tr></table></div></figure>

<p><code>yield</code>：函数代码的分隔符</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;111111&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;第一段代码&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;222222&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;第二段代码&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;333333&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;第三段代码&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;444444&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;第四段代码&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;555555&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> objGen = <span class="title function_">gen</span>();</span><br><span class="line">objGen.<span class="title function_">next</span>()</span><br><span class="line">objGen.<span class="title function_">next</span>()</span><br><span class="line">objGen.<span class="title function_">next</span>()</span><br><span class="line">objGen.<span class="title function_">next</span>()</span><br><span class="line">objGen.<span class="title function_">next</span>()</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>第一个next执行第一条输出语句，第二个next执行第二条输出语句，以此类推</p>
</blockquote>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">info</span>(objGen.<span class="title function_">next</span>())</span><br></pre></td></tr></table></div></figure>

<p><strong>如果直接打印返回的值，打印的是包含value和done属性的对象，value的值是yield后面的值</strong></p>
<p><code>objGen.next()</code>相当于调用函数，<code>console.info(objGen.next())</code>相当于打印函数返回的值~</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//for...of遍历数据</span></span><br><span class="line"><span class="keyword">let</span> objGen = <span class="title function_">gen</span>()</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> objGen) &#123;</span><br><span class="line">    <span class="comment">//在每次执行函数的时候，此处打印了返回的对象中value的值</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>生成器函数可以直接传递参数，且next方法也可以传入实参。</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params"></span>) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;第一段代码&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> one = <span class="keyword">yield</span> <span class="string">&#x27;第二段代码&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(one)</span><br><span class="line">    <span class="keyword">let</span> two = <span class="keyword">yield</span> <span class="string">&#x27;第三段代码&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(two)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;第四段代码&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> objGen = <span class="title function_">gen</span>();</span><br><span class="line"><span class="comment">//第二个next的参数在函数中作为第一个yield语句的整体返回结果，one的值为AAA</span></span><br><span class="line">objGen.<span class="title function_">next</span>(‘<span class="variable constant_">AAA</span>’)</span><br><span class="line"><span class="comment">//第三个next的参数在函数中作为第二个yield语句的整体返回结果，one的值为AAA</span></span><br><span class="line">objGen.<span class="title function_">next</span>(‘<span class="variable constant_">BBB</span>’)</span><br><span class="line"><span class="comment">//以此类推</span></span><br></pre></td></tr></table></div></figure>

<p><strong>第二个next的参数在函数中作为第一个yield语句的整体返回结果</strong></p>
<p><strong>第三个next的参数在函数中作为第二个yield语句的整体返回结果，one的值为AAA</strong></p>
<p><font color="blue">因为每次yield后的就没有执行了</font></p>
<p><strong><font color="green">实例1：1S后执行one，再2s后执行two，再3s后执行three</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">one</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;1111&#x27;</span>);</span><br><span class="line">        iterator.<span class="title function_">next</span>();</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">two</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;22222&#x27;</span>)</span><br><span class="line">        iterator.<span class="title function_">next</span>();</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">three</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3333&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">one</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">two</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">three</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> iterator = <span class="title function_">gen</span>();</span><br><span class="line">iterator.<span class="title function_">next</span>();</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="green">实例2：模拟1S后执行获取用户数据，再1s后获取订单数据，再1s后获取商品数据</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="string">&#x27;用户数据&#x27;</span>;</span><br><span class="line">        iterator.<span class="title function_">next</span>(data)</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getOrders</span>(<span class="params">da</span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="string">&#x27;订单数据&#x27;</span>;</span><br><span class="line">        iterator.<span class="title function_">next</span>(data);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getGoods</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="string">&#x27;商品数据&#x27;</span>;</span><br><span class="line">        iterator.<span class="title function_">next</span>(data)</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> userData = <span class="keyword">yield</span> <span class="title function_">getUser</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(userData)</span><br><span class="line">    <span class="keyword">let</span> orderData = <span class="keyword">yield</span> <span class="title function_">getOrders</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(orderData)</span><br><span class="line">    <span class="keyword">let</span> goodData = <span class="keyword">yield</span> <span class="title function_">getGoods</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(goodData)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> iterator = <span class="title function_">gen</span>();</span><br><span class="line">iterator.<span class="title function_">next</span>();</span><br></pre></td></tr></table></div></figure>


        <h2 id="promise">
          <a href="#promise" class="heading-link"><i class="fas fa-link"></i></a><a href="#promise" class="headerlink" title="promise"></a><font color="#20bf6b">promise</font></h2>
      <p><strong>1. 基本使用</strong></p>
<p>实例化</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line">	<span class="comment">//内部代码同步执行</span></span><br><span class="line">	<span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="comment">//setTimeou异步任务</span></span><br><span class="line">		<span class="keyword">let</span> data = <span class="string">&#x27;用户数据&#x27;</span>;</span><br><span class="line">		<span class="comment">//数据获取成功，可执行方法resolve改变对象状态为成功</span></span><br><span class="line">		<span class="title function_">resolve</span>(data);</span><br><span class="line">		<span class="comment">//数据获取失败，可执行方法reject改变对象状态为失败</span></span><br><span class="line">		<span class="keyword">let</span> err = <span class="string">&#x27;数据获取失败&#x27;</span>;</span><br><span class="line">		<span class="title function_">reject</span>(err);</span><br><span class="line">	&#125;,<span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//调用promise对象的then方法</span></span><br><span class="line">p.<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">value</span>)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//成功状态时执行的方法</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line"></span><br><span class="line">&#125;,<span class="keyword">function</span>(<span class="params">reason</span>)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//失败状态时执行的方法</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(reason);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//catch方法:指定失败的回调</span></span><br><span class="line">p.<span class="title function_">catch</span>(<span class="function"><span class="params">reason</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(reason)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>注：在executor函数中调用resolve函数后,会触发promise.then设置的回调函数,而调用reject函数后,会触发promise.catch设置的回调函数.</p>
<p>promise对象状态：初始化、成功、失败</p>
<p><strong>2.Promise封装读取文件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 引入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.调用方法读取文件</span></span><br><span class="line"><span class="comment">// fs.readFile(&#x27;../resources/web-ecmascript01.md&#x27;, (err, data) =&gt; &#123;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//     //如果失败，抛出错误</span></span><br><span class="line"><span class="comment">//     if (err) throw err;</span></span><br><span class="line"><span class="comment">//     //如果成功,输出内容</span></span><br><span class="line"><span class="comment">//     console.log(data.toString())</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.使用Promise封装</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line"></span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;../resources/web-ecmascript01.md&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//判断是否读取失败</span></span><br><span class="line">        <span class="keyword">if</span> (err) <span class="title function_">reject</span>(err);</span><br><span class="line">        <span class="comment">//如果成功</span></span><br><span class="line">        <span class="title function_">resolve</span>(data)</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value.<span class="title function_">toString</span>())</span><br><span class="line">&#125;, <span class="keyword">function</span>(<span class="params">reason</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取失败！！&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>3.Promise封装ajax</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">    xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;https://api.apiopen.top/getJoke&#x27;</span>);</span><br><span class="line">    xhr.<span class="title function_">send</span>();</span><br><span class="line">    xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (xhr.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; xhr.<span class="property">status</span> &lt; <span class="number">300</span>) &#123;</span><br><span class="line">                <span class="title function_">resolve</span>(xhr.<span class="property">response</span>)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">reject</span>(xhr.<span class="property">status</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">p.<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span><br><span class="line">&#125;, <span class="keyword">function</span>(<span class="params">reason</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reason)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>4.then的返回结果</strong></p>
<p>then的返回结果也是一个Promise类型，且返回结果由回调函数(即该方法的参数)的执行结果来决定。</p>
<p>如果<strong>回调函数</strong>中返回的结果是一个非Promise类型的数据，且是执行的第一个回调函数，则then的返回的对象状态是的成功状态，返回的对象的值是回调中返回的值</p>
<p>如果<strong>回调函数</strong>中返回的结果是一个Promise类型的数据，那么返回的这个Promise对象的状态就是then的返回的对象的状态(成功or失败)，then返回的对象的值是Promise(成功or失败)的值-value</p>
<p>如果<strong>回调函数</strong>中是抛出了一个错误<code>throw &#39;出错了&#39;</code>。那么then的返回的对象的状态是失败的状态，返回的对象的值是抛出的错误的值</p>
<blockquote>
<p>因为then返回Promise对象，所以可以链式调用</p>
</blockquote>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">	</span><br><span class="line">	&#125;,<span class="function"><span class="params">reason</span>=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;,<span class="function"><span class="params">reason</span>=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>5.异步任务串联(多个文件内容读取)</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; response &#125; = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line"></span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;../resources/txt1.md&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(data)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fs.<span class="title function_">readFile</span>(<span class="string">&#x27;../resources/txt2.md&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>([value, data])</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;, <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reason)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fs.<span class="title function_">readFile</span>(<span class="string">&#x27;../resources/txt3.md&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">            value.<span class="title function_">push</span>(data)</span><br><span class="line">            <span class="title function_">resolve</span>(value)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;, <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reason)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value.<span class="title function_">join</span>(<span class="string">&#x27;\r\n&#x27;</span>))</span><br><span class="line">&#125;, <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


<p><strong>6. Promise中的方法</strong></p>
<ol>
<li>Promise.resolve方法:返回一个成功&#x2F;失败的promise对象</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">521</span>)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="title function_">resolve</span>(<span class="string">&quot;ok&quot;</span>)</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></div></figure>

<ul>
<li><p>如果传入的参数为非Promise类型的对象，则返回的结果为成功promise对象</p>
</li>
<li><p>如果传入的参数为Promise对象，则参数的结果决定了resolve的结果</p>
</li>
</ul>
<p>value:成功的数据或promise对象</p>
<ol start="2">
<li><p>Promise.reject方法：返回一个失败的promise对象</p>
</li>
<li><p>Promise.all方法：(promises)&#x3D;&gt;{}</p>
</li>
</ol>
<ul>
<li>promises:包含n个promise的数组</li>
</ul>
<p>说明：返回一个新的promise，只有所有的promise都成功才成功，只要有一个失败了就直接失败。如果成功，成功的结果是那些promise成功的结果的数组。如果失败，结果值按照最先传入的失败的promise的值</p>
<ol start="4">
<li>Promise.race方法：(promises)&#x3D;&gt;{}</li>
</ol>
<ul>
<li>promises:包含n个promise的数组</li>
</ul>
<p>说明：返回一个新的promise，第一个完成的promise的结果状态就是最终的结果状态</p>
<p><strong>7.改变状态</strong></p>
<ul>
<li>成功状态</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="title function_">resolve</span>(<span class="string">&#x27;success&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<ul>
<li>失败状态<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="title function_">reject</span>(<span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">throw</span> <span class="string">&quot;error&quot;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure></li>
</ul>
<p>如果是初始pending状态，那么then方法的回调函数不会被调用</p>
<p><strong>其他</strong></p>
<ul>
<li>then方法是异步的。如代码：</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="string">&#x27;111&#x27;</span>)</span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="string">&#x27;222&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;aa:&#x27;</span> + value)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>打印undefined</p>
</blockquote>
<ul>
<li>Promise可以执行多个回调：也就是如果一个promise成功了，如果有多个then，那么这些then的回调函数都会执行</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">let</span> p4 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&quot;success&quot;</span>)</span><br><span class="line">p4.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;1&quot;</span>,value)</span><br><span class="line">&#125;)</span><br><span class="line">p4.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;2&quot;</span>,value)</span><br><span class="line">&#125;)</span><br><span class="line">p4.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;3&quot;</span>,value)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<ul>
<li>改变promise状态和指定回调函数谁先谁后</li>
</ul>
<p>1） 都有可能，正常情况下是先指定回调再改变状态，但也可以先改状态再指定回调。以resolve为例</p>
<pre><code>`Promise回调函数中是同步任务(如直接调用resolve)，那么先改变promise对象的状态，然后再去then中指定回调`

`Promise回调函数中是异步任务(需要等待一段时间)，那么then方法(注意是then方法非then方法中的回调)先执行并指定回调，后改变状态`
</code></pre>
<ol start="2">
<li><p>什么时候得到数据(什么时候执行then的回调)：</p>
<ul>
<li><p>如果先指定的回调，那当状态发生变化时，回调函数就会调用，得到数据</p>
</li>
<li><p>如果先改变的状态，那当指定回调时，回调函数就会调用，得到数据</p>
</li>
</ul>
</li>
</ol>
<ul>
<li><p>then方法返回结果由什么来决定</p>
<p>  1）由then()指定的回调函数执行的结果决定</p>
<p>  2）a：如果抛出异常，新promise变为rejected，reason为抛出的异常；b：如果返回的是非promise的任意值，新promise变为resolved，value为返回的值；c:如果返回的是另一个新的proimise，此promise的结果就会成为新promise的结果</p>
</li>
</ul>
<p><strong>自定義promise</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Promise</span>(<span class="params">executor</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">PromiseState</span> = <span class="string">&#x27;pending&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">PromiseResult</span> = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//声明一个属性</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">callbacks</span> = []</span><br><span class="line"></span><br><span class="line">    <span class="comment">//保存实例对象的this的值，避免箭头函数时this指向window</span></span><br><span class="line">    <span class="keyword">const</span> self = <span class="variable language_">this</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//resolve函数</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">resolve</span>(<span class="params">data</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (self.<span class="property">PromiseState</span> !== <span class="string">&quot;pending&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line">        self.<span class="property">PromiseState</span> = <span class="string">&#x27;fulfilled&#x27;</span></span><br><span class="line">        self.<span class="property">PromiseResult</span> = data</span><br><span class="line"></span><br><span class="line">        self.<span class="property">callbacks</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            item.<span class="title function_">onResolved</span>(data)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//reject函数</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">reject</span>(<span class="params">data</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (self.<span class="property">PromiseState</span> !== <span class="string">&quot;pending&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line">        self.<span class="property">PromiseState</span> = <span class="string">&#x27;rejected&#x27;</span></span><br><span class="line">        self.<span class="property">PromiseResult</span> = data</span><br><span class="line">        self.<span class="property">callbacks</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            item.<span class="title function_">onRejected</span>(data)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//同步调用执行器函数</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="title function_">executor</span>(resolve, reject)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="title function_">reject</span>(error)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Promise</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">then</span> = <span class="keyword">function</span>(<span class="params">onResolved, onRejected</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> self = <span class="variable language_">this</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//判斷回調函數參數，如果没传onRejected(异常穿透)</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> onRejected !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">        onRejected = <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> reason</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//如果没传onResolved（值传递）</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> onResolved !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">        onResolved = <span class="function"><span class="params">value</span> =&gt;</span> value</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">PromiseState</span> === <span class="string">&quot;fulfilled&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> result = <span class="title function_">onResolved</span>(<span class="variable language_">this</span>.<span class="property">PromiseResult</span>)</span><br><span class="line">            <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(v)</span><br><span class="line">                &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(r)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//结果的对象状态为成功</span></span><br><span class="line">                <span class="title function_">resolve</span>(result)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">PromiseState</span> === <span class="string">&quot;rejected&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> result = <span class="title function_">onRejected</span>(<span class="variable language_">this</span>.<span class="property">PromiseResult</span>)</span><br><span class="line">            <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(v)</span><br><span class="line">                &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(r)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">resolve</span>(result)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//判断pending状态(先执行的then方法，未改变状态)</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">PromiseState</span> === <span class="string">&quot;pending&quot;</span>) &#123;</span><br><span class="line">            <span class="comment">//保存回调函数</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">callbacks</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">                <span class="attr">onResolved</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">let</span> result = <span class="title function_">onResolved</span>(self.<span class="property">PromiseResult</span>)</span><br><span class="line">                        <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                            result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                                <span class="title function_">resolve</span>(v)</span><br><span class="line">                            &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                                <span class="title function_">reject</span>(r)</span><br><span class="line">                            &#125;)</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="title function_">resolve</span>(result)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                        <span class="title function_">reject</span>(error)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">onRejected</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">let</span> result = <span class="title function_">onRejected</span>(self.<span class="property">PromiseResult</span>)</span><br><span class="line">                        <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                            result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                                <span class="title function_">resolve</span>(v)</span><br><span class="line">                            &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                                <span class="title function_">reject</span>(r)</span><br><span class="line">                            &#125;)</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="title function_">resolve</span>(result)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                        <span class="title function_">reject</span>(error)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加catch方法</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">catch</span> = <span class="keyword">function</span>(<span class="params">onRejected</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">then</span>(<span class="literal">undefined</span>, onRejected)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加resolve方法</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">resolve</span> = <span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (value <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">            value.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123; <span class="title function_">resolve</span>(v) &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">reject</span>(r)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加reject方法</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">reject</span> = <span class="keyword">function</span>(<span class="params">reason</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">reject</span>(reason)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加all方法</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">all</span> = <span class="keyword">function</span>(<span class="params">promises</span>) &#123;</span><br><span class="line">    <span class="comment">//返回结果为promise对象</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">let</span> arr = []</span><br><span class="line">            <span class="comment">//变量</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; promises.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//then的回调：状态改变后才执行回调</span></span><br><span class="line">            <span class="comment">//另外let定义的i是局部变量，不会被覆盖</span></span><br><span class="line">            promises[i].<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">//得知对象状态是成功的</span></span><br><span class="line">                <span class="comment">//每个promise对象都需要成功</span></span><br><span class="line">                count++</span><br><span class="line">                <span class="comment">/**</span></span><br><span class="line"><span class="comment">                 * 此处不用arr.push；原因是如果数组中第二个promise先改变状态，那么</span></span><br><span class="line"><span class="comment">                 * 使用push的话就会先push第二个promise，存储顺序会和传入的数组不一致</span></span><br><span class="line"><span class="comment">                 * 使用arr[i]的方式，那么即使是第二个promise先改变状态，当前i也是2，不会</span></span><br><span class="line"><span class="comment">                 * 有顺序不一致的问题</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">                arr[i] = v</span><br><span class="line">                <span class="keyword">if</span> (count === promises.<span class="property">length</span>) &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(arr)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">//得知对象状态是失败的</span></span><br><span class="line">                <span class="title function_">reject</span>(r)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加race方法</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">race</span> = <span class="keyword">function</span>(<span class="params">promises</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; promises.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            promises[i].<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">resolve</span>(v)</span><br><span class="line">            &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">reject</span>(r)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>class版本Promise</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Promise</span> &#123;</span><br><span class="line">    <span class="title class_">PromiseState</span> = <span class="string">&quot;pending&quot;</span></span><br><span class="line">    <span class="title class_">PromiseResult</span> = <span class="literal">null</span></span><br><span class="line">    callbacks = []</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">executor</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> self = <span class="variable language_">this</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">resolve</span>(<span class="params">value</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (self.<span class="property">PromiseState</span> !== <span class="string">&quot;pending&quot;</span>) <span class="keyword">return</span></span><br><span class="line">            self.<span class="property">PromiseState</span> = <span class="string">&quot;fulfilled&quot;</span></span><br><span class="line">            self.<span class="property">PromiseResult</span> = value</span><br><span class="line">            self.<span class="property">callbacks</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                item.<span class="title function_">onResolved</span>(self.<span class="property">PromiseResult</span>)</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">reject</span>(<span class="params">value</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (self.<span class="property">PromiseState</span> !== <span class="string">&quot;pending&quot;</span>) <span class="keyword">return</span></span><br><span class="line">            self.<span class="property">PromiseState</span> = <span class="string">&quot;rejected&quot;</span></span><br><span class="line">            self.<span class="property">PromiseResult</span> = value</span><br><span class="line">            self.<span class="property">callbacks</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                item.<span class="title function_">onRejected</span>(self.<span class="property">PromiseResult</span>)</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="title function_">executor</span>(resolve, reject)</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="title function_">reject</span>(error)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//then方法</span></span><br><span class="line">    <span class="title function_">then</span>(<span class="params">onResolved, onRejected</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> self = <span class="variable language_">this</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> onRejected !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">            onRejected = <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">//注：此处在调用onRejected时是在new Primise实例时的回调函数中执行的</span></span><br><span class="line">                <span class="comment">//所以不需要额外trycatch</span></span><br><span class="line">                <span class="keyword">throw</span> r</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> onResolved !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">            onResolved = <span class="function"><span class="params">v</span> =&gt;</span> v</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">//如果是成功状态，执行第一个</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">PromiseState</span> === <span class="string">&quot;fulfilled&quot;</span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> result = <span class="title function_">onResolved</span>(<span class="variable language_">this</span>.<span class="property">PromiseResult</span>)</span><br><span class="line">                <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                    result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">resolve</span>(v)</span><br><span class="line">                    &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">reject</span>(r)</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(result)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//如果是失败，执行第二个回调</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">PromiseState</span> === <span class="string">&quot;rejected&quot;</span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> result = <span class="title function_">onRejected</span>(<span class="variable language_">this</span>.<span class="property">PromiseResult</span>)</span><br><span class="line">                <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                    result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">resolve</span>(v)</span><br><span class="line">                    &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">reject</span>(r)</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(result)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//先指定回调，再改变状态</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">PromiseState</span> === <span class="string">&quot;pending&quot;</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">callbacks</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">                    <span class="attr">onResolved</span>: <span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            <span class="keyword">let</span> result = <span class="title function_">onResolved</span>(data)</span><br><span class="line">                            <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                                result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                                    <span class="title function_">resolve</span>(v)</span><br><span class="line">                                &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                                    <span class="title function_">reject</span>(r)</span><br><span class="line">                                &#125;)</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                <span class="title function_">resolve</span>(result)</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                            <span class="title function_">reject</span>(error)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">onRejected</span>: <span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            <span class="keyword">let</span> result = <span class="title function_">onRejected</span>(data)</span><br><span class="line">                            <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                                result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                                    <span class="title function_">resolve</span>(v)</span><br><span class="line">                                &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                                    <span class="title function_">reject</span>(r)</span><br><span class="line">                                &#125;)</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                <span class="title function_">resolve</span>(result)</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                            <span class="title function_">reject</span>(error)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//封装catch方法</span></span><br><span class="line">    <span class="keyword">catch</span> (onRejected) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">then</span>(<span class="literal">undefined</span>, onRejected)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//封装resolve方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">resolve</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (value <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">                value.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123; <span class="title function_">resolve</span>(v) &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(r)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">resolve</span>(value)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//封装reject方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">reject</span>(<span class="params">reason</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">reject</span>(reason)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//封装all方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">all</span>(<span class="params">promises</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line">            <span class="keyword">let</span> arr = []</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; promises.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                promises[i].<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                    count++</span><br><span class="line">                    arr[i] = v</span><br><span class="line">                    <span class="keyword">if</span> (count === promises.<span class="property">length</span>) &#123;</span><br><span class="line">                        <span class="title function_">resolve</span>(arr)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(r)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//封装race方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">race</span>(<span class="params">promises</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; promises.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                promises[i].<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(v)</span><br><span class="line">                &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(r)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="集合">
          <a href="#集合" class="heading-link"><i class="fas fa-link"></i></a><a href="#集合" class="headerlink" title="集合"></a><font color="#20bf6b">集合</font></h2>
      <p>声明一个集合</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> <span class="title class_">Set</span>()</span><br></pre></td></tr></table></div></figure>

<p><strong>1. 参数：可传入一个可迭代数据，一般是数组</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;a&#x27;</span>])</span><br></pre></td></tr></table></div></figure>

<p><strong>会自动去重</strong></p>
<p><strong>2. 添加新的元素：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.<span class="title function_">add</span>(<span class="string">&#x27;d&#x27;</span>)</span><br></pre></td></tr></table></div></figure>

<p><strong>3. 删除元素</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.<span class="title function_">delete</span>(<span class="string">&#x27;a&#x27;</span>)</span><br></pre></td></tr></table></div></figure>

<p><strong>4. 检测：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s.<span class="title function_">has</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//存在返回true，，不存在返回false</span></span><br></pre></td></tr></table></div></figure>

<p><strong>5. 清空：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.<span class="title function_">clear</span>()</span><br></pre></td></tr></table></div></figure>

<p><strong>6. 循环</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> s)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>7. 利用Set为数组去重</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;g&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> filterRes = [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr)];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(filterRes)</span><br></pre></td></tr></table></div></figure>

<p><strong>8. 交集</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;g&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;f&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr)].<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Set</span>(arr2).<span class="title function_">has</span>(item)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>9. 并集</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;g&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;f&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = [...<span class="keyword">new</span> <span class="title class_">Set</span>([...arr, ...arr2])]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br></pre></td></tr></table></div></figure>

<p><strong>10. 差集(1有2无  2有1无)</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1有2无</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;g&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;f&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> res = [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr)].<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> (!<span class="keyword">new</span> <span class="title class_">Set</span>(arr2).<span class="title function_">has</span>(item)))</span><br></pre></td></tr></table></div></figure>


        <h2 id="Map">
          <a href="#Map" class="heading-link"><i class="fas fa-link"></i></a><a href="#Map" class="headerlink" title="Map "></a><font color="#20bf6b">Map </font></h2>
      <p><strong>声明Map</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> m = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"><span class="comment">//添加元素 键-值</span></span><br><span class="line">m.<span class="title function_">set</span>(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;zs&#x27;</span>)；</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h2 id="CLASS">
          <a href="#CLASS" class="heading-link"><i class="fas fa-link"></i></a><a href="#CLASS" class="headerlink" title="CLASS"></a><font color="#20bf6b">CLASS</font></h2>
      <p>声明类</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span> &#123;</span><br><span class="line">    <span class="comment">//构造方法，名字是固定的，且在new时会自动执行</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">brand, price</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">brand</span> = brand;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">price</span> = price;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;构造方法执行&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//方法必须使用该语法，不能使用ES5的对象完整形式</span></span><br><span class="line">    <span class="title function_">meth</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我用的是&#x27;</span> + <span class="variable language_">this</span>.<span class="property">brand</span> + <span class="string">&#x27;的手机&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> huawei = <span class="keyword">new</span> <span class="title class_">Phone</span>(<span class="string">&#x27;HUAWEI&#x27;</span>, <span class="number">2222</span>)</span><br><span class="line">huawei.<span class="title function_">meth</span>()</span><br></pre></td></tr></table></div></figure>



        <h3 id="1-静态方法">
          <a href="#1-静态方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-静态方法" class="headerlink" title="1. 静态方法"></a>1. 静态方法</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> name = <span class="string">&#x27;手机&#x27;</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">change</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;换手机&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    price = <span class="number">19998</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> huawei = <span class="keyword">new</span> <span class="title class_">Phone</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(huawei.<span class="property">price</span>)</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>静态方法是属于类的方法，相当于ES5中为函数对象添加的方法，其实例化的对象是不可以访问到的。class中的非静态name是用实例来访问的</p>
</blockquote>

        <h3 id="2-类的继承">
          <a href="#2-类的继承" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-类的继承" class="headerlink" title="2. 类的继承"></a>2. 类的继承</h3>
      <p><strong>ES5:</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Phone</span>(<span class="params">brand, price</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">brand</span> = brand;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">price</span> = price;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Phone</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">meth1</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我可以打电话&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">smartPhone</span>(<span class="params">brand, price, size, color, version</span>) &#123;</span><br><span class="line">    <span class="comment">//调用Phone方法，改变this指向</span></span><br><span class="line">    <span class="title class_">Phone</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, brand, price);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">size</span> = size;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">color</span> = color;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">version</span> = version;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">smartPhone.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Phone</span>();</span><br><span class="line">smartPhone.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = smartPhone;</span><br><span class="line">smartPhone.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">meth2</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我是黑色的手机&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> op = <span class="keyword">new</span> <span class="title function_">smartPhone</span>(<span class="string">&#x27;OPPO&#x27;</span>, <span class="string">&#x27;2699&#x27;</span>, <span class="string">&#x27;16*14&#x27;</span>, <span class="string">&#x27;黑色&#x27;</span>, <span class="string">&#x27;ColorOS12&#x27;</span>);</span><br><span class="line"><span class="comment">//子类的方法</span></span><br><span class="line">op.<span class="title function_">meth2</span>()</span><br><span class="line"><span class="comment">//父类的方法</span></span><br><span class="line">op.<span class="property">__proto__</span>.<span class="title function_">meth1</span>()</span><br></pre></td></tr></table></div></figure>

<p><font color="#5f27cd">注:此处调用父类的方法可以直接写<code>op.meth1();</code>，因为方法和属性都是逐层往下(prototype里)去找的。</font></p>
<p><strong>ES6:</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">brand, price</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">brand</span> = brand;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">price</span> = price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">meth</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;打电话&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//子类继承</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">smartPhone</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Phone</span> &#123;</span><br><span class="line">    <span class="comment">//继承父类的构造方法</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">brand, price, colorm, size</span>) &#123;</span><br><span class="line">        <span class="comment">//super就相当于是父类的constructor</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 等于Phone.call(this,brand,price)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="variable language_">super</span>(brand, price);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">photo</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;拍照&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">playGame</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;玩游戏&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> xiaomi = <span class="keyword">new</span> <span class="title function_">smartPhone</span>(<span class="string">&#x27;小咪&#x27;</span>, <span class="string">&#x27;799&#x27;</span>, <span class="string">&#x27;黑色&#x27;</span>, <span class="string">&#x27;4.7inch&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用子类的方法</span></span><br><span class="line">xiaomi.<span class="title function_">photo</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用父类的方法</span></span><br><span class="line">xiaomi.<span class="title function_">meth</span>()</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-重写">
          <a href="#3-重写" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-重写" class="headerlink" title="3. 重写"></a>3. 重写</h3>
      <p><strong>通过在子类写一个与父类相同名称(可以不同参数)的方法来达到重写父类的方法</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//父类：</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">brand, price</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">brand</span> = brand;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">price</span> = price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">meth</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;打电话&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//子类：</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">smartPhone</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Phone</span> &#123;</span><br><span class="line">    <span class="comment">//继承父类的构造方法</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">brand, price, colorm, size</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(brand, price);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">meth</span>(<span class="params">a, b, c</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;子类重写方法&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> xiaomi = <span class="keyword">new</span> <span class="title function_">smartPhone</span>(<span class="string">&#x27;小咪&#x27;</span>, <span class="string">&#x27;799&#x27;</span>, <span class="string">&#x27;黑色&#x27;</span>, <span class="string">&#x27;4.7inch&#x27;</span>);</span><br><span class="line"></span><br><span class="line">xiaomi.<span class="title function_">meth</span>()<span class="comment">//输出子类重写方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//可以通过__proto__.__proto__来调用父类的原方法</span></span><br><span class="line"></span><br><span class="line">xiaomi.<span class="property">__proto__</span>.<span class="property">__proto__</span>.<span class="title function_">meth</span>()<span class="comment">//输出打电话</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="4-get-x2F-set">
          <a href="#4-get-x2F-set" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-get-x2F-set" class="headerlink" title="4. get&#x2F;set"></a>4. get&#x2F;set</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">price</span>() &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;执行了get方法&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;price&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">price</span>(<span class="params">a</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Phone</span>()</span><br><span class="line"><span class="comment">//使用get.此时会执行get里的方法，并将返回值</span></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Phone</span>()</span><br><span class="line"><span class="keyword">let</span> res = p.<span class="property">price</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用set,set必须要有参数；此时会调用set方法，并传入=后面的值</span></span><br><span class="line">p.<span class="property">price</span> = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>




        <h2 id="数值扩展">
          <a href="#数值扩展" class="heading-link"><i class="fas fa-link"></i></a><a href="#数值扩展" class="headerlink" title="数值扩展"></a><font color="#20bf6b">数值扩展</font></h2>
      <p><strong>1. EPSILON（是JavaScript表示的最小精度</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Number.EPSILON</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>接近于2.220446049250313e-16，也就是2.22..*10<sup>-16</sup></p>
<p><strong>2. 进制</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//二进制</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">0b1010</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//八进制</span></span><br><span class="line"><span class="keyword">let</span> o = <span class="number">0o777</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//十进制</span></span><br><span class="line"><span class="keyword">let</span> d = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//十六进制</span></span><br><span class="line"><span class="keyword">let</span> h = <span class="number">0xff</span>;</span><br></pre></td></tr></table></div></figure>

<p><strong>3. Number.isFinite，检测一个数值是否为有限数</strong></p>
<p><strong>4. Number.isNaN(123),检测一个数值是否为NaN</strong></p>
<p><strong>5. Number.parseInt  Number.parseFloat,字符串转换为数字</strong></p>
<p><strong>6. Number.isInteger,判断一个数是否为整数</strong></p>
<p><strong>7. Math.trunc,将数字的小数部分抹掉</strong></p>
<p><strong>8. Math.sign,判断一个数到底是正数，负数，还是0</strong></p>

        <h2 id="对象方法扩展">
          <a href="#对象方法扩展" class="heading-link"><i class="fas fa-link"></i></a><a href="#对象方法扩展" class="headerlink" title="对象方法扩展"></a><font color="#20bf6b">对象方法扩展</font></h2>
      <p><strong>1. Object.is，判断两个值是否完全相等</strong></p>
<p><code>Object.is(120,120);Object.is(NaN,NaN)</code></p>
<p>与<code>===</code>作用大致相同，但是对比两个NaN时，is方法为true，<code>===</code>为false</p>
<p><strong>2. 对象的合并</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    <span class="attr">phone</span>: <span class="string">&#x27;18546213241&#x27;</span>,</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">    <span class="attr">hobby</span>: <span class="string">&#x27;打球&#x27;</span>,</span><br><span class="line">    <span class="attr">address</span>: <span class="string">&#x27;中国上海&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;里斯&#x27;</span>,</span><br><span class="line">    <span class="attr">hobby</span>: <span class="string">&#x27;睡觉&#x27;</span>,</span><br><span class="line">    <span class="attr">school</span>: <span class="string">&#x27;qinghua&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c = <span class="title class_">Object</span>.<span class="title function_">assign</span>(a, b)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>assgin,两个参数都是对象，第一个对象是原始的，第二个是要合并的，返回值中第二个对象里：同名的属性第一个会会覆盖第一个的，不同名的第一个有的保留，第一个没有的第二个有的会添加</p>
</blockquote>
<p>**3. 设置原型对象：Object.setPrototypeOf(obj1,obj2):**将第二个参数的对象设置为第一个参数的原型对象</p>
<p><strong>获取原型对象：Object.getPrototypeOf(obj1)</strong></p>

        <h2 id="模块化">
          <a href="#模块化" class="heading-link"><i class="fas fa-link"></i></a><a href="#模块化" class="headerlink" title="模块化"></a><font color="#20bf6b">模块化</font></h2>
      <p>模块化是指将一个大的程序文件，拆分成许多小的文件，然后将小文件组合起来。</p>
<p>优势：</p>
<p>1)防止命名冲突</p>
<p>2)代码复用</p>
<p>3)高维护性</p>
<p>模块功能主要由两个命令构成：export和import</p>
<ul>
<li><p>export 命令用于规定模块的对外接口</p>
</li>
<li><p>import命令用于输入其他模块提供的功能</p>
</li>
</ul>
<p><strong>1. 引入模块</strong></p>
<p>mk2.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> variable = <span class="string">&#x27;abcd&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">fun1</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;两个参数的值：&#x27;</span> + a + <span class="string">&#x27;和&#x27;</span> + b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>mk1.js</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> m1 <span class="keyword">from</span> <span class="string">&#x27;./mk2.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m1.<span class="property">variable</span>)</span><br><span class="line">m1.<span class="title function_">fun1</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></div></figure>

<p>HTML文件</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&#x27;../JS/mk1.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>type需要是module</p>
</blockquote>
<p><strong>2. 暴露模块数据语法汇总</strong></p>
<ol>
<li>分别暴露</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> variable = <span class="string">&#x27;abcd&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">fun1</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;两个参数的值：&#x27;</span> + a + <span class="string">&#x27;和&#x27;</span> + b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


<ol start="2">
<li>统一暴露</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> shcool = <span class="string">&#x27;sss&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">findJob</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;aa&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//统一暴露</span></span><br><span class="line"><span class="keyword">export</span> &#123;school,findJob&#125;;</span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>默认暴露</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="attr">school</span>:<span class="string">&#x27;ATGUIGU&#x27;</span>,</span><br><span class="line"></span><br><span class="line">	<span class="attr">change</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ddd&#x27;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>引入：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> m1 <span class="keyword">from</span> <span class="string">&#x27;./mk2.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m1.<span class="property">default</span>.<span class="property">school</span>)</span><br></pre></td></tr></table></div></figure>

<p><strong>3. 引入模块数据语法汇总</strong></p>
<ol>
<li>通用导入方式</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> m1 <span class="keyword">from</span> <span class="string">&#x27;./src/js/m1.js&#x27;</span></span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>解构赋值形式</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; school, meth &#125; <span class="keyword">from</span> <span class="string">&quot;./mk2.js&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(school)</span><br></pre></td></tr></table></div></figure>

<p>注：如果引入多个，可能会有重名的问题，设置别名即可</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分别暴露和统一暴露</span></span><br><span class="line"><span class="keyword">import</span> &#123; school, meth &#125; <span class="keyword">from</span> <span class="string">&quot;./mk2.js&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; school <span class="keyword">as</span> school1, meth <span class="keyword">as</span> meth1 &#125; <span class="keyword">from</span> <span class="string">&quot;./mk3.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//默认暴露:需要设置别名，不然报错</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> m3&#125; <span class="keyword">from</span> <span class="string">&#x27;./mk4.js&#x27;</span></span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>简便形式（针对默认暴露<br>） <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> m3 <span class="keyword">from</span> <span class="string">&#x27;./mk4.js&#x27;</span></span><br></pre></td></tr></table></div></figure></li>
</ol>

        <h1 id="ES7">
          <a href="#ES7" class="heading-link"><i class="fas fa-link"></i></a><a href="#ES7" class="headerlink" title="ES7"></a><font color="#3c40c6">ES7</font></h1>
      
        <h2 id="方法">
          <a href="#方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#方法" class="headerlink" title="方法"></a><font color="#20bf6b">方法</font></h2>
      <ol>
<li><p>includes</p>
<p> includes方法用来检测数组中是否包含某个元素，返回布尔类型值</p>
</li>
<li><p>指数操作夫</p>
<p> [**]实现幂运算</p>
<p> <code>console.log(2 ** 10)</code> &gt; &gt; 1024</p>
</li>
</ol>

        <h1 id="ES8">
          <a href="#ES8" class="heading-link"><i class="fas fa-link"></i></a><a href="#ES8" class="headerlink" title="ES8"></a><font color="#3c40c6">ES8</font></h1>
      
        <h2 id="async函数">
          <a href="#async函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#async函数" class="headerlink" title="async函数"></a>async函数</h2>
      <p>声明</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>函数固定返回的是promise对象，对象的状态由函数内的return决定：</p>
<blockquote>
<p>如果在函数中return了非Promise对象，或者没有return，或者只有return。那么返回的promise对象的状态是成功的，对象的值就是return的值，undefined，undefined。</p>
</blockquote>
<blockquote>
<p>如果是抛出错误，那么async函数的返回是一个失败的Promise</p>
</blockquote>
<blockquote>
<p><strong>如果返回的结果如果是一个Promise对象，该promise对象是成功的，那么最终async函数返回的Promise对象就是成功的，且成功的值就是该promise对象的值；如果该promise对象是失败的，那么最终async函数返回的promise对象就是失败的，且失败的值就是该promise对象的值</strong></p>
</blockquote>

        <h2 id="await表达式">
          <a href="#await表达式" class="heading-link"><i class="fas fa-link"></i></a><a href="#await表达式" class="headerlink" title="await表达式"></a>await表达式</h2>
      <p>async 函数中可能会有 await 表达式，async 函数执行时，如果遇到 await 就会先暂停执行 ，等到触发的异步操作完成后，恢复 async 函数的执行并返回解析值。</p>
<ol>
<li><p>await必须写在async函数中</p>
</li>
<li><p>await右侧的表达式一般为promise对象</p>
</li>
<li><p>await的返回值是promise成功的值</p>
</li>
<li><p>await的promise失败了，就会抛出异常，使用try…catch捕获处理（即返回的promise要么成功，要么抛出异常，后续不再执行）</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//resolve(&#x27;用户数据&#x27;)</span></span><br><span class="line">    <span class="title function_">reject</span>(<span class="string">&#x27;失败了&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//await 表达式返回的值是promise对象成功的值</span></span><br><span class="line">	</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">		<span class="comment">//返回的值是promise对象p成功的值</span></span><br><span class="line">        <span class="keyword">let</span> result = <span class="keyword">await</span> p;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">		<span class="comment">//返回的promise是失败的，需要通过try...catch来捕获异常信息</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;error信息：&#x27;</span> + error)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fn</span>()</span><br></pre></td></tr></table></div></figure>

<p>使用async与await结合改变setTimeout读取顺序</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">oneS</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="string">&#x27;第一个执行&#x27;</span>)</span><br><span class="line">        &#125;, <span class="number">3000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">twoS</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="string">&#x27;第二个执行&#x27;</span>)</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">threeS</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="string">&#x27;第三个执行&#x27;</span>)</span><br><span class="line">        &#125;, <span class="number">2000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">exeSort</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> a1 = <span class="keyword">await</span> <span class="title function_">oneS</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a1)</span><br><span class="line">    <span class="keyword">let</span> a2 = <span class="keyword">await</span> <span class="title function_">twoS</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a2)</span><br><span class="line">    <span class="keyword">let</span> a3 = <span class="keyword">await</span> <span class="title function_">threeS</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a3)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">exeSort</span>()</span><br></pre></td></tr></table></div></figure>


        <h2 id="对象方法扩展-1">
          <a href="#对象方法扩展-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#对象方法扩展-1" class="headerlink" title="对象方法扩展"></a>对象方法扩展</h2>
      <p><strong>1. Object.keys(obj1)：获取对象所有的键(将对象所有的属性和方法的名称以数组的形式存入)</strong></p>
<p><strong>2. Object.values(obj1)：获取对象所有的值(将对象所有的属性和方法的值以数组的形式存入)</strong></p>
<p><strong>3. Object.entries(obj1)：返回一个数组，数组中存入许多数组，每个数组的值是成对的，分别是属性和对应的值。可以用来创建Map</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> m = <span class="keyword">new</span> <span class="title class_">Map</span>(<span class="title class_">Object</span>.<span class="title function_">entries</span>(obj1));</span><br></pre></td></tr></table></div></figure>

        <h1 id="ES9">
          <a href="#ES9" class="heading-link"><i class="fas fa-link"></i></a><a href="#ES9" class="headerlink" title="ES9"></a><font color="#3c40c6">ES9</font></h1>
      
        <h2 id="ES9扩展运算符与REST参数">
          <a href="#ES9扩展运算符与REST参数" class="heading-link"><i class="fas fa-link"></i></a><a href="#ES9扩展运算符与REST参数" class="headerlink" title="ES9扩展运算符与REST参数"></a>ES9扩展运算符与REST参数</h2>
      <p>ES6中的Rest参数与spread扩展运算符只针对数组。在ES9中为对象提供了像数组一样的rest参数和扩展运算符 </p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">meth</span>(<span class="params">&#123; host, post, username, ...args &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(host)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(post)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(username)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;对象：&#x27;</span> + args.<span class="property">password</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">meth</span>(&#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    <span class="attr">post</span>: <span class="string">&#x27;8089&#x27;</span>,</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">address</span>: <span class="string">&#x27;chn&#x27;</span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//调用时对象的名字要对应，多出的部分会封装成对象传入给args对象中</span></span><br></pre></td></tr></table></div></figure>

<p><strong>对对象的扩展</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> skillone = &#123;</span><br><span class="line">	<span class="attr">q</span>:<span class="string">&#x27;天音波&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> skilltwo = &#123;</span><br><span class="line">	<span class="attr">w</span>:<span class="string">&#x27;金钟罩&#x27;</span>,</span><br><span class="line">	<span class="attr">e</span>:<span class="string">&#x27;天雷破&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  ...skillone=&gt;q:&#x27;天音波&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//将对象合并</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mergeObj = &#123;...skillone,...skilltwo&#125;</span><br></pre></td></tr></table></div></figure>

        <h2 id="trimStart和trimEnd">
          <a href="#trimStart和trimEnd" class="heading-link"><i class="fas fa-link"></i></a><a href="#trimStart和trimEnd" class="headerlink" title="trimStart和trimEnd"></a>trimStart和trimEnd</h2>
      <p>trimStart用来清除字符串左侧空白。</p>
<p>trimEnd用来清除字符串右侧空白</p>

        <h2 id="flat和flatMap">
          <a href="#flat和flatMap" class="heading-link"><i class="fas fa-link"></i></a><a href="#flat和flatMap" class="headerlink" title="flat和flatMap"></a>flat和flatMap</h2>
      <p>将多维数组转化为低维数组</p>
<p><strong>flat：将多维数组降低一维</strong></p>
<p>参数为深度，是一个数字。</p>
<p>如：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">flat</span>(<span class="number">2</span>);<span class="comment">//数组降低二维</span></span><br><span class="line"><span class="title function_">flat</span>(<span class="number">3</span>);<span class="comment">//数组降低三维</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">flat</span>(<span class="number">1</span>);<span class="comment">//默认为1，数组降低一维 </span></span><br></pre></td></tr></table></div></figure>


        <h2 id="私有属性">
          <a href="#私有属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#私有属性" class="headerlink" title="私有属性"></a>私有属性</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    name;</span><br><span class="line">    <span class="comment">//私有属性</span></span><br><span class="line">    #age;</span><br><span class="line">	#weight;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name, age, weight</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.#age = age;</span><br><span class="line">        <span class="variable language_">this</span>.#weight = weight;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">introl</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.#age)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.#weight)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;z&#x27;</span>, <span class="string">&#x27;18&#x27;</span>, <span class="string">&#x27;180&#x27;</span>);</span><br><span class="line">p.<span class="title function_">introl</span>()</span><br></pre></td></tr></table></div></figure>



        <h1 id="ES11">
          <a href="#ES11" class="heading-link"><i class="fas fa-link"></i></a><a href="#ES11" class="headerlink" title="ES11"></a><font color="#3c40c6">ES11</font></h1>
      
        <h2 id="动态import">
          <a href="#动态import" class="heading-link"><i class="fas fa-link"></i></a><a href="#动态import" class="headerlink" title="动态import"></a>动态import</h2>
      <p>当需要执行时才import</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fun1</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//返回一个Promise对象。回调函数</span></span><br><span class="line">    <span class="keyword">import</span> (<span class="string">&#x27;./mk2.js&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">module</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">module</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fun1</span>();</span><br></pre></td></tr></table></div></figure>


        <h2 id="大整数：BigInt">
          <a href="#大整数：BigInt" class="heading-link"><i class="fas fa-link"></i></a><a href="#大整数：BigInt" class="headerlink" title="大整数：BigInt"></a>大整数：BigInt</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//后面加一个n</span></span><br><span class="line"><span class="keyword">let</span> n = <span class="number">521n</span>;		</span><br></pre></td></tr></table></div></figure>


        <h2 id="globalThis：指向全局对象">
          <a href="#globalThis：指向全局对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#globalThis：指向全局对象" class="headerlink" title="globalThis：指向全局对象"></a>globalThis：指向全局对象</h2>
      
        <h2 id="bind-函数">
          <a href="#bind-函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#bind-函数" class="headerlink" title="bind()函数"></a>bind()函数</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;wangcai&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">fn</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> res = obj.<span class="property">fn</span>.<span class="title function_">bind</span>(person);</span><br><span class="line"></span><br><span class="line"><span class="title function_">res</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//此处res就是obj中的fn函数对象，只不过函数中的this指向person</span></span><br></pre></td></tr></table></div></figure>

<p><strong>bind方法用于将函数体内的this绑定到某个对象，然后返回一个新函数</strong></p>
<p>[关于JS执行参考：]</p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.jianshu.com/p/9dd4427f540e">https://www.jianshu.com/p/9dd4427f540e</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/355143116">https://zhuanlan.zhihu.com/p/355143116</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/02/07/web-ajax01/">web-ajax01</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-02-07</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-21</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h2 id="HTTP">
          <a href="#HTTP" class="heading-link"><i class="fas fa-link"></i></a><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2>
      <p><strong>HTTP（hypertext transport protocol）协议【超文本传输协议】，协议详细规定了浏览器和万维网服务器之间互相通信的规则</strong></p>

        <h3 id="1-请求报文">
          <a href="#1-请求报文" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-请求报文" class="headerlink" title="1.请求报文"></a>1.请求报文</h3>
      <p><strong>重点是格式与参数</strong></p>
<ul>
<li><p><strong>行</strong></p>
<p>  [GET]：请求类型</p>
<p>  [&#x2F;s?ie&#x3D;utf-8]：url地址（参数）</p>
<p>  [HTTP&#x2F;1.1]：HTTP协议的版本</p>
</li>
<li><p><strong>头</strong></p>
<p>  [Host:atguigu.com] [Cookie:name&#x3D;guigu] [Content-type:application&#x2F;x-www-form-urlencoded] [User-Agent:chrome 83]等等…</p>
</li>
<li><p><strong>空行</strong></p>
</li>
<li><p><strong>体</strong></p>
<p>  [username&#x3D;admin&amp;password&#x3D;admin]</p>
</li>
</ul>

        <h3 id="2-响应报文">
          <a href="#2-响应报文" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-响应报文" class="headerlink" title="2.响应报文"></a>2.响应报文</h3>
      <ul>
<li><p><strong>行</strong></p>
<p>  [HTTP&#x2F;1.1]</p>
<p>  [200]：响应状态码（200表示OK，404表示找不到，500表示内部错误等）</p>
<p>  [OK]：响应状态字符串（和状态码对应）</p>
</li>
<li><p><strong>头</strong></p>
</li>
<li><p><strong>空行</strong></p>
</li>
<li><p><strong>体</strong></p>
<p>  主要返回的结果</p>
</li>
</ul>

        <h2 id="Express使用与介绍">
          <a href="#Express使用与介绍" class="heading-link"><i class="fas fa-link"></i></a><a href="#Express使用与介绍" class="headerlink" title="Express使用与介绍"></a>Express使用与介绍</h2>
      <p><strong>Express是基于Node.js平台，快速、开放，极简的Web开发框架</strong></p>
<p><strong>1. 安装Node.JS</strong></p>
<p><strong>2. VSCode根目录点击在集成终端中打开</strong></p>
<p><strong>3. 使用指令安装Express：</strong></p>
<p><code>npm i express</code></p>
<p>执行后根目录会生成文件</p>
<p><strong>4. 在JS文件中使用express框架</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 引入express</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 创建应用对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 创建路由规则。request：请求报文的封装  reponse：响应报文的封装</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置允许跨域 设置响应头</span></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">	response.<span class="title function_">send</span>(<span class="string">&quot;&lt;h1&gt;Hellp,express!!!&lt;/h1&gt;&quot;</span>)</span><br><span class="line">	<span class="comment">//返回页面</span></span><br><span class="line">	response.<span class="title function_">sendFile</span>(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line">	</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置允许跨域 设置响应头</span></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">	response.<span class="title function_">send</span>(<span class="string">&quot;&lt;h1&gt;Hellp,express!!!&lt;/h1&gt;&quot;</span>)</span><br><span class="line">	</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. 监听端口启动服务</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;服务已经启动，8000端口i监听中&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>5. 执行此JS文件：</strong></p>
<p><code>node node01.js</code></p>
<p>注：node01.js是启动express的文件，如果不是在该文件的父级目录执行的，那么需要写出完整的js路径，如：</p>
<p><code>node D:\Projects\03_web\01_html\04_ajax\JS\node01.js</code></p>

        <h2 id="ajax请求">
          <a href="#ajax请求" class="heading-link"><i class="fas fa-link"></i></a><a href="#ajax请求" class="headerlink" title="ajax请求"></a>ajax请求</h2>
      
        <h3 id="1-基本操作">
          <a href="#1-基本操作" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-基本操作" class="headerlink" title="1. 基本操作"></a>1. 基本操作</h3>
      <p><strong>1-1.get请求</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;button&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">const</span> divtext = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;textd&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">    btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//1. 创建对象</span></span><br><span class="line">        <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 初始化，设置请求方法和url</span></span><br><span class="line">        xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://127.0.0.1:8000/server&#x27;</span>)</span><br><span class="line">            <span class="comment">//3. 发送</span></span><br><span class="line">        xhr.<span class="title function_">send</span>()</span><br><span class="line">            <span class="comment">//4. 事件绑定。处理服务器端返回的结果</span></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * on:当...的时候</span></span><br><span class="line"><span class="comment">             * readystate：是xhr对象中的属性，表示状态(0：表示未初始化，默认状态  1：open方法调用完毕  2：send方法调用完毕  3：返回部分结果  4：返回所有结果)</span></span><br><span class="line"><span class="comment">             **/</span></span><br><span class="line">        xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span><br><span class="line">                <span class="comment">//判断响应状态码是否成功(2开头的)</span></span><br><span class="line">                <span class="keyword">if</span> (xhr.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; xhr.<span class="property">status</span> &lt; <span class="number">300</span>) &#123;</span><br><span class="line">                    <span class="comment">//处理结果：行 头 空行 体</span></span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">status</span>) <span class="comment">//状态码</span></span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">statusText</span>) <span class="comment">//状态字符串</span></span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="title function_">getAllResponseHeaders</span>()) <span class="comment">//所有响应头</span></span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">response</span>) <span class="comment">//响应体</span></span><br><span class="line">                    divtext.<span class="property">innerHTML</span> = xhr.<span class="property">response</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>1-2.设置请求参数</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://127.0.0.1:8000/server?a=100&amp;b=200&amp;c=300&#x27;</span>)</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注：GET请求无法发送请求体内容，只能发送行和头。POST可以发送请求体的内容(也就是send方法里可以有数据传入服务端)</font></strong></p>
<p><strong>1-3.post请求</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;button&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">const</span> divtext = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;textd&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">    btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">	        <span class="comment">//1. 创建对象</span></span><br><span class="line">	        <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line">	</span><br><span class="line">	        <span class="comment">//2. 初始化，设置请求方法和url</span></span><br><span class="line">	        xhr.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;http://127.0.0.1:8000/server&#x27;</span>)</span><br><span class="line">            <span class="comment">//3. 发送（post请求可以在此传递参数）</span></span><br><span class="line">       		 xhr.<span class="title function_">send</span>(<span class="string">&#x27;a=100&amp;b=200&amp;c=300&#x27;</span>)</span><br><span class="line">			<span class="comment">//xhr.send(&#x27;a:100&amp;b:200&amp;c:300&#x27;)</span></span><br><span class="line">            <span class="comment">//4. 事件绑定。处理服务器端返回的结果</span></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * on:当...的时候</span></span><br><span class="line"><span class="comment">             * readystate：是xhr对象中的属性，表示状态(0：表示未初始化，默认状态  1：open方法调用完毕  2：send方法调用完毕  3：返回部分结果  4：返回所有结果)</span></span><br><span class="line"><span class="comment">             **/</span></span><br><span class="line">	        xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">	            <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span><br><span class="line">	                <span class="comment">//判断响应状态码是否成功(2开头的)</span></span><br><span class="line">	                <span class="keyword">if</span> (xhr.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; xhr.<span class="property">status</span> &lt; <span class="number">300</span>) &#123;</span><br><span class="line">	                    divtext.<span class="property">innerHTML</span> = xhr.<span class="property">response</span></span><br><span class="line">	                &#125;</span><br><span class="line">	            &#125;</span><br><span class="line">	        &#125;</span><br><span class="line">	</span><br><span class="line">	    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong>1-4.设置请求头信息</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>,<span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>)</span><br><span class="line"><span class="comment">//发送的信息的类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//自定义的请求头</span></span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;atguigu&#x27;</span>)</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-服务端响应JSON数据">
          <a href="#2-服务端响应JSON数据" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-服务端响应JSON数据" class="headerlink" title="2. 服务端响应JSON数据"></a>2. 服务端响应JSON数据</h3>
      <p><strong>服务端：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&#x27;18&#x27;</span>,</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//发送数据前要先把数据转换为字符串格式</span></span><br><span class="line"><span class="keyword">var</span> obh = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj)</span><br><span class="line">response.<span class="title function_">send</span>(obh)</span><br></pre></td></tr></table></div></figure>

<p><strong>页面接收时，可以手动将字符串转换为json格式</strong></p>
<p><code>var jsondata = JSON.parse(xhr.response)</code></p>
<p><strong>也可以设置响应体数据的类型，在接收数据时自动转换</strong></p>
<p><code>xhr.responseType = &#39;json&#39;</code></p>

        <h2 id="nodemon">
          <a href="#nodemon" class="heading-link"><i class="fas fa-link"></i></a><a href="#nodemon" class="headerlink" title="nodemon"></a>nodemon</h2>
      <p><strong>自动重启服务的工具</strong></p>
<p>安装：</p>
<p><code>npm install -g nodemon</code></p>
<p>启动服务：</p>
<p><code>nodemon node.js</code></p>

        <h2 id="IE缓存问题解决">
          <a href="#IE缓存问题解决" class="heading-link"><i class="fas fa-link"></i></a><a href="#IE缓存问题解决" class="headerlink" title="IE缓存问题解决"></a>IE缓存问题解决</h2>
      <p>IE浏览器如果缓存有数据得到话会直接读取缓存的数据而不是从服务器上重新获取。</p>
<p><strong>解决：</strong></p>
<p><code>xhr.open(&#39;GET&#39;,&#39;http://127.0.0.1:8000/ie?t=&#39;+Date.now())</code></p>
<p>Date.now()获取当前时间戳。这样的话每次url都是不一样的，这样就会重新发送新得请求，而不是走本地缓存</p>

        <h2 id="请求超时以及网络异常处理">
          <a href="#请求超时以及网络异常处理" class="heading-link"><i class="fas fa-link"></i></a><a href="#请求超时以及网络异常处理" class="headerlink" title="请求超时以及网络异常处理"></a>请求超时以及网络异常处理</h2>
      <p>前端页面：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//代表2S内没有接收响应，就取消</span></span><br><span class="line">xhr.<span class="property">timeout</span> = <span class="number">2000</span>;</span><br><span class="line"><span class="comment">//超时的回调</span></span><br><span class="line"></span><br><span class="line">xhr.<span class="property">ontimeout</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;网络异常&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//网络异常回调</span></span><br><span class="line"></span><br><span class="line">xhr.<span class="property">onerror</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&#x27;网络错误&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="ajax请求的手动取消">
          <a href="#ajax请求的手动取消" class="heading-link"><i class="fas fa-link"></i></a><a href="#ajax请求的手动取消" class="headerlink" title="ajax请求的手动取消"></a>ajax请求的手动取消</h2>
      <p><code>xhr.abort()</code></p>

        <h2 id="请求重复发送问题">
          <a href="#请求重复发送问题" class="heading-link"><i class="fas fa-link"></i></a><a href="#请求重复发送问题" class="headerlink" title="请求重复发送问题"></a>请求重复发送问题</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//默认是未发送状态</span></span><br><span class="line"><span class="keyword">let</span> x = <span class="literal">null</span></span><br><span class="line"><span class="keyword">let</span> isSending = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(isSending)&#123;</span><br><span class="line">	<span class="comment">//请求前判断是否正在请求</span></span><br><span class="line">	x.<span class="title function_">abort</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建请求</span></span><br><span class="line">x = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"><span class="comment">//创建了新得发送请求，修改标识变量的值</span></span><br><span class="line">isSending = <span class="literal">true</span></span><br><span class="line">x.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>,<span class="string">&#x27;http://127.0.0.1:8000/server&#x27;</span>)</span><br><span class="line">x.<span class="title function_">send</span>()</span><br><span class="line">x.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">if</span>(x.<span class="property">readyState</span> === <span class="number">4</span>)&#123;</span><br><span class="line">		<span class="comment">//代表响应了所有的数据</span></span><br><span class="line">		<span class="comment">//修改表示变量</span></span><br><span class="line">		isSending = <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h2 id="jQuery发送ajax请求">
          <a href="#jQuery发送ajax请求" class="heading-link"><i class="fas fa-link"></i></a><a href="#jQuery发送ajax请求" class="headerlink" title="jQuery发送ajax请求"></a>jQuery发送ajax请求</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//get请求</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 第一个参数：请求地址</span></span><br><span class="line"><span class="comment"> * 第二个参数：请求参数</span></span><br><span class="line"><span class="comment"> * 第三个参数：回调函数，data为响应体</span></span><br><span class="line"><span class="comment"> * 第四个参数：响应体的数据格式</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line">$.<span class="title function_">get</span>(<span class="string">&#x27;http://127.0.0.1:8000/server&#x27;</span>,&#123;<span class="attr">a</span>:<span class="number">100</span>,<span class="attr">b</span>:<span class="number">200</span>&#125;,<span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line">	<span class="comment">//回调函数，data是响应体</span></span><br><span class="line">&#125;,<span class="string">&#x27;json&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//post请求</span></span><br><span class="line">$.<span class="title function_">post</span>(<span class="string">&#x27;http://127.0.0.1:8000/server&#x27;</span>,&#123;<span class="attr">a</span>:<span class="number">100</span>,<span class="attr">b</span>:<span class="number">200</span>&#125;,<span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//通用ajax请求</span></span><br><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">	<span class="comment">//url</span></span><br><span class="line">	<span class="attr">url</span>:<span class="string">&#x27;http://127.0.0.1:8000/server&#x27;</span>,</span><br><span class="line">	<span class="comment">//参数</span></span><br><span class="line">	<span class="attr">data</span>:&#123;<span class="attr">a</span>:<span class="number">100</span>,<span class="attr">b</span>:<span class="number">200</span>&#125;,</span><br><span class="line">	<span class="comment">//请求类型</span></span><br><span class="line">	<span class="attr">type</span>:<span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">	<span class="comment">//设置响应体类型</span></span><br><span class="line">	<span class="attr">dataType</span>:<span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">	<span class="comment">//成功的回调</span></span><br><span class="line">	<span class="attr">success</span>:<span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//超时时间</span></span><br><span class="line">	<span class="attr">timeout</span>:<span class="number">2000</span>,</span><br><span class="line">	<span class="comment">//失败的回调（超时或者网络异常）</span></span><br><span class="line">	<span class="attr">error</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//头信息</span></span><br><span class="line">	<span class="attr">headers</span>:&#123;</span><br><span class="line">	<span class="attr">c</span>:<span class="number">300</span>,</span><br><span class="line">	<span class="attr">d</span>:<span class="number">400</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>因为通用ajax请求是自定义的头信息,需要作此设置</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//方法需要是all</span></span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&#x27;/delay&#x27;</span>,<span class="function">(<span class="params">request,response</span>)=&gt;</span>&#123;</span><br><span class="line">	response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Header&#x27;</span>,<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>



        <h2 id="Axios发送Ajax请求（较多使用）">
          <a href="#Axios发送Ajax请求（较多使用）" class="heading-link"><i class="fas fa-link"></i></a><a href="#Axios发送Ajax请求（较多使用）" class="headerlink" title="Axios发送Ajax请求（较多使用）"></a>Axios发送Ajax请求（较多使用）</h2>
      <p><strong>安装(npm安装或者引入)</strong></p>
<ul>
<li>npm安装：</li>
</ul>
<p><code>npm install axios</code></p>
<ul>
<li>引入：</li>
</ul>
<p><code>&lt;script crossorigin=&quot;anonymous&quot; src=&quot;https://cdn.bootcdn.net/ajax/libs/axios/0.25.0/axios.js&quot;&gt;&lt;/script&gt;</code></p>
<p><strong>GET请求</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;http://127.0.0.1:8000/axios-server&#x27;</span>,&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//url参数</span></span><br><span class="line">	<span class="attr">params</span>:&#123;</span><br><span class="line">		<span class="attr">id</span>:<span class="number">100</span>,</span><br><span class="line">		<span class="attr">vip</span>:<span class="number">7</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//请求头信息</span></span><br><span class="line">	<span class="attr">headers</span>:&#123;</span><br><span class="line">		<span class="attr">name</span>:<span class="string">&#x27;atguigu&#x27;</span>,</span><br><span class="line">		<span class="attr">age</span>:<span class="number">20</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="comment">//回调</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">info</span>(value)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>POST请求</strong></p>
<p>第一个参数：请求地址</p>
<p>第二个参数：请求体</p>
<p>第三个参数：其他的请求信息</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">post</span>(<span class="string">&#x27;http://127.0.0.1:8000/axios-server&#x27;</span>,</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="attr">username</span>:<span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">		<span class="attr">password</span>:<span class="string">&#x27;admin&#x27;</span></span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//url参数</span></span><br><span class="line">	<span class="attr">params</span>:&#123;</span><br><span class="line">		<span class="attr">id</span>:<span class="number">100</span>,</span><br><span class="line">		<span class="attr">vip</span>:<span class="number">7</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//请求头信息</span></span><br><span class="line">	<span class="attr">headers</span>:&#123;</span><br><span class="line">		<span class="attr">name</span>:<span class="string">&#x27;atguigu&#x27;</span>,</span><br><span class="line">		<span class="attr">age</span>:<span class="number">20</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="comment">//回调</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">info</span>(value)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


<p><strong>通用请求</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">	<span class="comment">//请求方法</span></span><br><span class="line">	<span class="attr">method</span>:<span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">	<span class="comment">//url</span></span><br><span class="line">	<span class="attr">url</span>:<span class="string">&#x27;http://127.0.0.1:8000/axios-server&#x27;</span>,</span><br><span class="line">	<span class="comment">//url参数</span></span><br><span class="line">	<span class="attr">params</span>:&#123;</span><br><span class="line">		<span class="attr">vip</span>:<span class="number">10</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//头信息</span></span><br><span class="line">	<span class="attr">headers</span>:&#123;</span><br><span class="line">		<span class="attr">a</span>:<span class="number">100</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//请求体信息</span></span><br><span class="line">	<span class="attr">data</span>:&#123;</span><br><span class="line">		<span class="attr">username</span>:<span class="string">&#x27;admin&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span>=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(response)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h2 id="使用fetch函数发送ajax请求（较少使用）">
          <a href="#使用fetch函数发送ajax请求（较少使用）" class="heading-link"><i class="fas fa-link"></i></a><a href="#使用fetch函数发送ajax请求（较少使用）" class="headerlink" title="使用fetch函数发送ajax请求（较少使用）"></a>使用fetch函数发送ajax请求（较少使用）</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;http://127.0.0.1:8000/server&#x27;</span>,&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//请求方法</span></span><br><span class="line">	<span class="attr">method</span>:<span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">	<span class="comment">//请求头</span></span><br><span class="line">	<span class="attr">headers</span>:&#123;</span><br><span class="line">		<span class="attr">name</span>:<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//请求体</span></span><br><span class="line">	<span class="attr">body</span>:<span class="string">&#x27;uname=admin&amp;pwd=admin&#x27;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="comment">//return response.json()</span></span><br><span class="line">	<span class="keyword">return</span> response.<span class="title function_">text</span>()</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">info</span>(response)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h2 id="同源策略">
          <a href="#同源策略" class="heading-link"><i class="fas fa-link"></i></a><a href="#同源策略" class="headerlink" title="同源策略"></a>同源策略</h2>
      <p>服务：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 引入express</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; json &#125; = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 创建应用对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 创建路由规则。request：请求报文的封装  reponse：响应报文的封装</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&#x27;/server&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置响应</span></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    response.<span class="title function_">sendFile</span>(<span class="string">&#x27;html/test.html&#x27;</span>, &#123; <span class="attr">root</span>: <span class="string">&#x27;../&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&#x27;/data&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置响应</span></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    response.<span class="title function_">send</span>(<span class="string">&#x27;data&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. 监听端口启动服务</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;服务已经启动，8000端口i监听中&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>访问<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost:8000/server,%E4%BC%9A%E8%B7%B3%E8%BD%AC%E5%88%B0test.html%E9%A1%B5%E9%9D%A2">http://localhost:8000/server,会跳转到test.html页面</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>test.html：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//1. 创建对象</span></span><br><span class="line">    <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. 初始化，设置请求方法和url</span></span><br><span class="line">    xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;data&#x27;</span>)</span><br><span class="line">        <span class="comment">//3. 发送</span></span><br><span class="line">    xhr.<span class="title function_">send</span>()</span><br><span class="line">    xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="comment">//判断响应状态码是否成功(2开头的)</span></span><br><span class="line">            <span class="keyword">if</span> (xhr.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; xhr.<span class="property">status</span> &lt; <span class="number">300</span>) &#123;</span><br><span class="line">                <span class="comment">//处理结果：行 头 空行 体</span></span><br><span class="line">                <span class="comment">// divtext.innerHTML = xhr.response</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>因为是同源，所以可以在open中地址参数直接写data，前面的http:127.0.0.1:8000会自动填充</strong></p>

        <h2 id="解决跨域">
          <a href="#解决跨域" class="heading-link"><i class="fas fa-link"></i></a><a href="#解决跨域" class="headerlink" title="解决跨域"></a>解决跨域</h2>
      <p><strong>JSONP</strong> </p>
<p>只支持get请求 </p>

        <h2 id="设置CORS响应头实现跨域请求">
          <a href="#设置CORS响应头实现跨域请求" class="heading-link"><i class="fas fa-link"></i></a><a href="#设置CORS响应头实现跨域请求" class="headerlink" title="设置CORS响应头实现跨域请求"></a>设置CORS响应头实现跨域请求</h2>
      <p>服务端：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//设置响应头，允许跨域。*号代表通配所有网页</span></span><br><span class="line">response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//只有http:127.0.0.1:5500才可以向服务发送请求</span></span><br><span class="line"><span class="comment">//response.setHeader(&#x27;Access-Control-Allow-Origin&#x27;,&#x27;http:127.0.0.1:5500&#x27;)</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ul>
<li><p><strong>(‘Access-Control-Allow-Origin’,’*’)：允许跨域</strong></p>
</li>
<li><p><strong>(‘Access-Control-Allow-Headers’,’*’):允许自定义头信息</strong></p>
</li>
<li><p><strong>(‘Access-Control-Allow-Method’,’*’):允许请求的方法(post,get等)</strong></p>
</li>
</ul>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/01/31/web-bootstrap01/">web-bootstrap01</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-01-31</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-21</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h2 id="容器">
          <a href="#容器" class="heading-link"><i class="fas fa-link"></i></a><a href="#容器" class="headerlink" title="容器"></a>容器</h2>
      <p><strong>1. 流体容器</strong></p>
<p>宽度为100%，会随着浏览器的大小改变</p>
<p><strong>2. 固定容器</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">阈值			width</span><br><span class="line"></span><br><span class="line">大于小于1200		1170</span><br><span class="line"></span><br><span class="line">----------</span><br><span class="line"></span><br><span class="line">大于等于992小于1200	970  </span><br><span class="line"></span><br><span class="line">----------</span><br><span class="line"></span><br><span class="line">大于等于768小于992	750</span><br><span class="line"></span><br><span class="line">----------</span><br><span class="line"></span><br><span class="line">小于768		auto	</span><br></pre></td></tr></table></div></figure>

<p><strong>3. 栅格系统</strong></p>
<p><code>class = &quot;col-lg-12&quot;</code></p>
<p>col : 代表列</p>
<p>lg ： 代表阈值</p>
<p>12 ： 一共12列</p>

        <h2 id="栅格">
          <a href="#栅格" class="heading-link"><i class="fas fa-link"></i></a><a href="#栅格" class="headerlink" title="栅格"></a>栅格</h2>
      <p>关于栅格的槽宽：<code>padding-left:15px;padding-right:15px;</code></p>
<p>例如：</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-top</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.row</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span><span class="selector-attr">[class|=col]</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">1px</span> solid blue;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-5&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-6&quot;</span>&gt;</span>5-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-6&quot;</span>&gt;</span>5-2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-4&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p><img src="/2022/01/31/web-bootstrap01/capture_20220204221812242.bmp"></p>
<p>样式如上，可以看到嵌套的row并没有槽宽，原因是为row设置了<code>margin-left:-15px;margin-right:-15px;</code>从而抵消了第一列的槽宽(row的宽度是auto。)，由于此设置会导致外层的row的宽度会溢出容器，所以容器也一样设置了槽宽<code>padding-left:15px;padding-right:15px;</code></p>

        <h2 id="bootstrap定制化">
          <a href="#bootstrap定制化" class="heading-link"><i class="fas fa-link"></i></a><a href="#bootstrap定制化" class="headerlink" title="bootstrap定制化"></a>bootstrap定制化</h2>
      <p><strong>1.改源码</strong></p>
<p>缺点，会破坏原有结构</p>
<p><strong>2.重新创建一个less文件，通过混合的形式将bootstrap.less文件引入到创建的less文件，再在此文件下修改一些样式变量(less变量的就近原则，即使变量赋值在使用的下面，也会生效。)</strong></p>
<figure class="highlight css"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;../less/bootstrap.less&quot;</span></span><br><span class="line"></span><br><span class="line">@<span class="attribute">grid-gutter-width</span>:<span class="number">200px</span>;</span><br><span class="line"></span><br><span class="line">//改变槽宽</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>此文件会先加载import，所以变量写上面下面都一样。</strong></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/12/12/03-JS-jQuery/">03-JS-jQuery</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-12-12</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-21</span></span></div></header><div class="post-body"><div class="post-excerpt"><p><strong>匿名函数自调用</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"><span class="variable language_">window</span></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> jQuery = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> ×××;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">jQuery</span> = <span class="variable language_">window</span>.<span class="property">$</span> = jQuery</span><br><span class="line"></span><br><span class="line">&#125;)(<span class="variable language_">window</span>)</span><br></pre></td></tr></table></div></figure>

<p><strong>自调用的另外一种方法</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;()</span><br></pre></td></tr></table></div></figure>

<p><em>前面加一个感叹号</em></p>

        <h1 id="1-jQuery的使用">
          <a href="#1-jQuery的使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-jQuery的使用" class="headerlink" title="1. jQuery的使用"></a>1. jQuery的使用</h1>
      <p><strong>$&#x2F;jQuery作为一般函数调用：$(param)</strong></p>
<p>1） 参数为函数：当DOM加载完成后，执行此回调函数</p>
<p>2） 参数为选择器字符串：查找所匹配的标签，并将它们封装为jQuery对象</p>
<p>3） 参数为DOM对象：将DOM对象封装为jQuery对象</p>
<p>4） 参数为html标签字符串：创建标签对象并封装为jQuery对象</p>
<p><code>$(&#39;&lt;input type=&quot;text&quot; name = &quot;msg3&quot;/&gt;&lt;br/&gt;&#39;).appendTo(&#39;div&#39;)</code></p>
<p><em>将此jQuery对象插入到div的最后一个</em></p>
<p><strong>dom对象转成jquery对象：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> id=<span class="string">&quot;tx&quot;</span> value=<span class="string">&quot;33&quot;</span>&gt;</span><br><span class="line"><span class="comment">//获取文本框</span></span><br><span class="line"><span class="keyword">var</span> domObj=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;tx&quot;</span>);</span><br><span class="line"><span class="comment">//转成jquery对象</span></span><br><span class="line"><span class="keyword">var</span> jq=$(domObj);</span><br></pre></td></tr></table></div></figure>



<p><strong>$&#x2F;jQuery作为对象使用：$.×××()</strong></p>
<p>1）$.each():隐式遍历数组</p>
<p>2）$.trim():去除两端空格</p>

        <h1 id="2-选择器">
          <a href="#2-选择器" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-选择器" class="headerlink" title="2.选择器"></a>2.选择器</h1>
      <p>伪数组：通过$(元素)获取到的元素数组实质上是伪数组，是jQuery自己定义的，不能使用JS数组的一些方法</p>
<p><strong>伪数组是通过属性访问值的。并不是通过下标</strong></p>
<p><strong><font color="red">只有调用$().并将选择器作为参数传入才能起作用</font></strong></p>

        <h2 id="2-1过滤">
          <a href="#2-1过滤" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-1过滤" class="headerlink" title="2.1过滤"></a>2.1过滤</h2>
      <p>在jQuery对象内部的元素中找出部分匹配的元素，并封装成新的jQuery对象返回</p>

        <h2 id="2-2查找">
          <a href="#2-2查找" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-2查找" class="headerlink" title="2.2查找"></a>2.2查找</h2>
      <p>查找jQuery对象内部的元素的子孙&#x2F;兄弟&#x2F;父母元素，并封装成新的jQuery对象返回</p>

        <h1 id="3-属性">
          <a href="#3-属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-属性" class="headerlink" title="3.属性"></a>3.属性</h1>
      <p><strong>arrt():操作属性值为非布尔值的属性</strong></p>
<p><strong>prop():操作属性值为布尔值的属性</strong></p>

        <h2 id="3-1-CSS属性">
          <a href="#3-1-CSS属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-1-CSS属性" class="headerlink" title="3.1 CSS属性"></a>3.1 CSS属性</h2>
      <p><strong>1. 得到一个P标签的颜色</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;p:first&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;color&quot;</span>)</span><br></pre></td></tr></table></div></figure>

<p><strong>2. 设置所有p标签的文本颜色为red</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;p&#x27;</span>).<span class="title function_">css</span>(<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;red&#x27;</span>)</span><br></pre></td></tr></table></div></figure>

<p><strong>3. 设置第二个p的字体颜色</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//width可以不写px</span></span><br><span class="line">$(<span class="string">&#x27;p:eq(1)&#x27;</span>).<span class="title function_">css</span>(&#123;</span><br><span class="line"></span><br><span class="line"><span class="attr">color</span>:<span class="string">&#x27;#ff0011&#x27;</span></span><br><span class="line"><span class="attr">background</span>:<span class="string">&#x27;blue&#x27;</span></span><br><span class="line"><span class="attr">width</span>:<span class="number">300</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

        <h2 id="3-2-尺寸">
          <a href="#3-2-尺寸" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-2-尺寸" class="headerlink" title="3.2 尺寸"></a>3.2 尺寸</h2>
      <p>wdith()&#x2F;height()：width&#x2F;height</p>
<p>innerWidth()&#x2F;innerHeight():width+padding</p>
<p>outerWidth()&#x2F;outerHeight():width+padding+border(如果参数为true还要加margin)</p>

        <h1 id="4-事件">
          <a href="#4-事件" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-事件" class="headerlink" title="4.事件"></a>4.事件</h1>
      
        <h2 id="1-事件绑定-两种">
          <a href="#1-事件绑定-两种" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-事件绑定-两种" class="headerlink" title="1. 事件绑定(两种)"></a>1. 事件绑定(两种)</h2>
      <p><strong>(1) eventName(function(){})</strong></p>
<p>绑定对应事件名的监听，例如:<code>$(&quot;#div&quot;).click(function()&#123;&#125;)</code></p>
<p><strong>(2)on(eventName,function(){})</strong></p>
<p>通用的绑定事件监听，例如：<code>$(&quot;#div&quot;).on(&#39;click&#39;,function()&#123;&#125;)</code></p>
<p><strong>优缺点</strong></p>
<p>eventName：编码方便，且有的事件监听不支持</p>
<p>on:编码不方便，且更通用</p>

        <h2 id="2-事件解绑">
          <a href="#2-事件解绑" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-事件解绑" class="headerlink" title="2. 事件解绑"></a>2. 事件解绑</h2>
      <p>off(eventName)</p>

        <h2 id="3-事件的坐标">
          <a href="#3-事件的坐标" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-事件的坐标" class="headerlink" title="3. 事件的坐标"></a>3. 事件的坐标</h2>
      <ul>
<li><p>event.clientX,event.clientY 相对于视口的左上角</p>
</li>
<li><p>event.pageX,event.pageY 相对于页面的左上角</p>
</li>
<li><p>event.offsetX,event.offsetY 相对于事件元素左上角</p>
</li>
</ul>

        <h2 id="4-事件相关处理">
          <a href="#4-事件相关处理" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-事件相关处理" class="headerlink" title="4. 事件相关处理"></a>4. 事件相关处理</h2>
      <p>停止事件冒泡：event.stopPropagation()</p>
<p><em>event是参数</em></p>
<p>阻止事件的默认行为：event.preventDefault()</p>
<p><em>比如页面跳转</em></p>

        <h2 id="mouseover和mouseenter的区别">
          <a href="#mouseover和mouseenter的区别" class="heading-link"><i class="fas fa-link"></i></a><a href="#mouseover和mouseenter的区别" class="headerlink" title="mouseover和mouseenter的区别"></a><font color="green">mouseover和mouseenter的区别</font></h2>
      <ul>
<li><p>mouseover：在移入子元素时也会触发，对应mouseout</p>
</li>
<li><p>mouseenter：只在移入当前元素时才触发，对应mouseleave(注：hover方法内使用的就是<code>mouseenter()和mouseleave()</code>)</p>
</li>
</ul>

        <h2 id="on-‘click’-fun-和click-fun-的区别">
          <a href="#on-‘click’-fun-和click-fun-的区别" class="heading-link"><i class="fas fa-link"></i></a><a href="#on-‘click’-fun-和click-fun-的区别" class="headerlink" title="on(‘click’,fun)和click(fun)的区别"></a><font color="green">on(‘click’,fun)和click(fun)的区别</font></h2>
      
        <h2 id="5-事件的委派">
          <a href="#5-事件的委派" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-事件的委派" class="headerlink" title="5. 事件的委派"></a>5. 事件的委派</h2>
      
        <h3 id="5-1-事件的委派：">
          <a href="#5-1-事件的委派：" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-1-事件的委派：" class="headerlink" title="5.1. 事件的委派："></a>5.1. 事件的委派：</h3>
      <ul>
<li><p>将多个子元素的事件监听委托给父元素处理</p>
</li>
<li><p>监听回调是加载了父辈元素上</p>
</li>
<li><p>当操作任意一个子元素时，事件都会冒泡到父辈元素</p>
</li>
<li><p>父辈元素不会直接处理事件，而是根据event.target得到发生事件的子元素，<b>通过这个子元素调用事件回调函数</b></p>
</li>
</ul>
<p><strong>也就是说event并不是固定是某一个元素对象的，而是根据鼠标当前的指向</strong></p>

        <h3 id="5-2-jQuery的事件委托API">
          <a href="#5-2-jQuery的事件委托API" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-2-jQuery的事件委托API" class="headerlink" title="5.2 jQuery的事件委托API"></a>5.2 jQuery的事件委托API</h3>
      <p><strong>设置事件的委托：$(parentSelector).delegate(childrenSelector,eventName,callback)</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;ul&quot;</span>).<span class="title function_">delegate</span>(<span class="string">&#x27;li&#x27;</span>,<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="variable language_">this</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">此处this指向的是委派方<code>li</code>，原因是回调函数callback通过call方法将指针给了li对象</font></strong></p>
<p><strong>移除事件的委派：$(parentSelector).undelegate(eventName)</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(parentSelector).undelegate(&#x27;click&#x27;)</span><br></pre></td></tr></table></div></figure>

<p><em>只移除点击事件的委派</em></p>

        <h1 id="5-动画">
          <a href="#5-动画" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-动画" class="headerlink" title="5.动画"></a>5.动画</h1>
      
        <h2 id="5-1淡入淡出">
          <a href="#5-1淡入淡出" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-1淡入淡出" class="headerlink" title="5.1淡入淡出"></a>5.1淡入淡出</h2>
      <p><strong>fadeOut([speed],[easing],[fn])</strong></p>
<ul>
<li><p>speed:三种预定速度之一的字符串(“slow”,”normal”,”fast”)或者表示动画时长的ms数值，(如：1000)</p>
</li>
<li><p>easing：用来指定切换的效果(匀速，变速)，默认：swing</p>
</li>
<li><p>fn：在动画完成时执行的函数，每个元素执行一次</p>
</li>
</ul>
<p><strong>fadeIn([speed],[easing],[fn])</strong></p>
<p><strong>fadeToggle：切换</strong></p>

        <h2 id="5-2滑动-不断改变元素的高度实现">
          <a href="#5-2滑动-不断改变元素的高度实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-2滑动-不断改变元素的高度实现" class="headerlink" title="5.2滑动(不断改变元素的高度实现)"></a>5.2滑动(不断改变元素的高度实现)</h2>
      <p><strong>slideDown([speed,[easing],[fn]]):向下滑动</strong></p>
<p><strong>slideUp([speed,[easing],[fn]]):向上滑动</strong></p>
<p><strong>slideToggle():带动画的切换展开&#x2F;收缩</strong></p>

        <h2 id="5-3显示-x2F-隐藏-默认没有动画，如果带动画改变的是透明度，高度，宽度，固定左上角">
          <a href="#5-3显示-x2F-隐藏-默认没有动画，如果带动画改变的是透明度，高度，宽度，固定左上角" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-3显示-x2F-隐藏-默认没有动画，如果带动画改变的是透明度，高度，宽度，固定左上角" class="headerlink" title="5.3显示&#x2F;隐藏(默认没有动画，如果带动画改变的是透明度，高度，宽度，固定左上角)##"></a>5.3显示&#x2F;隐藏(默认没有动画，如果带动画改变的是透明度，高度，宽度，固定左上角)##</h2>
      <p><strong>show([speed,[easing],[fn]])显示</strong></p>
<p><strong>hide([speed,[easing],[fn]]) 隐藏</strong></p>
<p><em>有速度参数就会有动画</em></p>

        <h2 id="5-4-自定义动画">
          <a href="#5-4-自定义动画" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-4-自定义动画" class="headerlink" title="5.4 自定义动画"></a>5.4 自定义动画</h2>
      <p><code>animate(params,[speed],[easing],[fn])</code></p>
<ul>
<li><p>params:一组包含作为动画属性和终值样式和及其值的集合</p>
</li>
<li><p>speed：速度</p>
</li>
<li><p>easing：效果(匀速，变速)</p>
</li>
<li><p>fn：动画完成后的回调函数</p>
</li>
</ul>
<p>例：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在原有的基础上增加的距离</span></span><br><span class="line">$(param).<span class="title function_">animate</span>(</span><br><span class="line">&#123;</span><br><span class="line">	<span class="attr">left</span>:<span class="string">&#x27;+=100&#x27;</span>,</span><br><span class="line">	<span class="attr">top</span>:<span class="string">&#x27;+=50&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></div></figure>


<p><strong>停止动画</strong></p>
<p><code>stop()</code></p>
<p>例子：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#animationTest&quot;</span>).<span class="title function_">hover</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">stop</span>().<span class="title function_">slideUp</span>()</span><br><span class="line">&#125;, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">stop</span>().<span class="title function_">slideDown</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>此种写法可以使动画不用执行完后继续执行下一次  而是重复动画时会先停止上一次的动画直接进行下一次动画</p>

        <h1 id="6-多库共存">
          <a href="#6-多库共存" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-多库共存" class="headerlink" title="6.多库共存"></a>6.多库共存</h1>
      <p><strong>如果有2个库都有$,就存在冲突。</strong></p>
<p>jQuery库可以释放$的使用权，让另一个库正常使用，此时jQuery库只能使用jQuery了。</p>
<p>API:<code>jQuery.noConflict()</code> </p>

        <h1 id="7-window-onload-和-document-ready">
          <a href="#7-window-onload-和-document-ready" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-window-onload-和-document-ready" class="headerlink" title="7. window.onload()和$(document).ready()"></a>7. window.onload()和$(document).ready()</h1>
      <p>window.onload:</p>
<ul>
<li><p>包括页面的图片加载完成后才会回调（晚）</p>
</li>
<li><p>只能有一个监听回调</p>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;w1&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;w2&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//只执行第二个</span></span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">回调的完  那么有些没加载完的数据比如图片的宽高在加载完后可以正常获取到</font></strong></p>
<p>$(document).ready()</p>
<ul>
<li><p>等同于：$(function(){})</p>
</li>
<li><p>页面加载完后就回调(早)</p>
</li>
<li><p>可以有多个监听回调</p>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;r1&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">$(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;r2&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//两个都可以执行</span></span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">回调的早  那么有些没加载完的数据比如图片的宽高可能就获取不到</font></strong></p>

        <h1 id="8-插件">
          <a href="#8-插件" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-插件" class="headerlink" title="8.插件"></a>8.插件</h1>
      
        <h2 id="8-1-jQuery-fn-extend-object">
          <a href="#8-1-jQuery-fn-extend-object" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-1-jQuery-fn-extend-object" class="headerlink" title="8.1 jQuery.fn.extend(object)"></a>8.1 <code>jQuery.fn.extend(object)</code></h2>
      <p>扩展jQuery对象的方法(jQuery函数获取到的对象，如<code>$(&quot;#id1&quot;))</code></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">jQuery.fn.extend(&#123;</span><br><span class="line"></span><br><span class="line">	check:function()&#123;</span><br><span class="line">		return this.each(function()&#123;this.checked = true&#125;)</span><br><span class="line">		/**</span><br><span class="line">		 * 外层的this是jQuery对象(用jQuery获取到的对象统称为jQuery对象)</span><br><span class="line">		 * 内层的this是DOM元素(遍历了jQuery集里面的元素，每一个元素都是一个DOM对象)</span><br><span class="line">		 */</span><br><span class="line">	</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	uncheck:function()&#123;</span><br><span class="line">		return this.each(function()&#123;this.checked = false&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>调用：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#id1&quot;</span>).<span class="title function_">check</span>()</span><br></pre></td></tr></table></div></figure>


        <h2 id="8-2-jQuery-extend-object">
          <a href="#8-2-jQuery-extend-object" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-2-jQuery-extend-object" class="headerlink" title="8.2 jQuery.extend(object)"></a>8.2 <code>jQuery.extend(object)</code></h2>
      <p>扩展jQuery对象本身，用来在jQuery命名空间上增加新函数。</p>
<p>如，在jQuery命名空间上增加两个函数</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jQuery.<span class="title function_">extend</span>(&#123;</span><br><span class="line">	<span class="attr">min</span>:<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;<span class="keyword">return</span> a&lt;b?<span class="attr">a</span>:b&#125;</span><br><span class="line"></span><br><span class="line">	<span class="attr">max</span>:<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;<span class="keyword">return</span> a&gt;b?<span class="attr">a</span>:b&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>使用</p>
<p>&#96;&#96;&#96;JS<br>console.info($.min(3,5))<br>&#96;&#96;<br>53</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/10/31/02-JS-DOM/">02-JS-DOM</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-10-31</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-21</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="1-简介">
          <a href="#1-简介" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h1>
      <p><strong>DOM 全称Document Object Model文档模型对象</strong> </p>
<p>JS中通过DOM来对HTML文档进行操作</p>
<ul>
<li><p>文档：表示的是整个HTML网页文档</p>
</li>
<li><p>对象：对象表示将网页中的每一部分欧转换为了一个对象</p>
</li>
<li><p>模型：使用模型来表示对象之间的关系。方便我们获取对象</p>
</li>
</ul>
<p><img src="/2021/10/31/02-JS-DOM/rela.png"></p>
<p><strong>浏览器已经为我们提供了文档节点对象，此对象是window属性</strong></p>
<p><strong><font color="green">可以直接使用，而且文档节点代表的是整个网页：document</font></strong></p>

        <h1 id="2-文档的加载">
          <a href="#2-文档的加载" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-文档的加载" class="headerlink" title="2. 文档的加载"></a>2. 文档的加载</h1>
      <p>浏览器在加载一个页面时，是按照自上而下的顺序加载的。</p>
<p>读取到一行就运行到一行。如果script标签写到页面上边，在代码执行时，页面还没有加载(DOM对象也没有加载)</p>
<p><strong>将JS代码编写到页面下部就是为了可以在页面加载完毕之后再执行JS代码</strong></p>
<p><strong><font color="green">如果想要写到上面，可以用方法<code>window.onload</code>方法，此方法作用是意思是在页面加载完成后再执行，这样可以确保所有的DOM对象都已经加载完毕了。</font></strong></p>

        <h1 id="3-方法和属性">
          <a href="#3-方法和属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-方法和属性" class="headerlink" title="3.方法和属性"></a>3.方法和属性</h1>
      
        <h2 id="3-1-childNodes">
          <a href="#3-1-childNodes" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-1-childNodes" class="headerlink" title="3.1 childNodes"></a>3.1 childNodes</h2>
      <p><strong>表示当前节点的所有子节点，包括空白部分。</strong></p>

        <h2 id="3-2-getElementsByTagName">
          <a href="#3-2-getElementsByTagName" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-2-getElementsByTagName" class="headerlink" title="3.2 getElementsByTagName()"></a>3.2 getElementsByTagName()</h2>
      <p><strong>方法，返回当前节点的指定标签名后代节点</strong></p>

        <h2 id="3-3-children">
          <a href="#3-3-children" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-3-children" class="headerlink" title="3.3 children"></a>3.3 children</h2>
      <p><strong>表示当前节点的所有子节点，不包括空白部分</strong></p>

        <h2 id="3-4-firstChild">
          <a href="#3-4-firstChild" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-4-firstChild" class="headerlink" title="3.4 firstChild"></a>3.4 firstChild</h2>
      <p><strong>属性，表示当前节点的第一个子节点</strong></p>

        <h2 id="3-5-lastChild">
          <a href="#3-5-lastChild" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-5-lastChild" class="headerlink" title="3.5 lastChild"></a>3.5 lastChild</h2>
      <p><strong>同理，表示当前节点的最后一个子节点</strong></p>

        <h2 id="3-6-获取body和html">
          <a href="#3-6-获取body和html" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-6-获取body和html" class="headerlink" title="3.6 获取body和html"></a>3.6 获取body和html</h2>
      <ul>
<li>获取body</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> body = <span class="variable language_">document</span>.<span class="property">body</span>;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ul>
<li>获取html</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> html = <span class="variable language_">document</span>.<span class="property">documentElement</span>;</span><br></pre></td></tr></table></div></figure>

<ul>
<li>获取所有元素</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> all = <span class="variable language_">document</span>.<span class="property">all</span>;</span><br></pre></td></tr></table></div></figure>

<p>&gt;&gt;&gt;&gt;</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> all = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;*&quot;</span>);</span><br></pre></td></tr></table></div></figure>


        <h2 id="3-7-document-querySelector">
          <a href="#3-7-document-querySelector" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-7-document-querySelector" class="headerlink" title="3.7 document.querySelector()"></a>3.7 document.querySelector()</h2>
      <p>需要一个选择器的字符串作为参数，可以根据一个CSS的选择器来查询一个元素节点对象</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.box1 div&quot;</span>);</span><br><span class="line"><span class="comment">//找到box1中的div元素</span></span><br></pre></td></tr></table></div></figure>

<p><strong>使用该方法只会返回一个元素，如果有多个符合条件的元素，那么返回第一个</strong></p>

        <h2 id="3-8-document-querySelectorAll">
          <a href="#3-8-document-querySelectorAll" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-8-document-querySelectorAll" class="headerlink" title="3.8 document.querySelectorAll"></a>3.8 document.querySelectorAll</h2>
      <p>与上述用法一样，不过会把符合条件的元素封装到数组返回</p>

        <h1 id="4-增删改">
          <a href="#4-增删改" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-增删改" class="headerlink" title="4.增删改"></a>4.增删改</h1>
      
        <h2 id="4-1-creatElement">
          <a href="#4-1-creatElement" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-1-creatElement" class="headerlink" title="4.1 creatElement()"></a>4.1 creatElement()</h2>
      <p><strong>创建一个元素节点对象</strong></p>

        <h2 id="4-2-creatTextNode">
          <a href="#4-2-creatTextNode" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-2-creatTextNode" class="headerlink" title="4.2 creatTextNode()"></a>4.2 creatTextNode()</h2>
      <p><strong>创建一个文本节点对象</strong></p>

        <h2 id="4-3-appendChild">
          <a href="#4-3-appendChild" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-3-appendChild" class="headerlink" title="4.3 appendChild()"></a>4.3 appendChild()</h2>
      <p><strong>把新的子节点添加到指定节点</strong></p>

        <h2 id="4-4-removeChild">
          <a href="#4-4-removeChild" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-4-removeChild" class="headerlink" title="4.4 removeChild()"></a>4.4 removeChild()</h2>
      <p><strong>删除子节点</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">city.<span class="title function_">removeChild</span>(bj);</span><br><span class="line"><span class="comment">//city:父节点</span></span><br><span class="line"><span class="comment">//bj:被删除的子节点</span></span><br></pre></td></tr></table></div></figure>


        <h2 id="4-5-insertBefore">
          <a href="#4-5-insertBefore" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-5-insertBefore" class="headerlink" title="4.5 insertBefore()"></a>4.5 insertBefore()</h2>
      <p><strong>把指定的子节点前面插入新的子节点</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">city.<span class="title function_">insertBefore</span>(li,bj);</span><br><span class="line"><span class="comment">//city:父节点</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//li:指定子节点</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//bj:被插入到前面的旧的子节点</span></span><br></pre></td></tr></table></div></figure>


        <h2 id="4-6-replaceChild-替换子节点">
          <a href="#4-6-replaceChild-替换子节点" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-6-replaceChild-替换子节点" class="headerlink" title="4.6 replaceChild() 替换子节点"></a>4.6 replaceChild() 替换子节点</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">city.<span class="title function_">replaceChild</span>(li1,li2);</span><br><span class="line"><span class="comment">//city:父节点</span></span><br><span class="line"><span class="comment">//li1:新节点</span></span><br><span class="line"><span class="comment">//li2::被替换的子节点</span></span><br></pre></td></tr></table></div></figure>


        <h2 id="4-7-for循环和onclick事件中索引相关问题">
          <a href="#4-7-for循环和onclick事件中索引相关问题" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-7-for循环和onclick事件中索引相关问题" class="headerlink" title="4.7 for循环和onclick事件中索引相关问题"></a>4.7 <font color="red">for循环和onclick事件中索引相关问题</font></h2>
      <p>如代码：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="comment">//获取class名为“clickEle”的元素，长度为3</span></span><br><span class="line">		  <span class="keyword">var</span> clickEle = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;clickEle&quot;</span>);</span><br><span class="line">		<span class="comment">//遍历元素，为元素添加点击响应事件</span></span><br><span class="line">		  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; clickEle.<span class="property">length</span>; i++) &#123;</span><br><span class="line">			clickEle[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">		    <span class="title function_">alert</span>(clickEle[i] == <span class="variable language_">this</span>);</span><br><span class="line">		</span><br><span class="line">		  &#125;;</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


<p><strong>这个时候<code>alert(clickEle[i] == this);</code>弹出为false。由于for循环是在页面加载时就执行，而onclick事件是在点击的时候才执行，所以在onclick执行的时候for循环早就执行完了，那么点击事件的<code>clickEle[i]</code>也与for循环时就加载好的<code>clickEle[i]</code>即<code>this</code>也是不同的元素或值。</strong></p>

        <h1 id="5-使用DOM操作CSS">
          <a href="#5-使用DOM操作CSS" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-使用DOM操作CSS" class="headerlink" title="5. 使用DOM操作CSS"></a>5. 使用DOM操作CSS</h1>
      
        <h2 id="5-1通过JS修改元素的样式">
          <a href="#5-1通过JS修改元素的样式" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-1通过JS修改元素的样式" class="headerlink" title="5.1通过JS修改元素的样式"></a>5.1通过JS修改元素的样式</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//语法：</span></span><br><span class="line">元素.<span class="property">style</span>.样式名 = 样式值;</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注意：如果样式名中含有-，那么这种名称在JS中是不合法的，可能会被认为是减号，所以需要将这种样式名修改为驼峰命名法，即去掉-号，将-号后面的字母改为大写。可在CSS手册中参考对应样式JS写法的</font></strong></p>
<p><strong>通过style属性设置的样式都是内联样式，有较高的优先级。所以通过JS修改的样式往往会立即显示。<font color="green">但是如果在样式中写了<code>!important</code>，则此时样式会有最高的优先级，即使通过JS也不能覆盖该样式，此时会导致JS修改样式失效，所以尽量不要为样式添加<code>!important</code></font>“</strong></p>
<p><strong>如果想要样式表的样式生效，去除内联样式的话：<code>元素.style.样式名 = &quot;&quot;</code>即可</strong></p>

        <h2 id="5-2-读取内联样式">
          <a href="#5-2-读取内联样式" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-2-读取内联样式" class="headerlink" title="5.2 读取内联样式"></a>5.2 读取内联样式</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = 元素.<span class="property">style</span>.样式名;</span><br></pre></td></tr></table></div></figure>

<p>读取的也是内联样式的值，不能读出样式表的值</p>

        <h2 id="5-3-读取当前元素的样式-样式表">
          <a href="#5-3-读取当前元素的样式-样式表" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-3-读取当前元素的样式-样式表" class="headerlink" title="5.3 读取当前元素的样式(样式表)"></a>5.3 读取当前元素的样式(样式表)</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//语法</span></span><br><span class="line"></span><br><span class="line">元素.<span class="property">currentStyle</span>.样式名;</span><br><span class="line"></span><br><span class="line"><span class="comment">//用来读取当前元素正在显示的样式(包括内联样式或样式表样式)</span></span><br></pre></td></tr></table></div></figure>

<p><strong>currentStyle方法只有IE支持</strong></p>
<p><strong>其他浏览器中可以使用<code>getComputedStyle()方法</code>来获取元素的样式</strong></p>
<p><strong>两个参数：</strong></p>
<ul>
<li><ol>
<li>要获取样式对应的元素</li>
</ol>
</li>
<li><ol start="2">
<li>可以传递一个伪元素。一般都传递null</li>
</ol>
</li>
</ul>
<p><strong>该方法会返回一个对象，对象中封装了当前元素对应的样式，可以通过对象获取样式的值。该方法不支持IE8</strong></p>
<p>通过以上两种方法获取到的值都是只读的，不能修改。</p>

        <h2 id="5-4-clientWidth和clientHeight-x2F-offsetWidth和offsetHiehgt">
          <a href="#5-4-clientWidth和clientHeight-x2F-offsetWidth和offsetHiehgt" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-4-clientWidth和clientHeight-x2F-offsetWidth和offsetHiehgt" class="headerlink" title="5.4 clientWidth和clientHeight&#x2F;offsetWidth和offsetHiehgt"></a>5.4 clientWidth和clientHeight&#x2F;offsetWidth和offsetHiehgt</h2>
      <p><strong>clientWidth和clientHeight获取元素的可见宽度和可见高度，包括内容区和内边距，不包括边框。且返回的是数字，可以计算</strong></p>
<p><strong>offsetWidth和offsetHiehgt获取元素整个的宽度和高度，包括内容区，内边距和边框。返回的是数字，可以计算</strong></p>
<p><code>offset：偏离量</code></p>

        <h2 id="5-5-offsetParent-获取当前元素的定位父元素">
          <a href="#5-5-offsetParent-获取当前元素的定位父元素" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-5-offsetParent-获取当前元素的定位父元素" class="headerlink" title="5.5 offsetParent 获取当前元素的定位父元素"></a>5.5 offsetParent 获取当前元素的定位父元素</h2>
      <p>会获取到离当前元素最近的开启了定位的祖先元素</p>

        <h2 id="5-6-offsetLeft和offsetTop">
          <a href="#5-6-offsetLeft和offsetTop" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-6-offsetLeft和offsetTop" class="headerlink" title="5.6 offsetLeft和offsetTop"></a>5.6 offsetLeft和offsetTop</h2>
      <p><strong>offsetLeft：当前相对于其定位的父元素的水平偏移量(不包含PX单位)</strong></p>
<p><strong>offsetTop：当前相对于其定位的父元素的垂直偏移量(不包含PX单位)</strong></p>
<p><strong><font color="red" size="13">注意：offsetTop:是要包含top属性和margin-top属性的和的，offsetLeft同理</font></strong></p>

        <h2 id="5-7-scrollWidth和scrollHeight">
          <a href="#5-7-scrollWidth和scrollHeight" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-7-scrollWidth和scrollHeight" class="headerlink" title="5.7 scrollWidth和scrollHeight"></a>5.7 scrollWidth和scrollHeight</h2>
      <p>获取元素整个滚动区域的宽度和高度</p>

        <h2 id="5-8-scrollLeft和scrollTop">
          <a href="#5-8-scrollLeft和scrollTop" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-8-scrollLeft和scrollTop" class="headerlink" title="5.8 scrollLeft和scrollTop"></a>5.8 scrollLeft和scrollTop</h2>
      <p>可以获取当前带有滚动条的元素的水平或垂直滚动条滚动的距离 </p>
<p><strong>当满足<code>scrollHeight - scrollTop = clientHeight</code>时，证明垂直滚动条到底了。可以用来判断用户是否阅读完协议，即协议滚动条到底了。</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">info.<span class="property">onscroll</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;;</span><br><span class="line"><span class="comment">//滚动条滚动时触发</span></span><br></pre></td></tr></table></div></figure>


        <h1 id="6-事件对象">
          <a href="#6-事件对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-事件对象" class="headerlink" title="6. 事件对象"></a>6. 事件对象</h1>
      <p><strong>事件对象。当事件的响应函数被触发时，浏览器每次都会将一个事件对象作为一个实参传递进响应函数。在事件对象中封装了当前事件相关的一切信息，比如：鼠标的坐标，键盘哪个按键被按，鼠标滚轮滚的方向…1</strong></p>
<p><strong>IE8中，这个事件对象是作为window的属性event传递的，所以在使用时考虑到浏览器的兼容性，需要判断</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">a = b || c;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果a=b为true，返回b，否则和c对比，如果为true返回c</span></span><br></pre></td></tr></table></div></figure>


        <h2 id="6-1-clientX和clientY-元素跟随鼠标移动onmousemove">
          <a href="#6-1-clientX和clientY-元素跟随鼠标移动onmousemove" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-1-clientX和clientY-元素跟随鼠标移动onmousemove" class="headerlink" title="6.1 clientX和clientY(元素跟随鼠标移动onmousemove)"></a>6.1 clientX和clientY(元素跟随鼠标移动onmousemove)</h2>
      <p><strong>获取相对于浏览器可视区域的坐标</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> showDiv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;showDiv&quot;</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">onmousemove</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line"></span><br><span class="line">    showDiv.<span class="property">style</span>.<span class="property">top</span> = event.<span class="property">clientY</span>  + <span class="string">&quot;PX&quot;</span>;</span><br><span class="line">    showDiv.<span class="property">style</span>.<span class="property">left</span> = event.<span class="property">clientX</span>  + <span class="string">&quot;PX&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></div></figure>

<p>clientX和clientY是event对象的属性，用来获取当前鼠标在可见框的坐标，即鼠标在可见框中left和top对应的距离。</p>
<p>而元素本身css样式表中的left和top是相对于整个网页来计算的，如果网页出现滚动条滚动到下面，那么clientY获取到的值是鼠标相对于可见框的Y，如果直接赋值给元素的left属性，元素是相对于网页的top来计算，所以元素会往上走。</p>
<p><strong>用offsetX和offsetY或者pageX和pageY解决此问题</strong></p>
<p><strong>pageX和pageY获取鼠标相对于当前页面的坐标</strong></p>

        <h2 id="6-2-事件的冒泡">
          <a href="#6-2-事件的冒泡" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-2-事件的冒泡" class="headerlink" title="6.2 事件的冒泡"></a>6.2 事件的冒泡</h2>
      <p><strong>所谓的事件的冒泡，就是指的事件的向上传导。当后代元素上的事件被触发时，其祖先元素对应的同类型事件也会被触发。</strong></p>
<p><strong>取消冒泡</strong></p>
<p>可以将事件对象的cancelBubble设置为true取消冒泡</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a1.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params">event</span>)&#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;a1&quot;</span>);</span><br><span class="line">	event.<span class="property">cancelBubble</span> = <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></div></figure>


        <h2 id="6-3-事件的委派">
          <a href="#6-3-事件的委派" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-3-事件的委派" class="headerlink" title="6.3 事件的委派"></a>6.3 事件的委派</h2>
      <p>只绑定一次事件，即可应用到多个元素上，包括是后面添加的元素。</p>
<p><strong>将事件统一绑定给元素共同的祖先元素。这样当后代元素的事件触发时，会一直冒泡到祖先元素。从而通过祖先元素的响应函数来处理事件</strong></p>
<ul>
<li><p>事件的委派是利用了冒泡，通过委派可以减少事件绑定的次数，提高程序性能</p>
</li>
<li><p>如果触发事件的对象是我们期望的元素，则执行，否则不执行</p>
</li>
</ul>
<p><strong>event.target 返回触发此事件时的元素&#x2F;对象，可以通过此方法来判断当前点击的是否是期望的元素</strong></p>

        <h2 id="6-4-事件的绑定">
          <a href="#6-4-事件的绑定" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-4-事件的绑定" class="headerlink" title="6.4 事件的绑定"></a>6.4 事件的绑定</h2>
      <p>使用<code>对象.事件 = 函数;</code>的形式绑定响应函数，它只能同时为一个元素的一个事件绑定一个响应函数，不能绑定多个，如果绑定了多个，后面的会覆盖掉前边的。</p>
<p><strong>addEventListener.通过这个方法也可以为元素绑定响应函数</strong></p>
<ul>
<li><p>参数：</p>
</li>
<li><ol>
<li>事件的字符串，不要on。如”click”</li>
</ol>
</li>
<li><ol start="2">
<li>回调函数，当事件触发时该函数会被调用</li>
</ol>
</li>
<li><ol start="3">
<li>是否在捕获阶段触发事件，需要一个布尔值，一般false</li>
</ol>
</li>
</ul>
<p><strong>这样就可以为元素绑定多次的事件,按照顺序执行多次。</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="green">不支持IE8以下浏览器，在IE8中可以使用attachEvent()来绑定事件</font></strong></p>
<p>参数：</p>
<ul>
<li><ol>
<li>事件的字符串，要”on”</li>
</ol>
</li>
<li><ol start="2">
<li>回调函数</li>
</ol>
</li>
</ul>
<p><strong>不同的是后绑定的先执行</strong></p>
<p><em>addEventListener中的this是绑定事件的对象，IE中attachEvent中的this是window</em></p>

        <h2 id="6-5-事件的传播">
          <a href="#6-5-事件的传播" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-5-事件的传播" class="headerlink" title="6.5 事件的传播"></a>6.5 事件的传播</h2>
      <p><strong>W3C将事件传播分成了三个阶段：</strong></p>
<ul>
<li><p>捕获阶段：在捕获阶段时，从最外层的祖先元素，向目标元素进行事件的捕获，但是默认此时不会触发事件</p>
</li>
<li><p>目标阶段：事件捕获到目标元素，捕获结束开始在目标元素上触发事件</p>
</li>
<li><p>冒泡阶段：事件从目标元素向它的祖先元素传递，依次触发祖先元素上的事件</p>
</li>
</ul>
<p><strong>如果希望在捕获阶段就触发事件，可以在addEventListener()的第三个参数设置为true。这样在捕获阶段就会从父元素开始依次触发事件。</strong></p>
<p>不过一般情况下不会希望在捕获阶段就触发事件，所以通常写为false。</p>

        <h2 id="6-4-拖拽">
          <a href="#6-4-拖拽" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-4-拖拽" class="headerlink" title="6.4 拖拽"></a>6.4 拖拽</h2>
      <p>方法示例</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">td.<span class="property">onmousedown</span> = <span class="keyword">function</span>(<span class="params">eventDown</span>) &#123;</span><br><span class="line">    td.<span class="property">style</span>.<span class="property">zIndex</span> = idx;</span><br><span class="line">    <span class="keyword">var</span> currmouseX = eventDown.<span class="property">offsetX</span>;</span><br><span class="line">    <span class="keyword">var</span> currmouseY = eventDown.<span class="property">offsetY</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">onmousemove</span> = <span class="keyword">function</span>(<span class="params">eventMove</span>) &#123;</span><br><span class="line">        td.<span class="property">style</span>.<span class="property">left</span> = eventMove.<span class="property">pageX</span> - currmouseX + <span class="string">&quot;PX&quot;</span>;</span><br><span class="line">        td.<span class="property">style</span>.<span class="property">top</span> = eventMove.<span class="property">pageY</span> - currmouseY + <span class="string">&quot;PX&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">onmouseup</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">onmousemove</span> = <span class="literal">null</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">onmouseup</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        idx++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注意：浏览器自身也会有一些拖动的行为，比如ctrl+a全选后，再次拖动后浏览器会有其他的行为（比如浏览器中的文字也被选中拖动，此时鼠标就变成别的了，那么松开鼠标的事件执行不了。）可以在onmousedown方法的最后<code>return false;</code>解决</font></strong></p>
<blockquote>
<p>return false;可以取消一些事件的默认行为，比如默认点击a标签会跳转页面，return false后就不会跳转了</p>
</blockquote>
<p><strong>此方法<code>return false</code>在IE8不支持。可以用<code>ele.setCapture()</code>，也就是当选中了其他元素，也会被ele元素捕获，成为选中了ele元素，就可正常拖拽了。最后也要进行释放<code>ele.releaseCapture()</code>方法。此方法谷歌浏览器不兼容会报错，所以要判断。<code>ele.setCapture &amp;&amp; ele.setCapture()</code>:意思是第一个执行成功了(非undefined)后面的方法才会执行</strong></p>

        <h2 id="6-5-滚轮">
          <a href="#6-5-滚轮" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-5-滚轮" class="headerlink" title="6.5 滚轮"></a>6.5 滚轮</h2>
      <p>onmousewheel鼠标滚轮滚动的事件，会在鼠标滚轮滚动的时候触发。 </p>

        <h1 id="7-BOM">
          <a href="#7-BOM" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-BOM" class="headerlink" title="7. BOM"></a>7. BOM</h1>
      <p><strong>浏览器对象模型。BOM可以使我们通过JS来操作浏览器。DOM操作网页，BOM操作浏览器</strong></p>
<p><strong>在BOM中为我们提供了一组对象，用来完成对浏览器的操作</strong></p>
<p><strong>- BOM对象</strong></p>
<ul>
<li><p>Window</p>
<p>Window对象代表的是整个浏览器的窗口，同时Window也是网页中的全局对象。</p>
</li>
<li><p>Navigator(导航)</p>
<p>代表的当前浏览器的信息，通过该对象可以来识别不同的浏览器</p>
<p>一般只会使用userAgent来判断浏览器的信息，判断IE11不可以用这个，因为没有标识IE的信息。但是IE独有一个ActiveXObject对象。</p>
  <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">alert</span>(<span class="variable language_">window</span>.<span class="property">ActiveXObject</span>);</span><br><span class="line"><span class="comment">//如果有，打印true</span></span><br></pre></td></tr></table></div></figure>

<p>  <strong>这个属性IE11把它的值改成false了。</strong></p>
<p>  <strong><font color="red">可以通过<code>alert(&quot;ActiveXObject&quot; in window);</code>来判断是否有这个方法，就都返回true了。</font></strong></p>
</li>
<li><p>Location</p>
<p>代表当前浏览器的地址栏信息，通过Location可以获取地址栏信息，或者操作浏览器跳转页面</p>
<p><strong>直接打印location，则可以获取到地址栏信息，（当前页面的完整路径）</strong></p>
<ol>
<li>reload(),普通刷新</li>
<li>reload(true),强制清空缓存刷新</li>
<li>replace(),使用一个新的页面替换当前页面，调用完毕后也会跳转界面，但是不会生成历史记录，不能使用回退按钮回退地址</li>
</ol>
</li>
<li><p>History</p>
<p>代表浏览器的历史记录，可以通过该对象来操作浏览器的历史记录。由于隐私原因，该对象不能获取到具体的历史记录，只能操作浏览器向前或向后。且该操作只在当次访问时有效。（当次打开的浏览器）</p>
<p><strong><font color="green">属性，方法</font></strong></p>
<ol>
<li>length，可以获取到当前访问的链接数量</li>
<li>back();退到上一个页面，作用和浏览器的后腿按钮一样</li>
<li>forward();可以跳转到下一个页面，作用和浏览器的前进按钮一样</li>
<li>go();可以跳转到指定页面，需要一个整数作为参数。<ol>
<li>参数：go(1)表示向前跳转一个页面</li>
<li>参数：go(2)表示向前跳转两个页面</li>
<li>参数：go(-1)表示向后跳转一个页面</li>
<li>参数：go(-2    )表示向后跳转两个有河面</li>
</ol>
</li>
</ol>
</li>
<li><p>Screen</p>
</li>
</ul>
<p><strong>这些对象可以直接使用，或者通过Window对象使用</strong></p>

        <h1 id="8-定时器">
          <a href="#8-定时器" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-定时器" class="headerlink" title="8. 定时器"></a>8. 定时器</h1>
      <p><strong>定时调用setInterval，可以将一个函数每隔一段时间执行一次</strong></p>
<p><strong><font color="red">参数：</font></strong></p>
<ol>
<li><p>回调函数，该函数会每隔一段时间被调用一次</p>
</li>
<li><p>每次调用间隔的时间，单位是毫秒</p>
</li>
</ol>
<p><strong><font color="red">返回值：</font></strong></p>
<p>将一个数字作为返回值，这个数字用来作为定时器的唯一标识。</p>
<p><strong>clearInterval()，关闭定时器，方法中需要一个定时器的标识作为参数，这样将关闭标识对应的定时器。<font color="red">参数也可以闯入其他数据类型，比如null，undefined，不过如果找不到对应定时器，不会有任何执行</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> imgArr = [<span class="string">&quot;./images/h1.jpg&quot;</span>, <span class="string">&quot;./images/h2.jpg&quot;</span>, <span class="string">&quot;./images/h3.jpg&quot;</span>, <span class="string">&quot;./images/h4.jpg&quot;</span>, <span class="string">&quot;./images/h5.jpg&quot;</span>];</span><br><span class="line">        <span class="keyword">var</span> idx = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">var</span> setIdx;</span><br><span class="line">        <span class="comment">//获取开始按钮</span></span><br><span class="line">        <span class="keyword">var</span> onStart = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;onSetInterval&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">        onStart.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">			<span class="comment">//开启定时器之前，需要将当前元素上的其他定时器关闭</span></span><br><span class="line">            <span class="built_in">clearInterval</span>(setIdx);</span><br><span class="line">            setIdx = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">                idx++;</span><br><span class="line">                <span class="keyword">if</span> (idx &gt;= imgArr.<span class="property">length</span>) &#123;</span><br><span class="line">                    idx = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">var</span> eleImg = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;img&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">                eleImg.<span class="property">src</span> = imgArr[idx];</span><br><span class="line">            &#125;, <span class="number">1000</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//获取停止按钮</span></span><br><span class="line">        <span class="keyword">var</span> offend = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;offSetInterval&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        offend.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (setIdx != <span class="literal">undefined</span>) &#123;</span><br><span class="line">                <span class="built_in">clearInterval</span>(setIdx);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>每点击一次按钮，就会开启一个定时器，点击多次就会开启多个定时器，这就导致图片的切换速度过快。并且关闭时只能关闭最后一次新创建的定时器，之前的无法关闭。</p>
</blockquote>
<p><strong>在开启定时器之前，需要将当前元素的其他定时器关闭。</strong></p>
<p><strong><font color="red">注意：像onkeydown，onmousemove这种事件，可能在触发时执行了多次，如果在这些事件中写了定时器，那定时器也会创建很多个。</font></strong></p>
<p>使用setInterval()判断长按；</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">onkeydown</span> = <span class="keyword">function</span>(<span class="params">eventKD</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">        longDown = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">			<span class="comment">//持续按键超过1.5S，判断为长按，速度加50</span></span><br><span class="line">            speed = <span class="number">50</span>;</span><br><span class="line">        &#125;, <span class="number">1500</span>);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//flag为false，每次长按只创建一个定时器</span></span><br><span class="line">    flag = <span class="literal">false</span>;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">onkeyup</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">//松开按键时清除定时器，速度重新变为10，flag变为true</span></span><br><span class="line">    <span class="built_in">clearInterval</span>(longDown);</span><br><span class="line">    speed = <span class="number">10</span>;</span><br><span class="line">    flag = <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="blue" size="6">定时器的创建，如果是动画效果，要看该动画效果是并行还是串行，从而决定只创建一个定时器还是每次执行时都各创建一个定时器</font></strong></p>

        <h1 id="9-延时调用setTimeout">
          <a href="#9-延时调用setTimeout" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-延时调用setTimeout" class="headerlink" title="9. 延时调用setTimeout();"></a>9. 延时调用setTimeout();</h1>
      <p><strong>一个函数不马上执行，而是隔一段时间后执行</strong></p>
<p><strong>clearTimeout(timer);关闭一个延时调用</strong></p>
<blockquote>
<p>和定时调用实际上是可以互相代替的。可以互相实现对方的功能，可以根据自己的需要选择。</p>
</blockquote>
<p>&#x2F;&#x2F;一个公用的移动方法</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定时器</span></span><br><span class="line"><span class="keyword">var</span> currTimer = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">move</span>(<span class="params">obj, attr, target, speed, funcallback</span>) &#123;</span><br><span class="line"></span><br><span class="line">	<span class="title function_">funcallback</span>();</span><br><span class="line">    <span class="built_in">clearInterval</span>(currTimer);</span><br><span class="line">    <span class="comment">//当前元素属性值</span></span><br><span class="line">    <span class="keyword">var</span> currAttr = <span class="built_in">parseInt</span>(<span class="title function_">getComputedStyle</span>(obj, <span class="literal">null</span>)[attr]);</span><br><span class="line"></span><br><span class="line">    currTimer = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//获取更改后的属性值</span></span><br><span class="line">        <span class="keyword">var</span> currAttrNum = <span class="built_in">parseInt</span>(<span class="title function_">getComputedStyle</span>(obj, <span class="literal">null</span>)[attr]);</span><br><span class="line">        <span class="comment">//判断目标位置是否小于当前位置，小于的话则往左滑动</span></span><br><span class="line">        <span class="keyword">if</span> (target &lt;= currAttr) &#123;</span><br><span class="line">            <span class="comment">//判断此次滑动后距离是否小于目标位置，小于的话这次滑动直接等于目标位置</span></span><br><span class="line">            <span class="keyword">if</span> ((currAttrNum - speed) &lt; target) &#123;</span><br><span class="line">                obj.<span class="property">style</span>[attr] = target + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">                <span class="built_in">clearInterval</span>(currTimer);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//否则继续减小</span></span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                obj.<span class="property">style</span>[attr] = (currAttrNum - speed) + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//判断目标位置是否大于当前位置，大于的话则往左滑动</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> ((currAttrNum + speed) &gt; target) &#123;</span><br><span class="line">                obj.<span class="property">style</span>[attr] = target + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">                <span class="built_in">clearInterval</span>(currTimer);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                obj.<span class="property">style</span>[attr] = (currAttrNum + speed) + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h1 id="10-无线循环轮播图">
          <a href="#10-无线循环轮播图" class="heading-link"><i class="fas fa-link"></i></a><a href="#10-无线循环轮播图" class="headerlink" title="10 无线循环轮播图"></a>10 无线循环轮播图</h1>
      <p><img src="/2021/10/31/02-JS-DOM/lbt.bmp"></p>
<ul>
<li><strong>1.示例</strong></li>
</ul>
<video width="320" height="240" controls>
<source src="02-JS-DOM/20211128_195801.mp4" type="video/mp4">
您的浏览器不支持播放视频
</video>


<ul>
<li><strong><font color="red">2. 注意事项：</font></strong></li>
</ul>
<p><strong><font color="green">(1)在HTML代码中的最后一个图片标签设置为和第一个图片标签一致，这样可以有网页效果上的最后一张切换到第一张的效果</font></strong></p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;imgList&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/jojo/j1.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/jojo/j2.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/jojo/j3.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/jojo/j4.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/jojo/j5.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/jojo/j1.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p><strong><font color="green">(2)在为下面的索引方框绑定点击响应事件时添加idx的属性，保存它们当前的下标。原因是点击事件是在网页加载完后执行的，而循环事件是在网页加载时执行。在网页加载完后，循环早已结束，下标也固定在最后一个。</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; navArr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="comment">//保存当前循环到元素的索引</span></span><br><span class="line">    navArr[i].<span class="property">idx</span> = i;</span><br><span class="line">	navArr[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="green">(3)在自动执行播放到代码的最后一张图片后，将图片索引改为1，包含块left值改为0，则开始新一轮的循环</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">if</span> (aIdx &gt;= (imgArr.<span class="property">length</span> - <span class="number">1</span>)) &#123;</span><br><span class="line"></span><br><span class="line">    aIdx = <span class="number">0</span>;</span><br><span class="line">    imgList.<span class="property">style</span>.<span class="property">left</span> = <span class="string">&quot;0px&quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="green">(4)那么相应的，如果在点击方块索引后，也要判断如果当前轮播到的图片是代码的最后一张，则包含块的left值改为0</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">navArr[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">	<span class="title function_">move</span>(imgList, <span class="string">&quot;left&quot;</span>, (-oneImgWidth * <span class="variable language_">this</span>.<span class="property">idx</span>), <span class="number">10</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">	    <span class="keyword">if</span> (reAidx &gt;= (imgArr.<span class="property">length</span> - <span class="number">1</span>)) &#123;</span><br><span class="line">	        imgList.<span class="property">style</span>.<span class="property">left</span> = <span class="string">&quot;0px&quot;</span>;</span><br><span class="line">	    &#125;</span><br><span class="line">	    <span class="title function_">autoChange</span>();</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></div></figure>



        <h1 id="11-类相关操作">
          <a href="#11-类相关操作" class="heading-link"><i class="fas fa-link"></i></a><a href="#11-类相关操作" class="headerlink" title="11. 类相关操作"></a>11. 类相关操作</h1>
      <p><strong>可以通过元素的class属性来间接的修改元素的样式</strong></p>
<figure class="highlight css"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.b1</span>&#123;</span><br><span class="line"> <span class="attribute">width</span>:<span class="number">100px</span>;</span><br><span class="line"> <span class="attribute">height</span>:<span class="number">100px</span>;</span><br><span class="line"> <span class="attribute">color</span>:red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.b2</span>&#123;</span><br><span class="line"> <span class="attribute">width</span>:<span class="number">200px</span>;</span><br><span class="line"> <span class="attribute">height</span>:<span class="number">200px</span>;</span><br><span class="line"> <span class="attribute">color</span>:yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">box.<span class="property">className</span> = <span class="string">&quot;b2&quot;</span>;</span><br></pre></td></tr></table></div></figure>

<p><strong>这样一来，我们只需要修改一次，即可同时修改多个样式</strong></p>
<p>浏览器只需要重新渲染页面一次，性能比较好，并且这种方式，可以使表现和行为进一步分离</p>
<p><strong><font color="green">如果想要继承修改前的样式，使用<code>+= &quot; b2&quot;</code></font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">box.<span class="property">className</span> += <span class="string">&quot; b2&quot;</span>;</span><br></pre></td></tr></table></div></figure>

<p><em>先判断是否含有此class，再添加</em></p>

        <h1 id="12-JSON">
          <a href="#12-JSON" class="heading-link"><i class="fas fa-link"></i></a><a href="#12-JSON" class="headerlink" title="12.JSON"></a>12.JSON</h1>
      <p>JSON：Javascript Object     Natation JS对象表示法</p>
<p>JSON和JS对象的格式一样，只不过JSON字符串中的属性名必须加双引号，其他和JS一致</p>

        <h2 id="12-1-JSON分类">
          <a href="#12-1-JSON分类" class="heading-link"><i class="fas fa-link"></i></a><a href="#12-1-JSON分类" class="headerlink" title="12.1 JSON分类"></a>12.1 JSON分类</h2>
      <p><strong>JSON对象</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="string">&#x27;&#123;&quot;name&quot;:&quot;zs&quot;,&quot;age&quot;:&quot;18&quot;&#125;&#x27;</span>;</span><br></pre></td></tr></table></div></figure>

<p><strong>JSON数组</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="string">&#x27;1,2,3,&quot;hello&quot;&#x27;</span>;</span><br></pre></td></tr></table></div></figure>

<p>JSON允许的值：</p>
<ol>
<li><p>字符串</p>
</li>
<li><p>数值</p>
</li>
<li><p>布尔值</p>
</li>
<li><p>null</p>
</li>
<li><p>对象</p>
</li>
<li><p>数组</p>
</li>
</ol>
<p><strong>因为JSON是字符串，要想要在JS中使用需要将其转换为JS中的对象</strong></p>
<p>JSON:此对象可以将JSON转换为JS对象，也可以将JS对象转换为JSON</p>
<ul>
<li><strong>JSON→JS对象</strong></li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JSON.parse();</span><br></pre></td></tr></table></div></figure>
<p><em>需要一个JSON字符串作为参数</em></p>
<ul>
<li><strong>JS对象→JSON</strong></li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JSON.stringify();</span><br></pre></td></tr></table></div></figure>
<p><em>需要一个JS对象作为参数，会返回一个JSON字符串</em></p>
<p>JS高级4</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/10/28/LINUX%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99/">LINUX搭建静态网站</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-10-28</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-21</span></span></div></header><div class="post-body"><div class="post-excerpt"><p><strong>安装httpd</strong></p>
<ol>
<li>查看是否安装httpd(Apache)及软件包管理器yum</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -ql httpd</span><br><span class="line">rpm -ql yum</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>安装httpd，如果安装就跳过</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install httpd</span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>重启httpd服务</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart httpd</span><br></pre></td></tr></table></div></figure>

<ol start="4">
<li>浏览器测试</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://公网IP地址</span><br></pre></td></tr></table></div></figure>


        <h1 id="指令">
          <a href="#指令" class="heading-link"><i class="fas fa-link"></i></a><a href="#指令" class="headerlink" title="指令"></a>指令</h1>
      <h2 id><a href="#" class="headerlink" title></a></h2><p><strong>查看空间</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df</span><br></pre></td></tr></table></div></figure>

<p><strong>查看当前面目录所占空间大小</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -sh</span><br></pre></td></tr></table></div></figure>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/09/22/01-JS/">01-JS</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-09-22</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-21</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="数据类型">
          <a href="#数据类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1>
      <p>JS的数据类型：字符串，Number，Boolean，Null，Undefined</p>

        <h1 id="1-运算符">
          <a href="#1-运算符" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-运算符" class="headerlink" title="1.运算符"></a>1.运算符</h1>
      <p><strong>任何值做- * &#x2F;的运算时都会先把值自动转换为Number类型，再运算</strong></p>

        <h3 id="1-1与运算">
          <a href="#1-1与运算" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-1与运算" class="headerlink" title="1.1与运算"></a>1.1与运算</h3>
      <p><strong>1.1.1如果两个值都为true，返回后边的值</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var result = 1 &amp;&amp; 2;</span><br><span class="line">//result为2</span><br></pre></td></tr></table></div></figure>

<p><strong>1.1.2如果两个值都为false，返回前边的值</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var result = 0 &amp;&amp; NAN;</span><br><span class="line">//result为0</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>1.1.3如果一个值为true，一个值为false，返回false的值</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var result = 0 &amp;&amp; 1;</span><br><span class="line">//result为0</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="1-2或运算">
          <a href="#1-2或运算" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-2或运算" class="headerlink" title="1.2或运算"></a>1.2或运算</h3>
      <p><strong>同上，从前往后只要找到true的值直接返回，如果全是false，则返回最后一个false</strong></p>

        <h3 id="1-3比较运算符">
          <a href="#1-3比较运算符" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-3比较运算符" class="headerlink" title="1.3比较运算符"></a>1.3比较运算符</h3>
      <p><strong>&gt; &lt; &#x3D; &gt;&#x3D; &lt;&#x3D;</strong></p>
<blockquote>
<p>对于非数字进行比较时，会先将其转换成数字，然后再比较(需要有一边是Number类型)</p>
</blockquote>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var result = 1 &gt; &quot;0&quot;;</span><br><span class="line">//会先将字符串&quot;0&quot;转换成数字0，再比较</span><br><span class="line"></span><br><span class="line">var result = 10 &gt; null;</span><br><span class="line">//会先将null转换成0，再比较</span><br><span class="line"></span><br><span class="line">var result =  10 &lt; &quot;hello&quot;;</span><br><span class="line">//会先将&quot;hello&quot;转换成NAN再比较</span><br></pre></td></tr></table></div></figure>

<p><strong>任何值和NAN进行比较都是false。</strong></p>
<p><strong><font color="red">如果符号两侧都是字符串时，不会将其两侧都转化为数字，而会分别比较字符串中字符的Unicode编码。</font></strong></p>
<p><strong>比较字符编码时是一位一位的比较，如果字符相同，看左右边的下一位</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&quot;abc&quot;&lt;&quot;c&quot;</span><br><span class="line">//&quot;a&quot;和&quot;c&quot;比，true</span><br><span class="line"></span><br><span class="line">&quot;a&quot;&lt;&quot;aab&quot;</span><br><span class="line">/**     &quot;a&quot;和&quot;a&quot;比，下一位</span><br><span class="line">  *     &quot;&quot;和&quot;a&quot;比，true</span><br><span class="line">  **/</span><br><span class="line"></span><br><span class="line">&quot;abcdefg&quot; &lt; &quot;abcdefa&quot;</span><br><span class="line">/**&quot;a&quot;和&quot;a&quot;比，下一位</span><br><span class="line">  *&quot;b&quot;和&quot;b&quot;比，下一位</span><br><span class="line">  *&quot;c&quot;和&quot;c&quot;比，下一位</span><br><span class="line">  *&quot;d&quot;和&quot;d&quot;比，下一位</span><br><span class="line">  *&quot;e&quot;和&quot;e&quot;比，下一位</span><br><span class="line">  *&quot;f&quot;和&quot;f&quot;比，下一位</span><br><span class="line">  *&quot;g&quot;和&quot;a&quot;比，false</span><br><span class="line">  **/</span><br><span class="line"></span><br><span class="line">&quot;16&quot;&lt;&quot;5&quot;</span><br><span class="line">/**&quot;1&quot;和&quot;5&quot;比，true,成立直接出结果</span><br><span class="line">  **/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;52&quot;&lt;&quot;5&quot;</span><br><span class="line">/**     &quot;5&quot;和&quot;5&quot;比，相同，下一位</span><br><span class="line">  *     &quot;2&quot;和&quot;&quot;比，false</span><br><span class="line">  **/</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>可以借此对英文进行排序</p>
</blockquote>
<blockquote>
<p>如果两边数字都是字符串，那么需要转换后对比。</p>
</blockquote>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;5&quot; &lt; +&quot;100&quot;;</span><br><span class="line">//可以前面加一个+符号，隐式转换为数字</span><br></pre></td></tr></table></div></figure>


        <h3 id="1-4相等运算符">
          <a href="#1-4相等运算符" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-4相等运算符" class="headerlink" title="1.4相等运算符"></a>1.4相等运算符</h3>
      <p>&#x3D;&#x3D;</p>
<p><strong>如果左右两边的值类型不一样，则会先将其类型转换成同一个类型，再对比</strong></p>
<p><strong>NaN不和任何值相等，可以用isNaN()函数判断一个值是否是NaN</strong></p>
<p>&#x3D;&#x3D;&#x3D;</p>
<p><strong>全等，不会将值进行自动类型转换，如果左右两边的值不同，直接返回false</strong></p>
<p><strong><h1><font color="orange">布尔值的转换，除了以下6个值，其他值都换被转换为true</font></h1></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">undefined</span></span><br><span class="line"><span class="literal">null</span></span><br><span class="line">-<span class="number">0</span></span><br><span class="line">+<span class="number">0</span></span><br><span class="line"><span class="title class_">NaN</span></span><br><span class="line">‘’（空字符串）</span><br></pre></td></tr></table></div></figure>



        <h1 id="2-对象">
          <a href="#2-对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-对象" class="headerlink" title="2.对象"></a>2.对象</h1>
      <p><strong>1.内建对象</strong></p>
<ul>
<li>由ES标准中定义的对象，在任何的ES的实现中都可以使用。如：Math，String，Number，Boolean，Function，Object….</li>
</ul>
<p><strong>2.宿主对象</strong></p>
<ul>
<li>由JS的运行环境提供的对象，目前来讲主要指由浏览器提供的对象，如：BOM,DOM</li>
</ul>
<p><strong>3.自定义对象</strong></p>
<ul>
<li>由开发人员自己创建的对象</li>
</ul>

        <h2 id="2-1创建对象">
          <a href="#2-1创建对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-1创建对象" class="headerlink" title="2.1创建对象"></a>2.1创建对象</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> object = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br></pre></td></tr></table></div></figure>

<ul>
<li><p>使用NEW关键字调用的函数，是构造函数constructor。构造函数是专门用来创建对象的函数。</p>
</li>
<li><p>使用typeof检查一个对象时，返回object</p>
</li>
</ul>
<p><strong>在对象中保存的值成为属性。</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//对象.属性名 = 属性值;</span><br><span class="line"></span><br><span class="line">object.name = &quot;孙悟空&quot;;</span><br><span class="line"></span><br><span class="line">object.gender = &quot;男&quot;;</span><br><span class="line"></span><br><span class="line">object.age = 18;</span><br></pre></td></tr></table></div></figure>

<p><strong>读取对象中的属性</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(object.name);</span><br></pre></td></tr></table></div></figure>

<p>注：如果读取对象中没有的属性，返回undefined；</p>
<p><strong>修改对象属性值</strong></p>
<p>覆盖即可</p>
<p><strong>删除对象的属性</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//delete 对象.属性名;</span></span><br><span class="line"><span class="keyword">delete</span> object.<span class="property">name</span>;</span><br></pre></td></tr></table></div></figure>

<p><strong>如果想用特殊的属性名，如123，则需要另一种方式：</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">obj[&quot;123&quot;] = 789;</span><br><span class="line">//读取</span><br><span class="line">console.log(obj[&quot;123&quot;]);</span><br></pre></td></tr></table></div></figure>

<p>此种方法可以在[]中传递一个变量。更加灵活，且[]中应是字符串，如果里面不是变量而是对象的属性的话应该加双引号</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var n = &quot;123&quot;;</span><br><span class="line">console.log(obj[n]);</span><br><span class="line">//同样输出789</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">一个对象的属性值可以是另外一个对象,也可以是一个函数</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">obj.<span class="property">name</span> = <span class="string">&quot;张安&quot;</span>;</span><br><span class="line">obj.<span class="property">meth</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用对象下的函数</span></span><br><span class="line">obj.<span class="title function_">meth</span>();</span><br></pre></td></tr></table></div></figure>

<p><strong>in 运算符</strong></p>
<p>通过该运算符可以检查一个对象中是否含有指定的属性，有则true，无则false。</p>
<ul>
<li>语法：</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&quot;属性名&quot; in 对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;test2&quot;</span> <span class="keyword">in</span> obj);</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h2 id="2-2基本数据类型和引用数据类型">
          <a href="#2-2基本数据类型和引用数据类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-2基本数据类型和引用数据类型" class="headerlink" title="2.2基本数据类型和引用数据类型"></a>2.2基本数据类型和引用数据类型</h2>
      <p>基本数据类型：String Number Boolean Null Undefined</p>
<p>引用数据类型：Object</p>
<p><strong>JS中的变量都是保存到栈内存中：基本数据类型的值直接在栈内存中存储，值与值之间是独立存在的，修改一个变量不会影响其他的变量</strong></p>
<p><strong>对象保存在堆内存中，每创建一个新的对象，就会在堆内存中开辟出一个新的空间，而变量保存的是对象的内存地址(对象的引用)，如果两个变量保存的是同一个对象引用，当一个通过一个变量修改属性时，另一个也会受到影响。</strong></p>
<p><img src="/2021/09/22/01-JS/%E5%BC%95%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png" alt="引用数据类型"></p>
<p>所以：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">obj.<span class="property">name</span> = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> obj2 = obj;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>obj和obj2都在栈内存中，保存的是在堆内存新建的一个空间的地址。,如果</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">obj = <span class="literal">null</span>;</span><br></pre></td></tr></table></div></figure>

<p>此时也不会影响到obj2的值，因为此时obj的值从保存的地址变为了null，从而与堆内存新建的空间的地址断开了联系。</p>
<p><strong>比较</strong></p>
<ul>
<li><p>当比较两个基本数据类型的值时，就是比较值</p>
</li>
<li><p>当比较两个引用数据类型时，它是比较的对象的内存地址。如果两个对象时一模一样的，但是地址不同，也会返回的false</p>
</li>
</ul>

        <h2 id="2-3对象字面量">
          <a href="#2-3对象字面量" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-3对象字面量" class="headerlink" title="2.3对象字面量"></a>2.3对象字面量</h2>
      <p><strong>使用对象字面量来创建一个对象</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;&#125;;</span><br><span class="line">obj.name = &quot;张三&quot;;</span><br></pre></td></tr></table></div></figure>

<p>使用对象字面量，可以在创建对象时，直接指定对象中的属性。</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">var</span> obj = &#123;</span><br><span class="line">       <span class="string">&quot;name&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">       <span class="attr">age</span>: <span class="number">14</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(obj[<span class="string">&quot;age&quot;</span>]);</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(obj[<span class="string">&quot;name&quot;</span>]);</span><br><span class="line"><span class="comment">//可正常输出</span></span><br></pre></td></tr></table></div></figure>

<p><strong>对象字面量的属性名可以加引号，也可以不加。建议不加</strong></p>
<p>如果要使用特殊的属性名称，需要加引号。如:{“^%%$^&amp;”:”张三”};</p>

        <h2 id="2-4创建对象的方式">
          <a href="#2-4创建对象的方式" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-4创建对象的方式" class="headerlink" title="2.4创建对象的方式"></a>2.4创建对象的方式</h2>
      
        <h3 id="2-4-1-使用工厂方法创建对象">
          <a href="#2-4-1-使用工厂方法创建对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-4-1-使用工厂方法创建对象" class="headerlink" title="2.4.1.使用工厂方法创建对象"></a>2.4.1.使用工厂方法创建对象</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//通过该方法可以批量创建对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">creatPerson</span>(<span class="params">name,age,gender</span>)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">	obj.<span class="property">name</span> = name;</span><br><span class="line">	obj.<span class="property">age</span> = age;</span><br><span class="line">	obj.<span class="property">gender</span> = gender;</span><br><span class="line">	obj.<span class="property">sayName</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="comment">//此处this指代obj</span></span><br><span class="line">		<span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//生成</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> per1 = <span class="title function_">creatPerson</span>(<span class="string">&quot;张三&quot;</span>,<span class="number">18</span>,<span class="string">&quot;男&quot;</span>);</span><br><span class="line">	<span class="keyword">var</span> per2 = <span class="title function_">creatPerson</span>(<span class="string">&quot;李四&quot;</span>,<span class="number">28</span>,<span class="string">&quot;女&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line"></span><br><span class="line"># <span class="number">3.</span>函数 #</span><br><span class="line"></span><br><span class="line">**函数也是一个对象**</span><br><span class="line"></span><br><span class="line">## <span class="number">3.1</span>使用构造函数创建一个函数对象 ##</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`JS</span></span><br><span class="line"><span class="string">var fun = new Function(&quot;console.log(&#x27;一个函数&#x27;);&quot;);</span></span><br><span class="line"><span class="string">//调用</span></span><br><span class="line"><span class="string">fun();</span></span><br><span class="line"><span class="string">fun.name = &quot;hello&quot;;//添加属性</span></span><br><span class="line"><span class="string">console.log(typeof fun);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//使用typeof检查一个函数对象时，会返回function</span></span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">实际开发中，很少使用构造函数来创建一个函数对象</font></strong></p>

        <h2 id="3-2使用函数声明来创建一个函数">
          <a href="#3-2使用函数声明来创建一个函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-2使用函数声明来创建一个函数" class="headerlink" title="3.2使用函数声明来创建一个函数"></a>3.2使用函数声明来创建一个函数</h2>
      <ul>
<li>函数声明创建</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  *    function 函数名([形参1,形参2,形参3])&#123;</span></span><br><span class="line"><span class="comment">  *	     语句...</span></span><br><span class="line"><span class="comment">  *	   &#125;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun1</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ul>
<li>函数表达式创建</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  *  var 函数名 = function([形参1,形参2,形参3])&#123;</span></span><br><span class="line"><span class="comment">  *  </span></span><br><span class="line"><span class="comment">  *     语句...</span></span><br><span class="line"><span class="comment">  *  &#125;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fun2 = <span class="keyword">function</span>(<span class="params">a,b,c</span>)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;匿名函数&quot;</span>+a+b+c);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//即创建一个匿名函数赋值给一个变量</span></span><br><span class="line"><span class="comment">//调用</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">fun2</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br></pre></td></tr></table></div></figure>
<p><strong><font color="red">赋值语句中的匿名函数最后要加分号。</font></strong></p>
<blockquote>
<p>调用函数时解析器不会检查实参的类型和数量。多余的实参不会被赋值，如果实参的数量少于形参的数量，则没有对应实参的形参将会是undefined</p>
</blockquote>
<p><strong><font color="red">注：<code>var a = function()&#123;&#125;;</code>与<code>var a = function b()&#123;&#125;;</code>没有区别</font></strong></p>
<p><strong>实参可以是一个对象，也可以是一个函数</strong></p>
<p>例：传递匿名函数</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params">mth</span>)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="title function_">mth</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fun</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hi&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fun</span>(sayHello);</span><br><span class="line"><span class="comment">//输出Hello</span></span><br></pre></td></tr></table></div></figure>

<p><strong>函数fun()和fun当实参的区别</strong></p>
<blockquote>
<p>sayHello()指调用函数，相当于使用的参数是函数的返回值。如果没有返回值，返回undefined</p>
</blockquote>
<blockquote>
<p>sayHello指函数对象,使用的参数是函数本身</p>
</blockquote>
<p><strong>如果是匿名函数当了实参，那么就相当于fun，是一个函数对象，调用时需要<code>形参();</code></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fun</span>(sayHello);</span><br><span class="line"></span><br><span class="line"><span class="title function_">fun</span>(<span class="title function_">sayHello</span>());</span><br></pre></td></tr></table></div></figure>


<p><strong><font color="red" size="12">★函数fun()和fun的区别</font></strong></p>
<p><strong><font color="green" size="5">＄当一个变量被赋值fun，那么就是将函数对象fun赋值给变量;当一个变量被赋值fun(),那么就是先执行了这个函数，然后将fun()的返回值赋值给变量</font></strong></p>

        <h2 id="3-3立即执行函数">
          <a href="#3-3立即执行函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-3立即执行函数" class="headerlink" title="3.3立即执行函数"></a>3.3立即执行函数</h2>
      <p><strong>函数定义完，立即被调用，这种函数叫做立即执行函数</strong></p>
<p><strong>立即执行函数往往只会执行一次</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;a+b = &quot;</span>+(a+b));</span><br><span class="line">&#125;)(<span class="number">1</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></div></figure>

<p><strong>枚举对象中所有的属性名称</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">obj.<span class="property">name</span> = <span class="string">&quot;zs&quot;</span>;</span><br><span class="line">obj.<span class="property">age</span> = <span class="number">15</span>;</span><br><span class="line">obj.<span class="property">address</span> = <span class="string">&quot;北京&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> a <span class="keyword">in</span> obj) &#123;</span><br><span class="line">	<span class="comment">//属性名</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(a + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	<span class="comment">//属性值</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(obj[a] + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h1 id="4-作用域">
          <a href="#4-作用域" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-作用域" class="headerlink" title="4.作用域"></a>4.作用域</h1>
      <ul>
<li><p>作用域指一个变量的作用的范围</p>
</li>
<li><p>在JS中一共两种作用域</p>
</li>
</ul>

        <h2 id="4-1-全局作用域">
          <a href="#4-1-全局作用域" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-1-全局作用域" class="headerlink" title="4.1. 全局作用域"></a>4.1. 全局作用域</h2>
      <ul>
<li><p>直接编写在script标签中的JS代码，都在全局作用域</p>
</li>
<li><p>全局作用域在页面打开时创建，在页面关闭时销毁</p>
</li>
<li><p>在全局作用域中有一个全局对象window。它代表一个浏览器的窗口，由浏览器创建，我们可以直接使用。</p>
</li>
<li><p>全局作用域中的变量都是全局变量</p>
</li>
</ul>
<p><strong>在全局作用域中：</strong></p>
<p> 创建的变量都会作为window对象的属性保存</p>
<p> 创建的函数都会作为window的方法保存</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = &quot;hello&quot;;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>
<p>不写var的情况下</p>
<p><em>此种声明相当于window.a &#x3D; “hello”</em></p>
<p><strong>变量是否写var是有些区别的，如下变量的声明提前</strong></p>

        <h2 id="4-2-变量-x2F-函数的声明提前">
          <a href="#4-2-变量-x2F-函数的声明提前" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-2-变量-x2F-函数的声明提前" class="headerlink" title="4.2.变量&#x2F;函数的声明提前"></a>4.2.变量&#x2F;函数的声明提前</h2>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">console.log(a);</span><br><span class="line"></span><br><span class="line">var a = &quot;hello&quot;;</span><br></pre></td></tr></table></div></figure>

<p><strong>此时会打印undefined，而不会报错。原因是变量的声明提前</strong></p>
<p><strong>使用var关键字声明的变量，会在所有代码执行之前被声明。上述代码相当于</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line"></span><br><span class="line">a = <span class="string">&quot;hello&quot;</span>;</span><br></pre></td></tr></table></div></figure>

<p><strong>但是如果声明变量时不使用var关键字，则变量不会被声明提前</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">console.log(a);</span><br><span class="line"></span><br><span class="line">a = &quot;hello&quot;;</span><br></pre></td></tr></table></div></figure>
<p><strong>则会正常报错，提示”a is not defined”</strong></p>
<p><strong><font color="red">同理，函数的声明提前。使用函数声明形式创建的函数，它会在所有代码执行之前就被创建.所以我们可以在函数声明之前调用函数。</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fun1</span>();</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun1</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p><em>正常调用打印</em></p>
<p><strong><font color="red">使用函数表达式创建的函数，不会被声明提前，所以不能在声明前调用</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fun2</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fun2 = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></div></figure>
<p><em>此时报错，提示无此函数。不过由于变量声明提前，可以在该函数之前打印出fun2为undefined</em></p>
<p><em>个人理解为提前声明了变量fun2，但由于还没有赋值函数，所以只是一个变量，并不是一个函数对象，所以fun2()会直接报错，而console.log(fun2)可以打印出undefined</em></p>

        <h2 id="4-3-函数作用域">
          <a href="#4-3-函数作用域" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-3-函数作用域" class="headerlink" title="4.3. 函数作用域"></a>4.3. 函数作用域</h2>
      <p><strong>o 调用函数时创建函数作用域，函数执行完毕以后，函数作用域销毁</strong></p>
<p><strong>o 每调用一次函数就会创建一个新得函数作用域，他们之间是互相独立的。</strong></p>
<p><strong>o 函数作用域中可以访问到全局作用域的变量，在全局作用域中无法访问到函数作用域的变量</strong></p>
<p><strong>o 函数作用域中操作变量时，会现在自身作用域找，如果没有则向上一级作用域找，直到找到。如果一直到全局作用域都没找到，就报错</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">	<span class="keyword">var</span> a = <span class="number">35</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p><em>输出undefined</em></p>

        <h3 id="4-3-1-在函数作用域中也有声明提前的特性，使用var关键字声明的变量，会在函数中所有代码执行之前被声明">
          <a href="#4-3-1-在函数作用域中也有声明提前的特性，使用var关键字声明的变量，会在函数中所有代码执行之前被声明" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-3-1-在函数作用域中也有声明提前的特性，使用var关键字声明的变量，会在函数中所有代码执行之前被声明" class="headerlink" title="4.3.1 在函数作用域中也有声明提前的特性，使用var关键字声明的变量，会在函数中所有代码执行之前被声明"></a><font color="red">4.3.1 在函数作用域中也有声明提前的特性，使用var关键字声明的变量，会在函数中所有代码执行之前被声明</font></h3>
      <p>相当于:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> a;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">	a = <span class="number">35</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>同理，函数作用域中，也存在函数声明提前，函数声明也会在函数中所有代码之前执行。</p>
</blockquote>

        <h3 id="4-3-2-在函数中，不使用var声明的变量会成为全局变量，例">
          <a href="#4-3-2-在函数中，不使用var声明的变量会成为全局变量，例" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-3-2-在函数中，不使用var声明的变量会成为全局变量，例" class="headerlink" title="4.3.2 在函数中，不使用var声明的变量会成为全局变量，例:"></a><font color="green">4.3.2 在函数中，不使用var声明的变量会成为全局变量，例:</font></h3>
      <p><strong>o</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">	a = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fun</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>
<p><em>此时a输出100</em></p>
<p><strong>o</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">	d = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fun</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(d);</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><em>此时d输出100</em></p>
<blockquote>
<p>尽管全局作用域中没有声明全局变量d，但是在该函数执行的后面，这个d就会成为全局变量可以被使用。此处函数作用域中的<code>d</code>相当于<code>window.d</code></p>
</blockquote>

        <h3 id="4-3-3-定义形参就相当于在函数作用域中声明了变量">
          <a href="#4-3-3-定义形参就相当于在函数作用域中声明了变量" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-3-3-定义形参就相当于在函数作用域中声明了变量" class="headerlink" title="4.3.3 定义形参就相当于在函数作用域中声明了变量"></a><font color="orange">4.3.3 定义形参就相当于在函数作用域中声明了变量</font></h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> e = <span class="number">50</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params">e</span>)&#123;</span><br><span class="line">	<span class="title function_">alert</span>(e);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fun</span>();</span><br></pre></td></tr></table></div></figure>

<p><strong>相当于输出</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">var</span> e;</span><br><span class="line">	<span class="title function_">alert</span>(e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>
<p><em>此时输出undefined</em></p>

        <h2 id="4-4-this">
          <a href="#4-4-this" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-4-this" class="headerlink" title="4.4.this"></a>4.4.this</h2>
      <p><strong>解析器每次调用函数都会向函数内部传递一个隐含的参数。this。this指向的是一个对象</strong></p>
<p><strong>这个对象我们成为函数执行的上下文对象</strong></p>
<p><strong>根据函数调用的方式不同，this会指向不同的对象。</strong></p>
<ul>
<li><p>1.以函数的形式调用时，this永远都是window。</p>
</li>
<li><p>2.以方法的形式调用时，this就是调用的方法的那个对象</p>
</li>
</ul>

        <h1 id="5-构造函数">
          <a href="#5-构造函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-构造函数" class="headerlink" title="5.构造函数"></a>5.构造函数</h1>
      <p><strong>使用工厂方法创建的对象，使用的构造函数都是Object。所以创建的对象类型都是Object类型，导致我们无法区分出多种不同类型的对象</strong></p>

        <h2 id="5-1创建构造函数">
          <a href="#5-1创建构造函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-1创建构造函数" class="headerlink" title="5.1创建构造函数"></a>5.1创建构造函数</h2>
      <p><strong>构造函数就是一个普通的函数，创建方式和普通函数大致一样。不同的是构造函数习惯上首字母大写</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建构造函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>)&#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> per = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">构造函数和普通函数的区别就是调用方式的不同：</font></strong></p>
<blockquote>
<p>普通函数就是直接调用，而构造函数需要使用new关键字调用</p>
</blockquote>
<p><strong><font color="green">构造函数的执行流程</font></strong></p>
<ol>
<li><p>立即创建一个新的对象</p>
</li>
<li><p>将新建的对象设置为函数中的this，所以在构造函数中可以使用this来引用新建的对象</p>
</li>
<li><p>逐行执行函数中的代码</p>
</li>
<li><p>将新的对象作为返回值返回</p>
</li>
</ol>
<p>例：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name,age,gender</span>)&#123;</span><br><span class="line">	<span class="comment">//此处this代表新建的对象，如per</span></span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">gender</span> = gender;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">sayName</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> per = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张安&quot;</span>,<span class="number">19</span>,<span class="string">&quot;男&quot;</span>);</span><br></pre></td></tr></table></div></figure>

<p><strong>无重载功能，构造函数名称相同时，当创建一个新得对象时优先调用<code>var Person = new function()&#123;&#125;;</code>类的构造函数，同一个优先级内后面的覆盖前面的</strong></p>
<blockquote>
<p>使用同一个构造函数创建的对象，我们称为一类对象，也将一个构造函数称为一个类，将通过一个构造函数创建的对象，称为是该类的实例</p>
</blockquote>
<p><strong><font color="red">所有对象均继承于Object</font></strong></p>
<p><strong>如果函数直接像上述那样直接在类里创建，那么每用这个类创建一个对象，此函数就会被创建一次，有些情况下会耗费内存。可以使所有创建的对象共用一个方法，如：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name,age</span>)&#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">sayName</span> = funEx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">funEx</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> per = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张三&quot;</span>,<span class="number">16</span>);</span><br><span class="line">per.<span class="title function_">sayName</span>();</span><br><span class="line"><span class="comment">//此时不难看出，funEx()函数里面的this指的是此处per</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

        <h2 id="5-2-原型对象prototype">
          <a href="#5-2-原型对象prototype" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-2-原型对象prototype" class="headerlink" title="5.2 原型对象prototype"></a>5.2 原型对象prototype</h2>
      <blockquote>
<p>在上述构造函数中，为了使构造函数中的方法不会在每增加一个实例就创建出一个方法，用了全局作用域创建函数对象，构造函数中直接赋值的方式解决了计算机内部占用问题。但是此种方法也有弊端，比如因为全局函数的原因，安全性较差，污染了全局作用域的命名空间</p>
</blockquote>
<p>因此，原型对象prototype可以改善此种情况。</p>
<p><strong><font color="red">函数对象的属性如：<code>Person.count=999999</code>，用其创建的实例是不可以访问到的</font></strong></p>
<p><strong>在我们所创建的每一个函数中，解析器都会向函数中添加一个属性prototype，这个属性对应着一个对象，这个对象就是原型对象</strong></p>
<p><strong>当函数作为普通函数时，此原型对象基本没有作用，而当函数以构造函数得到形式调用时，它所创建的对象中都会有一个隐含的属性，指向该构造函数的原型对象，我们可以通过<code>__proto__</code>来访问该属性</strong></p>
<p><img src="/2021/09/22/01-JS/protoIMG.png"></p>
<ul>
<li><p>每声明的一个函数，内部都会有一个prototype属性，此属性值指向了一个对象</p>
</li>
<li><p>每通过该构造函数创建的一个实例也都会有这个隐藏的属性<code>__proto__</code>,这个隐藏的属性也是和该构造函数指向了同一个对象</p>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">MyClass</span>(<span class="params"></span>)&#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mc = <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mc2 = <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mc3 = <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line"></span><br><span class="line"><span class="title class_">MyClass</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">names</span> = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mc.<span class="property">names</span>);</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="green">原型对象相当于是一个公共的区域，所有同一个类的实例都可以访问到这个原型对象，这样我们就可以将对象中共有的内容，统一设置到原型对象中。</font></strong></p>
<p><strong><font color="red">当我们访问对象的一个属性或者方法时，它会现在自身中寻找，如果有则直接使用，如果没有则会去原型对象中找，如果找到则直接使用。</font></strong></p>
<p><strong>prototype与__proto__</strong></p>
<p>每个对象中都会有<code>__proto__</code>属性，此属性指向的是构造该对象的构造函数的原型对象;每个函数中都会有原型对象prototype(只有函数中)，而函数本身也是对象，所以也会有<code>__proto__</code>属性，此属性指向的是函数的构造函数Function.prototype。同理，原型对象也是对象，它也有<code>__proto__</code>属性，指向的是Object.prototype。而最终Object函數对象的prototype的__proto__属性是null</p>
<p><em>摘抄</em></p>
<blockquote>
<p>因为Function牛比啊，他不仅生了对象，他还生了函数，还生了自己。Object就是他生的函数。所以Object.<strong>proto</strong> &#x3D;&#x3D;&#x3D; Function.prototype  Function.<strong>proto</strong>&#x3D;&#x3D;&#x3D;Function.prototype到这里就成环形结构了，就是所谓的原型链。Object.prototype 就是没人要的野孩子了，所以为null</p>
</blockquote>
<p>作者：知乎用户<br>链接：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.zhihu.com/question/272780022/answer/367836902">https://www.zhihu.com/question/272780022/answer/367836902</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span><br>来源：知乎<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<p><strong>所有函数的<code>__proto__</code>指向的是Function.prototype.包括Function自己</strong></p>
<p><strong><font color="red" size="6">注：实例对象的__proto__指向的就是其构造函数的prototype对象(它们两个都指向的堆内存的一个对象)，那么修改对象中__proto__的属性值，构造函数中prototype的这个属性值也会更改。</font></strong></p>

        <h2 id="5-3-hasOwnProperty-来检查对象中是否含有某个属性">
          <a href="#5-3-hasOwnProperty-来检查对象中是否含有某个属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-3-hasOwnProperty-来检查对象中是否含有某个属性" class="headerlink" title="5.3 hasOwnProperty()来检查对象中是否含有某个属性"></a>5.3 hasOwnProperty()来检查对象中是否含有某个属性</h2>
      <p><strong>单纯使用in检查对象时，如果对象中没有但是原型中有此属性，那么同样返回true</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">name</span> = <span class="string">&quot;张安&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> per = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;name&quot;</span> <span class="keyword">in</span> per);</span><br><span class="line"><span class="comment">//返回true</span></span><br></pre></td></tr></table></div></figure>

<p>这时可以使用hasOwnProperty方法来检查对象中是否含有某个属性(包括方法)。使用该方法只有当对象自身中含有属性时，才返回true</p>

        <h1 id="5-垃圾回收">
          <a href="#5-垃圾回收" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-垃圾回收" class="headerlink" title="5.垃圾回收"></a>5.垃圾回收</h1>
      
        <h2 id="GC">
          <a href="#GC" class="heading-link"><i class="fas fa-link"></i></a><a href="#GC" class="headerlink" title="GC"></a>GC</h2>
      <p><strong>o &amp;nbsp;&amp;nbsp;当一个对象没有任何变量或属性对它进行引用，此时我们将永远无法操作该对象，此时这个对象就是个垃圾，这种对象过多会占用大量的内存空间，导致程序变慢。</strong></p>
<p><strong>o &amp;nbsp;&amp;nbsp;在JS中有自动的垃圾回收机制，会自动将这些对象从内存中销毁，我们不需要也不能进行垃圾回收操作。</strong></p>
<p><strong>o &amp;nbsp;&amp;nbsp;我们需要做的就是将不再使用的对象设置为null即可</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj= <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">obj = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">//不再使用该对象，存在垃圾对象，设置为null可触发垃圾回收机制</span></span><br></pre></td></tr></table></div></figure>



        <h1 id="5-数组">
          <a href="#5-数组" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-数组" class="headerlink" title="5.数组"></a>5.数组</h1>
      
        <h2 id="5-1创建数组对象">
          <a href="#5-1创建数组对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-1创建数组对象" class="headerlink" title="5.1创建数组对象"></a>5.1创建数组对象</h2>
      
        <h3 id="5-1-1-使用创建对象的方法创建数组">
          <a href="#5-1-1-使用创建对象的方法创建数组" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-1-1-使用创建对象的方法创建数组" class="headerlink" title="5.1.1 使用创建对象的方法创建数组"></a>5.1.1 使用创建对象的方法创建数组</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>();</span><br></pre></td></tr></table></div></figure>

<p><strong>▲ length属性</strong></p>
<p>可以获取及设置数组的长度</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>();</span><br><span class="line">arr[<span class="number">10</span>] = <span class="number">1</span>;</span><br><span class="line"><span class="comment">//此时arr.length的值为11</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>



        <h3 id="5-1-2使用字面量来创建数组">
          <a href="#5-1-2使用字面量来创建数组" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-1-2使用字面量来创建数组" class="headerlink" title="5.1.2使用字面量来创建数组"></a>5.1.2使用字面量来创建数组</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [];</span><br></pre></td></tr></table></div></figure>

<p>可以在创建时就指定数组中的元素</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">10</span>];</span><br></pre></td></tr></table></div></figure>


        <h3 id="5-1-2使用构造函数的方式">
          <a href="#5-1-2使用构造函数的方式" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-1-2使用构造函数的方式" class="headerlink" title="5.1.2使用构造函数的方式"></a>5.1.2使用构造函数的方式</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>);</span><br></pre></td></tr></table></div></figure>

<p><strong>当只有一个参数</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">10</span>);</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>
<p>代表数组长度为10，而不是添加元素了。</p>
<p><strong><font color="red">数组中可以存放任意数据类型，也可以是对象</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [&#123; <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&quot;李四&quot;</span> &#125;];</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">也可以是函数</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;,<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;];</span><br></pre></td></tr></table></div></figure>


        <h2 id="5-2-forEach">
          <a href="#5-2-forEach" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-2-forEach" class="headerlink" title="5.2 forEach"></a>5.2 forEach</h2>
      <p>o  只支持IE8以上的浏览器</p>
<p>o  此方法的参数是一个函数</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><em>输出4次hello</em></p>
<p><strong>此处匿名函数由我们创建，但是不由我们调用，称为回调函数</strong></p>
<p><strong>数组中有几个元素就会执行几次，每次执行浏览器都会将遍历到的元素以以实参的形式传递进来，我们可以定义形参来访问这个元素</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">item</span>)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>浏览器会传递三个参数</strong></p>
<p>第一个：当前遍历到的元素</p>
<p>第二个：当前正在遍历的元素的索引</p>
<p>第三个：正在遍历的数组对象</p>

        <h3 id="5-2-1-splice方法">
          <a href="#5-2-1-splice方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-2-1-splice方法" class="headerlink" title="5.2.1 splice方法"></a>5.2.1 splice方法</h3>
      <p><strong>o 会影响到原数组，会将指定的元素从原数组中删除，并将被删除的元素装到新得数组中返回</strong></p>
<p><strong>o 参数：</strong></p>
<ul>
<li><p>1.表示开始删除的位置的索引</p>
</li>
<li><p>2.表示删除的数量</p>
</li>
<li><p>3及其后面的参数：可以传递一些新得元素，将会自动插入到开始位置索引前边</p>
</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">arr.<span class="title function_">splice</span>(<span class="number">2</span>,<span class="number">0</span>,<span class="string">&quot;9&quot;</span>);</span><br><span class="line"><span class="comment">//表示从索引二的位置删除，删除0个，在索引2前边的位置加上元素9</span></span><br></pre></td></tr></table></div></figure>


        <h3 id="5-2-3-slice方法">
          <a href="#5-2-3-slice方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-2-3-slice方法" class="headerlink" title="5.2.3 slice方法"></a>5.2.3 slice方法</h3>
      <p><strong>o 可以用来从数组中提取元素</strong></p>
<p><strong>o 该方法不会改变原数组，而是将截取到的元素封装到一个新数组中返回</strong></p>
<p><strong>o 参数：</strong></p>
<ul>
<li><ol>
<li>截取开始位置的索引，包含开始索引</li>
</ol>
</li>
<li><ol start="2">
<li>截取接数位置的索引，不包含接数索引</li>
</ol>
</li>
</ul>
<p>第二个参数如果省略不写，那么直接从开始位置截取后面所有元素。</p>
<p>索引可以传递一个负值，如果传递一个负值，则索引0位置开始从后往前计算。</p>

        <h3 id="5-2-4-sort方法">
          <a href="#5-2-4-sort方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-2-4-sort方法" class="headerlink" title="5.2.4 sort方法"></a>5.2.4 sort方法</h3>
      <p><strong>即使对于纯数字的数组，使用sort排序时，也会按照Unicode编码来排序，所以对于数字数组的排序，可能会得到错误的结果。我们可以自己定义排序的规则</strong></p>
<p><strong>可以在sort()添加一个回调函数，来制定排序规则。</strong></p>
<ul>
<li>回调函数有两个参数，浏览器会依次使用数组中的元素作为实参调用回调函数，使用哪个元素不确定，但是第一个参数在数组中的位置是在第二个参数的前边。</li>
</ul>
<p><strong>浏览器会根据回调函数的返回值来决定元素的顺序</strong></p>
<p>o 如果返回一个大于0的值，参数a排在参数b后面</p>
<p>o 如果返回一个小于0的值，参数a排在参数b前面</p>
<p>o 返回一个0，则认为两个元素相等，位置不变</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">7</span>];</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">	<span class="keyword">if</span>(a&gt;b)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(a&lt;b)&#123;</span><br><span class="line">		<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//这种写法三个返回值都要写</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>或者</strong></p>
<p>升序</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> a-b;</span><br><span class="line">	</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></div></figure>

<p>降序</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> b-a;</span><br><span class="line">	</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></div></figure>


        <h3 id="5-2-5-call和apply">
          <a href="#5-2-5-call和apply" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-2-5-call和apply" class="headerlink" title="5.2.5 call和apply"></a>5.2.5 call和apply</h3>
      <p><strong>o call()和apply()都是函数对象的方法，需要通过函数对象来调用。当对函数调用call()和apply()都会调用函数执行</strong></p>
<p><strong>o 在调用call和apply方法可以将一个对象指定为第一个参数，此时这个对象将会成为函数执行时的<font color="red">this</font>,无视其他对象调用的方法，参数是谁，this就是谁</strong></p>
<p><strong><font color="green">o call方法可以将实参在第一个对象参数之后依次传递</font></strong></p>
<p><strong><font color="green">o apply方法则需要将实参封装到数组里面统一传递</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">testfun</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;a:&quot;</span> + a);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;b:&quot;</span> + b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">testfun.<span class="title function_">call</span>(obj, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">testfun.<span class="title function_">apply</span>(obj, [<span class="number">1</span>, <span class="number">2</span>]);</span><br></pre></td></tr></table></div></figure>


<p><strong>总结：this</strong></p>
<ul>
<li><p>以函数形式调用时，this永远都是window</p>
</li>
<li><p>以方法的形式调用时，this是调用方法的对象</p>
</li>
<li><p>以构造函数的形式调用时，this是新创建的哪个对象</p>
</li>
<li><p>使用call和apply时，this是指定的哪个对象(第一个参数中指定)</p>
</li>
</ul>

        <h3 id="5-2-6-arguments">
          <a href="#5-2-6-arguments" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-2-6-arguments" class="headerlink" title="5.2.6 arguments"></a>5.2.6 arguments</h3>
      <p><strong>同样是函数中隐藏的参数</strong></p>
<p>是一个类数组对象，可以通过索引来操作数据，也可以获取实参的长度。在调用函数时，我们所传递的参数（实参），都会在arguments中保存。arguments.length则是用来获取参数的长度，即使没有定义形参，也可以通过这个参数获取到实参。</p>
<p>如：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">arguments</span>[<span class="number">0</span>];<span class="comment">//表示传递过来的第一个实参</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">arguments</span>[<span class="number">1</span>];<span class="comment">//表示传递过来的第二个实参</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//没有对应索引的实参，返回undefined</span></span><br></pre></td></tr></table></div></figure>

<p><strong>arguments还有一个属性callee，这个属性对应一个函数对象，就是当前正在指向的函数的对象</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function fun()&#123;</span><br><span class="line">	console.info(arguments.callee);</span><br><span class="line"></span><br><span class="line">	//arguments.callee即使这个函数对象fun</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>5.2.7 Date</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">time = Date.now();</span><br><span class="line">//获取当前时间戳(ms)</span><br></pre></td></tr></table></div></figure>


        <h2 id="5-3-包装类">
          <a href="#5-3-包装类" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-3-包装类" class="headerlink" title="5.3 包装类"></a>5.3 包装类</h2>
      <p>在js中，提供了三种包装类，通过这三个包装类可以将基本数据类型的数据转换为对象</p>
<p><strong>o String()  将基本数据类型字符串转换为String对象</strong></p>
<p><strong>o Number()  可以将基本数据类型的数字转换为Number对象</strong></p>
<p><strong>o Boolean()  可以将基本数据类型的布尔值转换为Boolean对象</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="keyword">new</span> <span class="title class_">Number</span>(<span class="number">8</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bool = <span class="keyword">new</span> <span class="title class_">Boolean</span>(<span class="literal">true</span>);</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>实际开发中基本不会使用这些基本数据类型对象，比如在比较中可能会出现不可预期的结果</p>
</blockquote>
<p><strong>注意：方法和属性只能添加给对象，不能添加给基本数据类型，但是平常我们还是可以用基本数据类型调用属性和方法：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line">s = s.<span class="title function_">toString</span>();</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="green">这是因为当我们对一些基本数据类型的值去调用属性和方法时，浏览器会临时使用包装类将其转换为对象，然后再调用对象的属性和方法，调用完以后再将其转换为基本数据类型</font></strong></p>
<p><em>可以理解为在给基本数据类型调用或添加方法的时候将其转换为对象，调用完之后将其对象销毁，变为基本数据类型</em></p>

        <h2 id="5-4-正则表达式">
          <a href="#5-4-正则表达式" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-4-正则表达式" class="headerlink" title="5.4 正则表达式"></a>5.4 正则表达式</h2>
      
        <h3 id="5-4-1创建">
          <a href="#5-4-1创建" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-4-1创建" class="headerlink" title="5.4.1创建"></a>5.4.1创建</h3>
      <p><strong>创建正则表达式的对象</strong></p>
<p>匹配模式：</p>
<ol>
<li><p>i(忽略大小写)</p>
</li>
<li><p>g(全局匹配模式)</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bianliang = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;正则表达式&quot;</span>,<span class="string">&quot;匹配模式 &quot;</span>);</span><br></pre></td></tr></table></div></figure>

<p><strong>正则表达式的方法test</strong></p>
<p>test();使用这个方法用来检查一个字符串是否符合正则表达式的规则，如果符合返回true</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bianliang.<span class="title function_">test</span>(<span class="string">&quot;aaasdsdsd&quot;</span>);</span><br><span class="line"><span class="comment">//是否含有a</span></span><br></pre></td></tr></table></div></figure>


        <h3 id="5-4-2-使用字面量创建正则表达式">
          <a href="#5-4-2-使用字面量创建正则表达式" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-4-2-使用字面量创建正则表达式" class="headerlink" title="5.4.2 使用字面量创建正则表达式"></a>5.4.2 使用字面量创建正则表达式</h3>
      <p>var 变量 &#x3D; &#x2F;正则表达式&#x2F;匹配模式;</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;i&quot;</span>);</span><br><span class="line"></span><br><span class="line">》 》</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/a/i</span>;</span><br></pre></td></tr></table></div></figure>

<p>使用字面量简便，使用构造函数创建更加灵活</p>
<p><strong>◎ <code>|</code>或的意思</strong></p>
<p><strong>◎ <code>[]</code>同是或的意思</strong></p>
<p><strong>◎ <code>[a-z]</code>任意小写字母</strong></p>
<p><strong>◎ <code>[A-Z]</code>任意大写字母</strong></p>
<p><strong>◎ <code>[A-z]</code>任意字母</strong></p>
<p><strong>◎ <code>[^ ]</code>只要存在^符号后以外的内容就返回true</strong></p>
<p><strong>◎ <code>[0-9]</code>任意数字</strong></p>

        <h3 id="5-4-3-split">
          <a href="#5-4-3-split" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-4-3-split" class="headerlink" title="5.4.3 split"></a>5.4.3 split</h3>
      <p>可以用正则表达式当做参数拆分</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;12s541add23154sad211sad24255s&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr = str.<span class="title function_">split</span>(<span class="regexp">/[A-z]/</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">info</span>(newStr);</span><br></pre></td></tr></table></div></figure>

<p>[<br>  ‘12’, ‘541’,   ‘’,<br>  ‘’,   ‘23154’, ‘’,<br>  ‘’,   ‘211’,   ‘’,<br>  ‘’,   ‘24255’, ‘’<br>]</p>

        <h3 id="5-4-4-search">
          <a href="#5-4-4-search" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-4-4-search" class="headerlink" title="5.4.4 search"></a>5.4.4 search</h3>
      <p>可以搜索字符串中是否含有指定内容，如果有，返回第一次出现的索引，无返回-1.可以接受一个正则表达式作为参数，然后根据正则表达式检索</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;hello abc hello aec afc&quot;</span>;</span><br><span class="line"></span><br><span class="line">result = str.<span class="title function_">search</span>(<span class="regexp">/a[bef]c/</span>);</span><br></pre></td></tr></table></div></figure>


        <h3 id="5-4-5-match">
          <a href="#5-4-5-match" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-4-5-match" class="headerlink" title="5.4.5 match"></a>5.4.5 match</h3>
      <p>可以根据正则表达式，从一个字符串中将符合条件的内容提取出来，默认情况下match知会找到第一个符合要求的内容，找到以后就会停止检索，我们可以设置正则表达式为全局匹配模式，这样就会去匹配所有的内容.可以设置多个匹配模式</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;addf125412sdda223&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr = str.<span class="title function_">match</span>(<span class="regexp">/[^a12]/ig</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">info</span>(newStr);</span><br></pre></td></tr></table></div></figure>
<p>[<br>  ‘d’, ‘d’, ‘f’,<br>  ‘5’, ‘4’, ‘s’,<br>  ‘d’, ‘d’, ‘3’<br>]</p>

        <h3 id="5-4-6-量词">
          <a href="#5-4-6-量词" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-4-6-量词" class="headerlink" title="5.4.6 量词"></a>5.4.6 量词</h3>
      <p><strong>- 通过量词可以设置一个内容出现的次数</strong></p>
<p><strong>- 量词只对它前边的一个内容起作用，可以用()代表一组，所出现的次数</strong></p>
<p><strong>※ <code>&#123;n&#125;</code>  表示出现几次</strong></p>
<p><strong>※ <code>&#123;m,n&#125;</code>  表示出现m次到n次都可以</strong></p>
<p><strong>※ <code>&#123;m,n&#125;</code>  m次以上</strong></p>
<p><strong>※ <code>+</code>  至少要出现一次<code>reg = /da+c/;</code>，相当于<code>&#123;1,&#125;</code></strong></p>
<p><strong>※ <code>*</code>  0个或多个，相当于<code>&#123;0,&#125;</code></strong></p>
<p><strong>※ <code>?</code>  表示0个或一个，相当于<code>&#123;0,1&#125;</code></strong></p>
<p><strong>※ <code>^</code>  表示开头的内容<code>/^a/</code>：表示开头需要是a。区分与上面的<code>/[^a]/</code>:表示只要存在a以外的内容就返回true</strong></p>
<p><strong>※ <code>&amp;</code>  表示结尾的内容<code>/a$/</code>：表示结尾需要是a</strong></p>
<p><strong>※ <code>^a$</code>  表示必须匹配^和$中的内容。此处内容只能是a</strong></p>
<p><strong>※ <code>^a|a$</code>  表示以a开头或者以a结尾</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/(ab)&#123;3&#125;/</span>;</span><br><span class="line"><span class="comment">//ab需要连续出现三次</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="5-4-7-转义">
          <a href="#5-4-7-转义" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-4-7-转义" class="headerlink" title="5.4.7 转义"></a>5.4.7 转义</h3>
      <p>**当要检查一个字符串中是否含有<code>.</code>   而<code>.</code>在正则表达式中表示任意字符，此时可以转义将其转换成普通的字符串<code>.</code> **</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\./</span>;</span><br><span class="line"><span class="keyword">var</span> str  = <span class="string">&quot;aaa&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">info</span>(reg.<span class="title function_">test</span>(str));</span><br><span class="line"><span class="comment">//false</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>
<p><strong>检查字符串中是否有&#x2F;</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\\/</span>;</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;aa\\&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">info</span>(reg.<span class="title function_">test</span>(str));</span><br></pre></td></tr></table></div></figure>

<p><strong><font color="red">注：此处字符串中<code>\</code>也是特殊字符，所以也要用<code>\</code>转义一次</font></strong></p>
<p><strong><font color="blue">根据上述，当使用构造函数时，由于参数是字符串，而<code>\</code>是字符串中的转义字符：</font></strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;\.&quot;</span>);</span><br></pre></td></tr></table></div></figure>

<p>此处参数传递时就变为了<code>.</code>，即<code>/./</code>；</p>
<p>所以字符串应该多一个<code>\</code>。</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;\\.&quot;</span>);</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>即<code>\</code>转义一次字符串的<code>\</code>，第二个<code>\</code>再转义一次正则里的<code>.</code></p>
</blockquote>
<p><strong>元字符 描述</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">. 查找单个字符，除了换行和行结束符。 </span><br><span class="line"></span><br><span class="line">\w 查找单词字符。 </span><br><span class="line"></span><br><span class="line">\W 查找非单词字符。 </span><br><span class="line"></span><br><span class="line">\d 查找数字。 </span><br><span class="line"></span><br><span class="line">\D 查找非数字字符。 </span><br><span class="line"></span><br><span class="line">\s 查找空白字符。 </span><br><span class="line"></span><br><span class="line">\S 查找非空白字符。 </span><br><span class="line"></span><br><span class="line">\b 匹配单词边界。 </span><br><span class="line"></span><br><span class="line">\B 匹配非单词边界。 </span><br><span class="line"></span><br><span class="line">\0 查找 NUL 字符。 </span><br><span class="line"></span><br><span class="line">\n 查找换行符。 </span><br><span class="line"></span><br><span class="line">\f 查找换页符。 </span><br><span class="line"></span><br><span class="line">\r 查找回车符。 </span><br><span class="line"></span><br><span class="line">\t 查找制表符。 </span><br><span class="line"></span><br><span class="line">\v 查找垂直制表符。 </span><br><span class="line"></span><br><span class="line">\xxx 查找以八进制数 xxx 规定的字符。 </span><br><span class="line"></span><br><span class="line">\xdd 查找以十六进制数 dd 规定的字符。 </span><br><span class="line"></span><br><span class="line">\uxxxx 查找以十六进制数 xxxx 规定的 Unicode 字符。 </span><br></pre></td></tr></table></div></figure></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/09/03/04-css-%E5%83%8F%E7%B4%A0/">04_css-像素</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-09-03</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-05-21</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="像素">
          <a href="#像素" class="heading-link"><i class="fas fa-link"></i></a><a href="#像素" class="headerlink" title="像素"></a>像素</h1>
      <p><strong>在前端开发像素分为两种：CSS像素和物理像素</strong> </p>
<p>物理像素：比如屏幕分辨率，1920*1080说的就是物理像素</p>
<p>CSS像素：比如width属性的值为100px。即CSS像素</p>

        <h1 id="视口">
          <a href="#视口" class="heading-link"><i class="fas fa-link"></i></a><a href="#视口" class="headerlink" title="视口"></a>视口</h1>
      <ul>
<li><p>视口就是屏幕中用来显示网页的区域</p>
</li>
<li><p>可以通过查看视口大小，来观察CSS像素和物理像素的比值</p>
<pre><code>  F12--&gt;点击html--&gt;Computed--&gt;宽度 
</code></pre>
</li>
<li><p>默认情况下，PC端视口的宽度为1920px（css像素）。物理像素就是显示器的像素，不会变。</p>
</li>
<li><p>默认情况下，移动端默认的视口大小是980px(css像素)。所以直接在网页中编写移动端代码，这样在980的视口下，体验较差。</p>
</li>
</ul>
<p><strong><font color="red">像素比：视口大小&#x2F;设备本身的物理像素</font></strong></p>
<p><strong>可以通过改变视口的大小，来改变CSS像素和物理像素的比值</strong></p>
<p><strong>所以，在编写移动端代码时，可以通过调整视口大小，使移动端的像素比变得合理：<font color="red">方法：</font></strong></p>
<ol>
<li>通过meta标签设置视口大小</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//@name,代表视口；@width，代表视口的宽度 </span><br><span class="line">&lt;meta name = &quot;viewport&quot; content=&quot;width=100px&quot;&gt;</span><br></pre></td></tr></table></div></figure>
<blockquote>
<p>每一款移动设备都会有最佳像素比，一般我们只需要将像素比设置为该值即可得到一个最佳效果。网址<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://material.io/resources/devices]">https://material.io/resources/devices]</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>(<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://material.io/resources/devices%E4%B8%ADDensity%E5%88%97%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E6%AF%8F%E4%B8%AA%E8%AE%BE%E5%A4%87%E7%9A%84%E6%9C%80%E4%BD%B3%E5%83%8F%E7%B4%A0%E6%AF%94%E3%80%82%E6%9C%80%E4%BD%B3%E5%83%8F%E7%B4%A0%E6%AF%94=%E8%A7%86%E5%8F%A3/%E8%AE%BE%E5%A4%87%E7%89%A9%E7%90%86%E5%83%8F%E7%B4%A0">https://material.io/resources/devices中Density列可以看到每个设备的最佳像素比。最佳像素比=视口/设备物理像素</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</blockquote>
<ol start="2">
<li>将网页的视口设置为完美视口。以后写移动端的页面先写写此句</li>
</ol>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; </span><br></pre></td></tr></table></div></figure>

<p>device-width  initial-scale&#x3D;1.0就代表完美视口</p>

        <h1 id="分辨率">
          <a href="#分辨率" class="heading-link"><i class="fas fa-link"></i></a><a href="#分辨率" class="headerlink" title="分辨率"></a>分辨率</h1>
      <p><strong>查看一部分手机的分辨率</strong></p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://material.io/resources/devices" title="分辨率查看">https://material.io/resources/devices</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> </p>
<p><strong>默认情况下，移动端的网页都会将视口设置为980像素（css像素）。以确保PC端网页可以在移动端正常访问。如果网页的宽度超过了980，移动端浏览器会自动对网页缩放以完整显示网页</strong></p>

        <h1 id="vw">
          <a href="#vw" class="heading-link"><i class="fas fa-link"></i></a><a href="#vw" class="headerlink" title="vw"></a>vw</h1>
      <p>由于不同设备视口和像素比不同，移动端就不能使用PX单位了</p>
<p><strong>VW(viewport width)：表示视口的宽度</strong></p>
<ul>
<li><p>100vw &#x3D; 一个视口的宽度</p>
</li>
<li><p>1vw &#x3D; 1&#x2F;100个视口的宽度</p>
</li>
</ul>
<blockquote>
<p>vw单位永远相当于视口宽度进行计算</p>
</blockquote>
<p>常见的移动端的设计图宽度：750PX  1125PX</p>
<p>如果设计图总宽度是750px，那么在图中各个元素就可以通过其和总宽度的比值算出vw的值。</p>

        <h3 id="vw适配">
          <a href="#vw适配" class="heading-link"><i class="fas fa-link"></i></a><a href="#vw适配" class="headerlink" title="vw适配"></a>vw适配</h3>
      <p>1rem &#x3D; 1个html字体的大小</p>
<p>1em &#x3D; 1个字体大小</p>
<p><strong><font color="red">网页中字体大小最小是12px，不能设置一个比12px还小的字体（除了0px）。如果设置了比12px还小的字体，自动设置为12px</font></strong></p>
<p>可以通过换算设置html的fontsize大小，再通过rem换算设置对应元素的大小</p>

        <h1 id="媒体查询">
          <a href="#媒体查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#媒体查询" class="headerlink" title="媒体查询"></a>媒体查询</h1>
      <figure class="highlight css"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> all   //所有设备</span><br><span class="line">@media screen //有屏幕的设备</span><br><span class="line">@media print //打印机设备</span><br><span class="line">@media speech //屏幕阅读器</span><br></pre></td></tr></table></div></figure>


        <h3 id="媒体特性">
          <a href="#媒体特性" class="heading-link"><i class="fas fa-link"></i></a><a href="#媒体特性" class="headerlink" title="媒体特性"></a>媒体特性</h3>
      <p><code>width:</code>视口的宽度</p>
<p><code>height：</code>视口的高度</p>
<p><code>min-width:</code>视口的最小宽度</p>
<p><code>max-width:</code>视口的最大宽度</p>
<figure class="highlight css"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//当视口宽度大于<span class="number">500px</span>时样式生效</span><br><span class="line"><span class="keyword">@media</span>(min-width:500px)&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="attribute">background-color</span>:red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>样式切换的分界点，称为断点。也就是网页的样式会在这个点发生变化。</strong></p>
<p>常用的断点：</p>
<p>&lt;768超小屏幕</p>
<p>&gt;768小屏幕</p>
<p>&gt;992中型屏幕</p>
<p>&gt;1200大屏幕</p>
<figure class="highlight css"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>:<span class="number">500px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">700px</span>)&#123;</span><br><span class="line">	<span class="selector-tag">body</span>&#123;</span><br><span class="line">		<span class="attribute">background-color</span>:red;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">not</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>:<span class="number">500px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">700px</span>)&#123;</span><br><span class="line">	<span class="selector-tag">body</span>&#123;</span><br><span class="line">		<span class="attribute">background-color</span>:red;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/08/24/03-css-Flex/">03-css-Flex</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-08-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2022-06-11</span></span></div></header><div class="post-body"><div class="post-excerpt"><p><strong>Flex:弹性盒，伸缩盒。</strong></p>
<ul>
<li><p>是CSS中的又一种布局手段，主要是用来代替浮动来完成页面的布局。</p>
</li>
<li><p>可以时元素具有弹性，让元素可以跟随页面大小的改变而改变</p>
</li>
</ul>

        <h2 id="1-使用">
          <a href="#1-使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-使用" class="headerlink" title="1. 使用"></a>1. 使用</h2>
      
        <h3 id="1-1-弹性容器">
          <a href="#1-1-弹性容器" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-1-弹性容器" class="headerlink" title="1.1 弹性容器"></a>1.1 弹性容器</h3>
      <p><strong>要使用弹性盒，必须先将一个元素设置为弹性容器。</strong></p>
<p><strong>通过display来设置弹性容器</strong></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//块级弹性容器</span><br><span class="line">display:flex;</span><br><span class="line">//行内的弹性容器</span><br><span class="line">display:inline-flex;</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>设置弹性容器后，弹性容器内的元素默认横向排列</p>
</blockquote>
<p><strong>1.1.1 属性</strong></p>
<ul>
<li><font color="blue">flex-direction： 指定容器中元素的排列方式（只能给弹性容器使用）</font></li>
</ul>
<p>可选值：</p>
<p>row：默认值，弹性元素在容器中水平排列。(左向右)</p>
<p>row-reverse：弹性元素在容器中反向水平排列。（右向左）</p>
<p>column：弹性元素在容器中纵向排列。（上向下）</p>
<p>column-reverse：弹性元素在容器中反向纵向排列。（下向上）</p>
<p><strong><font color="red">主轴：弹性元素的排列方向成为主轴(左向右–右向左–上向下–下向上)</font></strong></p>
<p><strong><font color="red">侧轴：与主轴垂直方向的成为侧轴。（如果主轴垂直，侧轴水平；主轴水平，侧轴垂直）</font></strong></p>
<ul>
<li><font color="blue">flex-wrap： 设置弹性元素是否在弹性容器中自动换行</font></li>
</ul>
<p>可选值：</p>
<p>nowrap：默认值，元素不会自动换行</p>
<p>wrap：元素沿着辅轴方向自动换行</p>
<p>wrap-reverse:元素沿着辅轴反方向换行</p>
<blockquote>
<p>自动换行，默认stretch。假如换了一行，那么实际上父元素内容被分成了上下两部分。上下两部分每部分的高度取决于:如果两行的高度大于父元素的高度，那么每一部分高度&#x3D;当行最高的元素的高度从上玩下排，多出的部分溢出，如果两行的高度&lt;&#x3D;父元素的高度，那么每一部分高度&#x3D;当行最高的元素+(父元素的高度-两行元素最高的高度之和)&#x2F;2。参考下属性<strong>align-content</strong></p>
</blockquote>
<ul>
<li><p><font color="blue">flex-flow： direction和wrap的简写属性。</font></p>
</li>
<li><p><font color="blue">justify-content：如何分配主轴上的空白空间。（主轴上的元素如何排列。）</font></p>
</li>
</ul>
<p>可选值：</p>
<p>flex-start：元素沿着主轴的起边排列</p>
<p>flex-end：元素沿着主轴的终边排列。</p>
<p>center：元素居中排列</p>
<p>space-around：空白分配到每个元素两侧。</p>
<p>space-evenly：空白分配到每个元素单侧</p>
<p>space-between：空白均匀分布到元素中间。即第一个元素左侧和最后一个元素的右侧没有空白。</p>
<p>center：元素水平居中。</p>
<p><strong>align：一般用来设置辅轴</strong></p>
<ul>
<li><font color="blue">align-items：元素在辅轴上如何对齐（单行）</font></li>
</ul>
<p>stretch：默认值，将元素的长度设置为相同的值。同一行的元素高度和最高的哪个对齐。上面行和下面行平均分配到父元素高度。</p>
<p>flex-start：元素不会拉伸，沿着辅轴起边对齐。</p>
<p>flex-end：元素不会拉伸，沿着辅轴终边对齐。</p>
<p>center：居中对齐</p>
<p>base-line：基线对齐（沿着文字的基线对齐）</p>
<ul>
<li><font color="blue">align-content：辅轴空白空间的分布（多行）</font></li>
</ul>
<p>center：上下的空白相等，元素在中间</p>
<p>flex-start：元素靠上对齐，空白在下面</p>
<p>flex-end：元素靠下对齐，空白在上面</p>
<p>space-around：每个元素上下都有空白</p>
<p>space-between：空白在中间 </p>
<p>space-evenly：使每个元素之间和元素距离边距的距离都相等</p>

        <h3 id="1-2-弹性元素">
          <a href="#1-2-弹性元素" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-2-弹性元素" class="headerlink" title="1.2 弹性元素"></a>1.2 弹性元素</h3>
      <p><strong>弹性容器的直接子元素(不包括子元素的子元素)是弹性元素&#x2F;弹性项</strong></p>
<p><strong>一个元素可以同时是弹性容器和弹性元素</strong></p>
<p><strong>1.2.1 属性</strong></p>
<ul>
<li><font color="blue">flex-grow 指定元素伸展的系数</font></li>
</ul>
<blockquote>
<p>当父元素有<font size="7" color="red"><B>剩余的空间</B></font>时，子元素如何伸展。</p>
</blockquote>
<p>0 ：表示不伸展</p>
<blockquote>
<p>父元素的剩余空间会按照比例进行分配。</p>
</blockquote>
<figure class="highlight css"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.child-ele1</span>&#123;</span><br><span class="line">	<span class="attribute">flex-grow</span>:<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.child-ele2</span>&#123;</span><br><span class="line">	<span class="attribute">flex-grow</span>:<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.child-ele3</span>&#123;</span><br><span class="line">	<span class="attribute">flex-grow</span>:<span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><em>假如父元素剩余的空间为600px，那么子元素1占100px(600</em>1&#x2F;6)，子元素2占200px(600<em>2&#x2F;6)，子元素3占300px(600</em>3&#x2F;6)*</p>
<p><strong>如果父元素中只有一个子元素设置了系数(flex-grow:2;)且父元素还有剩余空间，那么该元素将占满剩下的空间（2&#x2F;2）。</strong></p>
<ul>
<li><font color="blue">flex-shrink 指定元素的收缩系数</font></li>
</ul>
<blockquote>
<p>当父元素的空间不足以容纳所有的子元素时，如何对子元素进行收缩</p>
</blockquote>
<p>1：默认值，等比收缩。(不写就是默认值)</p>
<ul>
<li><p><font color="blue">align-self,和align-items，用来覆盖align-items</font></p>
</li>
<li><p><font color="blue">flex-basis：元素在主轴上的基础长度。</font></p>
</li>
</ul>
<p>如果主轴是横向的，则该值指定的就是元素的宽度。如果主轴是纵向的，则改值指定的就是元素的高度。默认值为auto，表示参考元素自身的高度或者宽度。如果传递了一个具体的树脂。则以该值为准。</p>
<ul>
<li><font color="blue">flex：简写属性</font></li>
</ul>
<p>可以设置弹性元素所有的三个样式。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flex:增长 缩减  基础值;</span><br></pre></td></tr></table></div></figure>

<p>可选值：</p>
<p>initial(0 1 auto)   默认值</p>
<p>auto(1 1 auto)</p>
<p>none(0 0 auto)</p>
<ul>
<li><font color="blue">order:决定弹性元素的排列顺序</font></li>
</ul>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">li:nth(3)&#123;</span><br><span class="line">	order:1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></div></div></article></section><nav class="paginator"><div class="paginator-inner"><a class="extend prev" rel="prev" href="/"><i class="fas fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/"><i class="fas fa-angle-right"></i></a></div></nav></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><section class="sidebar-toc hide"></section><!-- ov = overview--><section class="sidebar-ov"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/stun-logo.svg" alt="avatar"></div><p class="sidebar-ov-author__text">hello world</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">46</div><div class="sidebar-ov-state-item__name">Archives</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">0</div><div class="sidebar-ov-state-item__name">Categories</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">68</div><div class="sidebar-ov-state-item__name">Tags</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2022</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>ashen</span></div><div><span>Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a></span><span> v6.1.0</span><span class="footer__devider">|</span><span>Theme - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.6.2</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.6.2"></script><script src="/js/stun-boot.js?v=2.6.2"></script><script src="/js/scroll.js?v=2.6.2"></script><script src="/js/header.js?v=2.6.2"></script><script src="/js/sidebar.js?v=2.6.2"></script></body></html>